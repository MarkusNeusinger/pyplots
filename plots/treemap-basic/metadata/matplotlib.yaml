library: matplotlib
specification_id: treemap-basic
created: '2025-12-24T09:49:49Z'
updated: '2025-12-24T09:52:33Z'
generated_by: claude-opus-4-5-20251101
workflow_run: 20483443394
issue: 0
python_version: 3.13.11
library_version: 3.10.8
preview_url: https://storage.googleapis.com/pyplots-images/plots/treemap-basic/matplotlib/plot.png
preview_thumb: https://storage.googleapis.com/pyplots-images/plots/treemap-basic/matplotlib/plot_thumb.png
preview_html: null
quality_score: 91
impl_tags:
  dependencies: []
  techniques:
  - custom-legend
  - annotations
  patterns:
  - matrix-construction
  - iteration-over-groups
  dataprep: []
  styling:
  - alpha-blending
  - minimal-chrome
review:
  strengths:
  - Custom squarify algorithm implementation demonstrating matplotlib flexibility
  - Excellent category color coding with consistent, accessible palette
  - Smart label sizing based on rectangle area
  - Proper text color contrast (white on dark, black on light backgrounds)
  - Well-organized horizontal legend with all 5 department categories
  - Clean KISS structure with clear data-plot-save flow
  weaknesses:
  - Two HR rectangles (Recruiting and Training) are missing labels despite being visible
  image_description: 'The treemap displays a budget allocation visualization with
    12 nested rectangles representing different departments and their projects. The
    largest rectangles are "Product Dev" ($45M, dark blue) and "Enterprise" ($35M,
    light blue) on the left side. "Digital" ($30M, golden yellow) and "Infrastructure"
    ($25M, dark blue) occupy significant space in the center-left. Smaller rectangles
    for "QA", "Logistics", "Partners", "Support", "SMB", "Events", "Recruiting", and
    "Training" fill the right side. Each rectangle shows the subcategory name and
    budget value. The title "Budget Allocation by Department · treemap-basic · matplotlib
    · pyplots.ai" appears at the top. A horizontal legend at the bottom identifies
    the 5 department colors: Engineering (dark blue), Marketing (golden yellow), Sales
    (light blue), Operations (gray), and HR (light yellow).'
  criteria_checklist:
    visual_quality:
      score: 37
      max: 40
      items:
      - id: VQ-01
        name: Text Legibility
        score: 10
        max: 10
        passed: true
        comment: Title is 24pt bold, labels are properly sized (12-18pt based on area),
          all text clearly readable
      - id: VQ-02
        name: No Overlap
        score: 8
        max: 8
        passed: true
        comment: No overlapping text, labels fit within their rectangles
      - id: VQ-03
        name: Element Visibility
        score: 8
        max: 8
        passed: true
        comment: Rectangles are well-sized, proportional to values, alpha=0.85 provides
          good visibility
      - id: VQ-04
        name: Color Accessibility
        score: 5
        max: 5
        passed: true
        comment: Five distinct colors with good contrast; blue/yellow palette is colorblind-friendly
      - id: VQ-05
        name: Layout Balance
        score: 5
        max: 5
        passed: true
        comment: Treemap fills the canvas effectively with proper aspect ratio
      - id: VQ-07
        name: Grid & Legend
        score: 1
        max: 2
        passed: true
        comment: Legend is well-placed below the chart, but no grid needed for treemap
    spec_compliance:
      score: 25
      max: 25
      items:
      - id: SC-01
        name: Plot Type
        score: 8
        max: 8
        passed: true
        comment: Correct treemap visualization with nested rectangles
      - id: SC-02
        name: Data Mapping
        score: 5
        max: 5
        passed: true
        comment: Area correctly proportional to budget values
      - id: SC-03
        name: Required Features
        score: 5
        max: 5
        passed: true
        comment: Distinct colors for categories, labels on larger rectangles, white
          borders between rectangles
      - id: SC-04
        name: Data Range
        score: 3
        max: 3
        passed: true
        comment: All 12 data items visible and properly sized
      - id: SC-05
        name: Legend Accuracy
        score: 2
        max: 2
        passed: true
        comment: Legend correctly shows all 5 departments with matching colors
      - id: SC-06
        name: Title Format
        score: 2
        max: 2
        passed: true
        comment: Uses correct format with spec-id, library, and pyplots.ai
    data_quality:
      score: 19
      max: 20
      items:
      - id: DQ-01
        name: Feature Coverage
        score: 7
        max: 8
        passed: true
        comment: Shows hierarchy (department→project), varying sizes, but nesting
          depth could be more visually distinct
      - id: DQ-02
        name: Realistic Context
        score: 7
        max: 7
        passed: true
        comment: Budget allocation is a realistic treemap use case with plausible
          values
      - id: DQ-03
        name: Appropriate Scale
        score: 5
        max: 5
        passed: true
        comment: Budget values ($8M-$45M) are realistic for department allocations
    code_quality:
      score: 7
      max: 10
      items:
      - id: CQ-01
        name: KISS Structure
        score: 3
        max: 3
        passed: true
        comment: Clean imports → data → plot → save structure, no functions/classes
      - id: CQ-02
        name: Reproducibility
        score: 1
        max: 3
        passed: false
        comment: No random seed, but data is deterministic (partial credit)
      - id: CQ-03
        name: Clean Imports
        score: 2
        max: 2
        passed: true
        comment: All imports are used (matplotlib.pyplot, matplotlib.patches)
      - id: CQ-04
        name: No Deprecated API
        score: 1
        max: 1
        passed: true
        comment: Uses current matplotlib API
      - id: CQ-05
        name: Output Correct
        score: 0
        max: 1
        passed: true
        comment: Saves as plot.png but would be better with consistent naming
    library_features:
      score: 3
      max: 5
      items:
      - id: LF-01
        name: Distinctive Features
        score: 3
        max: 5
        passed: true
        comment: Implements custom squarify algorithm with matplotlib patches, showing
          flexibility but not using advanced features
  verdict: APPROVED
