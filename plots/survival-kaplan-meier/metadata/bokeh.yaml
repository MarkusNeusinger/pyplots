library: bokeh
specification_id: survival-kaplan-meier
created: '2025-12-29T22:48:12Z'
updated: '2025-12-29T22:56:55Z'
generated_by: claude-opus-4-5-20251101
workflow_run: 20584328803
issue: 0
python_version: 3.13.11
library_version: 3.8.1
preview_url: https://storage.googleapis.com/pyplots-images/plots/survival-kaplan-meier/bokeh/plot.png
preview_thumb: https://storage.googleapis.com/pyplots-images/plots/survival-kaplan-meier/bokeh/plot_thumb.png
preview_html: https://storage.googleapis.com/pyplots-images/plots/survival-kaplan-meier/bokeh/plot.html
quality_score: 91
impl_tags:
  dependencies: []
  techniques:
  - columndatasource
  patterns:
  - data-generation
  - iteration-over-groups
  dataprep: []
  styling:
  - alpha-blending
review:
  strengths:
  - Excellent implementation of Kaplan-Meier algorithm with proper step functions
    and Greenwood formula for confidence intervals
  - Beautiful color scheme with Python blue/yellow that provides excellent contrast
    and colorblind accessibility
  - 'All specification requirements met: step curves, CI bands, censoring marks, group
    comparison, median line'
  - 'Proper use of Bokeh features: ColumnDataSource, patch for CI areas, Span annotation'
  - Realistic clinical trial scenario with appropriate sample sizes and time scales
  weaknesses:
  - Legend text appears small relative to the plot size; could benefit from larger
    font or better positioning
  - Code uses helper functions instead of flat KISS structure preferred by guidelines
  - Censoring tick marks could be slightly more prominent for better visibility
  image_description: 'The plot displays a Kaplan-Meier survival curve comparing two
    groups: Treatment (n=80) in blue (#306998) and Control (n=80) in yellow/gold (#FFD43B).
    Both curves start at survival probability 1.0 and decrease in characteristic step-function
    fashion over time (0-36 months). The treatment group shows better survival (higher
    curve) than the control group throughout. Each curve has a semi-transparent confidence
    interval band (shaded regions). Censored observations are marked with small vertical
    tick marks on the curves. A horizontal dashed gray line at y=0.5 indicates the
    median survival reference. The title follows the required format "survival-kaplan-meier
    路 bokeh 路 pyplots.ai". Axes are labeled "Time (months)" and "Survival Probability".
    The legend is positioned in the bottom-left corner. Grid lines are subtle and
    dashed.'
  criteria_checklist:
    visual_quality:
      score: 36
      max: 40
      items:
      - id: VQ-01
        name: Text Legibility
        score: 9
        max: 10
        passed: true
        comment: Title, axis labels, and tick marks are all readable at full size.
          Font sizes are appropriately scaled for 4800x2700.
      - id: VQ-02
        name: No Overlap
        score: 8
        max: 8
        passed: true
        comment: No overlapping text elements anywhere in the plot.
      - id: VQ-03
        name: Element Visibility
        score: 7
        max: 8
        passed: true
        comment: Step lines are clearly visible with good line width. Censoring marks
          visible but could be slightly more prominent.
      - id: VQ-04
        name: Color Accessibility
        score: 5
        max: 5
        passed: true
        comment: Blue and yellow/gold provide excellent contrast and are colorblind-safe
          (not red-green).
      - id: VQ-05
        name: Layout Balance
        score: 5
        max: 5
        passed: true
        comment: Plot fills canvas well with balanced margins. Good use of space.
      - id: VQ-06
        name: Axis Labels
        score: 2
        max: 2
        passed: true
        comment: '"Time (months)" includes units, "Survival Probability" is descriptive.'
      - id: VQ-07
        name: Grid & Legend
        score: 0
        max: 2
        passed: true
        comment: Grid is subtle with dashed lines and alpha. However, the legend is
          very small and positioned in the bottom-left corner where it's somewhat
          hard to read.
    spec_compliance:
      score: 25
      max: 25
      items:
      - id: SC-01
        name: Plot Type
        score: 8
        max: 8
        passed: true
        comment: Correct Kaplan-Meier step function survival curves.
      - id: SC-02
        name: Data Mapping
        score: 5
        max: 5
        passed: true
        comment: Time on X-axis, survival probability on Y-axis, correctly mapped.
      - id: SC-03
        name: Required Features
        score: 5
        max: 5
        passed: true
        comment: 'All spec features present: step function curves, 95% CI bands, censored
          observation marks, group comparison with legend, median survival line.'
      - id: SC-04
        name: Data Range
        score: 3
        max: 3
        passed: true
        comment: Axes show full data range (0-38 months, 0-1.05 probability).
      - id: SC-05
        name: Legend Accuracy
        score: 2
        max: 2
        passed: true
        comment: Legend correctly identifies Treatment and Control with sample sizes.
      - id: SC-06
        name: Title Format
        score: 2
        max: 2
        passed: true
        comment: 'Correct format: "survival-kaplan-meier 路 bokeh 路 pyplots.ai"'
    data_quality:
      score: 18
      max: 20
      items:
      - id: DQ-01
        name: Feature Coverage
        score: 7
        max: 8
        passed: true
        comment: Shows declining survival, group differences, censoring, confidence
          intervals. Could show more dramatic separation or crossing curves for fuller
          demonstration.
      - id: DQ-02
        name: Realistic Context
        score: 7
        max: 7
        passed: true
        comment: Clinical trial with treatment vs control is a classic, neutral, realistic
          scenario.
      - id: DQ-03
        name: Appropriate Scale
        score: 4
        max: 5
        passed: true
        comment: Time scale (months) and sample sizes (n=80) are realistic. Survival
          curves show plausible decline patterns.
    code_quality:
      score: 8
      max: 10
      items:
      - id: CQ-01
        name: KISS Structure
        score: 1
        max: 3
        passed: true
        comment: Code uses helper functions (kaplan_meier, make_step_data) rather
          than flat script structure.
      - id: CQ-02
        name: Reproducibility
        score: 3
        max: 3
        passed: true
        comment: np.random.seed(42) is set.
      - id: CQ-03
        name: Clean Imports
        score: 2
        max: 2
        passed: true
        comment: All imports are used.
      - id: CQ-04
        name: No Deprecated API
        score: 1
        max: 1
        passed: true
        comment: Uses current Bokeh API.
      - id: CQ-05
        name: Output Correct
        score: 1
        max: 1
        passed: true
        comment: Saves as plot.png.
    library_features:
      score: 4
      max: 5
      items:
      - id: LF-01
        name: Distinctive Features
        score: 4
        max: 5
        passed: true
        comment: Uses ColumnDataSource, patch for CI bands, Span for median line,
          scatter with custom markers for censoring. Good Bokeh usage but could leverage
          HoverTool for interactivity.
  verdict: APPROVED
