library: plotnine
specification_id: choropleth-basic
created: '2025-12-31T13:54:53Z'
updated: '2025-12-31T15:11:56Z'
generated_by: claude-opus-4-5-20251101
workflow_run: 20620325064
issue: 3069
python_version: 3.13.11
library_version: 0.15.2
preview_url: https://storage.googleapis.com/pyplots-images/plots/choropleth-basic/plotnine/plot.png
preview_thumb: https://storage.googleapis.com/pyplots-images/plots/choropleth-basic/plotnine/plot_thumb.png
preview_html: null
quality_score: 91
impl_tags:
  dependencies: []
  techniques:
  - colorbar
  - annotations
  patterns:
  - data-generation
  dataprep: []
  styling: []
review:
  strengths:
  - Excellent handling of missing data with gray fill for Czechia as specified
  - Creative label offset solution prevents text overlap in crowded central Europe
  - Realistic population density values for European countries
  - Clean separation of data with values vs missing data using two geom_polygon layers
  - Good use of sequential Blues colormap which is colorblind-safe
  - Proper centroid calculation with manual adjustments for readability
  weaknesses:
  - Country shapes are highly stylized polygons rather than realistic geographic shapes
  - Legend colorbar could benefit from more tick marks for finer granularity
  - Some white space at image corners could be better utilized
  image_description: The plot shows a stylized choropleth map of European countries
    using simplified polygon shapes. The map displays population density data with
    a sequential Blues colormap. The Netherlands appears darkest blue (~521 per km²),
    followed by Belgium and UK in medium-dark blue, while Nordic countries (Norway,
    Sweden, Finland) appear lightest. Czechia is shown in gray to demonstrate missing
    data handling. Each country is labeled with bold black text, with labels adjusted
    to avoid overlap in crowded central Europe. The title "choropleth-basic · plotnine
    · pyplots.ai" is displayed at the top in large bold text. The legend on the right
    shows "Population Density (per km²)" with a vertical colorbar ranging from 0 to
    500. The background is light blue (#f0f5fa) and country boundaries are clearly
    visible with dark gray outlines.
  criteria_checklist:
    visual_quality:
      score: 36
      max: 40
      items:
      - id: VQ-01
        name: Text Legibility
        score: 9
        max: 10
        passed: true
        comment: Title large and readable at 28pt, country labels clearly visible
          at size 8 with bold weight, legend text appropriately sized
      - id: VQ-02
        name: No Overlap
        score: 8
        max: 8
        passed: true
        comment: Label offsets successfully prevent overlap in crowded central Europe
          region (Netherlands, Belgium, Germany, Denmark)
      - id: VQ-03
        name: Element Visibility
        score: 7
        max: 8
        passed: true
        comment: Polygons are well-sized with good alpha (0.95), boundaries clearly
          visible with 0.6pt stroke
      - id: VQ-04
        name: Color Accessibility
        score: 5
        max: 5
        passed: true
        comment: Blues sequential colormap is colorblind-safe
      - id: VQ-05
        name: Layout Balance
        score: 4
        max: 5
        passed: true
        comment: Good use of 16:9 canvas, map centered but some empty space at corners
      - id: VQ-06
        name: Axis Labels
        score: 2
        max: 2
        passed: true
        comment: Axes hidden as appropriate for map; legend has proper units "(per
          km²)"
      - id: VQ-07
        name: Grid & Legend
        score: 1
        max: 2
        passed: true
        comment: Legend well-placed on right with appropriate sizing; grid removed
          as appropriate for map type
    spec_compliance:
      score: 23
      max: 25
      items:
      - id: SC-01
        name: Plot Type
        score: 8
        max: 8
        passed: true
        comment: Correct choropleth map implementation using polygons
      - id: SC-02
        name: Data Mapping
        score: 5
        max: 5
        passed: true
        comment: Density values correctly mapped to fill color
      - id: SC-03
        name: Required Features
        score: 4
        max: 5
        passed: true
        comment: Has color legend, clear boundaries, missing data handling (gray);
          projection is approximate but acceptable for stylized map
      - id: SC-04
        name: Data Range
        score: 3
        max: 3
        passed: true
        comment: Color scale encompasses all data values (0-550 for max 521)
      - id: SC-05
        name: Legend Accuracy
        score: 2
        max: 2
        passed: true
        comment: Legend correctly shows "Population Density (per km²)"
      - id: SC-06
        name: Title Format
        score: 1
        max: 2
        passed: true
        comment: Correct format but uses middot (·) instead of standard bullet
    data_quality:
      score: 20
      max: 20
      items:
      - id: DQ-01
        name: Feature Coverage
        score: 8
        max: 8
        passed: true
        comment: Shows full range from low density (Norway 15) to high density (Netherlands
          521), includes missing data example (Czechia)
      - id: DQ-02
        name: Realistic Context
        score: 7
        max: 7
        passed: true
        comment: Real European countries with realistic 2024 population density values
      - id: DQ-03
        name: Appropriate Scale
        score: 5
        max: 5
        passed: true
        comment: Values are accurate for actual country population densities
    code_quality:
      score: 9
      max: 10
      items:
      - id: CQ-01
        name: KISS Structure
        score: 3
        max: 3
        passed: true
        comment: 'Clean linear flow: imports → data → plot → save'
      - id: CQ-02
        name: Reproducibility
        score: 3
        max: 3
        passed: true
        comment: np.random.seed(42) set at start
      - id: CQ-03
        name: Clean Imports
        score: 2
        max: 2
        passed: true
        comment: All imports are used
      - id: CQ-04
        name: No Deprecated API
        score: 1
        max: 1
        passed: true
        comment: Uses current plotnine API
      - id: CQ-05
        name: Output Correct
        score: 0
        max: 1
        passed: false
        comment: Saves to 'plot.png' correctly
    library_features:
      score: 3
      max: 5
      items:
      - id: LF-01
        name: Uses distinctive library features
        score: 3
        max: 5
        passed: true
        comment: Uses ggplot grammar with geom_polygon, aes mapping, scale_fill_cmap,
          coord_fixed, and theme customization; however plotnine doesn't have native
          geographic support so this is a creative workaround rather than using distinctive
          features
  verdict: APPROVED
