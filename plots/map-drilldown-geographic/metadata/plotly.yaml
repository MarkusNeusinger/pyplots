library: plotly
specification_id: map-drilldown-geographic
created: '2026-01-20T07:41:27Z'
updated: '2026-01-20T07:44:14Z'
generated_by: claude-opus-4-5-20251101
workflow_run: 21163297440
issue: 3770
python_version: 3.13.11
library_version: 6.5.2
preview_url: https://storage.googleapis.com/pyplots-images/plots/map-drilldown-geographic/plotly/plot.png
preview_thumb: https://storage.googleapis.com/pyplots-images/plots/map-drilldown-geographic/plotly/plot_thumb.png
preview_html: https://storage.googleapis.com/pyplots-images/plots/map-drilldown-geographic/plotly/plot.html
quality_score: 91
review:
  strengths:
  - Excellent use of Plotly updatemenus for simulating drill-down navigation
  - Clean hierarchical data structure with realistic US sales data
  - Good visual design with Python-themed color palette and white state borders
  - Proper choropleth implementation with Scattergeo overlay for city-level detail
  - Comprehensive hover tooltips with state names and formatted values
  - Well-organized dropdown with state-specific zoom presets
  weaknesses:
  - Uses dropdown menu for navigation instead of true click-to-drill-down functionality
    as specified
  - Breadcrumb navigation in subtitle is static text, not clickable segments
  - City layer visibility toggle is binary rather than progressive drill-down
  image_description: The plot displays a choropleth map of the United States showing
    sales data by state. Ten states are colored (California, Texas, Florida, New York,
    Illinois, Pennsylvania, Ohio, Georgia, North Carolina, and Michigan) while other
    states appear in light gray. The color scale ranges from yellow (Python Yellow,
    ~$1400K) through greenish-blue to dark blue (Python Blue, ~$2850K), with California
    and Texas showing the highest values (darkest blue), Illinois in bright yellow
    (lower values), and other states in various intermediate shades. A dropdown menu
    labeled "All States (Click to drill down)" appears in the top-left corner. The
    title follows the required format "map-drilldown-geographic · plotly · pyplots.ai"
    with a subtitle. A color legend labeled "Sales ($K)" is positioned on the right
    side. A navigation instruction appears at the bottom.
  criteria_checklist:
    visual_quality:
      score: 36
      max: 40
      items:
      - id: VQ-01
        name: Text Legibility
        score: 10
        max: 10
        passed: true
        comment: Title at 28pt, colorbar labels at 16pt, all text clearly readable
          at full size
      - id: VQ-02
        name: No Overlap
        score: 8
        max: 8
        passed: true
        comment: No overlapping text elements, all labels clearly separated
      - id: VQ-03
        name: Element Visibility
        score: 7
        max: 8
        passed: true
        comment: States are clearly visible with good color differentiation; white
          borders help distinguish regions
      - id: VQ-04
        name: Color Accessibility
        score: 4
        max: 5
        passed: true
        comment: Python-themed blue-yellow scale is reasonably accessible but not
          a standard colorblind-safe palette
      - id: VQ-05
        name: Layout Balance
        score: 5
        max: 5
        passed: true
        comment: Map fills appropriate canvas area, balanced margins, colorbar well-positioned
      - id: VQ-06
        name: Axis Labels
        score: 0
        max: 2
        passed: false
        comment: N/A for map visualization - no traditional axes
      - id: VQ-07
        name: Grid & Legend
        score: 2
        max: 2
        passed: true
        comment: Colorbar legend is well-placed and properly formatted with title
          and tick labels
    spec_compliance:
      score: 23
      max: 25
      items:
      - id: SC-01
        name: Plot Type
        score: 8
        max: 8
        passed: true
        comment: Correct choropleth map with drill-down capability via dropdown
      - id: SC-02
        name: Data Mapping
        score: 5
        max: 5
        passed: true
        comment: States correctly mapped with aggregated city values
      - id: SC-03
        name: Required Features
        score: 4
        max: 5
        passed: true
        comment: Has drill-down via dropdown, city markers layer, state zooming; breadcrumb
          shown in subtitle but not clickable
      - id: SC-04
        name: Data Range
        score: 3
        max: 3
        passed: true
        comment: All data values properly displayed within color scale range
      - id: SC-05
        name: Legend Accuracy
        score: 2
        max: 2
        passed: true
        comment: Color legend accurately represents sales values in $K
      - id: SC-06
        name: Title Format
        score: 1
        max: 2
        passed: true
        comment: Format correct with spec-id · library · pyplots.ai
    data_quality:
      score: 19
      max: 20
      items:
      - id: DQ-01
        name: Feature Coverage
        score: 7
        max: 8
        passed: true
        comment: Shows hierarchical data (state→city), aggregation, geographic distribution;
          limited to 2-level hierarchy
      - id: DQ-02
        name: Realistic Context
        score: 7
        max: 7
        passed: true
        comment: Sales by region is a classic business intelligence use case
      - id: DQ-03
        name: Appropriate Scale
        score: 5
        max: 5
        passed: true
        comment: Sales values ($130K-$950K per city, $1340K-$2850K per state) are
          realistic
    code_quality:
      score: 9
      max: 10
      items:
      - id: CQ-01
        name: KISS Structure
        score: 3
        max: 3
        passed: true
        comment: 'Flat structure: imports → data → figure → save'
      - id: CQ-02
        name: Reproducibility
        score: 3
        max: 3
        passed: true
        comment: np.random.seed(42) set
      - id: CQ-03
        name: Clean Imports
        score: 2
        max: 2
        passed: true
        comment: Only numpy and plotly.graph_objects imported, both used
      - id: CQ-04
        name: No Deprecated API
        score: 1
        max: 1
        passed: true
        comment: Uses current Plotly API
      - id: CQ-05
        name: Output Correct
        score: 0
        max: 1
        passed: false
        comment: Saves both plot.png and plot.html - correct for interactive library
    library_features:
      score: 4
      max: 5
      items:
      - id: LF-01
        name: Distinctive Features
        score: 4
        max: 5
        passed: true
        comment: 'Good use of Plotly interactive features: dropdown menus, Choropleth,
          Scattergeo, hover templates, updatemenus'
  verdict: APPROVED
impl_tags:
  dependencies: []
  techniques:
  - colorbar
  - hover-tooltips
  - html-export
  - annotations
  patterns:
  - data-generation
  - iteration-over-groups
  dataprep: []
  styling:
  - custom-colormap
  - edge-highlighting
