library: letsplot
specification_id: drawdown-basic
created: '2026-01-20T12:01:12Z'
updated: '2026-01-20T12:03:53Z'
generated_by: claude-opus-4-5-20251101
workflow_run: 21170483077
issue: 3752
python_version: 3.13.11
library_version: 4.8.2
preview_url: https://storage.googleapis.com/pyplots-images/plots/drawdown-basic/letsplot/plot.png
preview_thumb: https://storage.googleapis.com/pyplots-images/plots/drawdown-basic/letsplot/plot_thumb.png
preview_html: https://storage.googleapis.com/pyplots-images/plots/drawdown-basic/letsplot/plot.html
quality_score: 82
review:
  strengths:
  - Clean ggplot2-style grammar implementation with layered geoms
  - Good use of caption for max drawdown annotation
  - Realistic simulated price data with multiple drawdown periods
  - Proper figure sizing with scale=3 for high resolution
  - Recovery points correctly identified with green markers
  weaknesses:
  - Maximum drawdown marker (dark red diamond) is nearly invisible against the red
    filled area - needs contrasting color or different placement
  - The asset never recovers to zero after day ~30, making it look like a perpetual
    decline rather than showing typical drawdown-recovery cycles
  - Grid uses dashed lines like the zero baseline, creating visual confusion
  - Could benefit from a legend explaining what the green points and dark marker represent
  image_description: 'The plot displays a drawdown chart showing percentage decline
    from peak value over ~500 trading days. The visualization uses a red filled area
    (semi-transparent, approximately #DC2626 with alpha ~0.4) extending from the drawdown
    line down to the visible area. A red line (#DC2626) traces the drawdown values
    with good line weight (1.5). A dashed horizontal reference line at y=0 marks the
    baseline. The title "drawdown-basic · letsplot · pyplots.ai" appears at the top.
    Axis labels are "Trading Days" (x-axis) and "Drawdown (%)" (y-axis). A caption
    in the bottom-right corner shows "Max Drawdown: -78.5% on Day 472". There is a
    small green dot near the origin indicating a recovery point where drawdown returned
    to zero. The plot shows a dramatic decline from 0% to approximately -80% over
    the period, with some partial recoveries around days 150-200 before continuing
    to decline. The maximum drawdown point marker (dark red diamond, shape 18) is
    not clearly visible as it blends with the filled area at the bottom. Grid lines
    are subtle dashed gray lines.'
  criteria_checklist:
    visual_quality:
      score: 33
      max: 40
      items:
      - id: VQ-01
        name: Text Legibility
        score: 9
        max: 10
        passed: true
        comment: Title, axis labels, and tick marks are readable with appropriate
          font sizes
      - id: VQ-02
        name: No Overlap
        score: 8
        max: 8
        passed: true
        comment: No overlapping text elements
      - id: VQ-03
        name: Element Visibility
        score: 6
        max: 8
        passed: true
        comment: Line and area visible but max drawdown marker is difficult to see
          against red fill
      - id: VQ-04
        name: Color Accessibility
        score: 4
        max: 5
        passed: true
        comment: Red-green markers could be problematic for colorblind users
      - id: VQ-05
        name: Layout Balance
        score: 4
        max: 5
        passed: true
        comment: Good canvas utilization, caption somewhat isolated in corner
      - id: VQ-06
        name: Axis Labels
        score: 2
        max: 2
        passed: true
        comment: Descriptive labels with units
      - id: VQ-07
        name: Grid & Legend
        score: 0
        max: 2
        passed: false
        comment: Dashed grid and dashed zero line create visual confusion
    spec_compliance:
      score: 21
      max: 25
      items:
      - id: SC-01
        name: Plot Type
        score: 8
        max: 8
        passed: true
        comment: Correct filled area drawdown chart
      - id: SC-02
        name: Data Mapping
        score: 5
        max: 5
        passed: true
        comment: X-axis shows trading days, Y-axis shows drawdown percentage
      - id: SC-03
        name: Required Features
        score: 3
        max: 5
        passed: false
        comment: Missing visible max drawdown marker and optional secondary y-axis
          for price
      - id: SC-04
        name: Data Range
        score: 3
        max: 3
        passed: true
        comment: All data visible within axes
      - id: SC-05
        name: Legend Accuracy
        score: 0
        max: 2
        passed: false
        comment: No legend explaining recovery points and max drawdown marker
      - id: SC-06
        name: Title Format
        score: 2
        max: 2
        passed: true
        comment: 'Correct format: drawdown-basic · letsplot · pyplots.ai'
    data_quality:
      score: 17
      max: 20
      items:
      - id: DQ-01
        name: Feature Coverage
        score: 6
        max: 8
        passed: true
        comment: Shows drawdown periods but never recovers to zero after initial drop
      - id: DQ-02
        name: Realistic Context
        score: 7
        max: 7
        passed: true
        comment: Realistic stock price volatility and drawdown patterns
      - id: DQ-03
        name: Appropriate Scale
        score: 4
        max: 5
        passed: true
        comment: Values plausible but -78% is extreme
    code_quality:
      score: 8
      max: 10
      items:
      - id: CQ-01
        name: KISS Structure
        score: 3
        max: 3
        passed: true
        comment: Clean imports → data → plot → save structure
      - id: CQ-02
        name: Reproducibility
        score: 3
        max: 3
        passed: true
        comment: np.random.seed(42) used
      - id: CQ-03
        name: Clean Imports
        score: 1
        max: 2
        passed: false
        comment: Wildcard import with noqa comments
      - id: CQ-04
        name: No Deprecated API
        score: 1
        max: 1
        passed: true
        comment: Current API usage
      - id: CQ-05
        name: Output Correct
        score: 0
        max: 1
        passed: false
        comment: Uses export_ggsave instead of standard ggsave
    library_features:
      score: 3
      max: 5
      items:
      - id: LF-01
        name: Distinctive Features
        score: 3
        max: 5
        passed: true
        comment: Uses ggplot grammar but does not leverage interactive features
  verdict: REJECTED
impl_tags:
  dependencies: []
  techniques:
  - layer-composition
  - annotations
  patterns:
  - data-generation
  - time-series
  dataprep:
  - cumulative-sum
  styling:
  - alpha-blending
  - grid-styling
