library: letsplot
specification_id: heatmap-basic
created: '2025-12-23T00:49:09Z'
updated: '2026-02-15T21:39:16Z'
generated_by: claude-opus-4-6
workflow_run: 20447989671
issue: 0
python_version: 3.14.3
library_version: 4.8.2
preview_url: https://storage.googleapis.com/pyplots-images/plots/heatmap-basic/letsplot/plot.png
preview_thumb: https://storage.googleapis.com/pyplots-images/plots/heatmap-basic/letsplot/plot_thumb.png
preview_html: https://storage.googleapis.com/pyplots-images/plots/heatmap-basic/letsplot/plot.html
quality_score: 86
impl_tags:
  dependencies: []
  techniques:
  - annotations
  - layer-composition
  - hover-tooltips
  - html-export
  patterns:
  - data-generation
  - iteration-over-groups
  dataprep: []
  styling:
  - custom-colormap
  - minimal-chrome
review:
  strengths:
  - Adaptive text color (white on dark, charcoal on light) ensures annotation readability
    across the full value range
  - Realistic building energy consumption scenario with seasonal patterns and zone-specific
    baselines creates meaningful data storytelling
  - 'Full spec compliance: colorbar, annotations, logical ordering, correct title
    format'
  - Interactive tooltips via layer_tooltips showcase lets-plot distinctive capabilities
    (visible in HTML export)
  - Clean minimal theme with grid removed and tile gaps for visual separation
  weaknesses:
  - Color gradient uses custom hex values rather than a perceptually-uniform colormap
    — switching to a recognized sequential palette would improve color accessibility
  - Annotation text size=12 is adequate but could be increased for better visibility
    at full resolution
  - Some wasted margin space could be reclaimed for a tighter layout
  - Long-form data construction loop is verbose compared to vectorized alternatives
  image_description: 'The plot displays a 12x6 heatmap showing monthly energy consumption
    (kWh) across six building zones (Lobby, Offices, Lab, Server Room, Cafeteria,
    Warehouse). Months run top-to-bottom on the Y-axis (Jan-Dec, reversed so Jan is
    at top). A sequential blue color gradient maps values: light blue/white for low
    consumption (~49 kWh) through to dark navy for high consumption (~699 kWh). Each
    cell contains bold numeric annotations with adaptive text color — white text on
    dark cells, dark charcoal text on light cells — ensuring readability across the
    full range. The title "heatmap-basic · letsplot · pyplots.ai" appears at the top
    left. A colorbar legend labeled "Energy (kWh)" sits on the right. The panel grid
    is removed, giving a clean minimal appearance with slight gaps between tiles.'
  criteria_checklist:
    visual_quality:
      score: 26
      max: 30
      items:
      - id: VQ-01
        name: Text Legibility
        score: 8
        max: 8
        passed: true
        comment: 'All font sizes explicitly set: title=24, axis_title=20, axis_text=16,
          legend sizes 14-16. Perfectly readable.'
      - id: VQ-02
        name: No Overlap
        score: 6
        max: 6
        passed: true
        comment: No overlapping text anywhere. Cell annotations well-spaced within
          tiles.
      - id: VQ-03
        name: Element Visibility
        score: 5
        max: 6
        passed: true
        comment: Tiles well-sized with 0.92 gaps. Annotations bold but at size=12
          could be marginally larger.
      - id: VQ-04
        name: Color Accessibility
        score: 3
        max: 4
        passed: true
        comment: Sequential blue gradient is colorblind-safe but not a perceptually-uniform
          colormap.
      - id: VQ-05
        name: Layout Balance
        score: 3
        max: 4
        passed: true
        comment: Good layout overall, some unused margin space on sides.
      - id: VQ-06
        name: Axis Labels & Title
        score: 2
        max: 2
        passed: true
        comment: Descriptive categorical labels; units appropriately on colorbar.
    design_excellence:
      score: 14
      max: 20
      items:
      - id: DE-01
        name: Aesthetic Sophistication
        score: 6
        max: 8
        passed: true
        comment: Custom blue gradient, adaptive text colors, bold annotations, clean
          theme. Above defaults, approaching publication quality.
      - id: DE-02
        name: Visual Refinement
        score: 4
        max: 6
        passed: true
        comment: Grid removed, minimal theme, tile gaps. Good refinement but could
          push further.
      - id: DE-03
        name: Data Storytelling
        score: 4
        max: 6
        passed: true
        comment: Server Room dominates consumption, seasonal winter peaks visible.
          Adaptive text color creates visual hierarchy.
    spec_compliance:
      score: 15
      max: 15
      items:
      - id: SC-01
        name: Plot Type
        score: 5
        max: 5
        passed: true
        comment: Correct heatmap using geom_tile.
      - id: SC-02
        name: Required Features
        score: 4
        max: 4
        passed: true
        comment: 'All spec features present: color intensity, annotations, colorbar,
          logical ordering.'
      - id: SC-03
        name: Data Mapping
        score: 3
        max: 3
        passed: true
        comment: X/Y correctly assigned, all 72 data points visible.
      - id: SC-04
        name: Title & Legend
        score: 3
        max: 3
        passed: true
        comment: Correct title format. Colorbar labeled Energy (kWh).
    data_quality:
      score: 14
      max: 15
      items:
      - id: DQ-01
        name: Feature Coverage
        score: 5
        max: 6
        passed: true
        comment: Shows variation across zones and months, seasonal patterns visible.
          Could show more distinct clusters.
      - id: DQ-02
        name: Realistic Context
        score: 5
        max: 5
        passed: true
        comment: 'Real neutral business scenario: monthly building energy consumption
          by zone.'
      - id: DQ-03
        name: Appropriate Scale
        score: 4
        max: 4
        passed: true
        comment: Values realistic for monthly kWh (49-699 kWh per zone).
    code_quality:
      score: 9
      max: 10
      items:
      - id: CQ-01
        name: KISS Structure
        score: 3
        max: 3
        passed: true
        comment: Clean imports, data, plot, save structure.
      - id: CQ-02
        name: Reproducibility
        score: 2
        max: 2
        passed: true
        comment: np.random.seed(42) set.
      - id: CQ-03
        name: Clean Imports
        score: 2
        max: 2
        passed: true
        comment: All imports used.
      - id: CQ-04
        name: Code Elegance
        score: 1
        max: 2
        passed: false
        comment: Manual loop for long-form data is verbose; could use np.repeat/tile.
      - id: CQ-05
        name: Output & API
        score: 1
        max: 1
        passed: true
        comment: Correct ggsave with scale=3.
    library_mastery:
      score: 8
      max: 10
      items:
      - id: LM-01
        name: Idiomatic Usage
        score: 5
        max: 5
        passed: true
        comment: Proper ggplot grammar, geom_tile, scale_fill_gradient, theme_minimal,
          ggsave idioms.
      - id: LM-02
        name: Distinctive Features
        score: 3
        max: 5
        passed: true
        comment: Uses layer_tooltips, scale_color_identity for adaptive text, HTML
          export alongside PNG.
  verdict: REJECTED
