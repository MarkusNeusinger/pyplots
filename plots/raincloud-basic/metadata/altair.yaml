library: altair
specification_id: raincloud-basic
created: '2025-12-25T08:23:10Z'
updated: '2026-02-14T20:54:37Z'
generated_by: claude-opus-4-6
workflow_run: 20501865366
issue: 0
python_version: '3.14'
library_version: 6.0.0
preview_url: https://storage.googleapis.com/pyplots-images/plots/raincloud-basic/altair/plot.png
preview_thumb: https://storage.googleapis.com/pyplots-images/plots/raincloud-basic/altair/plot_thumb.png
preview_html: https://storage.googleapis.com/pyplots-images/plots/raincloud-basic/altair/plot.html
quality_score: 94
impl_tags:
  dependencies: []
  techniques:
  - annotations
  - layer-composition
  - custom-legend
  - html-export
  patterns:
  - data-generation
  - iteration-over-groups
  dataprep:
  - kde
  styling:
  - alpha-blending
  - grid-styling
  - edge-highlighting
review:
  strengths:
  - 'Excellent raincloud metaphor execution: cloud rises above, rain falls below,
    box sits on baseline — exactly as specified'
  - Strong data storytelling with bimodal distribution annotations (Peak 1/Peak 2
    labels, connecting arrow, explanatory note) and median value callouts
  - 'Publication-quality aesthetics: custom palette, white box plots with dark outlines
    for contrast, subtle dashed grid, clean typography hierarchy'
  - Treatment B bimodal distribution (mixed normals) is an excellent data choice that
    showcases what raincloud plots reveal vs plain box plots
  - All font sizes explicitly set with a clear hierarchy (title 28pt > axis 22pt >
    y-labels 20pt > ticks 18pt > annotations 14-16pt)
  weaknesses:
  - Code is verbose due to manual box plot statistics and whisker cap construction
    — could potentially be simplified if Altair supported a native box-plot layer
    that aligns within the raincloud layout
  - Legend is positioned with absolute pixel coordinates (legendX=1350, legendY=50)
    which is fragile and may not adapt well to different rendering contexts
  image_description: 'The plot displays a horizontal raincloud plot with three conditions
    (Control, Treatment A, Treatment B) stacked vertically. Each condition shows three
    layered components: a semi-transparent half-violin (KDE cloud) extending upward
    above the category baseline, a white-filled box plot with dark outlines centered
    on the baseline (with whiskers, caps, and a red median tick), and jittered strip
    points (rain) scattered below the baseline. Colors are blue (#306998) for Control,
    dark gold (#D4A017) for Treatment A, and green (#4CAF50) for Treatment B. The
    x-axis reads "Reaction Time (ms)" spanning approximately 250 to 600. Red median
    value annotations (442, 383, 361) sit above each box plot. Treatment B''s bimodal
    distribution is highlighted with italic "Peak 1" and "Peak 2" labels connected
    by a dashed line, plus a "Bimodal distribution" note above. A legend in the upper-right
    corner lists all three conditions with color swatches. The title reads "raincloud-basic
    · altair · pyplots.ai" in bold at the top center. The overall aesthetic is clean
    with a subtle dashed grid at low opacity, no view border, and generous spacing
    between categories.'
  criteria_checklist:
    visual_quality:
      score: 30
      max: 30
      items:
      - id: VQ-01
        name: Text Legibility
        score: 8
        max: 8
        passed: true
        comment: 'All font sizes explicitly set: title 28pt, axis title 22pt, ticks
          18pt, y-labels 20pt — perfectly readable'
      - id: VQ-02
        name: No Overlap
        score: 6
        max: 6
        passed: true
        comment: No overlapping text; annotations, median labels, and y-labels all
          clearly separated
      - id: VQ-03
        name: Element Visibility
        score: 6
        max: 6
        passed: true
        comment: Strip points size=45 with alpha=0.5 appropriate for 80 pts/group;
          violins and box plots clearly visible
      - id: VQ-04
        name: Color Accessibility
        score: 4
        max: 4
        passed: true
        comment: Blue/gold/green palette is colorblind-safe with good luminance contrast
      - id: VQ-05
        name: Layout Balance
        score: 4
        max: 4
        passed: true
        comment: Plot fills canvas well, balanced margins, left padding accommodates
          y-labels
      - id: VQ-06
        name: Axis Labels & Title
        score: 2
        max: 2
        passed: true
        comment: Reaction Time (ms) with units on x-axis, descriptive condition names
          on y-axis
    design_excellence:
      score: 17
      max: 20
      items:
      - id: DE-01
        name: Aesthetic Sophistication
        score: 7
        max: 8
        passed: true
        comment: Custom palette, white-filled box plots with dark outlines, red median
          ticks, dashed grid, removed view strokes — publication-ready
      - id: DE-02
        name: Visual Refinement
        score: 5
        max: 6
        passed: true
        comment: Subtle dashed grid at low opacity, no view border, generous whitespace,
          whisker caps, white box fill separating from violin
      - id: DE-03
        name: Data Storytelling
        score: 5
        max: 6
        passed: true
        comment: Bimodal annotation with Peak 1/Peak 2 labels and connecting dashed
          line; median value annotations guide the viewer
    spec_compliance:
      score: 15
      max: 15
      items:
      - id: SC-01
        name: Plot Type
        score: 5
        max: 5
        passed: true
        comment: 'Correct raincloud with all three components: half-violin, box plot,
          jittered strip'
      - id: SC-02
        name: Required Features
        score: 4
        max: 4
        passed: true
        comment: Horizontal orientation, cloud above, box on baseline, rain below,
          half-violin, moderate jitter, transparency, median/quartile markers
      - id: SC-03
        name: Data Mapping
        score: 3
        max: 3
        passed: true
        comment: Categories on y-axis, values on x-axis — correct horizontal layout
      - id: SC-04
        name: Title & Legend
        score: 3
        max: 3
        passed: true
        comment: Title format correct, legend with proper condition labels
    data_quality:
      score: 15
      max: 15
      items:
      - id: DQ-01
        name: Feature Coverage
        score: 6
        max: 6
        passed: true
        comment: 'Three groups with distinct distributions: normal, narrower normal,
          and bimodal'
      - id: DQ-02
        name: Realistic Context
        score: 5
        max: 5
        passed: true
        comment: Reaction times for treatment conditions — plausible psychology/clinical
          trial scenario
      - id: DQ-03
        name: Appropriate Scale
        score: 4
        max: 4
        passed: true
        comment: Reaction times 250-600ms realistic for cognitive tasks; 80 obs/group
          reasonable
    code_quality:
      score: 9
      max: 10
      items:
      - id: CQ-01
        name: KISS Structure
        score: 3
        max: 3
        passed: true
        comment: 'Linear flow: imports, data, box stats, layers, compose, save'
      - id: CQ-02
        name: Reproducibility
        score: 2
        max: 2
        passed: true
        comment: np.random.seed(42) set
      - id: CQ-03
        name: Clean Imports
        score: 2
        max: 2
        passed: true
        comment: 'All imports used: altair, numpy, pandas'
      - id: CQ-04
        name: Code Elegance
        score: 1
        max: 2
        passed: false
        comment: Verbose with manual box stats, whisker caps, and multiple annotation
          layers; partly necessary for Altair
      - id: CQ-05
        name: Output & API
        score: 1
        max: 1
        passed: true
        comment: Saves plot.png and plot.html, no deprecated functions
    library_mastery:
      score: 8
      max: 10
      items:
      - id: LM-01
        name: Idiomatic Usage
        score: 4
        max: 5
        passed: true
        comment: 'Good use of declarative grammar: transform_density, transform_calculate,
          mark_area with y2, alt.layer, .interactive()'
      - id: LM-02
        name: Distinctive Features
        score: 4
        max: 5
        passed: true
        comment: transform_density for in-spec KDE, transform_calculate for computed
          positions, declarative layer composition — distinctive Vega-Lite/Altair
          patterns
  verdict: APPROVED
