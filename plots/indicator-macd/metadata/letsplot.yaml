library: letsplot
specification_id: indicator-macd
created: '2026-01-07T16:30:55Z'
updated: '2026-01-07T16:44:18Z'
generated_by: claude-opus-4-5-20251101
workflow_run: 20788389080
issue: 3181
python_version: 3.13.11
library_version: 4.8.2
preview_url: https://storage.googleapis.com/pyplots-images/plots/indicator-macd/letsplot/plot.png
preview_thumb: https://storage.googleapis.com/pyplots-images/plots/indicator-macd/letsplot/plot_thumb.png
preview_html: https://storage.googleapis.com/pyplots-images/plots/indicator-macd/letsplot/plot.html
quality_score: 92
review:
  strengths:
  - Excellent use of ggplot2 grammar with layered composition (histogram bars + zero
    line + MACD/signal lines)
  - Proper EMA calculations with warmup period (35 days) for accurate MACD values
  - Clear color scheme distinguishing all components (blue MACD, yellow signal, green/red
    histogram)
  - Clean data transformation using pd.melt for line data in long format
  - Both PNG and HTML output for static and interactive viewing
  weaknesses:
  - Data context is generic synthetic prices; could be slightly more realistic (e.g.,
    actual stock ticker simulation)
  image_description: The plot displays a MACD technical indicator chart with 120 trading
    days of data. The blue MACD line and yellow/gold Signal line are clearly visible,
    showing characteristic momentum oscillations with peaks around day 80 (~3.7) and
    troughs around day 30 and 115 (~-5). The histogram bars are rendered in green
    for positive values (above zero) and red for negative values, correctly showing
    the difference between MACD and Signal lines. A dashed gray horizontal line marks
    the zero reference. The chart uses a minimal theme with a light gray grid, and
    has clear axis labels ("Trading Day" on X, "MACD Value" on Y). Two legends on
    the right side explain the Histogram colors and Line types. The title follows
    the required format "indicator-macd · letsplot · pyplots.ai".
  criteria_checklist:
    visual_quality:
      score: 37
      max: 40
      items:
      - id: VQ-01
        name: Text Legibility
        score: 10
        max: 10
        passed: true
        comment: Title at 24pt, axis titles at 20pt, tick labels at 16pt - all perfectly
          readable
      - id: VQ-02
        name: No Overlap
        score: 8
        max: 8
        passed: true
        comment: No overlapping elements anywhere
      - id: VQ-03
        name: Element Visibility
        score: 8
        max: 8
        passed: true
        comment: Lines are thick (1.5), bars have good width (0.8), all elements clearly
          visible
      - id: VQ-04
        name: Color Accessibility
        score: 5
        max: 5
        passed: true
        comment: Blue/yellow lines have excellent contrast; green/red histogram uses
          distinct hues
      - id: VQ-05
        name: Layout Balance
        score: 5
        max: 5
        passed: true
        comment: Plot fills canvas well with balanced margins, legend positioned cleanly
      - id: VQ-06
        name: Axis Labels
        score: 1
        max: 2
        passed: false
        comment: Descriptive labels but no units (MACD values are unitless)
      - id: VQ-07
        name: Grid & Legend
        score: 2
        max: 2
        passed: true
        comment: Minimal theme provides subtle grid, legends well placed on right
    spec_compliance:
      score: 25
      max: 25
      items:
      - id: SC-01
        name: Plot Type
        score: 8
        max: 8
        passed: true
        comment: Correct MACD chart with all three components (MACD line, Signal line,
          histogram)
      - id: SC-02
        name: Data Mapping
        score: 5
        max: 5
        passed: true
        comment: Time on X-axis, MACD values on Y-axis, correctly mapped
      - id: SC-03
        name: Required Features
        score: 5
        max: 5
        passed: true
        comment: 'All spec features present: MACD line, signal line, histogram bars,
          zero reference line, green/red coloring'
      - id: SC-04
        name: Data Range
        score: 3
        max: 3
        passed: true
        comment: Full range visible from -5.5 to 4
      - id: SC-05
        name: Legend Accuracy
        score: 2
        max: 2
        passed: true
        comment: Legends correctly label all elements
      - id: SC-06
        name: Title Format
        score: 2
        max: 2
        passed: true
        comment: Uses exact required format indicator-macd · letsplot · pyplots.ai
    data_quality:
      score: 18
      max: 20
      items:
      - id: DQ-01
        name: Feature Coverage
        score: 8
        max: 8
        passed: true
        comment: Shows multiple MACD/signal crossovers, both positive and negative
          histogram regions, trend changes
      - id: DQ-02
        name: Realistic Context
        score: 5
        max: 7
        passed: true
        comment: Plausible momentum oscillator pattern but synthetic (simulated prices
          with sine trend)
      - id: DQ-03
        name: Appropriate Scale
        score: 5
        max: 5
        passed: true
        comment: MACD values in reasonable range for typical stock data
    code_quality:
      score: 10
      max: 10
      items:
      - id: CQ-01
        name: KISS Structure
        score: 3
        max: 3
        passed: true
        comment: 'Clean linear flow: imports → data generation → EMA calculation →
          MACD components → plot → save'
      - id: CQ-02
        name: Reproducibility
        score: 3
        max: 3
        passed: true
        comment: Uses np.random.seed(42)
      - id: CQ-03
        name: Clean Imports
        score: 2
        max: 2
        passed: true
        comment: Only numpy, pandas, and lets-plot imported
      - id: CQ-04
        name: No Deprecated API
        score: 1
        max: 1
        passed: true
        comment: Uses current lets-plot API
      - id: CQ-05
        name: Output Correct
        score: 1
        max: 1
        passed: true
        comment: Saves as plot.png and plot.html
    library_features:
      score: 5
      max: 5
      items:
      - id: LF-01
        name: Distinctive Features
        score: 5
        max: 5
        passed: true
        comment: Uses ggplot2-style grammar with geom_bar + geom_line + geom_hline
          composition, scale_fill_manual/scale_color_manual, theme_minimal(), ggsave
          with scale parameter
  verdict: APPROVED
impl_tags:
  dependencies: []
  techniques:
  - layer-composition
  - html-export
  patterns:
  - data-generation
  - wide-to-long
  dataprep:
  - time-series
  - rolling-window
  styling:
  - alpha-blending
  - grid-styling
