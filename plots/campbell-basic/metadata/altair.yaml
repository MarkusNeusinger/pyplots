library: altair
specification_id: campbell-basic
created: '2026-02-15T21:10:25Z'
updated: '2026-02-15T21:37:40Z'
generated_by: claude-opus-4-5-20251101
workflow_run: 22043026897
issue: 4241
python_version: 3.14.3
library_version: 6.0.0
preview_url: https://storage.googleapis.com/pyplots-images/plots/campbell-basic/altair/plot.png
preview_thumb: https://storage.googleapis.com/pyplots-images/plots/campbell-basic/altair/plot_thumb.png
preview_html: https://storage.googleapis.com/pyplots-images/plots/campbell-basic/altair/plot.html
quality_score: 85
review:
  strengths:
  - Excellent data storytelling through size-differentiated critical speed markers
    (larger in operating range) and targeted annotations for key intersections
  - Clean colorblind-safe palette with good visual distinction between all five mode
    curves
  - Direct engine order labeling at right edge instead of legend avoids clutter and
    improves readability
  - Operating range shaded band provides immediate context for which critical speeds
    matter in practice
  - Realistic rotordynamics data with physically plausible mode behaviors (gyroscopic
    stiffening/softening effects)
  - Smart critical speed detection algorithm using sign-change method on dense interpolation
    grid
  weaknesses:
  - Engine order lines are slightly too faint at opacity 0.55 — increasing to 0.65-0.70
    would improve visibility without overwhelming mode curves
  - Layout balance could be improved — the legend takes significant space on the right
    side
  - Annotation placement uses per-row chart layers which is verbose; could be consolidated
    into fewer layers
  - No specific critical speed zone highlighting around individual intersections (spec
    mentions this as optional)
  image_description: 'The plot displays a Campbell Diagram titled "campbell-basic
    · altair · pyplots.ai" with subtitle "Natural Frequency Modes vs Engine Order
    Excitations". The X-axis shows "Rotational Speed (RPM)" from 0 to 6,000 and the
    Y-axis shows "Frequency (Hz)" from 0 to 310. Five natural frequency mode curves
    are plotted as thick solid colored lines: 1st Bending (blue, gently rising), 2nd
    Bending (orange, gently falling), 1st Torsional (green, rising), Axial (purple,
    nearly flat), and 3rd Bending (red, falling). Three engine order excitation lines
    (1x, 2x, 3x) appear as dashed gray diagonal lines from the origin, labeled at
    the right edge. Red diamond markers indicate critical speed intersections where
    engine order lines cross mode curves — larger diamonds highlight intersections
    within the 3000–5000 RPM operating range, which is shown as a light blue shaded
    vertical band with an italic "Operating Range" label at the bottom. Three key
    critical speeds are annotated in dark red text: "1st Bending / 3x" (~988 RPM),
    "1st Bending / 1x" (~4273 RPM), and "1st Torsional / 2x" (~4747 RPM). A legend
    on the right lists all five natural frequency modes. The grid is very subtle and
    the overall appearance is clean and professional.'
  criteria_checklist:
    visual_quality:
      score: 26
      max: 30
      items:
      - id: VQ-01
        name: Text Legibility
        score: 8
        max: 8
        passed: true
        comment: 'All font sizes explicitly set: title 28pt, axis titles 22pt, tick
          labels 18pt, legend 13-14pt. All perfectly readable.'
      - id: VQ-02
        name: No Overlap
        score: 5
        max: 6
        passed: true
        comment: Mostly clean layout. Annotations positioned with smart dx/dy offsets.
          Minor tightness near right-edge engine order labels.
      - id: VQ-03
        name: Element Visibility
        score: 5
        max: 6
        passed: true
        comment: Mode lines at strokeWidth=3 are clear. Critical speed diamonds well-sized
          (200/380). Engine order lines slightly faint at opacity 0.55.
      - id: VQ-04
        name: Color Accessibility
        score: 4
        max: 4
        passed: true
        comment: Colorblind-safe palette with good contrast between all five mode
          colors. No red-green only distinction.
      - id: VQ-05
        name: Layout Balance
        score: 2
        max: 4
        passed: false
        comment: Plot fills canvas reasonably but legend positioned outside to the
          right takes space. Some wasted space.
      - id: VQ-06
        name: Axis Labels & Title
        score: 2
        max: 2
        passed: true
        comment: 'Descriptive labels with units: Rotational Speed (RPM) and Frequency
          (Hz).'
    design_excellence:
      score: 14
      max: 20
      items:
      - id: DE-01
        name: Aesthetic Sophistication
        score: 6
        max: 8
        passed: true
        comment: Strong design with custom palette, operating range shading, size-differentiated
          markers, direct EO labels. Clearly above defaults.
      - id: DE-02
        name: Visual Refinement
        score: 4
        max: 6
        passed: true
        comment: Subtle grid (opacity 0.10), view stroke removed, domain styled. Good
          refinement but not fully polished.
      - id: DE-03
        name: Data Storytelling
        score: 4
        max: 6
        passed: true
        comment: Operating range highlight + size-differentiated markers + key annotations
          create clear visual hierarchy.
    spec_compliance:
      score: 14
      max: 15
      items:
      - id: SC-01
        name: Plot Type
        score: 5
        max: 5
        passed: true
        comment: Correct Campbell diagram with mode curves and engine order lines.
      - id: SC-02
        name: Required Features
        score: 3
        max: 4
        passed: true
        comment: All major features present. Operating range band present. No specific
          critical speed zone shading around individual intersections.
      - id: SC-03
        name: Data Mapping
        score: 3
        max: 3
        passed: true
        comment: X=RPM, Y=Hz correctly assigned. All data visible within scale.
      - id: SC-04
        name: Title & Legend
        score: 3
        max: 3
        passed: true
        comment: Title format correct. Legend shows Natural Frequencies with all 5
          mode labels.
    data_quality:
      score: 14
      max: 15
      items:
      - id: DQ-01
        name: Feature Coverage
        score: 5
        max: 6
        passed: true
        comment: 5 modes with varied behavior (rising/falling per gyroscopic effects),
          3 engine orders, multiple critical speed intersections.
      - id: DQ-02
        name: Realistic Context
        score: 5
        max: 5
        passed: true
        comment: Realistic rotordynamics scenario with plausible mode names and frequency
          ranges for rotating machinery.
      - id: DQ-03
        name: Appropriate Scale
        score: 4
        max: 4
        passed: true
        comment: 'Realistic values: 0-6000 RPM, 45-220 Hz base frequencies, sensible
          for turbomachinery analysis.'
    code_quality:
      score: 9
      max: 10
      items:
      - id: CQ-01
        name: KISS Structure
        score: 3
        max: 3
        passed: true
        comment: Imports → Data → Plot → Save. No functions or classes.
      - id: CQ-02
        name: Reproducibility
        score: 2
        max: 2
        passed: true
        comment: np.random.seed(42) set.
      - id: CQ-03
        name: Clean Imports
        score: 2
        max: 2
        passed: true
        comment: Only altair, numpy, pandas imported — all used.
      - id: CQ-04
        name: Code Elegance
        score: 1
        max: 2
        passed: true
        comment: Slightly verbose annotation handling with individual chart layers
          per annotation.
      - id: CQ-05
        name: Output & API
        score: 1
        max: 1
        passed: true
        comment: Saves as plot.png and plot.html correctly.
    library_mastery:
      score: 8
      max: 10
      items:
      - id: LM-01
        name: Idiomatic Usage
        score: 4
        max: 5
        passed: true
        comment: 'Good declarative grammar usage: layer composition with +, encoding
          channels, scales, legends.'
      - id: LM-02
        name: Distinctive Features
        score: 4
        max: 5
        passed: true
        comment: 'Uses Altair-distinctive features: declarative layer composition,
          alt.Title with subtitle, detail encoding, mark_rect for bands, tooltip encoding.'
  verdict: APPROVED
impl_tags:
  dependencies: []
  techniques:
  - annotations
  - layer-composition
  - html-export
  patterns:
  - data-generation
  - iteration-over-groups
  dataprep: []
  styling:
  - grid-styling
  - edge-highlighting
