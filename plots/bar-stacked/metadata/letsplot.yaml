library: letsplot
specification_id: bar-stacked
created: '2025-12-26T10:04:01Z'
updated: '2025-12-26T15:30:43Z'
generated_by: claude-opus-4-5-20251101
workflow_run: 20520476934
issue: 1947
python_version: 3.13.11
library_version: 4.8.2
preview_url: https://storage.googleapis.com/pyplots-images/plots/bar-stacked/letsplot/plot.png
preview_thumb: https://storage.googleapis.com/pyplots-images/plots/bar-stacked/letsplot/plot_thumb.png
preview_html: https://storage.googleapis.com/pyplots-images/plots/bar-stacked/letsplot/plot.html
quality_score: 93
review:
  strengths:
  - Excellent use of lets-plot ggplot2-style grammar with clean, readable code
  - Well-implemented tooltips with formatted values showing interactivity capability
  - Total value labels above each stack as recommended by the spec
  - Colorblind-safe palette starting with Python Blue (#306998)
  - Proper sizing with ggsize(1600, 900) and scale=3 for 4800x2700 output
  - Clean theme with styled legend background and appropriate font sizes
  weaknesses:
  - Data could show more variation in component proportions across quarters to better
    demonstrate part-to-whole analysis
  - Legend stacking order visually shows bottom-to-top but legend reads top-to-bottom
    (minor visual disconnect)
  image_description: 'The plot displays a stacked bar chart with 4 quarters (Q1, Q2,
    Q3, Q4) on the x-axis and "Sales (Thousands $)" on the y-axis ranging from 0 to
    450. Four product categories are stacked within each bar: Electronics (teal blue,
    #306998) at the bottom, Furniture (golden yellow, #FFD43B), Clothing (purple,
    #8B5CF6), and Accessories (orange, #F59E0B) at the top. Bold total labels appear
    above each stack: 315, 377, 386, 430 showing growth trend. A clean legend box
    on the right identifies "Product Category" with all four items. The title "bar-stacked
    · letsplot · pyplots.ai" is bold at the top. Minimal theme with no vertical gridlines
    and subtle horizontal gridlines.'
  criteria_checklist:
    visual_quality:
      score: 38
      max: 40
      items:
      - id: VQ-01
        name: Text Legibility
        score: 10
        max: 10
        passed: true
        comment: Title is large and bold (~28pt), axis titles ~22pt, tick labels ~18pt,
          all perfectly readable
      - id: VQ-02
        name: No Overlap
        score: 8
        max: 8
        passed: true
        comment: No overlapping text elements anywhere
      - id: VQ-03
        name: Element Visibility
        score: 8
        max: 8
        passed: true
        comment: Bars are well-sized with appropriate width (0.7), alpha 0.9 provides
          good visibility
      - id: VQ-04
        name: Color Accessibility
        score: 5
        max: 5
        passed: true
        comment: Colorblind-safe palette with good contrast between blue, yellow,
          purple, and orange
      - id: VQ-05
        name: Layout Balance
        score: 5
        max: 5
        passed: true
        comment: Plot fills canvas well, legend is appropriately placed on right with
          styled background
      - id: VQ-06
        name: Axis Labels
        score: 2
        max: 2
        passed: true
        comment: '"Quarter" and "Sales (Thousands $)" are descriptive with units'
      - id: VQ-07
        name: Grid & Legend
        score: 0
        max: 2
        passed: false
        comment: Grid is subtle but legend order doesn't match visual stack order
          (Electronics is at bottom in chart but first in legend which is correct,
          however the visual stacking shows Accessories on top but it's last in legend
          - this is acceptable)
    spec_compliance:
      score: 25
      max: 25
      items:
      - id: SC-01
        name: Plot Type
        score: 8
        max: 8
        passed: true
        comment: Correct stacked bar chart
      - id: SC-02
        name: Data Mapping
        score: 5
        max: 5
        passed: true
        comment: Quarters on X, Sales on Y, Products as stacked components
      - id: SC-03
        name: Required Features
        score: 5
        max: 5
        passed: true
        comment: Has distinct colors, legend, total labels above stacks, consistent
          component order
      - id: SC-04
        name: Data Range
        score: 3
        max: 3
        passed: true
        comment: Y-axis shows all data from 0 to above max total
      - id: SC-05
        name: Legend Accuracy
        score: 2
        max: 2
        passed: true
        comment: Legend labels match data correctly
      - id: SC-06
        name: Title Format
        score: 2
        max: 2
        passed: true
        comment: '"bar-stacked · letsplot · pyplots.ai" is correct'
    data_quality:
      score: 18
      max: 20
      items:
      - id: DQ-01
        name: Feature Coverage
        score: 7
        max: 8
        passed: true
        comment: Shows quarterly trends with 4 product categories, demonstrates part-to-whole
          relationships well, but all categories show similar relative proportions
          across quarters
      - id: DQ-02
        name: Realistic Context
        score: 7
        max: 7
        passed: true
        comment: Quarterly sales by product category is a real, comprehensible business
          scenario
      - id: DQ-03
        name: Appropriate Scale
        score: 4
        max: 5
        passed: true
        comment: Values in thousands are reasonable for sales data, though the range
          could show more variation
    code_quality:
      score: 9
      max: 10
      items:
      - id: CQ-01
        name: KISS Structure
        score: 3
        max: 3
        passed: true
        comment: 'Simple linear script: imports → data → plot → save'
      - id: CQ-02
        name: Reproducibility
        score: 3
        max: 3
        passed: true
        comment: Uses deterministic hardcoded data (no random seed needed)
      - id: CQ-03
        name: Clean Imports
        score: 2
        max: 2
        passed: true
        comment: Only pandas and lets_plot are imported, both used
      - id: CQ-04
        name: No Deprecated API
        score: 1
        max: 1
        passed: true
        comment: Uses current lets-plot API
      - id: CQ-05
        name: Output Correct
        score: 0
        max: 1
        passed: false
        comment: Saves as plot.png but also saves plot.html (not an issue, but path
          parameter usage is slightly unusual)
    library_features:
      score: 3
      max: 5
      items:
      - id: LF-01
        name: Uses distinctive library features
        score: 3
        max: 5
        passed: true
        comment: Uses layer_tooltips for interactivity, ggplot grammar, theme customization,
          but could leverage more lets-plot specific features like livemap or sampling
  verdict: APPROVED
