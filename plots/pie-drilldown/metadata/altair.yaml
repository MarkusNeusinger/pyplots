library: altair
specification_id: pie-drilldown
created: '2025-12-31T14:08:47Z'
updated: '2025-12-31T15:04:59Z'
generated_by: claude-opus-4-5-20251101
workflow_run: 20620543876
issue: 3072
python_version: 3.13.11
library_version: 6.0.0
preview_url: https://storage.googleapis.com/pyplots-images/plots/pie-drilldown/altair/plot.png
preview_thumb: https://storage.googleapis.com/pyplots-images/plots/pie-drilldown/altair/plot_thumb.png
preview_html: https://storage.googleapis.com/pyplots-images/plots/pie-drilldown/altair/plot.html
quality_score: 84
impl_tags:
  dependencies: []
  techniques:
  - html-export
  - layer-composition
  - hover-tooltips
  patterns:
  - data-generation
  dataprep: []
  styling: []
review:
  strengths:
  - Excellent visual layout with central main pie and surrounding drilldown charts
  - Creative solution to show drilldown concept statically with all levels visible
  - Good use of color consistency (shades within each department breakdown)
  - Rich tooltips with department, budget, and percentage information
  - Clean breadcrumb and instructional text
  - Interactive highlighting via selection parameter
  - Proper title format in subtitle
  weaknesses:
  - Does not implement true click-to-drill navigation (shows all levels simultaneously
    instead of one level at a time with click to reveal)
  - Uses helper function violating KISS principle (no functions/classes rule)
  - Minor text truncation on DevOps label in Engineering drilldown
  image_description: 'The plot displays a central donut chart showing "Company Budget
    Breakdown with Drilldown Navigation" with the subtitle "pie-drilldown · altair
    · pyplots.ai". The main central pie shows four departments: Engineering ($1.75M,
    54.8% in blue), Marketing ($0.74M, 23.1% in orange), Operations ($0.48M, 15.2%
    in teal), and HR ($0.22M, 6.9% in purple). The center displays "Total Budget $3.20M".


    Four smaller drilldown pie charts surround the main chart - Engineering breakdown
    (left top: Frontend, Backend, DevOps), Operations breakdown (left bottom: Facilities,
    IT Support), Marketing breakdown (right top: Digital, Content, Events), and HR
    breakdown (right bottom: Recruiting, Training). Each drilldown shows percentages
    and dollar amounts. A breadcrumb appears at top: "All Departments › Click any
    slice to explore team breakdown". An instruction line at the bottom explains interactivity.
    The colors use consistent shades within each department''s drilldown. All text
    is legible and the layout effectively shows the hierarchical relationship.'
  criteria_checklist:
    visual_quality:
      score: 33
      max: 40
      items:
      - id: VQ-01
        name: Text Legibility
        score: 8
        max: 10
        passed: true
        comment: All text readable, though some drilldown labels slightly small
      - id: VQ-02
        name: No Overlap
        score: 7
        max: 8
        passed: true
        comment: 'Minor overlap on "DevOps: $500K (28.5%)" label gets cut'
      - id: VQ-03
        name: Element Visibility
        score: 7
        max: 8
        passed: true
        comment: All pies well-sized, good donut proportions
      - id: VQ-04
        name: Color Accessibility
        score: 4
        max: 5
        passed: true
        comment: Good color scheme with distinct hues, shades differentiate within
          groups
      - id: VQ-05
        name: Layout Balance
        score: 5
        max: 5
        passed: true
        comment: Excellent layout with center main chart and drilldowns on sides
      - id: VQ-07
        name: Grid & Legend
        score: 2
        max: 2
        passed: true
        comment: No grid needed; inline labels work well
    spec_compliance:
      score: 20
      max: 25
      items:
      - id: SC-01
        name: Plot Type
        score: 8
        max: 8
        passed: true
        comment: Correct pie chart with hierarchical drilldown
      - id: SC-02
        name: Data Mapping
        score: 5
        max: 5
        passed: true
        comment: Values correctly mapped to slice sizes
      - id: SC-03
        name: Required Features
        score: 3
        max: 5
        passed: true
        comment: Has breadcrumb and hierarchy display; but lacks true click navigation
          (shows all levels at once rather than drilling on click)
      - id: SC-04
        name: Data Range
        score: 3
        max: 3
        passed: true
        comment: All data visible
      - id: SC-06
        name: Title Format
        score: 1
        max: 2
        passed: true
        comment: Uses subtitle format, but main title doesn't include spec-id
    data_quality:
      score: 18
      max: 20
      items:
      - id: DQ-01
        name: Feature Coverage
        score: 7
        max: 8
        passed: true
        comment: Shows 2-level hierarchy, multiple categories per level
      - id: DQ-02
        name: Realistic Context
        score: 7
        max: 7
        passed: true
        comment: Company budget breakdown is excellent real-world scenario
      - id: DQ-03
        name: Appropriate Scale
        score: 4
        max: 5
        passed: true
        comment: Budget values are realistic for company departments
    code_quality:
      score: 8
      max: 10
      items:
      - id: CQ-01
        name: KISS Structure
        score: 1
        max: 3
        passed: false
        comment: Uses helper function (create_drilldown), not pure KISS
      - id: CQ-02
        name: Reproducibility
        score: 3
        max: 3
        passed: true
        comment: Deterministic data, no randomness
      - id: CQ-03
        name: Clean Imports
        score: 2
        max: 2
        passed: true
        comment: Only altair and pandas imported
      - id: CQ-04
        name: No Deprecated API
        score: 1
        max: 1
        passed: true
        comment: Modern Altair syntax
      - id: CQ-05
        name: Output Correct
        score: 1
        max: 1
        passed: true
        comment: Saves as plot.png and plot.html
    library_features:
      score: 5
      max: 5
      items:
      - id: LF-01
        name: Uses distinctive library features
        score: 5
        max: 5
        passed: true
        comment: Excellent use of Altair's declarative composition, selection parameters,
          tooltips, and vconcat/hconcat for layout
  verdict: APPROVED
