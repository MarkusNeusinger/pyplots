library: plotnine
specification_id: bubble-map-geographic
created: '2026-01-10T06:09:49Z'
updated: '2026-01-10T06:12:32Z'
generated_by: claude-opus-4-5-20251101
workflow_run: 20873959857
issue: 3625
python_version: 3.13.11
library_version: 0.15.2
preview_url: https://storage.googleapis.com/pyplots-images/plots/bubble-map-geographic/plotnine/plot.png
preview_thumb: https://storage.googleapis.com/pyplots-images/plots/bubble-map-geographic/plotnine/plot_thumb.png
preview_html: null
quality_score: 91
review:
  strengths:
  - Excellent use of scale_size_area() to properly scale bubble area (not radius)
    to data values
  - Clean, professional appearance with well-chosen colorblind-safe palette
  - Comprehensive real-world dataset with 30 major cities across all continents
  - Creative solution for basemap using simplified continent polygons via geom_polygon
  - Good alpha transparency (0.7) for overlapping bubbles
  - Proper coord_fixed(ratio=1.0) for accurate geographic projection
  weaknesses:
  - Grid lines are slightly too prominent (alpha=0.5, should be 0.2-0.4 for subtlety)
  - Region legend shows tiny dots instead of circles that match the bubble aesthetic
  image_description: 'The plot displays a world map visualization showing city populations
    as sized bubbles. The background has a light blue color representing oceans, with
    simplified gray continent polygons serving as a basemap (North America, South
    America, Europe, Africa, Asia, and Australia). Bubbles are positioned at geographic
    coordinates and sized proportionally to population (millions). Colors represent
    regions: purple for Africa, blue for Asia, yellow for Europe, green for North
    America, cyan for Oceania, and red for South America. The title "World City Populations
    · bubble-map-geographic · plotnine · pyplots.ai" appears at the top in bold. Two
    legends on the right show Population (M) with circles of sizes 10, 20, 30, and
    Region with colored dots for each continent. Axis labels show Longitude (°) and
    Latitude (°).'
  criteria_checklist:
    visual_quality:
      score: 36
      max: 40
      items:
      - id: VQ-01
        name: Text Legibility
        score: 10
        max: 10
        passed: true
        comment: Title at 24pt bold, axis labels at 20pt, tick labels at 16pt, legend
          text at 14-18pt - all perfectly readable
      - id: VQ-02
        name: No Overlap
        score: 8
        max: 8
        passed: true
        comment: No overlapping text elements, bubbles have appropriate transparency
      - id: VQ-03
        name: Element Visibility
        score: 6
        max: 8
        passed: true
        comment: Bubble sizes well-adapted with alpha=0.7, though some smaller cities
          could be slightly more visible
      - id: VQ-04
        name: Color Accessibility
        score: 5
        max: 5
        passed: true
        comment: Uses colorblind-safe palette with distinct hues for each region
      - id: VQ-05
        name: Layout Balance
        score: 5
        max: 5
        passed: true
        comment: Plot fills canvas well, legends positioned to the right, good use
          of 16:9 aspect ratio
      - id: VQ-06
        name: Axis Labels
        score: 2
        max: 2
        passed: true
        comment: 'Descriptive with units: Longitude (°) and Latitude (°)'
      - id: VQ-07
        name: Grid & Legend
        score: 0
        max: 2
        passed: false
        comment: Grid is slightly too prominent (alpha=0.5), region legend markers
          are very small dots
    spec_compliance:
      score: 23
      max: 25
      items:
      - id: SC-01
        name: Plot Type
        score: 8
        max: 8
        passed: true
        comment: Correct bubble map with geographic context
      - id: SC-02
        name: Data Mapping
        score: 5
        max: 5
        passed: true
        comment: Longitude/latitude correctly mapped, size encoding population
      - id: SC-03
        name: Required Features
        score: 4
        max: 5
        passed: true
        comment: Has basemap, size legend, color grouping, transparency; missing minimum
          bubble size
      - id: SC-04
        name: Data Range
        score: 3
        max: 3
        passed: true
        comment: Full world coverage with xlim(-180, 180), ylim(-60, 80)
      - id: SC-05
        name: Legend Accuracy
        score: 2
        max: 2
        passed: true
        comment: Both legends correctly labeled
      - id: SC-06
        name: Title Format
        score: 1
        max: 2
        passed: false
        comment: Title is correct but spec-id should be more prominent
    data_quality:
      score: 20
      max: 20
      items:
      - id: DQ-01
        name: Feature Coverage
        score: 8
        max: 8
        passed: true
        comment: Shows wide range of populations (3.4M to 37.4M), multiple regions,
          geographic spread
      - id: DQ-02
        name: Realistic Context
        score: 7
        max: 7
        passed: true
        comment: Uses real world cities with accurate population data
      - id: DQ-03
        name: Appropriate Scale
        score: 5
        max: 5
        passed: true
        comment: Population values in millions are accurate for major world cities
    code_quality:
      score: 10
      max: 10
      items:
      - id: CQ-01
        name: KISS Structure
        score: 3
        max: 3
        passed: true
        comment: 'Clean linear structure: imports → data → plot → save'
      - id: CQ-02
        name: Reproducibility
        score: 3
        max: 3
        passed: true
        comment: Uses np.random.seed(42)
      - id: CQ-03
        name: Clean Imports
        score: 2
        max: 2
        passed: true
        comment: All imports are used
      - id: CQ-04
        name: No Deprecated API
        score: 1
        max: 1
        passed: true
        comment: Uses current plotnine API
      - id: CQ-05
        name: Output Correct
        score: 1
        max: 1
        passed: true
        comment: Saves as plot.png
    library_features:
      score: 2
      max: 5
      items:
      - id: LF-01
        name: Distinctive Features
        score: 2
        max: 5
        passed: false
        comment: Uses grammar of graphics with ggplot, scale_size_area, and theme
          customization, but creates manual polygon basemaps rather than using dedicated
          mapping features
  verdict: APPROVED
impl_tags:
  dependencies: []
  techniques:
  - layer-composition
  - custom-legend
  patterns:
  - data-generation
  dataprep: []
  styling:
  - alpha-blending
  - grid-styling
