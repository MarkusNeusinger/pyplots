library: altair
specification_id: violin-basic
created: '2025-12-23T00:38:09Z'
updated: '2026-02-21T22:33:26Z'
generated_by: claude-opus-4-6
workflow_run: 20447779967
issue: 0
python_version: 3.14.3
library_version: 6.0.0
preview_url: https://storage.googleapis.com/pyplots-images/plots/violin-basic/altair/plot.png
preview_thumb: https://storage.googleapis.com/pyplots-images/plots/violin-basic/altair/plot_thumb.png
preview_html: https://storage.googleapis.com/pyplots-images/plots/violin-basic/altair/plot.html
quality_score: 89
impl_tags:
  dependencies: []
  techniques:
  - faceting
  - layer-composition
  - hover-tooltips
  - html-export
  patterns:
  - data-generation
  - iteration-over-groups
  - groupby-aggregation
  dataprep:
  - kde
  styling:
  - alpha-blending
  - grid-styling
review:
  strengths:
  - Excellent declarative use of Altair transform_density for KDE computation, avoiding
    manual scipy calculations
  - Bimodal Sales distribution is a smart data choice that demonstrates violin plot
    advantages over box plots
  - Clean faceted layout with independent x-scales ensures proper violin mirroring
  - Professional layered composition (violin area + IQR rule + median dot) with good
    visual hierarchy
  - All font sizes explicitly set and meeting readability thresholds
  weaknesses:
  - 'Two similar blue hues (#306998 and #4B8BBE) in a 4-color palette reduce color
    distinctiveness'
  - Quartile stats merged into full dataframe cause redundant overlapping graphical
    elements
  - Design could be elevated from good to publication-ready with a more distinct palette
    and stronger visual emphasis
  image_description: 'The plot displays four faceted violin plots showing salary distributions
    by department (Engineering, Marketing, Sales, Support). Each violin is a different
    color: Engineering in dark blue (#306998), Marketing in orange (#E5832D), Sales
    in light blue (#4B8BBE), and Support in brown/olive (#8B6C42). The violins are
    mirrored (symmetric KDE shapes) with a dark vertical IQR rule (Q1 to Q3) and a
    white dot with dark border marking the median inside each. The title "violin-basic
    · altair · pyplots.ai" is at the top in large font. The Y-axis is labeled "Salary
    ($)" with values ranging from ~10,000 to 140,000. Department names appear below
    each facet. The Sales violin is clearly bimodal with two peaks (~50k and ~90k),
    Engineering is centered around ~92k, Marketing around ~70k, and Support around
    ~55k. The background is clean white with subtle dashed grid lines. No legend is
    shown — facet headers identify each department.'
  criteria_checklist:
    visual_quality:
      score: 29
      max: 30
      items:
      - id: VQ-01
        name: Text Legibility
        score: 8
        max: 8
        passed: true
        comment: 'All font sizes explicitly set: title=28, axis title=22, ticks=18,
          facet headers=20. All meet thresholds.'
      - id: VQ-02
        name: No Overlap
        score: 6
        max: 6
        passed: true
        comment: No text overlap. Each violin in its own facet, labels well-spaced.
      - id: VQ-03
        name: Element Visibility
        score: 6
        max: 6
        passed: true
        comment: Violins visible at opacity=0.75. IQR rules (strokeWidth=5) and median
          dots (size=250) are prominent.
      - id: VQ-04
        name: Color Accessibility
        score: 3
        max: 4
        passed: false
        comment: 'Two similar blue hues (#306998 and #4B8BBE) reduce distinctiveness.
          Faceting mitigates but palette is not maximally accessible.'
      - id: VQ-05
        name: Layout & Canvas
        score: 4
        max: 4
        passed: true
        comment: Good canvas utilization. Violins fill vertical space, facets span
          width, balanced margins.
      - id: VQ-06
        name: Axis Labels & Title
        score: 2
        max: 2
        passed: true
        comment: Y-axis 'Salary ($)' with units. Title in correct format.
    design_excellence:
      score: 12
      max: 20
      items:
      - id: DE-01
        name: Aesthetic Sophistication
        score: 5
        max: 8
        passed: false
        comment: Custom Python-themed palette, clean layered composition, removed
          view borders. Above defaults but two-blue palette prevents publication-quality.
      - id: DE-02
        name: Visual Refinement
        score: 4
        max: 6
        passed: true
        comment: Subtle dashed grid (opacity=0.2), no view stroke, clean facet spacing,
          intentional violin opacity.
      - id: DE-03
        name: Data Storytelling
        score: 3
        max: 6
        passed: false
        comment: Bimodal Sales distribution creates natural focal point. Above default
          display but no explicit visual emphasis guiding viewer.
    spec_compliance:
      score: 15
      max: 15
      items:
      - id: SC-01
        name: Plot Type
        score: 5
        max: 5
        passed: true
        comment: Correct violin plot using kernel density estimation.
      - id: SC-02
        name: Required Features
        score: 4
        max: 4
        passed: true
        comment: Quartile markers (IQR rule), mirrored density (stack=center), median
          marker (white dot). All required features present.
      - id: SC-03
        name: Data Mapping
        score: 3
        max: 3
        passed: true
        comment: Salary on Y-axis, departments faceted on X. All data visible.
      - id: SC-04
        name: Title & Legend
        score: 3
        max: 3
        passed: true
        comment: Title 'violin-basic · altair · pyplots.ai' correct. Facet headers
          serve as category labels.
    data_quality:
      score: 15
      max: 15
      items:
      - id: DQ-01
        name: Feature Coverage
        score: 6
        max: 6
        passed: true
        comment: 'Diverse distributions: unimodal normal and bimodal. Different spreads,
          medians, and shapes.'
      - id: DQ-02
        name: Realistic Context
        score: 5
        max: 5
        passed: true
        comment: Salary distributions by department is a real-world, neutral business
          scenario.
      - id: DQ-03
        name: Appropriate Scale
        score: 4
        max: 4
        passed: true
        comment: 'All salary ranges realistic: Engineering ~92k, Marketing ~70k, Sales
          bimodal ~50k/92k, Support ~55k.'
    code_quality:
      score: 9
      max: 10
      items:
      - id: CQ-01
        name: KISS Structure
        score: 3
        max: 3
        passed: true
        comment: 'Linear flow: imports, data generation, plot construction, save.'
      - id: CQ-02
        name: Reproducibility
        score: 2
        max: 2
        passed: true
        comment: np.random.seed(42) set.
      - id: CQ-03
        name: Clean Imports
        score: 2
        max: 2
        passed: true
        comment: All imports (altair, numpy, pandas) are used.
      - id: CQ-04
        name: Code Elegance
        score: 1
        max: 2
        passed: false
        comment: Quartile stats merged into full dataframe causes 150 overlapping
          IQR rules and median dots per department.
      - id: CQ-05
        name: Output & API
        score: 1
        max: 1
        passed: true
        comment: Saves plot.png with scale_factor=3.0 and plot.html. Current Altair
          API.
    library_mastery:
      score: 9
      max: 10
      items:
      - id: LM-01
        name: Idiomatic Usage
        score: 5
        max: 5
        passed: true
        comment: Expert use of transform_density, alt.layer, faceting, resolve_scale,
          configure_*, proper encoding types.
      - id: LM-02
        name: Distinctive Features
        score: 4
        max: 5
        passed: true
        comment: transform_density, stack=center mirroring, resolve_scale(x=independent),
          native tooltips are distinctive Altair features.
  verdict: REJECTED
