library: plotly
specification_id: hexbin-map-geographic
created: '2026-01-20T21:16:12Z'
updated: '2026-01-20T21:36:42Z'
generated_by: claude-opus-4-5-20251101
workflow_run: 21187394771
issue: 3767
python_version: 3.13.11
library_version: 6.5.2
preview_url: https://storage.googleapis.com/pyplots-images/plots/hexbin-map-geographic/plotly/plot.png
preview_thumb: https://storage.googleapis.com/pyplots-images/plots/hexbin-map-geographic/plotly/plot_thumb.png
preview_html: https://storage.googleapis.com/pyplots-images/plots/hexbin-map-geographic/plotly/plot.html
quality_score: 91
review:
  strengths:
  - Excellent use of H3 library for true hexagonal binning (not approximated)
  - Well-implemented hover tooltips showing count, mean fare, and total fare with
    proper formatting
  - Clean sequential colormap (YlOrRd) with appropriate transparency for base map
    visibility
  - Realistic NYC taxi scenario demonstrating practical application
  - Dark hexagon outlines make cell boundaries clearly visible
  - Proper GeoJSON construction for Plotly choropleth
  weaknesses:
  - Title uses "NYC Taxi Fares" instead of more standardized format placing spec-id
    first
  - Fixed H3 resolution (9) without demonstrating configurability mentioned in spec
  - Minor code inefficiency calling cell_to_boundary multiple times per row in GeoJSON
    construction
  image_description: The plot displays a hexagonal binning map of NYC taxi pickup
    locations overlaid on a CARTO Positron base map. The hexagonal cells are colored
    using a YlOrRd (yellow-orange-red) sequential colormap representing average fare
    values ranging from approximately $20 to over $100. The title "NYC Taxi Pickups
    · hexbin-map-geographic · plotly · pyplots.ai" is centered at the top. The colorbar
    on the right side is labeled "Avg Fare ($)" with tick values from 20 to 100. The
    geographic area covers the NYC metropolitan region including Manhattan, parts
    of New Jersey (Jersey City, Newark), Brooklyn, and surrounding areas. Hexagons
    have dark boundary lines making individual cells clearly distinguishable. Multiple
    clusters of high-density areas are visible, with some cells showing higher average
    fares (darker red/orange) scattered throughout. The map background shows street
    networks, city labels, and geographic features in light gray tones.
  criteria_checklist:
    visual_quality:
      score: 36
      max: 40
      items:
      - id: VQ-01
        name: Text Legibility
        score: 9
        max: 10
        passed: true
        comment: Title readable at 28pt, colorbar labels clear. Title could be slightly
          larger.
      - id: VQ-02
        name: No Overlap
        score: 8
        max: 8
        passed: true
        comment: No overlapping text elements; hexagons do not interfere with labels.
      - id: VQ-03
        name: Element Visibility
        score: 8
        max: 8
        passed: true
        comment: Hexagons clearly visible with dark outlines and 0.75 opacity.
      - id: VQ-04
        name: Color Accessibility
        score: 5
        max: 5
        passed: true
        comment: YlOrRd is colorblind-safe sequential colormap.
      - id: VQ-05
        name: Layout Balance
        score: 4
        max: 5
        passed: true
        comment: Good proportions, slight whitespace around edges.
      - id: VQ-06
        name: Axis Labels
        score: 0
        max: 2
        passed: true
        comment: N/A for geographic maps - colorbar has proper label with units.
      - id: VQ-07
        name: Grid & Legend
        score: 2
        max: 2
        passed: true
        comment: Colorbar well-placed on right, no distracting grid.
    spec_compliance:
      score: 23
      max: 25
      items:
      - id: SC-01
        name: Plot Type
        score: 8
        max: 8
        passed: true
        comment: Correct hexagonal binning map using H3 library.
      - id: SC-02
        name: Data Mapping
        score: 5
        max: 5
        passed: true
        comment: Lat/lon correctly mapped; fare values aggregated per cell.
      - id: SC-03
        name: Required Features
        score: 4
        max: 5
        passed: true
        comment: All three aggregation methods computed. Missing size configurability
          demonstration.
      - id: SC-04
        name: Data Range
        score: 3
        max: 3
        passed: true
        comment: All data visible within map bounds.
      - id: SC-05
        name: Legend Accuracy
        score: 2
        max: 2
        passed: true
        comment: Colorbar accurately represents average fare with dollar prefix.
      - id: SC-06
        name: Title Format
        score: 1
        max: 2
        passed: false
        comment: Uses 'NYC Taxi Fares' instead of standardized spec-id format.
    data_quality:
      score: 18
      max: 20
      items:
      - id: DQ-01
        name: Feature Coverage
        score: 7
        max: 8
        passed: true
        comment: Shows clustering, density variation, fare variation by location.
      - id: DQ-02
        name: Realistic Context
        score: 7
        max: 7
        passed: true
        comment: NYC taxi pickups is perfect real-world scenario.
      - id: DQ-03
        name: Appropriate Scale
        score: 4
        max: 5
        passed: true
        comment: Fare values ($20-100+) realistic for NYC. 5000 points appropriate.
    code_quality:
      score: 9
      max: 10
      items:
      - id: CQ-01
        name: KISS Structure
        score: 3
        max: 3
        passed: true
        comment: 'Linear structure: imports → data → H3 → aggregation → GeoJSON →
          plot → save.'
      - id: CQ-02
        name: Reproducibility
        score: 3
        max: 3
        passed: true
        comment: np.random.seed(42) set for reproducibility.
      - id: CQ-03
        name: Clean Imports
        score: 2
        max: 2
        passed: true
        comment: 'All imports used: h3, numpy, pandas, plotly.express.'
      - id: CQ-04
        name: No Deprecated API
        score: 0
        max: 1
        passed: false
        comment: cell_to_boundary called multiple times per row - inefficient.
      - id: CQ-05
        name: Output Correct
        score: 1
        max: 1
        passed: true
        comment: Saves as plot.png and plot.html correctly.
    library_features:
      score: 5
      max: 5
      items:
      - id: LF-01
        name: Distinctive Features
        score: 5
        max: 5
        passed: true
        comment: Excellent use of choropleth_map, custom GeoJSON, CARTO base map,
          interactive hover, HTML export.
  verdict: APPROVED
impl_tags:
  dependencies:
  - h3
  techniques:
  - hover-tooltips
  - html-export
  - colorbar
  patterns:
  - data-generation
  - groupby-aggregation
  dataprep:
  - binning
  styling:
  - custom-colormap
  - alpha-blending
  - edge-highlighting
