library: letsplot
specification_id: indicator-ema
created: '2026-01-11T00:20:31Z'
updated: '2026-01-11T00:28:37Z'
generated_by: claude-opus-4-5-20251101
workflow_run: 20886563964
issue: 3652
python_version: 3.13.11
library_version: 4.8.2
preview_url: https://storage.googleapis.com/pyplots-images/plots/indicator-ema/letsplot/plot.png
preview_thumb: https://storage.googleapis.com/pyplots-images/plots/indicator-ema/letsplot/plot_thumb.png
preview_html: https://storage.googleapis.com/pyplots-images/plots/indicator-ema/letsplot/plot.html
quality_score: 92
review:
  strengths:
  - Excellent use of wide-to-long data transformation for ggplot-style plotting
  - Proper EMA calculation using pandas ewm with correct span parameters
  - Good visual hierarchy with thicker price line and thinner EMA lines via scale_size_manual
  - Clean, readable code following KISS principle
  - Correct title format and clear axis labeling with units
  weaknesses:
  - Legend shows duplicate Series header for both color and size aesthetics (minor
    visual duplication)
  - Could highlight EMA crossover points as suggested in spec notes (optional enhancement)
  image_description: 'The plot displays an EMA (Exponential Moving Average) indicator
    chart with 120 trading days of simulated stock price data. Three lines are shown:
    a blue "Close Price" line (thicker, more volatile), a yellow "EMA 12" line (smoother
    short-term average), and a red "EMA 26" line (smoothest long-term average). The
    chart shows a clear downtrend from ~$101 in early January to a low of ~$88 in
    late February, followed by a sideways/recovery pattern through May. The X-axis
    shows dates (Jan 02 through late May), the Y-axis shows "Price (USD)" ranging
    from 87-108. A legend on the right side identifies the three series. The title
    correctly displays "indicator-ema · letsplot · pyplots.ai". Grid lines are dashed
    and subtle. The layout uses the full canvas effectively.'
  criteria_checklist:
    visual_quality:
      score: 36
      max: 40
      items:
      - id: VQ-01
        name: Text Legibility
        score: 10
        max: 10
        passed: true
        comment: Title, axis labels, and tick labels are all clearly readable at appropriate
          sizes
      - id: VQ-02
        name: No Overlap
        score: 8
        max: 8
        passed: true
        comment: No overlapping text elements, X-axis date labels well spaced
      - id: VQ-03
        name: Element Visibility
        score: 6
        max: 8
        passed: true
        comment: Lines are visible and distinguishable, though price line could use
          slight alpha for clarity where it overlaps EMAs
      - id: VQ-04
        name: Color Accessibility
        score: 5
        max: 5
        passed: true
        comment: Blue, yellow, and red are colorblind-distinguishable (not red-green
          only)
      - id: VQ-05
        name: Layout Balance
        score: 5
        max: 5
        passed: true
        comment: Plot fills canvas well with balanced margins
      - id: VQ-06
        name: Axis Labels
        score: 2
        max: 2
        passed: true
        comment: Y-axis has Price (USD) with units, X-axis has Date
      - id: VQ-07
        name: Grid & Legend
        score: 0
        max: 2
        passed: false
        comment: Grid is nicely dashed and subtle, but legend duplicates Series label
          for both color and size mappings
    spec_compliance:
      score: 25
      max: 25
      items:
      - id: SC-01
        name: Plot Type
        score: 8
        max: 8
        passed: true
        comment: Correct line chart with price and EMA overlays
      - id: SC-02
        name: Data Mapping
        score: 5
        max: 5
        passed: true
        comment: Date on X-axis, price values on Y-axis correctly assigned
      - id: SC-03
        name: Required Features
        score: 5
        max: 5
        passed: true
        comment: Price line prominent with thicker width, two EMA lines (12 and 26
          periods) overlaid with thinner widths, distinct colors per spec
      - id: SC-04
        name: Data Range
        score: 3
        max: 3
        passed: true
        comment: All data visible, axes show full range
      - id: SC-05
        name: Legend Accuracy
        score: 2
        max: 2
        passed: true
        comment: Legend correctly labels Close Price, EMA 12, and EMA 26
      - id: SC-06
        name: Title Format
        score: 2
        max: 2
        passed: true
        comment: Uses correct format indicator-ema · letsplot · pyplots.ai
    data_quality:
      score: 18
      max: 20
      items:
      - id: DQ-01
        name: Feature Coverage
        score: 6
        max: 8
        passed: true
        comment: Shows trend (downtrend then recovery), EMA smoothing effect, and
          EMA crossovers. Could show golden cross/death cross more explicitly
      - id: DQ-02
        name: Realistic Context
        score: 7
        max: 7
        passed: true
        comment: Stock price data is plausible with realistic volatility and price
          movements
      - id: DQ-03
        name: Appropriate Scale
        score: 5
        max: 5
        passed: true
        comment: Prices around $87-108 are realistic for a stock, 120 trading days
          is appropriate
    code_quality:
      score: 10
      max: 10
      items:
      - id: CQ-01
        name: KISS Structure
        score: 3
        max: 3
        passed: true
        comment: 'Clean linear flow: imports → data generation → reshaping → plot
          → save'
      - id: CQ-02
        name: Reproducibility
        score: 3
        max: 3
        passed: true
        comment: Uses np.random.seed(42)
      - id: CQ-03
        name: Clean Imports
        score: 2
        max: 2
        passed: true
        comment: Only necessary imports used
      - id: CQ-04
        name: No Deprecated API
        score: 1
        max: 1
        passed: true
        comment: Uses current lets-plot API
      - id: CQ-05
        name: Output Correct
        score: 1
        max: 1
        passed: true
        comment: Saves as plot.png and plot.html
    library_features:
      score: 3
      max: 5
      items:
      - id: LF-01
        name: Distinctive Features
        score: 3
        max: 5
        passed: true
        comment: Uses ggplot-style grammar (aes, geom_line, scale_*, theme), scale_size_manual
          for differentiated line widths, theme customization. Could leverage more
          lets-plot specific features like tooltips for interactivity
  verdict: APPROVED
impl_tags:
  dependencies: []
  techniques:
  - layer-composition
  - manual-ticks
  - html-export
  patterns:
  - data-generation
  - wide-to-long
  dataprep:
  - time-series
  - rolling-window
  styling:
  - grid-styling
