library: altair
specification_id: ks-test-comparison
created: '2026-02-17T20:11:31Z'
updated: '2026-02-17T20:14:53Z'
generated_by: claude-opus-4-5-20251101
workflow_run: 22113798995
issue: 4130
python_version: 3.14.3
library_version: 6.0.0
preview_url: https://storage.googleapis.com/pyplots-images/plots/ks-test-comparison/altair/plot.png
preview_thumb: https://storage.googleapis.com/pyplots-images/plots/ks-test-comparison/altair/plot_thumb.png
preview_html: https://storage.googleapis.com/pyplots-images/plots/ks-test-comparison/altair/plot.html
quality_score: 79
review:
  strengths:
  - 'Perfect spec compliance: all required features (ECDFs, K-S statistic, max divergence
    line, p-value, legend) are present and well-implemented'
  - Realistic credit scoring context with plausible data values
  - Explicit font sizing throughout ensures readability at target resolution
  - Good use of Altair's declarative layered composition pattern
  - Subtitle with K-S statistic and p-value is a smart design choice
  weaknesses:
  - X-axis tick density is excessive (every 20 units across a 700-unit range creates
    ~35 ticks), making the bottom of the chart feel crowded and hard to read
  - The red annotation color (#D62728) is somewhat close to the orange ECDF line (#E8833A),
    which could cause confusion about which elements are related
  - No visual storytelling beyond data display — the viewer must interpret the significance
    of D=0.623 themselves; consider adding a shaded region between the two ECDFs at
    the max divergence point, or a more prominent annotation explaining the result
  - Design is clean but stays within well-configured default territory rather than
    reaching publication-quality aesthetics
  - The D=0.623 label placement (offset by +15 on the x-axis) may not scale well with
    different data ranges
  image_description: 'The plot displays two empirical cumulative distribution functions
    (ECDFs) rendered as step functions: "Good Customers" in blue (#306998) and "Bad
    Customers" in orange (#E8833A). A red dashed vertical line at approximately credit
    score 540 marks the point of maximum divergence between the two distributions.
    A bold red text label "D = 0.623" is positioned to the right of this vertical
    line at the midpoint. The title reads "ks-test-comparison · altair · pyplots.ai"
    with a subtitle "K-S Statistic: 0.623 | p < 0.001". The x-axis is labeled "Credit
    Score" ranging from ~260 to ~940 with ticks every 20 units. The y-axis is labeled
    "Cumulative Proportion" ranging from 0.00 to 1.00. A legend in the top-right corner
    identifies the two groups. The grid is very subtle (low opacity), and the overall
    layout is clean with a white background.'
  criteria_checklist:
    visual_quality:
      score: 24
      max: 30
      items:
      - id: VQ-01
        name: Text Legibility
        score: 8
        max: 8
        passed: true
        comment: 'All font sizes explicitly set: title 28pt, subtitle 20pt, axis labels
          22pt, ticks 18pt, legend 18pt'
      - id: VQ-02
        name: No Overlap
        score: 6
        max: 6
        passed: true
        comment: No overlapping text elements anywhere
      - id: VQ-03
        name: Element Visibility
        score: 5
        max: 6
        passed: true
        comment: Lines visible with strokeWidth=3 but could use more visual distinction
          between the two ECDFs
      - id: VQ-04
        name: Color Accessibility
        score: 3
        max: 4
        passed: true
        comment: Blue/orange pair is reasonable but red annotation line is close to
          the orange ECDF
      - id: VQ-05
        name: Layout & Canvas
        score: 2
        max: 4
        passed: false
        comment: X-axis ticks every 20 units are very dense (~35 ticks), making the
          bottom area crowded
      - id: VQ-06
        name: Axis Labels & Title
        score: 2
        max: 2
        passed: true
        comment: 'Descriptive labels: Credit Score and Cumulative Proportion'
    design_excellence:
      score: 10
      max: 20
      items:
      - id: DE-01
        name: Aesthetic Sophistication
        score: 4
        max: 8
        passed: false
        comment: Thoughtful color choices and explicit typography but looks like a
          well-configured Altair default
      - id: DE-02
        name: Visual Refinement
        score: 4
        max: 6
        passed: true
        comment: Grid opacity reduced to 0.2, view stroke removed; good refinement
          but not fully polished
      - id: DE-03
        name: Data Storytelling
        score: 2
        max: 6
        passed: false
        comment: K-S statistic displayed but no visual hierarchy guides the viewer
          to the insight
    spec_compliance:
      score: 15
      max: 15
      items:
      - id: SC-01
        name: Plot Type
        score: 5
        max: 5
        passed: true
        comment: 'Correct: two ECDFs as step functions with K-S distance visualization'
      - id: SC-02
        name: Required Features
        score: 4
        max: 4
        passed: true
        comment: 'All required features present: both ECDFs, K-S statistic, max divergence
          line, p-value, legend'
      - id: SC-03
        name: Data Mapping
        score: 3
        max: 3
        passed: true
        comment: X=Credit Score, Y=Cumulative Proportion, Y-axis correctly 0-1
      - id: SC-04
        name: Title & Legend
        score: 3
        max: 3
        passed: true
        comment: Correct title format and legend labels match data
    data_quality:
      score: 14
      max: 15
      items:
      - id: DQ-01
        name: Feature Coverage
        score: 5
        max: 6
        passed: true
        comment: Two clearly different distributions with strong separation; could
          show edge cases
      - id: DQ-02
        name: Realistic Context
        score: 5
        max: 5
        passed: true
        comment: Credit scoring is a classic K-S test application mentioned in the
          spec
      - id: DQ-03
        name: Appropriate Scale
        score: 4
        max: 4
        passed: true
        comment: Credit scores in realistic range (~260-940)
    code_quality:
      score: 9
      max: 10
      items:
      - id: CQ-01
        name: KISS Structure
        score: 3
        max: 3
        passed: true
        comment: 'Clean linear structure: imports, data, compute, plot, save'
      - id: CQ-02
        name: Reproducibility
        score: 2
        max: 2
        passed: true
        comment: np.random.seed(42) set
      - id: CQ-03
        name: Clean Imports
        score: 2
        max: 2
        passed: true
        comment: 'All imports used: altair, numpy, pandas, scipy'
      - id: CQ-04
        name: Code Elegance
        score: 1
        max: 2
        passed: false
        comment: Slightly verbose ECDF computation at all points section
      - id: CQ-05
        name: Output & API
        score: 1
        max: 1
        passed: true
        comment: Saves plot.png and plot.html correctly
    library_mastery:
      score: 7
      max: 10
      items:
      - id: LM-01
        name: Idiomatic Usage
        score: 4
        max: 5
        passed: true
        comment: 'Good declarative grammar: layered composition, encoding types, scale/color
          configuration'
      - id: LM-02
        name: Distinctive Features
        score: 3
        max: 5
        passed: true
        comment: Uses step-after interpolation, layered composition, mark_text annotations,
          tooltip encoding
  verdict: REJECTED
impl_tags:
  dependencies:
  - scipy
  techniques:
  - annotations
  - layer-composition
  - html-export
  patterns:
  - data-generation
  dataprep:
  - ecdf
  styling:
  - grid-styling
