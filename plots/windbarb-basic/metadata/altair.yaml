library: altair
specification_id: windbarb-basic
created: '2026-01-11T09:29:19Z'
updated: '2026-01-11T09:40:48Z'
generated_by: claude-opus-4-5-20251101
workflow_run: 20892892513
issue: 3694
python_version: 3.13.11
library_version: 6.0.0
preview_url: https://storage.googleapis.com/pyplots-images/plots/windbarb-basic/altair/plot.png
preview_thumb: https://storage.googleapis.com/pyplots-images/plots/windbarb-basic/altair/plot_thumb.png
preview_html: https://storage.googleapis.com/pyplots-images/plots/windbarb-basic/altair/plot.html
quality_score: 82
review:
  strengths:
  - Wind barb staffs correctly point INTO the wind (FROM direction)
  - Good use of Altair layering for complex multi-component visualization
  - Tooltips provide helpful wind speed and direction info on hover
  - Clean grid layout prevents barb overlap
  - Proper use of mark_rule for staff and barb lines
  weaknesses:
  - Legend in top-right corner is not visible in output (text/symbols not rendering
    properly)
  - Pennants (50 knots) are drawn as lines instead of filled triangles per meteorological
    standard
  - No calm wind indication (open circle) for very light winds as specified in Notes
  - Axis labels should include units or more descriptive context (e.g., Longitude
    or Grid X Position)
  image_description: The plot displays a 6x5 grid of wind barb symbols (30 weather
    stations) on a coordinate plane. Each wind barb consists of a blue staff line
    (#306998) pointing in the direction from which the wind blows, with a small filled
    circle at the station location. Speed indicators are shown as short lines (half
    barbs for 5 knots) and longer lines (full barbs for 10 knots) attached perpendicular
    to the staff on the left side. The staffs vary in length and direction based on
    the wind vector components. The plot has a clean white background with subtle
    grid lines (alpha 0.3). Title reads "windbarb-basic 路 altair 路 pyplots.ai" at
    the top. Axes are labeled "X Coordinate" and "Y Coordinate" with tick marks ranging
    from approximately -1 to 11 on X and -1 to 9 on Y. The legend that was coded (showing
    "Wind Barb Notation" with symbols) appears to be positioned in the top-right area
    but is either cut off or not rendered properly in the visible image.
  criteria_checklist:
    visual_quality:
      score: 32
      max: 40
      items:
      - id: VQ-01
        name: Text Legibility
        score: 9
        max: 10
        passed: true
        comment: Title and axis labels readable, tick labels slightly small
      - id: VQ-02
        name: No Overlap
        score: 8
        max: 8
        passed: true
        comment: Wind barbs well-spaced on grid, no overlap
      - id: VQ-03
        name: Element Visibility
        score: 6
        max: 8
        passed: true
        comment: Barbs visible but some could be more prominent
      - id: VQ-04
        name: Color Accessibility
        score: 5
        max: 5
        passed: true
        comment: Single blue color scheme, no colorblind issues
      - id: VQ-05
        name: Layout Balance
        score: 3
        max: 5
        passed: false
        comment: Legend area appears empty/cut off in top-right
      - id: VQ-06
        name: Axis Labels
        score: 1
        max: 2
        passed: false
        comment: Generic X Coordinate / Y Coordinate without units
      - id: VQ-07
        name: Grid & Legend
        score: 0
        max: 2
        passed: false
        comment: Legend symbols not visible despite code to create them
    spec_compliance:
      score: 20
      max: 25
      items:
      - id: SC-01
        name: Plot Type
        score: 8
        max: 8
        passed: true
        comment: Correct wind barb representation using staffs and barb flags
      - id: SC-02
        name: Data Mapping
        score: 5
        max: 5
        passed: true
        comment: X/Y coordinates and u/v wind components correctly mapped
      - id: SC-03
        name: Required Features
        score: 3
        max: 5
        passed: false
        comment: 'Missing: calm wind circles, pennants not filled triangles'
      - id: SC-04
        name: Data Range
        score: 3
        max: 3
        passed: true
        comment: All data visible within axis range
      - id: SC-05
        name: Legend Accuracy
        score: 0
        max: 2
        passed: false
        comment: Legend not rendering/visible
      - id: SC-06
        name: Title Format
        score: 2
        max: 2
        passed: true
        comment: Correct format windbarb-basic 路 altair 路 pyplots.ai
    data_quality:
      score: 18
      max: 20
      items:
      - id: DQ-01
        name: Feature Coverage
        score: 6
        max: 8
        passed: true
        comment: Shows half/full barbs, various directions; missing pennants (50kt)
          and calm conditions
      - id: DQ-02
        name: Realistic Context
        score: 7
        max: 7
        passed: true
        comment: Weather station grid is plausible meteorological scenario
      - id: DQ-03
        name: Appropriate Scale
        score: 5
        max: 5
        passed: true
        comment: Wind speeds -30 to 30 knots realistic for surface observations
    code_quality:
      score: 9
      max: 10
      items:
      - id: CQ-01
        name: KISS Structure
        score: 3
        max: 3
        passed: true
        comment: Linear structure with imports, data, plot, save
      - id: CQ-02
        name: Reproducibility
        score: 3
        max: 3
        passed: true
        comment: np.random.seed(42) set
      - id: CQ-03
        name: Clean Imports
        score: 2
        max: 2
        passed: true
        comment: Only used imports (altair, numpy, pandas)
      - id: CQ-04
        name: No Deprecated API
        score: 1
        max: 1
        passed: true
        comment: Current Altair API used
      - id: CQ-05
        name: Output Correct
        score: 0
        max: 1
        passed: false
        comment: Saves both plot.png and plot.html (minor issue)
    library_features:
      score: 3
      max: 5
      items:
      - id: LF-01
        name: Distinctive Features
        score: 3
        max: 5
        passed: false
        comment: Uses layer composition and tooltips, but custom legend attempt fails
  verdict: REJECTED
impl_tags:
  dependencies: []
  techniques:
  - layer-composition
  - hover-tooltips
  - custom-legend
  - html-export
  patterns:
  - data-generation
  - iteration-over-groups
  dataprep: []
  styling:
  - grid-styling
