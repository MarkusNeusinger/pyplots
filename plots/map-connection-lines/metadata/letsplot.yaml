library: letsplot
specification_id: map-connection-lines
created: '2026-01-21T16:31:03Z'
updated: '2026-01-21T16:34:37Z'
generated_by: claude-opus-4-5-20251101
workflow_run: 21217352661
issue: 3746
python_version: 3.13.11
library_version: 4.8.2
preview_url: https://storage.googleapis.com/pyplots-images/plots/map-connection-lines/letsplot/plot.png
preview_thumb: https://storage.googleapis.com/pyplots-images/plots/map-connection-lines/letsplot/plot_thumb.png
preview_html: https://storage.googleapis.com/pyplots-images/plots/map-connection-lines/letsplot/plot.html
quality_score: 91
review:
  strengths:
  - Excellent use of geom_curve for connection lines with proper curvature parameter
  - Dual encoding (color + size) effectively represents passenger volume
  - Clean implementation of simplified world map using polygon data
  - Proper use of lets-plot grammar with well-structured layering
  - Good color scheme with Python-branded colors for airport markers
  weaknesses:
  - Airport city names not labeled on the map (spec mentions optional labels for tooltips)
  - Line thickness difference between low and high values could be more pronounced
    for visual clarity
  image_description: 'The plot displays a world map with simplified continent polygons
    rendered in light gray (#E8E8E8) with subtle borders. Ten major airports are marked
    with circular markers (blue outline, yellow fill). Sixteen flight routes are shown
    as curved connection lines between city pairs. The line color follows a yellow-to-red
    gradient encoding passenger volume (1.5-4+ million), while line thickness also
    encodes the same value. Routes with higher passenger counts (like JFK-LHR at 4.2M)
    appear thicker and more red/coral colored, while lower-volume routes (like JNB-DXB
    at 1.2M) are thinner and yellow. Two legends appear on the right: a color gradient
    bar and a line thickness legend, both labeled "Passengers (millions)". The title
    reads "Global Flight Routes · map-connection-lines · letsplot · pyplots.ai" centered
    at the top.'
  criteria_checklist:
    visual_quality:
      score: 37
      max: 40
      items:
      - id: VQ-01
        name: Text Legibility
        score: 10
        max: 10
        passed: true
        comment: Title at 24pt, legend text at adequate sizes, all text clearly readable
      - id: VQ-02
        name: No Overlap
        score: 8
        max: 8
        passed: true
        comment: No overlapping text or legend-data conflicts
      - id: VQ-03
        name: Element Visibility
        score: 7
        max: 8
        passed: true
        comment: Curved lines and airport markers visible; some thinner lines could
          be slightly more prominent
      - id: VQ-04
        name: Color Accessibility
        score: 5
        max: 5
        passed: true
        comment: Yellow-to-red gradient is colorblind-safe (avoids pure red-green)
      - id: VQ-05
        name: Layout Balance
        score: 5
        max: 5
        passed: true
        comment: Good use of canvas, map centered with appropriate margins
      - id: VQ-06
        name: Axis Labels
        score: 0
        max: 2
        passed: true
        comment: N/A for map; uses theme_void() appropriately - no penalty
      - id: VQ-07
        name: Grid & Legend
        score: 2
        max: 2
        passed: true
        comment: Legend well-positioned on right, no grid needed for map
    spec_compliance:
      score: 24
      max: 25
      items:
      - id: SC-01
        name: Plot Type
        score: 8
        max: 8
        passed: true
        comment: 'Correct: connection lines map with curved arcs'
      - id: SC-02
        name: Data Mapping
        score: 5
        max: 5
        passed: true
        comment: Origin/dest coordinates mapped correctly; passengers to color/size
      - id: SC-03
        name: Required Features
        score: 4
        max: 5
        passed: true
        comment: Curved lines, transparency (alpha=0.5), base map, location markers
          present; missing city labels at endpoints
      - id: SC-04
        name: Data Range
        score: 3
        max: 3
        passed: true
        comment: World view with xlim/ylim covers all routes properly
      - id: SC-05
        name: Legend Accuracy
        score: 2
        max: 2
        passed: true
        comment: Dual legends correctly show passengers scale
      - id: SC-06
        name: Title Format
        score: 2
        max: 2
        passed: true
        comment: Follows exact format with spec-id, library, pyplots.ai
    data_quality:
      score: 18
      max: 20
      items:
      - id: DQ-01
        name: Feature Coverage
        score: 6
        max: 8
        passed: true
        comment: Shows varied route lengths and volumes; could include more hub variation
      - id: DQ-02
        name: Realistic Context
        score: 7
        max: 7
        passed: true
        comment: Real-world flight routes between major airports with plausible passenger
          volumes
      - id: DQ-03
        name: Appropriate Scale
        score: 5
        max: 5
        passed: true
        comment: Passenger volumes (1.2-4.2 million) are realistic for major international
          routes
    code_quality:
      score: 9
      max: 10
      items:
      - id: CQ-01
        name: KISS Structure
        score: 3
        max: 3
        passed: true
        comment: 'Linear script: imports, data, plot, save'
      - id: CQ-02
        name: Reproducibility
        score: 3
        max: 3
        passed: true
        comment: Uses np.random.seed(42)
      - id: CQ-03
        name: Clean Imports
        score: 2
        max: 2
        passed: true
        comment: All imports are used
      - id: CQ-04
        name: No Deprecated API
        score: 1
        max: 1
        passed: true
        comment: Uses current lets-plot API
      - id: CQ-05
        name: Output Correct
        score: 0
        max: 1
        passed: false
        comment: Saves plot.png with path but also saves plot.html
    library_features:
      score: 3
      max: 5
      items:
      - id: LF-01
        name: Distinctive Features
        score: 3
        max: 5
        passed: true
        comment: Good use of geom_curve, ggplot grammar, theme_void; could leverage
          lets_plot livemap or geographic projections
  verdict: APPROVED
impl_tags:
  dependencies: []
  techniques:
  - layer-composition
  - custom-legend
  patterns:
  - data-generation
  - iteration-over-groups
  dataprep: []
  styling:
  - minimal-chrome
  - alpha-blending
  - custom-colormap
  - edge-highlighting
