library: altair
specification_id: map-tile-background
created: '2026-01-20T22:45:34Z'
updated: '2026-01-20T22:48:56Z'
generated_by: claude-opus-4-5-20251101
workflow_run: 21189771519
issue: 3756
python_version: 3.13.11
library_version: 6.0.0
preview_url: https://storage.googleapis.com/pyplots-images/plots/map-tile-background/altair/plot.png
preview_thumb: https://storage.googleapis.com/pyplots-images/plots/map-tile-background/altair/plot_thumb.png
preview_html: https://storage.googleapis.com/pyplots-images/plots/map-tile-background/altair/plot.html
quality_score: 78
review:
  strengths:
  - Excellent use of OpenStreetMap tiles with proper attribution
  - Good data story with real European landmarks
  - Nice layered composition (tiles → points → labels → attribution)
  - White stroke on markers provides good contrast against map
  - Size encoding effectively shows visitor volume variation
  - Colorblind-safe category colors
  weaknesses:
  - Contains helper functions which violates KISS structure requirement
  - Title format should start with spec-id not descriptive title
  - Legend text appears small in final rendered output
  - Some label overlap in dense areas (Vatican/Colosseum region)
  - Large unused ocean area on left side of map
  - La Rambla visitor count (78M) seems disproportionately high compared to other
    landmarks
  image_description: 'The plot displays a map of Europe with OpenStreetMap tile backgrounds
    showing geographic detail (roads, borders, terrain coloring). Data points representing
    European landmarks are plotted as circles with white strokes. The points vary
    in size based on visitor count (from ~0.5M to 78M annually for La Rambla). Points
    are colored by category: Monument (blue), Historical (yellow), Museum (green),
    Religious (red), and Street (purple). The largest visible point is La Rambla in
    Barcelona. Text labels appear for major landmarks with >5M visitors including
    "La Rambla", "Vatican Museums", "Tower of Pisa", and "Louvre Museum". Two legends
    appear: a size legend in bottom-left showing visitor counts, and a category color
    legend in bottom-right. The title "European Landmarks · map-tile-background ·
    altair · pyplots.ai" appears at the top. OSM attribution is visible in the bottom-right
    corner. Northern Europe (UK, France, Germany, Netherlands, Belgium, Czech Republic,
    Austria) and Southern Europe (Spain, Italy, Greece) are covered.'
  criteria_checklist:
    visual_quality:
      score: 28
      max: 40
      items:
      - id: VQ-01
        name: Text Legibility
        score: 7
        max: 10
        passed: true
        comment: Title readable at 28pt, but legend text is quite small at 14-18pt
          in the final output; labels are legible but could be larger
      - id: VQ-02
        name: No Overlap
        score: 6
        max: 8
        passed: true
        comment: 'Minor overlap: Vatican Museums label overlaps with Colosseum area;
          some legend text crowding'
      - id: VQ-03
        name: Element Visibility
        score: 6
        max: 8
        passed: true
        comment: Markers are visible with good size variation and white strokes for
          contrast, but some smaller markers are hard to distinguish
      - id: VQ-04
        name: Color Accessibility
        score: 5
        max: 5
        passed: true
        comment: Good colorblind-safe palette with Python blue, yellow, green, red,
          purple
      - id: VQ-05
        name: Layout Balance
        score: 2
        max: 5
        passed: false
        comment: Map extends well but a lot of blue ocean on left side is unused;
          data points concentrated in smaller region
      - id: VQ-06
        name: Axis Labels
        score: 0
        max: 2
        passed: false
        comment: No axis labels (appropriate for map, but could have lat/lon scale)
      - id: VQ-07
        name: Grid & Legend
        score: 2
        max: 2
        passed: true
        comment: Legends well-placed in corners, map tiles provide geographic context
    spec_compliance:
      score: 23
      max: 25
      items:
      - id: SC-01
        name: Plot Type
        score: 8
        max: 8
        passed: true
        comment: 'Correct: map with tile background showing data points'
      - id: SC-02
        name: Data Mapping
        score: 5
        max: 5
        passed: true
        comment: Lat/lon correctly converted to pixel coordinates, value mapped to
          size
      - id: SC-03
        name: Required Features
        score: 4
        max: 5
        passed: true
        comment: Has tile background, data markers with contrast, attribution, tooltips;
          missing interactive zoom/pan in PNG
      - id: SC-04
        name: Data Range
        score: 3
        max: 3
        passed: true
        comment: All 20 landmarks visible within the tile bounds
      - id: SC-05
        name: Legend Accuracy
        score: 2
        max: 2
        passed: true
        comment: Both legends (size and category) are accurate
      - id: SC-06
        name: Title Format
        score: 1
        max: 2
        passed: false
        comment: Uses descriptive title first instead of spec-id format
    data_quality:
      score: 17
      max: 20
      items:
      - id: DQ-01
        name: Feature Coverage
        score: 6
        max: 8
        passed: true
        comment: Shows varied visitor counts, multiple categories, geographic spread;
          but all points clustered in Europe
      - id: DQ-02
        name: Realistic Context
        score: 7
        max: 7
        passed: true
        comment: Excellent real-world scenario with actual European landmarks and
          plausible visitor counts
      - id: DQ-03
        name: Appropriate Scale
        score: 4
        max: 5
        passed: true
        comment: Most values realistic; La Rambla at 78M seems disproportionately
          high
    code_quality:
      score: 7
      max: 10
      items:
      - id: CQ-01
        name: KISS Structure
        score: 1
        max: 3
        passed: false
        comment: Has helper functions (lon_to_tile_x, lat_to_tile_y) which violates
          KISS principle
      - id: CQ-02
        name: Reproducibility
        score: 3
        max: 3
        passed: true
        comment: np.random.seed(42) set
      - id: CQ-03
        name: Clean Imports
        score: 2
        max: 2
        passed: true
        comment: 'Only necessary imports: altair, numpy, pandas'
      - id: CQ-04
        name: No Deprecated API
        score: 1
        max: 1
        passed: true
        comment: Uses current Altair API
      - id: CQ-05
        name: Output Correct
        score: 0
        max: 1
        passed: false
        comment: Saves both plot.png and plot.html
    library_features:
      score: 3
      max: 5
      items:
      - id: LF-01
        name: Distinctive Features
        score: 3
        max: 5
        passed: true
        comment: Uses mark_image for tiles, tooltips, layered composition; but doesn't
          use Altair's native geographic projections
  verdict: REJECTED
impl_tags:
  dependencies: []
  techniques:
  - layer-composition
  - hover-tooltips
  - annotations
  - html-export
  patterns:
  - data-generation
  dataprep: []
  styling:
  - alpha-blending
  - edge-highlighting
