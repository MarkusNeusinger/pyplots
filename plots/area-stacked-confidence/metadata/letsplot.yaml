library: letsplot
specification_id: area-stacked-confidence
created: '2026-01-09T21:56:09Z'
updated: '2026-01-09T21:58:59Z'
generated_by: claude-opus-4-5-20251101
workflow_run: 20866601215
issue: 3549
python_version: 3.13.11
library_version: 4.8.2
preview_url: https://storage.googleapis.com/pyplots-images/plots/area-stacked-confidence/letsplot/plot.png
preview_thumb: https://storage.googleapis.com/pyplots-images/plots/area-stacked-confidence/letsplot/plot_thumb.png
preview_html: https://storage.googleapis.com/pyplots-images/plots/area-stacked-confidence/letsplot/plot.html
quality_score: 91
review:
  strengths:
  - Excellent implementation of stacked confidence bands using geom_ribbon layers
  - Clear visual hierarchy with main areas (alpha=0.7) over confidence bands (alpha=0.25)
  - Growing uncertainty over time is well demonstrated
  - Central trend lines add clarity to each series
  - Caption explains what the confidence bands represent
  weaknesses:
  - Central lines could be slightly thicker (size=2.0+) for better visibility against
    the area fills
  - Legend placement could be improved to reduce whitespace on the right side
  image_description: The plot displays a stacked area chart showing quarterly energy
    consumption forecasts by source (Solar, Wind, Hydro) from 2023-Q1 to 2028-Q4.
    The bottom layer (Solar) is rendered in a deep blue (#306998), the middle layer
    (Wind) in yellow (#FFD43B), and the top layer (Hydro) in green (#22C55E). Each
    stacked area has confidence bands shown as lighter, semi-transparent regions around
    the central values. The uncertainty bands visibly grow wider over time, particularly
    toward 2028, demonstrating increasing forecast uncertainty. Central trend lines
    are drawn in matching colors for each source. The y-axis shows Energy Consumption
    in TWh (0-400), and the x-axis shows quarters. A legend on the right identifies
    the three energy sources. A caption at the bottom states "Shaded bands show 90%
    prediction intervals." The title correctly follows the spec format.
  criteria_checklist:
    visual_quality:
      score: 36
      max: 40
      items:
      - id: VQ-01
        name: Text Legibility
        score: 10
        max: 10
        passed: true
        comment: Title, axis labels, tick marks, and legend text are all clearly readable
          at full size with appropriate font sizes
      - id: VQ-02
        name: No Overlap
        score: 8
        max: 8
        passed: true
        comment: No overlapping text elements; x-axis quarter labels are well spaced
      - id: VQ-03
        name: Element Visibility
        score: 6
        max: 8
        passed: true
        comment: Areas and confidence bands are visible, though the central lines
          could be slightly thicker for better distinction
      - id: VQ-04
        name: Color Accessibility
        score: 5
        max: 5
        passed: true
        comment: Blue, yellow, and green palette is colorblind-safe with good contrast
      - id: VQ-05
        name: Layout Balance
        score: 4
        max: 5
        passed: true
        comment: Good plot proportions using most of the canvas, minor whitespace
          on right side
      - id: VQ-06
        name: Axis Labels
        score: 2
        max: 2
        passed: true
        comment: Y-axis has Energy Consumption (TWh) with units, x-axis has Quarter
      - id: VQ-07
        name: Grid & Legend
        score: 1
        max: 2
        passed: true
        comment: Grid is subtle with appropriate alpha; legend is functional but could
          be positioned better
    spec_compliance:
      score: 25
      max: 25
      items:
      - id: SC-01
        name: Plot Type
        score: 8
        max: 8
        passed: true
        comment: Correct stacked area chart with confidence bands
      - id: SC-02
        name: Data Mapping
        score: 5
        max: 5
        passed: true
        comment: X is time (quarters), Y is cumulative energy values
      - id: SC-03
        name: Required Features
        score: 5
        max: 5
        passed: true
        comment: 'All spec features present: stacked areas, confidence bands per series,
          legend explaining bands'
      - id: SC-04
        name: Data Range
        score: 3
        max: 3
        passed: true
        comment: All data visible within axes range (0-400 TWh)
      - id: SC-05
        name: Legend Accuracy
        score: 2
        max: 2
        passed: true
        comment: Legend correctly identifies Solar, Wind, Hydro sources
      - id: SC-06
        name: Title Format
        score: 2
        max: 2
        passed: true
        comment: Correctly uses area-stacked-confidence · letsplot · pyplots.ai
    data_quality:
      score: 18
      max: 20
      items:
      - id: DQ-01
        name: Feature Coverage
        score: 7
        max: 8
        passed: true
        comment: Shows multiple series stacking, growing uncertainty over time, different
          trend rates; could show more variation in uncertainty patterns
      - id: DQ-02
        name: Realistic Context
        score: 7
        max: 7
        passed: true
        comment: Energy consumption forecast by renewable source is a realistic, neutral
          scenario
      - id: DQ-03
        name: Appropriate Scale
        score: 4
        max: 5
        passed: true
        comment: TWh values (50-400) are plausible for energy forecasts
    code_quality:
      score: 9
      max: 10
      items:
      - id: CQ-01
        name: KISS Structure
        score: 3
        max: 3
        passed: true
        comment: 'Linear flow: imports → data → plot → save (no functions/classes)'
      - id: CQ-02
        name: Reproducibility
        score: 3
        max: 3
        passed: true
        comment: Uses np.random.seed(42)
      - id: CQ-03
        name: Clean Imports
        score: 2
        max: 2
        passed: true
        comment: Only necessary imports (numpy, pandas, lets_plot)
      - id: CQ-04
        name: No Deprecated API
        score: 1
        max: 1
        passed: true
        comment: Uses current lets-plot API
      - id: CQ-05
        name: Output Correct
        score: 0
        max: 1
        passed: false
        comment: Saves to plot.png but uses path parameter instead of direct path
    library_features:
      score: 3
      max: 5
      items:
      - id: LF-01
        name: Distinctive Features
        score: 3
        max: 5
        passed: true
        comment: Uses lets-plot ggplot grammar correctly with geom_ribbon, scale_*_manual,
          theme_minimal, but doesn't leverage more distinctive features like tooltips
          or interactive capabilities
  verdict: APPROVED
impl_tags:
  dependencies: []
  techniques:
  - layer-composition
  - html-export
  patterns:
  - data-generation
  - time-series
  dataprep:
  - cumulative-sum
  styling:
  - alpha-blending
