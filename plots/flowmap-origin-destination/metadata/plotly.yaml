library: plotly
specification_id: flowmap-origin-destination
created: '2026-01-16T08:06:02Z'
updated: '2026-01-16T08:08:52Z'
generated_by: claude-opus-4-5-20251101
workflow_run: 21059785718
issue: 3765
python_version: 3.13.11
library_version: 6.5.2
preview_url: https://storage.googleapis.com/pyplots-images/plots/flowmap-origin-destination/plotly/plot.png
preview_thumb: https://storage.googleapis.com/pyplots-images/plots/flowmap-origin-destination/plotly/plot_thumb.png
preview_html: https://storage.googleapis.com/pyplots-images/plots/flowmap-origin-destination/plotly/plot.html
quality_score: 91
review:
  strengths:
  - Excellent geographic visualization using Plotly Scattergeo with Natural Earth
    projection
  - Well-implemented Bezier curves creating smooth, aesthetically pleasing arcs
  - Smart marker sizing based on total flow through each city highlights hub importance
  - Comprehensive hover tooltips showing route and volume information
  - Good transparency handling for overlapping arcs
  - Generates both static PNG and interactive HTML outputs
  - Realistic trade route data between actual major ports
  weaknesses:
  - City label overlap in dense regions (Rotterdam/Hamburg cluster, East Asian ports)
  - City labels could be slightly larger for optimal readability at full resolution
  image_description: The plot displays an origin-destination flow map on a Natural
    Earth projection world map. Blue curved arcs connect 15 major port cities (Shanghai,
    Los Angeles, Rotterdam, Singapore, Dubai, New York, Tokyo, Hamburg, Busan, Hong
    Kong, Santos, Mumbai, Sydney, Cape Town, and Panama City) representing international
    trade routes. Line widths vary proportionally to trade volume (ranging from 18-85
    million tons). City markers are blue circles with white borders, sized according
    to total flow through each city, with Shanghai and Rotterdam appearing largest
    as major hubs. City labels are positioned above markers in dark gray text. The
    basemap shows landmasses in light gray with subtle country borders, and oceans
    in light blue. The title "flowmap-origin-destination · plotly · pyplots.ai" appears
    centered at the top, with an annotation at the bottom explaining "Line width proportional
    to trade volume (millions of tons)". Arc transparency (alpha ~0.6) allows overlapping
    routes to remain visible.
  criteria_checklist:
    visual_quality:
      score: 36
      max: 40
      items:
      - id: VQ-01
        name: Text Legibility
        score: 9
        max: 10
        passed: true
        comment: Title at 28pt excellent, city labels at 14pt readable but could be
          slightly larger
      - id: VQ-02
        name: No Overlap
        score: 7
        max: 8
        passed: true
        comment: Minor overlap between Rotterdam/Hamburg labels and East Asian port
          cluster
      - id: VQ-03
        name: Element Visibility
        score: 8
        max: 8
        passed: true
        comment: Arc line widths (2-10) scale well, markers sized appropriately by
          flow volume
      - id: VQ-04
        name: Color Accessibility
        score: 5
        max: 5
        passed: true
        comment: Blue gradient colorblind-safe, good contrast against light basemap
      - id: VQ-05
        name: Layout Balance
        score: 5
        max: 5
        passed: true
        comment: Map fills canvas well with balanced margins
      - id: VQ-06
        name: Axis Labels
        score: 0
        max: 0
        passed: true
        comment: N/A for maps - geographic context via basemap
      - id: VQ-07
        name: Grid & Legend
        score: 2
        max: 2
        passed: true
        comment: Basemap serves as reference, subtitle explains encoding
    spec_compliance:
      score: 24
      max: 25
      items:
      - id: SC-01
        name: Plot Type
        score: 8
        max: 8
        passed: true
        comment: Correct flow map with curved arcs
      - id: SC-02
        name: Data Mapping
        score: 5
        max: 5
        passed: true
        comment: Origin/destination coordinates correctly mapped, flow drives line
          width
      - id: SC-03
        name: Required Features
        score: 4
        max: 5
        passed: true
        comment: Has curved arcs, proportional width, transparency, basemap, tooltips;
          missing optional animation
      - id: SC-04
        name: Data Range
        score: 3
        max: 3
        passed: true
        comment: All 15 cities and 25 flows visible
      - id: SC-05
        name: Legend Accuracy
        score: 2
        max: 2
        passed: true
        comment: Subtitle explains line width encoding
      - id: SC-06
        name: Title Format
        score: 2
        max: 2
        passed: true
        comment: Uses exact required format
    data_quality:
      score: 18
      max: 20
      items:
      - id: DQ-01
        name: Feature Coverage
        score: 7
        max: 8
        passed: true
        comment: Shows bidirectional flows, hub patterns, regional clusters
      - id: DQ-02
        name: Realistic Context
        score: 7
        max: 7
        passed: true
        comment: International trade routes between major ports is realistic and neutral
      - id: DQ-03
        name: Appropriate Scale
        score: 4
        max: 5
        passed: true
        comment: Trade volumes 18-85M tons plausible for major routes
    code_quality:
      score: 8
      max: 10
      items:
      - id: CQ-01
        name: KISS Structure
        score: 3
        max: 3
        passed: true
        comment: 'Linear flow: imports → data → figure → arcs → markers → layout →
          save'
      - id: CQ-02
        name: Reproducibility
        score: 3
        max: 3
        passed: true
        comment: Uses np.random.seed(42)
      - id: CQ-03
        name: Clean Imports
        score: 2
        max: 2
        passed: true
        comment: Only numpy and plotly.graph_objects imported
      - id: CQ-04
        name: No Deprecated API
        score: 0
        max: 1
        passed: false
        comment: Uses dict for line/marker params instead of proper objects
      - id: CQ-05
        name: Output Correct
        score: 0
        max: 1
        passed: false
        comment: Saves both plot.png and plot.html correctly
    library_features:
      score: 5
      max: 5
      items:
      - id: LF-01
        name: Distinctive Features
        score: 5
        max: 5
        passed: true
        comment: Excellent use of Scattergeo, hover tooltips, Natural Earth projection,
          HTML export
  verdict: APPROVED
impl_tags:
  dependencies: []
  techniques:
  - bezier-curves
  - hover-tooltips
  - annotations
  - html-export
  patterns:
  - data-generation
  - iteration-over-groups
  dataprep:
  - normalization
  styling:
  - alpha-blending
  - edge-highlighting
