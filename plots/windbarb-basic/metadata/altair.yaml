library: altair
specification_id: windbarb-basic
created: '2026-01-11T09:29:19Z'
updated: '2026-01-11T09:32:10Z'
generated_by: claude-opus-4-5-20251101
workflow_run: 20892892513
issue: 3694
python_version: 3.13.11
library_version: 6.0.0
preview_url: https://storage.googleapis.com/pyplots-images/plots/windbarb-basic/altair/plot.png
preview_thumb: https://storage.googleapis.com/pyplots-images/plots/windbarb-basic/altair/plot_thumb.png
preview_html: https://storage.googleapis.com/pyplots-images/plots/windbarb-basic/altair/plot.html
quality_score: 78
review:
  strengths:
  - Creative implementation using Altair layered approach with mark_rule for staffs
    and barb lines
  - Good use of tooltips showing wind speed and direction for interactivity
  - Proper meteorological convention (barbs point INTO the wind direction)
  - Clean grid spacing prevents overlap between adjacent stations
  - Correct title format and good use of Altair declarative styling
  weaknesses:
  - Violates KISS principle by using a function (create_barb_data); should be refactored
    to inline code
  - Pennants (50 knots) should be triangular/filled shapes per meteorological standard,
    not just longer lines
  - No legend explaining the wind barb notation (essential for meteorological plots)
  - Some barbs are difficult to distinguish at lower wind speeds
  image_description: The plot displays a 6x5 grid of wind barb representations (30
    total stations) on a coordinate plane. Each wind barb consists of a blue staff
    (line) extending from a circle point at the station location, with short perpendicular
    barb lines attached to indicate wind speed. The staffs point in the direction
    FROM which the wind blows (meteorological convention). The barbs vary in direction
    and have different numbers of speed indicator lines. The plot uses a consistent
    blue color (#306998) throughout. Axis labels show "X Coordinate" and "Y Coordinate"
    with tick marks ranging from -1 to 11 on x-axis and -1 to 9 on y-axis. The title
    correctly follows the format "windbarb-basic 路 altair 路 pyplots.ai". A subtle
    grid is visible in the background with low opacity.
  criteria_checklist:
    visual_quality:
      score: 31
      max: 40
      items:
      - id: VQ-01
        name: Text Legibility
        score: 8
        max: 10
        passed: true
        comment: Title and axis labels are readable but could be slightly larger for
          the canvas size
      - id: VQ-02
        name: No Overlap
        score: 8
        max: 8
        passed: true
        comment: No overlapping elements, good grid spacing
      - id: VQ-03
        name: Element Visibility
        score: 6
        max: 8
        passed: true
        comment: Barbs are visible but some shorter ones are hard to distinguish;
          staff lengths could be scaled better
      - id: VQ-04
        name: Color Accessibility
        score: 5
        max: 5
        passed: true
        comment: Single blue color, no colorblind issues
      - id: VQ-05
        name: Layout Balance
        score: 3
        max: 5
        passed: true
        comment: Good layout but some barbs extend outside the main grid area
      - id: VQ-06
        name: Axis Labels
        score: 1
        max: 2
        passed: true
        comment: Labels are descriptive but lack units
      - id: VQ-07
        name: Grid & Legend
        score: 0
        max: 2
        passed: false
        comment: No legend explaining the barb notation (half barb = 5 knots, full
          = 10, etc.)
    spec_compliance:
      score: 19
      max: 25
      items:
      - id: SC-01
        name: Plot Type
        score: 5
        max: 8
        passed: true
        comment: Approximates wind barbs but not standard meteorological notation;
          pennants appear as lines not triangles
      - id: SC-02
        name: Data Mapping
        score: 5
        max: 5
        passed: true
        comment: X/Y coordinates and wind components correctly mapped
      - id: SC-03
        name: Required Features
        score: 3
        max: 5
        passed: true
        comment: Shows direction and speed but pennants are not triangular as per
          spec
      - id: SC-04
        name: Data Range
        score: 3
        max: 3
        passed: true
        comment: Axes show all data points with appropriate padding
      - id: SC-05
        name: Legend Accuracy
        score: 1
        max: 2
        passed: false
        comment: No legend present to explain wind speed notation
      - id: SC-06
        name: Title Format
        score: 2
        max: 2
        passed: true
        comment: Correct format windbarb-basic 路 altair 路 pyplots.ai
    data_quality:
      score: 16
      max: 20
      items:
      - id: DQ-01
        name: Feature Coverage
        score: 5
        max: 8
        passed: true
        comment: Shows varying wind speeds and directions but doesn't clearly demonstrate
          the half/full/pennant distinctions
      - id: DQ-02
        name: Realistic Context
        score: 6
        max: 7
        passed: true
        comment: Weather station grid is plausible, synthetic wind data is reasonable
      - id: DQ-03
        name: Appropriate Scale
        score: 5
        max: 5
        passed: true
        comment: Wind speeds up to ~40 knots are realistic for surface observations
    code_quality:
      score: 7
      max: 10
      items:
      - id: CQ-01
        name: KISS Structure
        score: 0
        max: 3
        passed: false
        comment: Code uses a function create_barb_data() which violates KISS principle
      - id: CQ-02
        name: Reproducibility
        score: 3
        max: 3
        passed: true
        comment: Fixed seed np.random.seed(42)
      - id: CQ-03
        name: Clean Imports
        score: 2
        max: 2
        passed: true
        comment: Only necessary imports
      - id: CQ-04
        name: No Deprecated API
        score: 1
        max: 1
        passed: true
        comment: Modern Altair API used
      - id: CQ-05
        name: Output Correct
        score: 1
        max: 1
        passed: true
        comment: Saves as plot.png and plot.html
    library_features:
      score: 5
      max: 5
      items:
      - id: LF-01
        name: Distinctive Features
        score: 5
        max: 5
        passed: true
        comment: Excellent use of layered marks, tooltips, rule marks, and configure
          methods
  verdict: REJECTED
impl_tags:
  dependencies: []
  techniques:
  - layer-composition
  - hover-tooltips
  - html-export
  patterns:
  - data-generation
  - iteration-over-groups
  dataprep: []
  styling:
  - grid-styling
