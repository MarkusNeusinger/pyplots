library: plotnine
specification_id: gain-curve
created: '2025-12-29T22:48:23Z'
updated: '2025-12-29T22:57:24Z'
generated_by: claude-opus-4-5-20251101
workflow_run: 20584328972
issue: 0
python_version: 3.13.11
library_version: 0.15.2
preview_url: https://storage.googleapis.com/pyplots-images/plots/gain-curve/plotnine/plot.png
preview_thumb: https://storage.googleapis.com/pyplots-images/plots/gain-curve/plotnine/plot_thumb.png
preview_html: null
quality_score: 92
impl_tags:
  dependencies: []
  techniques: []
  patterns:
  - data-generation
  dataprep: []
  styling: []
review:
  strengths:
  - Excellent visual clarity with well-chosen line widths and colors that make all
    curves easily distinguishable
  - Perfect implementation of the gain curve concept with all three required curves
    (model, perfect, baseline)
  - Strong adherence to plotnine grammar of graphics approach with clean layered construction
  - Realistic marketing response model context that demonstrates practical application
  - Proper axis scaling and labeling with units in percentage format
  weaknesses:
  - Legend title Curve is generic; consider removing the legend title or using more
    descriptive text
  - The variable n_samples is redefined at line 49 (shadowing the earlier definition
    at line 27)
  - Could benefit from annotation showing key metrics like the area under the curve
    or lift at specific percentiles
  image_description: The plot displays a cumulative gains chart with three distinct
    curves on a white background. The blue line represents the "Model" curve showing
    actual model performance, starting at origin (0,0) and rising steeply to capture
    about 80% of positives by targeting 20% of the population, then leveling off to
    reach 100% around 35% population. The yellow/gold line shows the "Perfect Model"
    which rises vertically from 0 to 100% at approximately 17% population (the positive
    class rate), then extends horizontally. The gray diagonal line represents the
    "Random (Baseline)" going from (0,0) to (100,100). The title reads "gain-curve
    · plotnine · pyplots.ai". X-axis is labeled "Population Targeted (%)" and Y-axis
    is "Positive Cases Captured (%)", both ranging 0-100 with gridlines at 20-unit
    intervals. Legend is positioned on the right side showing all three curve types.
    All text is clearly legible with appropriate font sizes.
  criteria_checklist:
    visual_quality:
      score: 37
      max: 40
      items:
      - id: VQ-01
        name: Text Legibility
        score: 10
        max: 10
        passed: true
        comment: Title at 24pt, axis titles at 20pt, tick labels at 16pt - all perfectly
          readable
      - id: VQ-02
        name: No Overlap
        score: 8
        max: 8
        passed: true
        comment: No overlapping text elements anywhere in the plot
      - id: VQ-03
        name: Element Visibility
        score: 8
        max: 8
        passed: true
        comment: Line width of 2.5 is excellent for visibility, all three curves clearly
          distinguishable
      - id: VQ-04
        name: Color Accessibility
        score: 5
        max: 5
        passed: true
        comment: Blue (#306998), gray (#888888), and yellow (#FFD43B) are colorblind-safe
          with good contrast
      - id: VQ-05
        name: Layout Balance
        score: 4
        max: 5
        passed: true
        comment: Good layout with plot filling canvas well, legend positioned nicely
          but could be slightly better integrated
      - id: VQ-06
        name: Axis Labels
        score: 2
        max: 2
        passed: true
        comment: 'Descriptive labels with units: "Population Targeted (%)" and "Positive
          Cases Captured (%)"'
      - id: VQ-07
        name: Grid & Legend
        score: 0
        max: 2
        passed: false
        comment: Grid is very subtle (alpha 0.2-0.3 is good), but legend title "Curve"
          is generic
    spec_compliance:
      score: 25
      max: 25
      items:
      - id: SC-01
        name: Plot Type
        score: 8
        max: 8
        passed: true
        comment: Correct cumulative gains chart with model curve, perfect model, and
          baseline
      - id: SC-02
        name: Data Mapping
        score: 5
        max: 5
        passed: true
        comment: X-axis correctly shows population percentage, Y-axis shows cumulative
          positive capture
      - id: SC-03
        name: Required Features
        score: 5
        max: 5
        passed: true
        comment: Includes diagonal baseline reference, perfect model line, and model
          curve as specified
      - id: SC-04
        name: Data Range
        score: 3
        max: 3
        passed: true
        comment: Both axes show full 0-100% range as appropriate
      - id: SC-05
        name: Legend Accuracy
        score: 2
        max: 2
        passed: true
        comment: Legend correctly identifies all three curves
      - id: SC-06
        name: Title Format
        score: 2
        max: 2
        passed: true
        comment: Correctly formatted as "gain-curve · plotnine · pyplots.ai"
    data_quality:
      score: 18
      max: 20
      items:
      - id: DQ-01
        name: Feature Coverage
        score: 7
        max: 8
        passed: true
        comment: Shows good model discrimination with steep initial slope, but perfect
          model transition could be more emphasized
      - id: DQ-02
        name: Realistic Context
        score: 7
        max: 7
        passed: true
        comment: Marketing response classification model is a perfect real-world application
          for gain curves
      - id: DQ-03
        name: Appropriate Scale
        score: 4
        max: 5
        passed: true
        comment: 1000 samples with ~17% positive rate is realistic, though positive
          rate is slightly low for marketing
    code_quality:
      score: 9
      max: 10
      items:
      - id: CQ-01
        name: KISS Structure
        score: 3
        max: 3
        passed: true
        comment: 'Clean linear structure: imports → data → plot → save'
      - id: CQ-02
        name: Reproducibility
        score: 3
        max: 3
        passed: true
        comment: Uses np.random.seed(42)
      - id: CQ-03
        name: Clean Imports
        score: 2
        max: 2
        passed: true
        comment: All imports are used, no unnecessary imports
      - id: CQ-04
        name: No Deprecated API
        score: 1
        max: 1
        passed: true
        comment: Uses current plotnine API
      - id: CQ-05
        name: Output Correct
        score: 0
        max: 1
        passed: false
        comment: Saves as "plot.png" but variable n_samples is redefined mid-code
    library_features:
      score: 3
      max: 5
      items:
      - id: LF-01
        name: Distinctive Features
        score: 3
        max: 5
        passed: true
        comment: Good use of ggplot grammar with geom_line, scale_color_manual, and
          theme_minimal, but doesn't use advanced plotnine features like annotations
          or stat layers
  verdict: APPROVED
