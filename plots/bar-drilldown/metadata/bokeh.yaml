library: bokeh
specification_id: bar-drilldown
created: '2026-01-16T17:16:44Z'
updated: '2026-01-16T17:39:18Z'
generated_by: claude-opus-4-5-20251101
workflow_run: 21074664926
issue: 3773
python_version: 3.13.11
library_version: 3.8.2
preview_url: https://storage.googleapis.com/pyplots-images/plots/bar-drilldown/bokeh/plot.png
preview_thumb: https://storage.googleapis.com/pyplots-images/plots/bar-drilldown/bokeh/plot_thumb.png
preview_html: https://storage.googleapis.com/pyplots-images/plots/bar-drilldown/bokeh/plot.html
quality_score: 90
review:
  strengths:
  - Excellent implementation of hierarchical drilldown using Bokeh CustomJS callbacks
    and TapTool
  - Complete 3-level data hierarchy with realistic sales scenario (Region ‚Üí Country
    ‚Üí City)
  - Proper breadcrumb navigation with visual styling and Back button
  - Good use of Bokeh-specific features (ColumnDataSource, CustomJS, widgets)
  - Both PNG and HTML outputs provided for static preview and interactive use
  - Clean color scheme with good accessibility
  weaknesses:
  - Legend does not render in the static PNG export (implemented via scatter points
    but invisible in final output)
  - X-axis category labels appear slightly angled/small in the static export
  image_description: 'The plot displays a column chart with three vertical bars representing
    regional sales data: North America (450M, blue #306998), Europe (380M, yellow
    #FFD43B), and Asia Pacific (320M, blue #4B8BBE). The title "bar-drilldown ¬∑ bokeh
    ¬∑ pyplots.ai" appears at the top left. A breadcrumb navigation element "üìç All"
    is positioned in the upper left corner. Value labels (450, 380, 320) are displayed
    above each bar in bold dark text. The Y-axis shows "Sales (millions $)" and the
    X-axis shows "Category" with region names (North America, Europe, Asia Pacific).
    An instruction footer reads "Click on a bar to drill down into subcategories |
    Click breadcrumb links to navigate back". The bars have white borders and slight
    transparency (alpha 0.9). The layout includes navigation UI elements (breadcrumb
    display and Back button) essential for drilldown functionality. Horizontal grid
    lines with subtle alpha are visible behind the bars.'
  criteria_checklist:
    visual_quality:
      score: 36
      max: 40
      items:
      - id: VQ-01
        name: Text Legibility
        score: 9
        max: 10
        passed: true
        comment: Title, axis labels, and value labels are readable. X-axis category
          labels appear slightly small but still legible.
      - id: VQ-02
        name: No Overlap
        score: 8
        max: 8
        passed: true
        comment: No overlapping text elements; clean layout.
      - id: VQ-03
        name: Element Visibility
        score: 8
        max: 8
        passed: true
        comment: Bars are well-sized and clearly visible with appropriate width (0.7).
      - id: VQ-04
        name: Color Accessibility
        score: 5
        max: 5
        passed: true
        comment: Blue and yellow color scheme is colorblind-friendly with good contrast.
      - id: VQ-05
        name: Layout Balance
        score: 3
        max: 5
        passed: true
        comment: Good use of canvas but navigation elements take up space; legend
          not visible in PNG.
      - id: VQ-06
        name: Axis Labels
        score: 2
        max: 2
        passed: true
        comment: Y-axis has 'Sales (millions $)' with units; X-axis has 'Category'.
      - id: VQ-07
        name: Grid & Legend
        score: 1
        max: 2
        passed: true
        comment: Grid is subtle with alpha 0.3 and dashed lines. Legend implemented
          but not visible in PNG export.
    spec_compliance:
      score: 23
      max: 25
      items:
      - id: SC-01
        name: Plot Type
        score: 8
        max: 8
        passed: true
        comment: Correct column/bar chart type for hierarchical drilling.
      - id: SC-02
        name: Data Mapping
        score: 5
        max: 5
        passed: true
        comment: Categories correctly mapped to X-axis, values to Y-axis.
      - id: SC-03
        name: Required Features
        score: 4
        max: 5
        passed: true
        comment: Has drilldown via TapTool, breadcrumb navigation, Back button, value
          labels, instructions.
      - id: SC-04
        name: Data Range
        score: 3
        max: 3
        passed: true
        comment: Y-axis starts at 0 and extends to max*1.15 showing all data.
      - id: SC-05
        name: Legend Accuracy
        score: 1
        max: 2
        passed: true
        comment: Legend is implemented but not rendered in PNG export.
      - id: SC-06
        name: Title Format
        score: 2
        max: 2
        passed: true
        comment: Correctly uses 'bar-drilldown ¬∑ bokeh ¬∑ pyplots.ai'.
    data_quality:
      score: 18
      max: 20
      items:
      - id: DQ-01
        name: Feature Coverage
        score: 7
        max: 8
        passed: true
        comment: Shows 3-level hierarchy (Region ‚Üí Country ‚Üí City), demonstrates drilldown
          concept well.
      - id: DQ-02
        name: Realistic Context
        score: 7
        max: 7
        passed: true
        comment: Real-world sales by geographic region scenario with countries and
          cities.
      - id: DQ-03
        name: Appropriate Scale
        score: 4
        max: 5
        passed: true
        comment: Sales values in millions are plausible; hierarchical breakdown is
          internally consistent.
    code_quality:
      score: 8
      max: 10
      items:
      - id: CQ-01
        name: KISS Structure
        score: 1
        max: 3
        passed: false
        comment: Uses ColumnDataSource patterns and CustomJS callbacks which add complexity
          (necessary for interactivity).
      - id: CQ-02
        name: Reproducibility
        score: 3
        max: 3
        passed: true
        comment: Data is deterministic (hardcoded hierarchy dictionary).
      - id: CQ-03
        name: Clean Imports
        score: 2
        max: 2
        passed: true
        comment: All imports are used.
      - id: CQ-04
        name: No Deprecated API
        score: 1
        max: 1
        passed: true
        comment: Uses current Bokeh 3.x API.
      - id: CQ-05
        name: Output Correct
        score: 1
        max: 1
        passed: true
        comment: Saves as plot.png and plot.html.
    library_features:
      score: 5
      max: 5
      items:
      - id: LF-01
        name: Distinctive Features
        score: 5
        max: 5
        passed: true
        comment: Excellent use of TapTool, CustomJS callbacks, ColumnDataSource, Div/Button
          widgets, and HTML export.
  verdict: APPROVED
impl_tags:
  dependencies: []
  techniques:
  - hover-tooltips
  - html-export
  - annotations
  - custom-legend
  patterns:
  - columndatasource
  - iteration-over-groups
  dataprep: []
  styling:
  - alpha-blending
  - grid-styling
  - edge-highlighting
