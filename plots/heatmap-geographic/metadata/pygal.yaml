library: pygal
specification_id: heatmap-geographic
created: '2026-01-10T22:40:50Z'
updated: '2026-01-10T22:56:35Z'
generated_by: claude-opus-4-5-20251101
workflow_run: 20885435790
issue: 3638
python_version: 3.13.11
library_version: 3.1.0
preview_url: https://storage.googleapis.com/pyplots-images/plots/heatmap-geographic/pygal/plot.png
preview_thumb: https://storage.googleapis.com/pyplots-images/plots/heatmap-geographic/pygal/plot_thumb.png
preview_html: https://storage.googleapis.com/pyplots-images/plots/heatmap-geographic/pygal/plot.html
quality_score: 86
review:
  strengths:
  - Impressive custom implementation extending pygal Graph class to create geographic
    heatmap capability not natively available
  - Excellent geographic context with California coastline approximation using polylines
  - Smooth density visualization using Gaussian smoothing on 2D histogram
  - Well-designed colorbar with proper gradient and tick labels
  - Good color interpolation for continuous heatmap appearance
  - Scatter point overlay adds clarity about actual station locations
  weaknesses:
  - Code violates KISS principle by using a class, though this is necessary for pygal
    extension
  - Scatter points could be slightly larger for better visibility
  image_description: 'The plot displays a geographic heatmap of California showing
    spatial density of environmental monitoring stations. The visualization uses a
    YlOrRd (yellow-orange-red) color gradient to represent density values ranging
    from 0.0 to 105.5. Three distinct density clusters are visible: a large cluster
    in Northern California around coordinates (-122.5, 38.5), a medium cluster on
    the Central Coast around (-121.5, 36.5), and another cluster in Southern California
    around (-118, 34). The plot includes blue scatter points overlaid on the heatmap
    representing individual monitoring stations. Two black polylines approximate the
    California coastline (western boundary) and state borders (eastern boundary).
    The background is a light blue (#e8f4f8). Axis labels show "Longitude (°)" and
    "Latitude (°)" with appropriate tick marks. A vertical colorbar on the right shows
    the density scale with "Density" title. A legend indicator shows "Station" for
    the blue points. The title correctly displays "heatmap-geographic · pygal · pyplots.ai".'
  criteria_checklist:
    visual_quality:
      score: 35
      max: 40
      items:
      - id: VQ-01
        name: Text Legibility
        score: 9
        max: 10
        passed: true
        comment: Title, axis labels, and tick labels are all clearly readable with
          appropriate font sizes for canvas
      - id: VQ-02
        name: No Overlap
        score: 8
        max: 8
        passed: true
        comment: No overlapping text elements, tick labels and axis labels well spaced
      - id: VQ-03
        name: Element Visibility
        score: 6
        max: 8
        passed: true
        comment: Heatmap cells visible with good color gradation, scatter points slightly
          small at r=8 for 500 points
      - id: VQ-04
        name: Color Accessibility
        score: 5
        max: 5
        passed: true
        comment: YlOrRd sequential colormap is colorblind-safe, blue points contrast
          well
      - id: VQ-05
        name: Layout Balance
        score: 4
        max: 5
        passed: true
        comment: Good use of canvas space with appropriate margins for labels and
          colorbar
      - id: VQ-06
        name: Axis Labels
        score: 2
        max: 2
        passed: true
        comment: 'Both axes have descriptive labels with units: Longitude (°) and
          Latitude (°)'
      - id: VQ-07
        name: Grid & Legend
        score: 1
        max: 2
        passed: true
        comment: Grid lines are subtle, station legend present but positioned below
          colorbar
    spec_compliance:
      score: 23
      max: 25
      items:
      - id: SC-01
        name: Plot Type
        score: 8
        max: 8
        passed: true
        comment: Correct geographic heatmap showing spatial density with continuous
          color gradients
      - id: SC-02
        name: Data Mapping
        score: 5
        max: 5
        passed: true
        comment: Latitude/longitude correctly mapped to Y/X axes
      - id: SC-03
        name: Required Features
        score: 4
        max: 5
        passed: true
        comment: Has colorbar, geographic context (coastlines), density visualization.
          Missing zoom but pygal is static
      - id: SC-04
        name: Data Range
        score: 3
        max: 3
        passed: true
        comment: All data visible within California lat/lon bounds (32.5-42, -125
          to -114)
      - id: SC-05
        name: Legend Accuracy
        score: 2
        max: 2
        passed: true
        comment: Colorbar labeled Density, station legend correctly labeled
      - id: SC-06
        name: Title Format
        score: 1
        max: 2
        passed: true
        comment: Correct format heatmap-geographic · pygal · pyplots.ai
    data_quality:
      score: 18
      max: 20
      items:
      - id: DQ-01
        name: Feature Coverage
        score: 7
        max: 8
        passed: true
        comment: Shows multiple density clusters, variation in intensity, point overlay
          demonstrates hotspots well
      - id: DQ-02
        name: Realistic Context
        score: 7
        max: 7
        passed: true
        comment: California environmental monitoring stations with air quality readings
          is realistic and neutral
      - id: DQ-03
        name: Appropriate Scale
        score: 4
        max: 5
        passed: true
        comment: Coordinates are correct California bounds, density values plausible
    code_quality:
      score: 5
      max: 10
      items:
      - id: CQ-01
        name: KISS Structure
        score: 0
        max: 3
        passed: false
        comment: Uses custom class GeoHeatmap which violates KISS, though necessary
          for pygal extension
      - id: CQ-02
        name: Reproducibility
        score: 3
        max: 3
        passed: true
        comment: Uses np.random.seed(42) for deterministic data generation
      - id: CQ-03
        name: Clean Imports
        score: 1
        max: 2
        passed: true
        comment: sys module used for path manipulation workaround
      - id: CQ-04
        name: No Deprecated API
        score: 1
        max: 1
        passed: true
        comment: No deprecated functions used
      - id: CQ-05
        name: Output Correct
        score: 0
        max: 1
        passed: true
        comment: Saves as plot.png correctly
    library_features:
      score: 5
      max: 5
      items:
      - id: LF-01
        name: Distinctive Features
        score: 5
        max: 5
        passed: true
        comment: Excellent use of pygal extensibility creating custom Graph subclass
          with SVG rendering, Style class, custom SVG elements
  verdict: APPROVED
impl_tags:
  dependencies: []
  techniques:
  - colorbar
  - annotations
  - patches
  patterns:
  - data-generation
  - matrix-construction
  - iteration-over-groups
  dataprep:
  - binning
  - kde
  styling:
  - custom-colormap
  - alpha-blending
  - grid-styling
