library: bokeh
specification_id: hexbin-map-geographic
created: '2026-01-20T21:15:52Z'
updated: '2026-01-20T21:38:16Z'
generated_by: claude-opus-4-5-20251101
workflow_run: 21187394872
issue: 3767
python_version: 3.13.11
library_version: 3.8.2
preview_url: https://storage.googleapis.com/pyplots-images/plots/hexbin-map-geographic/bokeh/plot.png
preview_thumb: https://storage.googleapis.com/pyplots-images/plots/hexbin-map-geographic/bokeh/plot_thumb.png
preview_html: https://storage.googleapis.com/pyplots-images/plots/hexbin-map-geographic/bokeh/plot.html
quality_score: 68
review:
  strengths:
  - 'Excellent use of Bokeh-specific features: hex_tile(), hexbin utility, HoverTool
    with meaningful tooltips'
  - Good data scenario with clustered NYC taxi pickup simulation matching spec applications
  - Proper Web Mercator projection conversion for geographic accuracy
  - Clean code structure following KISS principles
  - Includes both PNG and interactive HTML outputs with tile layer for HTML version
  weaknesses:
  - 'Title format incorrect: includes NYC Taxi Pickups prefix instead of required
    spec-id library pyplots.ai format'
  - Text sizes appear tiny in rendered output despite large pt values in code - colorbar
    and axis labels barely readable
  - Geographic context (coastlines, land mass patch) not visible in PNG output - only
    hexagons shown
  - Colorbar labels too small to read, legend placement needs adjustment
  image_description: The plot displays a hexagonal binning map of NYC taxi pickup
    data centered on Manhattan. The visualization shows approximately 150+ hexagonal
    cells arranged in an irregular pattern that roughly corresponds to the Manhattan
    geography. Hexagons are colored using a viridis palette ranging from dark purple
    (low counts ~0-50) through blue, teal, green to bright yellow (high counts ~250+).
    Two high-density hotspots are visible as bright yellow-green hexagons - one in
    what appears to be Midtown and another in the Greenwich Village area. The colorbar
    on the right shows "Pickup Count" with values from approximately 0 to 250+. The
    title reads "NYC Taxi Pickups · hexbin-map-geographic · bokeh · pyplots.ai". Axis
    labels show "Longitude" (ranging from about -74.1 to -73.85) and "Latitude" (ranging
    from about 40.7 to 40.8). The background appears light gray with a subtle grid.
    However, the geographic context features (coastlines, boundaries) defined in the
    code are not visible in the rendered image, and all text is extremely small relative
    to the canvas size.
  criteria_checklist:
    visual_quality:
      score: 28
      max: 40
      items:
      - id: VQ-01
        name: Text Legibility
        score: 5
        max: 10
        passed: false
        comment: Title, axis labels, and tick labels are present but very small and
          difficult to read at full resolution
      - id: VQ-02
        name: No Overlap
        score: 8
        max: 8
        passed: true
        comment: No overlapping text elements, hexagons have clean boundaries
      - id: VQ-03
        name: Element Visibility
        score: 7
        max: 8
        passed: true
        comment: Hexagons are well-sized and clearly visible with good transparency
      - id: VQ-04
        name: Color Accessibility
        score: 5
        max: 5
        passed: true
        comment: Uses viridis colormap which is colorblind-safe
      - id: VQ-05
        name: Layout Balance
        score: 1
        max: 5
        passed: false
        comment: Geographic context not visible in PNG output, large empty areas
      - id: VQ-06
        name: Axis Labels
        score: 2
        max: 2
        passed: true
        comment: Has Longitude and Latitude as descriptive labels
      - id: VQ-07
        name: Grid & Legend
        score: 0
        max: 2
        passed: false
        comment: Colorbar text extremely small, labels unreadable
    spec_compliance:
      score: 18
      max: 25
      items:
      - id: SC-01
        name: Plot Type
        score: 8
        max: 8
        passed: true
        comment: Correct hexbin map visualization
      - id: SC-02
        name: Data Mapping
        score: 5
        max: 5
        passed: true
        comment: Lat/lon correctly mapped to hex positions
      - id: SC-03
        name: Required Features
        score: 2
        max: 5
        passed: false
        comment: Missing visible geographic context in PNG output
      - id: SC-04
        name: Data Range
        score: 3
        max: 3
        passed: true
        comment: All hexagons visible within axis range
      - id: SC-05
        name: Legend Accuracy
        score: 0
        max: 2
        passed: false
        comment: Colorbar present but title and labels too small to read
      - id: SC-06
        name: Title Format
        score: 0
        max: 2
        passed: false
        comment: Title includes NYC Taxi Pickups prefix instead of required format
    data_quality:
      score: 17
      max: 20
      items:
      - id: DQ-01
        name: Feature Coverage
        score: 7
        max: 8
        passed: true
        comment: Shows density variation with hotspots and multiple cluster centers
      - id: DQ-02
        name: Realistic Context
        score: 7
        max: 7
        passed: true
        comment: NYC taxi pickup data is perfect real-world scenario from spec
      - id: DQ-03
        name: Appropriate Scale
        score: 3
        max: 5
        passed: true
        comment: Coordinates are realistic NYC area, 5000 points reasonable
    code_quality:
      score: 10
      max: 10
      items:
      - id: CQ-01
        name: KISS Structure
        score: 3
        max: 3
        passed: true
        comment: 'Linear flow: imports, data, plot, save'
      - id: CQ-02
        name: Reproducibility
        score: 3
        max: 3
        passed: true
        comment: np.random.seed(42) set
      - id: CQ-03
        name: Clean Imports
        score: 2
        max: 2
        passed: true
        comment: All imports used
      - id: CQ-04
        name: No Deprecated API
        score: 1
        max: 1
        passed: true
        comment: Uses current Bokeh API
      - id: CQ-05
        name: Output Correct
        score: 1
        max: 1
        passed: true
        comment: Saves as plot.png
    library_features:
      score: 5
      max: 5
      items:
      - id: LF-01
        name: Distinctive Features
        score: 5
        max: 5
        passed: true
        comment: Uses hex_tile, hexbin utility, HoverTool, ColumnDataSource, CustomJSTickFormatter,
          tile provider
  verdict: APPROVED
impl_tags:
  dependencies: []
  techniques:
  - colorbar
  - hover-tooltips
  - html-export
  - manual-ticks
  patterns:
  - data-generation
  - columndatasource
  - iteration-over-groups
  dataprep:
  - binning
  styling:
  - custom-colormap
  - alpha-blending
  - grid-styling
