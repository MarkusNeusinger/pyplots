library: pygal
specification_id: hierarchy-toggle-view
created: '2026-01-11T21:05:27Z'
updated: '2026-01-11T21:14:36Z'
generated_by: claude-opus-4-5-20251101
workflow_run: 20901764011
issue: 3697
python_version: 3.13.11
library_version: 3.1.0
preview_url: https://storage.googleapis.com/pyplots-images/plots/hierarchy-toggle-view/pygal/plot.png
preview_thumb: https://storage.googleapis.com/pyplots-images/plots/hierarchy-toggle-view/pygal/plot_thumb.png
preview_html: https://storage.googleapis.com/pyplots-images/plots/hierarchy-toggle-view/pygal/plot.html
quality_score: 90
review:
  strengths:
  - Excellent side-by-side presentation effectively demonstrates the toggle concept
    in static PNG format
  - Consistent and colorblind-friendly color scheme across both views with lighter
    shades for sub-categories
  - Clean hierarchical data structure with realistic budget allocation scenario
  - Interactive HTML version implements functional toggle between views
  - Good use of pygal distinctive features including Treemap, Pie with inner_radius,
    and custom styling
  weaknesses:
  - HTML toggle uses simple CSS show/hide without smooth animated transitions between
    views
  - Title format includes Company Budget prefix rather than exact spec-id format
  image_description: 'The image shows a side-by-side comparison of two hierarchical
    visualizations of company budget data. On the left is a Treemap View displaying
    nested rectangles where area represents budget allocation. On the right is a Sunburst
    View (donut/pie chart) showing the same data as radial segments with an inner
    radius creating a donut shape. Both views use a consistent color scheme: blue
    shades for Engineering teams (Backend $1800K, Frontend $1200K, Data Science $900K,
    DevOps $600K), yellow shades for Marketing (Digital $900K, Brand $600K, Content
    $600K), green shades for Sales (Enterprise $1000K, SMB $500K, Partners $300K),
    and purple shades for Operations (IT $500K, HR $400K, Finance $300K). The title
    "Company Budget · hierarchy-toggle-view · pygal · pyplots.ai" is prominently displayed
    at the top in blue with a subtitle explaining the toggle concept. Each chart has
    its own heading ("Treemap View" and "Sunburst View"). Value labels in $K format
    are displayed on both charts. The treemap legend shows departments at the bottom
    left, while the sunburst legend shows individual teams at the bottom right.'
  criteria_checklist:
    visual_quality:
      score: 36
      max: 40
      items:
      - id: VQ-01
        name: Text Legibility
        score: 9
        max: 10
        passed: true
        comment: Title and value labels clearly readable. Slightly reduced because
          some value labels on smaller treemap segments could be marginally larger.
      - id: VQ-02
        name: No Overlap
        score: 8
        max: 8
        passed: true
        comment: No overlapping text elements. All labels placed within their segments
          without collision.
      - id: VQ-03
        name: Element Visibility
        score: 7
        max: 8
        passed: true
        comment: All segments well-sized and visible. Minor deduction as some smaller
          segments in the sunburst are a bit thin.
      - id: VQ-04
        name: Color Accessibility
        score: 5
        max: 5
        passed: true
        comment: Excellent color palette using distinct blue, yellow, green, and purple
          hues with lighter shades for sub-teams.
      - id: VQ-05
        name: Layout Balance
        score: 5
        max: 5
        passed: true
        comment: Side-by-side layout makes excellent use of the 4800x2700 canvas with
          well-sized and balanced charts.
      - id: VQ-06
        name: Axis Labels
        score: 0
        max: 2
        passed: false
        comment: N/A for treemap/sunburst - no traditional axes. Value labels present
          with $ and K units.
      - id: VQ-07
        name: Grid & Legend
        score: 2
        max: 2
        passed: true
        comment: Legends well-placed at bottom, organized in columns. No grid needed
          for this chart type.
    spec_compliance:
      score: 23
      max: 25
      items:
      - id: SC-01
        name: Plot Type
        score: 8
        max: 8
        passed: true
        comment: Correctly implements both treemap and sunburst/donut chart views.
      - id: SC-02
        name: Data Mapping
        score: 5
        max: 5
        passed: true
        comment: Values correctly map to rectangle area (treemap) and arc angle (sunburst).
      - id: SC-03
        name: Required Features
        score: 4
        max: 5
        passed: true
        comment: 'Toggle functionality implemented in HTML version. PNG shows side-by-side.
          Minor deduction: no animated transitions.'
      - id: SC-04
        name: Data Range
        score: 3
        max: 3
        passed: true
        comment: All 14 team-level nodes visible across 4 departments and 3 hierarchy
          levels.
      - id: SC-05
        name: Legend Accuracy
        score: 2
        max: 2
        passed: true
        comment: Legends accurately label departments (treemap) and teams (sunburst).
      - id: SC-06
        name: Title Format
        score: 1
        max: 2
        passed: true
        comment: Contains spec-id, library, and pyplots.ai but adds Company Budget
          prefix.
    data_quality:
      score: 19
      max: 20
      items:
      - id: DQ-01
        name: Feature Coverage
        score: 7
        max: 8
        passed: true
        comment: Shows hierarchical structure well with varying budget sizes. Good
          variety in values from $300K to $1800K.
      - id: DQ-02
        name: Realistic Context
        score: 7
        max: 7
        passed: true
        comment: Company budget allocation is a perfect, realistic use case. Department/team
          structure is believable and neutral.
      - id: DQ-03
        name: Appropriate Scale
        score: 5
        max: 5
        passed: true
        comment: Budget values in thousands ($300K-$1800K) are realistic for team
          allocations.
    code_quality:
      score: 8
      max: 10
      items:
      - id: CQ-01
        name: KISS Structure
        score: 2
        max: 3
        passed: true
        comment: Follows imports → data → plot → save structure but has some complexity
          with PIL combination for PNG.
      - id: CQ-02
        name: Reproducibility
        score: 3
        max: 3
        passed: true
        comment: Data is hardcoded/deterministic, no random elements.
      - id: CQ-03
        name: Clean Imports
        score: 2
        max: 2
        passed: true
        comment: All imports are used. The sys.path manipulation is a documented workaround.
      - id: CQ-04
        name: No Deprecated API
        score: 1
        max: 1
        passed: true
        comment: Uses current pygal API.
      - id: CQ-05
        name: Output Correct
        score: 0
        max: 1
        passed: false
        comment: Saves both plot.png and plot.html as expected but loses 1 point for
          complexity.
    library_features:
      score: 4
      max: 5
      items:
      - id: LF-01
        name: Distinctive Features
        score: 4
        max: 5
        passed: true
        comment: Good use of pygal Treemap and Pie with inner_radius for donut effect.
          Uses Style customization, value_formatter, print_values, legend positioning.
  verdict: APPROVED
impl_tags:
  dependencies:
  - pillow
  techniques:
  - html-export
  - custom-legend
  patterns:
  - iteration-over-groups
  dataprep: []
  styling:
  - edge-highlighting
