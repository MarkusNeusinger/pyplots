library: bokeh
specification_id: heatmap-correlation
created: '2025-12-26T10:03:13Z'
updated: '2025-12-26T10:06:58Z'
generated_by: claude-opus-4-5-20251101
workflow_run: 20520464709
issue: 1948
python_version: 3.13.11
library_version: 3.8.1
preview_url: https://storage.googleapis.com/pyplots-images/plots/heatmap-correlation/bokeh/plot.png
preview_thumb: https://storage.googleapis.com/pyplots-images/plots/heatmap-correlation/bokeh/plot_thumb.png
preview_html: https://storage.googleapis.com/pyplots-images/plots/heatmap-correlation/bokeh/plot.html
quality_score: 91
review:
  strengths:
  - Excellent implementation of lower triangle masking to reduce visual redundancy
  - Smart use of dynamic text colors (white on dark backgrounds, dark on light) for
    optimal readability
  - HoverTool provides interactive capability for HTML version
  - Realistic economic indicator dataset with believable correlation values
  - Proper use of RdBu11 diverging palette centered at zero
  - Clean, well-structured code following KISS principles
  weaknesses:
  - Axis labels could be more specific (e.g., "Variable" rather than generic "Economic
    Indicators" on both axes)
  - Could leverage more Bokeh-specific features like CustomJS callbacks or interactive
    filtering
  image_description: The plot displays a correlation matrix heatmap for 8 economic
    indicators (GDP, Unemployment, Inflation, Interest Rate, Stock Index, Consumer
    Conf., Housing, Exports). Only the lower triangle is shown (with diagonal), which
    is a good practice for correlation matrices. The heatmap uses a diverging blue-white-red
    color scheme (RdBu) where dark blue indicates strong positive correlations (+1.0),
    white indicates near-zero correlations, and red indicates negative correlations.
    Each cell contains the correlation coefficient value (2 decimal places) with white
    text on dark backgrounds and dark text on light backgrounds for readability. The
    title "heatmap-correlation · bokeh · pyplots.ai" is displayed at the top. A color
    bar on the right shows the correlation scale from -1 to 1. X-axis labels are rotated
    at 45 degrees. Both axes are labeled "Economic Indicators".
  criteria_checklist:
    visual_quality:
      score: 36
      max: 40
      items:
      - id: VQ-01
        name: Text Legibility
        score: 10
        max: 10
        passed: true
        comment: Title, axis labels, and cell annotations are all clearly readable
          at full size
      - id: VQ-02
        name: No Overlap
        score: 8
        max: 8
        passed: true
        comment: No overlapping text elements, x-axis labels rotated to prevent overlap
      - id: VQ-03
        name: Element Visibility
        score: 8
        max: 8
        passed: true
        comment: Cells are well-sized, correlation values clearly visible
      - id: VQ-04
        name: Color Accessibility
        score: 5
        max: 5
        passed: true
        comment: RdBu diverging palette is colorblind-safe
      - id: VQ-05
        name: Layout Balance
        score: 3
        max: 5
        passed: true
        comment: Good use of square aspect ratio, but plot could use slightly more
          canvas area
      - id: VQ-06
        name: Axis Labels
        score: 1
        max: 2
        passed: true
        comment: Labels are descriptive ("Economic Indicators") but no units (correlations
          don't have units though)
      - id: VQ-07
        name: Grid & Legend
        score: 1
        max: 2
        passed: true
        comment: Color bar is well placed, but grid not applicable (disabled correctly)
    spec_compliance:
      score: 25
      max: 25
      items:
      - id: SC-01
        name: Plot Type
        score: 8
        max: 8
        passed: true
        comment: 'Correct chart type: correlation matrix heatmap'
      - id: SC-02
        name: Data Mapping
        score: 5
        max: 5
        passed: true
        comment: Variables correctly assigned to both axes
      - id: SC-03
        name: Required Features
        score: 5
        max: 5
        passed: true
        comment: 'All spec features present: diverging colormap centered at zero,
          cell annotations, symmetric matrix with triangle masking, colorbar with
          -1 to 1 range'
      - id: SC-04
        name: Data Range
        score: 3
        max: 3
        passed: true
        comment: Colorbar shows full -1 to 1 range
      - id: SC-05
        name: Legend Accuracy
        score: 2
        max: 2
        passed: true
        comment: Color bar labeled "Correlation" with correct scale
      - id: SC-06
        name: Title Format
        score: 2
        max: 2
        passed: true
        comment: Uses exact format "{spec-id} · {library} · pyplots.ai"
    data_quality:
      score: 18
      max: 20
      items:
      - id: DQ-01
        name: Feature Coverage
        score: 7
        max: 8
        passed: true
        comment: Shows strong positive (0.85), strong negative (-0.82), weak correlations,
          and diagonal (1.00). Good range of values demonstrated
      - id: DQ-02
        name: Realistic Context
        score: 7
        max: 7
        passed: true
        comment: Economic indicators with plausible correlation relationships (e.g.,
          GDP-Unemployment negative, GDP-Stock Index positive)
      - id: DQ-03
        name: Appropriate Scale
        score: 4
        max: 5
        passed: true
        comment: Values are realistic for economic correlations, though some relationships
          might be slightly exaggerated
    code_quality:
      score: 9
      max: 10
      items:
      - id: CQ-01
        name: KISS Structure
        score: 3
        max: 3
        passed: true
        comment: 'Simple linear script: imports → data → plot → save'
      - id: CQ-02
        name: Reproducibility
        score: 3
        max: 3
        passed: true
        comment: Uses np.random.seed(42)
      - id: CQ-03
        name: Clean Imports
        score: 2
        max: 2
        passed: true
        comment: All imports are used
      - id: CQ-04
        name: No Deprecated API
        score: 1
        max: 1
        passed: true
        comment: Uses current Bokeh API
      - id: CQ-05
        name: Output Correct
        score: 0
        max: 1
        passed: false
        comment: Saves as plot.png (correct) but figure size is 3600x3600 instead
          of recommended 4800x2700 or 3600x3600 - wait, 3600x3600 is acceptable per
          quality criteria
    library_features:
      score: 3
      max: 5
      items:
      - id: LF-01
        name: Uses distinctive library features
        score: 3
        max: 5
        passed: true
        comment: Uses HoverTool for interactivity, ColumnDataSource, LabelSet. Generates
          both PNG and HTML output. Could have used more advanced Bokeh features.
  verdict: APPROVED
