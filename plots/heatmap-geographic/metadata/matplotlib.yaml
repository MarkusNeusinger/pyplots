library: matplotlib
specification_id: heatmap-geographic
created: '2026-01-10T08:15:03Z'
updated: '2026-01-10T08:17:50Z'
generated_by: claude-opus-4-5-20251101
workflow_run: 20875417706
issue: 3638
python_version: 3.13.11
library_version: 3.10.8
preview_url: https://storage.googleapis.com/pyplots-images/plots/heatmap-geographic/matplotlib/plot.png
preview_thumb: https://storage.googleapis.com/pyplots-images/plots/heatmap-geographic/matplotlib/plot_thumb.png
preview_html: null
quality_score: 91
review:
  strengths:
  - Excellent implementation of continuous density heatmap using 2D histogram with
    Gaussian smoothing
  - Clean geographic context with hand-drawn California coastline approximation
  - Proper use of masked arrays for transparency where no data exists
  - Sequential colormap (YlOrRd) with appropriate alpha for basemap visibility
  - Well-sized text elements following matplotlib guidelines
  - Realistic environmental monitoring scenario with clustered data
  weaknesses:
  - Legend in upper right slightly intrudes into plot area - could be positioned outside
    or in a less obtrusive location
  - Scatter points showing sensor locations are quite faint (alpha=0.3, s=15) - slightly
    larger or more visible would help
  - AQI values from exponential distribution could have more realistic scale
  - Not using proper geographic projections (Cartopy/Basemap) which would be more
    accurate for a true geographic heatmap
  image_description: 'The plot displays a geographic heatmap of California showing
    air quality index (AQI) weighted density from simulated environmental monitoring
    stations. The visualization uses a YlOrRd (yellow-orange-red) sequential colormap
    with three distinct density clusters visible: one in Northern California (~38.5°N),
    one along the Central Coast (~36°N), and one in Southern California (~34°N). The
    heatmap shows smooth density gradients with red hotspots indicating highest concentrations.
    A black outline approximates California''s boundaries (coastline and eastern border).
    Small blue scatter points (with low opacity) show individual sensor locations
    beneath the heatmap layer. The colorbar on the right indicates "Air Quality Index
    (weighted density)" ranging from approximately 0-30. Axes are labeled "Longitude"
    and "Latitude" with tick marks at 2-degree intervals. A dashed grid provides geographic
    reference, and a legend identifies the coastline and sensor locations.'
  criteria_checklist:
    visual_quality:
      score: 36
      max: 40
      items:
      - id: VQ-01
        name: Text Legibility
        score: 10
        max: 10
        passed: true
        comment: Title at 24pt, axis labels at 20pt, ticks at 16pt, colorbar label
          at 18pt - all perfectly readable
      - id: VQ-02
        name: No Overlap
        score: 8
        max: 8
        passed: true
        comment: No overlapping text elements, all labels clearly separated
      - id: VQ-03
        name: Element Visibility
        score: 6
        max: 8
        passed: true
        comment: Heatmap clearly visible, scatter points appropriately small but could
          be slightly more visible
      - id: VQ-04
        name: Color Accessibility
        score: 5
        max: 5
        passed: true
        comment: YlOrRd sequential colormap works well for colorblind users
      - id: VQ-05
        name: Layout Balance
        score: 5
        max: 5
        passed: true
        comment: Plot fills canvas well, colorbar positioned properly, balanced margins
      - id: VQ-06
        name: Axis Labels
        score: 2
        max: 2
        passed: true
        comment: Longitude and Latitude are descriptive and appropriate
      - id: VQ-07
        name: Grid & Legend
        score: 0
        max: 2
        passed: false
        comment: Legend placement overlaps somewhat with plot area in upper right
    spec_compliance:
      score: 25
      max: 25
      items:
      - id: SC-01
        name: Plot Type
        score: 8
        max: 8
        passed: true
        comment: Correct geographic heatmap with continuous color gradient
      - id: SC-02
        name: Data Mapping
        score: 5
        max: 5
        passed: true
        comment: Latitude/Longitude correctly assigned to Y/X axes, values used for
          weighting
      - id: SC-03
        name: Required Features
        score: 5
        max: 5
        passed: true
        comment: Has KDE-like smoothing, sequential colormap with transparency, colorbar
          legend, geographic context
      - id: SC-04
        name: Data Range
        score: 3
        max: 3
        passed: true
        comment: All data points visible within California boundaries
      - id: SC-05
        name: Legend Accuracy
        score: 2
        max: 2
        passed: true
        comment: Legend correctly identifies coastline and sensor locations
      - id: SC-06
        name: Title Format
        score: 2
        max: 2
        passed: true
        comment: Correctly uses heatmap-geographic · matplotlib · pyplots.ai format
    data_quality:
      score: 17
      max: 20
      items:
      - id: DQ-01
        name: Feature Coverage
        score: 7
        max: 8
        passed: true
        comment: Shows clustered data with multiple hotspots and varying intensity
          levels
      - id: DQ-02
        name: Realistic Context
        score: 7
        max: 7
        passed: true
        comment: Environmental monitoring stations across California is a plausible,
          neutral scenario
      - id: DQ-03
        name: Appropriate Scale
        score: 3
        max: 5
        passed: true
        comment: Lat/Lon ranges correct for California, AQI values somewhat high
    code_quality:
      score: 10
      max: 10
      items:
      - id: CQ-01
        name: KISS Structure
        score: 3
        max: 3
        passed: true
        comment: 'Simple flat script: imports → data → plot → save'
      - id: CQ-02
        name: Reproducibility
        score: 3
        max: 3
        passed: true
        comment: Uses np.random.seed(42)
      - id: CQ-03
        name: Clean Imports
        score: 2
        max: 2
        passed: true
        comment: Only matplotlib.pyplot and numpy, both used
      - id: CQ-04
        name: No Deprecated API
        score: 1
        max: 1
        passed: true
        comment: No deprecated functions used
      - id: CQ-05
        name: Output Correct
        score: 1
        max: 1
        passed: true
        comment: Saves as plot.png
    library_features:
      score: 3
      max: 5
      items:
      - id: LF-01
        name: Distinctive Features
        score: 3
        max: 5
        passed: true
        comment: Uses imshow with bilinear interpolation, masked arrays for transparency.
          Good but not using advanced features like Cartopy
  verdict: APPROVED
impl_tags:
  dependencies: []
  techniques:
  - colorbar
  - annotations
  patterns:
  - data-generation
  - matrix-construction
  - iteration-over-groups
  dataprep:
  - binning
  - kde
  styling:
  - custom-colormap
  - alpha-blending
  - grid-styling
