library: bokeh
specification_id: map-connection-lines
created: '2026-01-21T16:30:21Z'
updated: '2026-01-21T16:39:57Z'
generated_by: claude-opus-4-5-20251101
workflow_run: 21217347997
issue: 3746
python_version: 3.13.11
library_version: 3.8.2
preview_url: https://storage.googleapis.com/pyplots-images/plots/map-connection-lines/bokeh/plot.png
preview_thumb: https://storage.googleapis.com/pyplots-images/plots/map-connection-lines/bokeh/plot_thumb.png
preview_html: https://storage.googleapis.com/pyplots-images/plots/map-connection-lines/bokeh/plot.html
quality_score: 91
review:
  strengths:
  - Excellent use of Bokeh-specific features including ColumnDataSource, HoverTool
    with route/traffic tooltips, and multi_line rendering
  - Variable line width and alpha based on passenger volume effectively communicates
    connection strength
  - Clean Python-themed color scheme (blue lines, yellow markers) with good accessibility
  - Custom manual legend clearly explains the line thickness encoding
  - Proper curved arc calculation providing visual interest and representing geodesic-like
    paths
  - Airport labels with offset positioning to reduce overlap with markers
  weaknesses:
  - Missing base map with country borders or coastlines as mentioned in the specification
    notes (Bokeh does support tile sources or shapes for this)
  - Axis labels lack "(degrees)" unit specification
  image_description: The plot displays a world map visualization of international
    flight routes between 12 major airports. Yellow circular markers (with blue outlines)
    indicate airport locations labeled with 3-letter IATA codes (JFK, LHR, CDG, DXB,
    SIN, HND, SYD, LAX, SFO, ORD, FRA, AMS). Curved blue connection lines (arcs) link
    origin-destination airport pairs, with line thickness and opacity varying based
    on passenger volume. The background is light gray (#f5f5f5) with a subtle dashed
    grid. The title "map-connection-lines 路 bokeh 路 pyplots.ai" appears in the top-left.
    A custom legend in the upper-left shows three thickness levels representing low
    (~1M/yr), medium (~2.5M/yr), and high (~4.5M/yr) passenger traffic. Axes are labeled
    "Longitude" and "Latitude" with degree values. The plot spans from -180 to 180
    longitude and approximately -60 to 80 latitude.
  criteria_checklist:
    visual_quality:
      score: 36
      max: 40
      items:
      - id: VQ-01
        name: Text Legibility
        score: 9
        max: 10
        passed: true
        comment: Title at 32pt, axis labels at 22pt, tick labels at 18pt, airport
          labels at 14pt - all readable but airport labels could be slightly larger
      - id: VQ-02
        name: No Overlap
        score: 8
        max: 8
        passed: true
        comment: Airport labels use offset to avoid overlapping markers; European
          cluster labels are close but still readable
      - id: VQ-03
        name: Element Visibility
        score: 7
        max: 8
        passed: true
        comment: Airport markers at size 20 are clearly visible; connection lines
          with variable width and alpha work well, though some thin lines are subtle
      - id: VQ-04
        name: Color Accessibility
        score: 5
        max: 5
        passed: true
        comment: Python Blue for lines and Python Yellow for markers provide excellent
          contrast; colorblind-safe combination
      - id: VQ-05
        name: Layout Balance
        score: 5
        max: 5
        passed: true
        comment: Plot fills canvas appropriately with balanced margins; legend positioned
          in upper-left without overlapping data
      - id: VQ-06
        name: Axis Labels
        score: 1
        max: 2
        passed: true
        comment: Labels say Longitude and Latitude but missing (degrees) unit specification
      - id: VQ-07
        name: Grid & Legend
        score: 1
        max: 2
        passed: true
        comment: Grid is subtle with dashed style; custom legend is functional but
          hand-drawn lines could be more polished
    spec_compliance:
      score: 24
      max: 25
      items:
      - id: SC-01
        name: Plot Type
        score: 8
        max: 8
        passed: true
        comment: Correct connection lines map with curved arcs between location pairs
      - id: SC-02
        name: Data Mapping
        score: 5
        max: 5
        passed: true
        comment: Origin/destination coordinates correctly mapped; line properties
          encode passenger volume
      - id: SC-03
        name: Required Features
        score: 4
        max: 5
        passed: true
        comment: Has curved lines, location markers, transparency, line thickness
          encoding value; missing base map with country borders
      - id: SC-04
        name: Data Range
        score: 3
        max: 3
        passed: true
        comment: Full range visible; x_range and y_range capture all airports
      - id: SC-05
        name: Legend Accuracy
        score: 2
        max: 2
        passed: true
        comment: Custom legend correctly explains line thickness meaning with three
          levels
      - id: SC-06
        name: Title Format
        score: 2
        max: 2
        passed: true
        comment: 'Correct format: map-connection-lines 路 bokeh 路 pyplots.ai'
    data_quality:
      score: 18
      max: 20
      items:
      - id: DQ-01
        name: Feature Coverage
        score: 7
        max: 8
        passed: true
        comment: Shows variety of route lengths and traffic volumes; missing some
          Southern Hemisphere diversity
      - id: DQ-02
        name: Realistic Context
        score: 7
        max: 7
        passed: true
        comment: Real airports with plausible IATA codes and realistic passenger volumes
      - id: DQ-03
        name: Appropriate Scale
        score: 4
        max: 5
        passed: true
        comment: Coordinates are accurate for named airports; passenger volumes are
          reasonable but slightly low for major hub routes
    code_quality:
      score: 8
      max: 10
      items:
      - id: CQ-01
        name: KISS Structure
        score: 2
        max: 3
        passed: true
        comment: Mostly flat structure but has some complexity with manual curve calculation
          inline; no functions/classes used
      - id: CQ-02
        name: Reproducibility
        score: 3
        max: 3
        passed: true
        comment: Deterministic data (hardcoded airports and routes), no random seed
          needed
      - id: CQ-03
        name: Clean Imports
        score: 2
        max: 2
        passed: true
        comment: All imports are used (numpy, bokeh.io, bokeh.models, bokeh.plotting)
      - id: CQ-04
        name: No Deprecated API
        score: 1
        max: 1
        passed: true
        comment: Uses current Bokeh APIs
      - id: CQ-05
        name: Output Correct
        score: 0
        max: 1
        passed: false
        comment: Axis label missing (degrees) unit specification
    library_features:
      score: 5
      max: 5
      items:
      - id: LF-01
        name: Distinctive Features
        score: 5
        max: 5
        passed: true
        comment: Excellent use of ColumnDataSource, HoverTool with custom tooltips,
          multi_line for connection rendering, proper Bokeh export workflow
  verdict: APPROVED
impl_tags:
  dependencies: []
  techniques:
  - hover-tooltips
  - html-export
  - annotations
  - custom-legend
  patterns:
  - columndatasource
  - iteration-over-groups
  dataprep:
  - interpolation
  styling:
  - alpha-blending
  - grid-styling
  - edge-highlighting
