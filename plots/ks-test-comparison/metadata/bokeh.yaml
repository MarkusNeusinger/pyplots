library: bokeh
specification_id: ks-test-comparison
created: '2026-02-17T20:11:57Z'
updated: '2026-02-17T20:25:08Z'
generated_by: claude-opus-4-5-20251101
workflow_run: 22113798948
issue: 4130
python_version: 3.14.3
library_version: 3.8.2
preview_url: https://storage.googleapis.com/pyplots-images/plots/ks-test-comparison/bokeh/plot.png
preview_thumb: https://storage.googleapis.com/pyplots-images/plots/ks-test-comparison/bokeh/plot_thumb.png
preview_html: https://storage.googleapis.com/pyplots-images/plots/ks-test-comparison/bokeh/plot.html
quality_score: 93
review:
  strengths:
  - Excellent use of Bokeh's Band model to create the shaded divergence region — a
    distinctive library feature that adds visual storytelling
  - Clean, publication-grade styling with carefully tuned grid, axis, and typography
    settings
  - 'All spec requirements fully met: both ECDFs, K-S statistic, max divergence highlight,
    p-value, proper legend'
  - Strong data storytelling through the red emphasis system (segment + band + diamonds
    + annotation) that immediately draws the eye to the key statistical finding
  - Credit scoring scenario is a compelling real-world application that makes the
    K-S test result meaningful
  weaknesses:
  - Axis labels are descriptive but could include units or clarification where applicable
  - The annotation text could be slightly larger or positioned more prominently to
    increase its visual impact
  - The HTML export could leverage Bokeh's interactive features (HoverTool showing
    exact ECDF values) to differentiate further from static libraries
  image_description: The plot displays two empirical cumulative distribution functions
    (ECDFs) on a clean white background. The blue solid line represents "Good Customers
    (ECDF)" and the orange dashed line represents "Bad Customers (ECDF)." The x-axis
    is labeled "Credit Score" ranging from 300 to 900, and the y-axis is labeled "Cumulative
    Proportion" ranging from 0.0 to 1.0. The Bad Customers ECDF (orange) rises much
    faster, reaching approximately 0.8 by score 600, while the Good Customers ECDF
    (blue) only reaches approximately 0.05 at the same point, clearly showing that
    bad customers cluster at lower credit scores. A bold red vertical line at approximately
    x=590 marks the point of maximum divergence between the two distributions, with
    red diamond markers at both endpoints of the segment. A light pink/red shaded
    band surrounds the divergence area for visual emphasis. The annotation "D = 0.737,
    p < 0.001" appears in bold red text next to the divergence line. A subtle dotted
    red vertical reference line spans the full height at the same x-position. The
    legend is positioned at the top-left with a light gray background. The title "ks-test-comparison
    · bokeh · pyplots.ai" appears in the upper-left. The overall design is clean with
    subtle gray gridlines, muted axis colors, and a publication-grade aesthetic.
  criteria_checklist:
    visual_quality:
      score: 29
      max: 30
      items:
      - id: VQ-01
        name: Text Legibility
        score: 8
        max: 8
        passed: true
        comment: 'All font sizes explicitly set: title 28pt, axis labels 22pt, tick
          labels 18pt, legend 22pt, annotation 24pt. All text clearly readable.'
      - id: VQ-02
        name: No Overlap
        score: 6
        max: 6
        passed: true
        comment: No overlapping text elements. Legend placed in clean area with no
          data underneath.
      - id: VQ-03
        name: Element Visibility
        score: 6
        max: 6
        passed: true
        comment: Line widths 5-6px appropriate for canvas size. Diamond markers at
          size 22 clearly visible. Dashed styling provides additional differentiation.
      - id: VQ-04
        name: Color Accessibility
        score: 4
        max: 4
        passed: true
        comment: Blue vs Orange is colorblind-safe with strong contrast. Red for K-S
          statistic is a distinct third color.
      - id: VQ-05
        name: Layout Balance
        score: 4
        max: 4
        passed: true
        comment: Plot fills canvas well with balanced margins. Good use of the 4800x2700
          landscape format.
      - id: VQ-06
        name: Axis Labels & Title
        score: 1
        max: 2
        passed: true
        comment: Descriptive labels but lack units. Credit scores are unitless; Cumulative
          Proportion could note 0-1 range.
    design_excellence:
      score: 16
      max: 20
      items:
      - id: DE-01
        name: Aesthetic Sophistication
        score: 6
        max: 8
        passed: true
        comment: Custom color palette with intentional hierarchy. Styled legend with
          background fill and border. Clean typography with muted gray tones. Above
          configured defaults, approaching publication quality.
      - id: DE-02
        name: Visual Refinement
        score: 5
        max: 6
        passed: true
        comment: Subtle grid (alpha 0.4), muted axis lines, minor ticks hidden, outline
          removed. Well-polished.
      - id: DE-03
        name: Data Storytelling
        score: 5
        max: 6
        passed: true
        comment: Red shaded band + vertical segment + diamond markers + D/p annotation
          create clear focal point. Credit scoring context is immediately meaningful.
    spec_compliance:
      score: 15
      max: 15
      items:
      - id: SC-01
        name: Plot Type
        score: 5
        max: 5
        passed: true
        comment: 'Correct: K-S plot with two ECDFs as step functions.'
      - id: SC-02
        name: Required Features
        score: 4
        max: 4
        passed: true
        comment: 'All spec features present: both ECDFs, K-S statistic, max divergence
          highlight, p-value, legend, Y-axis 0-1.'
      - id: SC-03
        name: Data Mapping
        score: 3
        max: 3
        passed: true
        comment: Credit scores on X-axis, cumulative proportions on Y-axis, both distributions
          fully visible.
      - id: SC-04
        name: Title & Legend
        score: 3
        max: 3
        passed: true
        comment: Title format correct. Legend labels descriptive and accurate.
    data_quality:
      score: 14
      max: 15
      items:
      - id: DQ-01
        name: Feature Coverage
        score: 5
        max: 6
        passed: true
        comment: Shows clearly separated distributions with different shapes, large
          K-S statistic (0.737), and statistically significant result.
      - id: DQ-02
        name: Realistic Context
        score: 5
        max: 5
        passed: true
        comment: Credit scoring (Good vs Bad customers) is a real, neutral, comprehensible
          business scenario.
      - id: DQ-03
        name: Appropriate Scale
        score: 4
        max: 4
        passed: true
        comment: Credit scores 300-900 match realistic range. Sample sizes 400/350
          appropriate for statistical inference.
    code_quality:
      score: 10
      max: 10
      items:
      - id: CQ-01
        name: KISS Structure
        score: 3
        max: 3
        passed: true
        comment: Clean Imports -> Data -> Plot -> Save structure with no functions
          or classes.
      - id: CQ-02
        name: Reproducibility
        score: 2
        max: 2
        passed: true
        comment: np.random.seed(42) set at the beginning.
      - id: CQ-03
        name: Clean Imports
        score: 2
        max: 2
        passed: true
        comment: 'All imports are used: Band, ColumnDataSource, Label, Legend, LegendItem,
          NumeralTickFormatter, Range1d, Span.'
      - id: CQ-04
        name: Code Elegance
        score: 2
        max: 2
        passed: true
        comment: Appropriate complexity. Step function construction and band mask
          computation are necessary and cleanly written.
      - id: CQ-05
        name: Output & API
        score: 1
        max: 1
        passed: true
        comment: Saves as plot.png via export_png and plot.html via save. No deprecated
          functions.
    library_features:
      score: 9
      max: 10
      items:
      - id: LM-01
        name: Idiomatic Usage
        score: 5
        max: 5
        passed: true
        comment: Expert use of ColumnDataSource, Bokeh model API (Legend, LegendItem,
          Label, Band, Span), NumeralTickFormatter, explicit layout management.
      - id: LM-02
        name: Distinctive Features
        score: 4
        max: 5
        passed: true
        comment: Band model for shaded region, Span for reference line, explicit Legend
          construction, HTML export with CDN. Could leverage HoverTool for more interactivity.
  verdict: APPROVED
impl_tags:
  dependencies:
  - scipy
  techniques:
  - annotations
  - custom-legend
  - html-export
  patterns:
  - data-generation
  - columndatasource
  dataprep:
  - ecdf
  styling:
  - grid-styling
  - alpha-blending
