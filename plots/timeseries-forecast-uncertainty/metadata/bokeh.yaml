library: bokeh
specification_id: timeseries-forecast-uncertainty
created: '2026-01-07T16:30:50Z'
updated: '2026-01-07T16:42:28Z'
generated_by: claude-opus-4-5-20251101
workflow_run: 20788385330
issue: 3188
python_version: 3.13.11
library_version: 3.8.2
preview_url: https://storage.googleapis.com/pyplots-images/plots/timeseries-forecast-uncertainty/bokeh/plot.png
preview_thumb: https://storage.googleapis.com/pyplots-images/plots/timeseries-forecast-uncertainty/bokeh/plot_thumb.png
preview_html: https://storage.googleapis.com/pyplots-images/plots/timeseries-forecast-uncertainty/bokeh/plot.html
quality_score: 97
review:
  strengths:
  - Excellent use of Bokeh-specific features (ColumnDataSource, Span, Label, patches
    for confidence bands)
  - Clear visual distinction between historical (solid blue) and forecast (dashed
    orange) data
  - Nested confidence bands with appropriate alpha values (0.25 and 0.5) showing uncertainty
    hierarchy
  - Growing uncertainty over forecast horizon demonstrates proper forecasting behavior
  - Proper connection line bridging historical to forecast data
  - Both PNG and HTML exports provided
  - Well-sized elements for 4800x2700 canvas
  weaknesses:
  - Legend text at 24pt could be slightly larger for optimal readability
  - Forecast Start annotation label placed at y=165 is near the upper edge of the
    visible area
  image_description: 'The plot displays a time series forecast with uncertainty bands.
    Historical data (Jan 2022 - Dec 2024) is shown as a solid blue line (#306998)
    exhibiting clear seasonal oscillations between approximately 70-130 thousand sales
    units. The forecast period (Jan 2025 - Dec 2025) uses a dashed orange line (#E67E22)
    with two nested yellow/gold confidence bands (#FFD43B) - a darker inner band for
    80% CI (alpha 0.5) and a lighter outer band for 95% CI (alpha 0.25). Uncertainty
    appropriately grows over the forecast horizon. A vertical dashed gray line marks
    "Forecast Start" at the transition point between historical and forecast data.
    The legend in the top-left clearly identifies all four elements: Historical Data,
    Forecast, 80% Confidence Interval, and 95% Confidence Interval. The title follows
    the correct format "timeseries-forecast-uncertainty 路 bokeh 路 pyplots.ai". X-axis
    shows dates from 2022 to 2026, Y-axis shows "Sales (thousands)" ranging from approximately
    60-160. Grid lines are subtle with alpha 0.3 and dashed styling.'
  criteria_checklist:
    visual_quality:
      score: 37
      max: 40
      items:
      - id: VQ-01
        name: Text Legibility
        score: 9
        max: 10
        passed: true
        comment: Title 36pt, labels 28pt, ticks 22pt all readable; legend text slightly
          small at 24pt
      - id: VQ-02
        name: No Overlap
        score: 8
        max: 8
        passed: true
        comment: No overlapping text elements
      - id: VQ-03
        name: Element Visibility
        score: 8
        max: 8
        passed: true
        comment: Line width 5 well-suited, bands clearly visible with good alpha values
      - id: VQ-04
        name: Color Accessibility
        score: 5
        max: 5
        passed: true
        comment: Blue/orange/yellow palette is colorblind-safe
      - id: VQ-05
        name: Layout Balance
        score: 5
        max: 5
        passed: true
        comment: Good canvas utilization, balanced margins
      - id: VQ-06
        name: Axis Labels
        score: 2
        max: 2
        passed: true
        comment: 'Descriptive with units: Sales (thousands)'
      - id: VQ-07
        name: Grid & Legend
        score: 0
        max: 2
        passed: false
        comment: Forecast Start label y-position (165) near upper edge of visible
          area
    spec_compliance:
      score: 25
      max: 25
      items:
      - id: SC-01
        name: Plot Type
        score: 8
        max: 8
        passed: true
        comment: Correct time series with forecast and uncertainty bands
      - id: SC-02
        name: Data Mapping
        score: 5
        max: 5
        passed: true
        comment: Date on X-axis, sales values on Y-axis
      - id: SC-03
        name: Required Features
        score: 5
        max: 5
        passed: true
        comment: Historical line, dashed forecast, vertical separator, nested CI bands,
          legend
      - id: SC-04
        name: Data Range
        score: 3
        max: 3
        passed: true
        comment: All data visible within y_range 55-175
      - id: SC-05
        name: Legend Accuracy
        score: 2
        max: 2
        passed: true
        comment: All legend items correctly labeled
      - id: SC-06
        name: Title Format
        score: 2
        max: 2
        passed: true
        comment: Uses correct format {spec-id} 路 {library} 路 pyplots.ai
    data_quality:
      score: 20
      max: 20
      items:
      - id: DQ-01
        name: Feature Coverage
        score: 8
        max: 8
        passed: true
        comment: Shows seasonal patterns, trend, and growing uncertainty over forecast
          horizon
      - id: DQ-02
        name: Realistic Context
        score: 7
        max: 7
        passed: true
        comment: Monthly sales forecast is neutral business scenario
      - id: DQ-03
        name: Appropriate Scale
        score: 5
        max: 5
        passed: true
        comment: Sales values 60-160K are realistic
    code_quality:
      score: 10
      max: 10
      items:
      - id: CQ-01
        name: KISS Structure
        score: 3
        max: 3
        passed: true
        comment: Flat script, no functions/classes
      - id: CQ-02
        name: Reproducibility
        score: 3
        max: 3
        passed: true
        comment: np.random.seed(42) set
      - id: CQ-03
        name: Clean Imports
        score: 2
        max: 2
        passed: true
        comment: All imports used
      - id: CQ-04
        name: No Deprecated API
        score: 1
        max: 1
        passed: true
        comment: Current Bokeh API
      - id: CQ-05
        name: Output Correct
        score: 1
        max: 1
        passed: true
        comment: Saves plot.png and plot.html
    library_features:
      score: 5
      max: 5
      items:
      - id: LF-01
        name: Distinctive Features
        score: 5
        max: 5
        passed: true
        comment: Excellent use of ColumnDataSource, Span, Label, Legend customization,
          NumeralTickFormatter, patch for bands, HTML export
  verdict: APPROVED
impl_tags:
  dependencies: []
  techniques:
  - annotations
  - custom-legend
  - html-export
  patterns:
  - data-generation
  - columndatasource
  dataprep:
  - time-series
  styling:
  - alpha-blending
  - grid-styling
