library: plotnine
specification_id: alluvial-basic
created: '2025-12-26T10:36:55Z'
updated: '2025-12-26T10:39:05Z'
generated_by: claude-opus-4-5-20251101
workflow_run: 20520941849
issue: 1878
python_version: 3.13.11
library_version: 0.15.2
preview_url: https://storage.googleapis.com/pyplots-images/plots/alluvial-basic/plotnine/plot.png
preview_thumb: https://storage.googleapis.com/pyplots-images/plots/alluvial-basic/plotnine/plot_thumb.png
preview_html: null
quality_score: 91
impl_tags:
  dependencies: []
  techniques:
  - layer-composition
  - bezier-curves
  - annotations
  patterns:
  - wide-to-long
  - groupby-aggregation
  - iteration-over-groups
  dataprep: []
  styling:
  - alpha-blending
review:
  strengths:
  - Excellent implementation of alluvial diagram using plotnine grammar of graphics
    primitives
  - Smooth cubic interpolation creates visually appealing curved flow bands
  - Smart filtering of very small flows (<3 voters) improves clarity without losing
    important transitions
  - Colorblind-safe color palette with good contrast
  - Proper use of transparency (alpha=0.5) for overlapping flows
  - Clean layout with party labels on both sides for easy reading
  - Good canvas utilization and balanced proportions
  weaknesses:
  - Data is deterministic so no seed needed, but explicit data definition could use
    a comment explaining the voter transition matrix
  - Small flows between 2016-2018 are less visible compared to later periods
  image_description: The plot displays an alluvial diagram showing voter migration
    between three political parties (Democrats in blue, Republicans in red/coral,
    Independent in yellow) across four election cycles (2016, 2018, 2020, 2022). Vertical
    rectangular nodes represent party affiliations at each time point, with smooth
    curved flow bands connecting them to visualize voter transitions. White voter
    count labels (45, 43, 41, 14, etc.) appear inside nodes. Party names are displayed
    on both left and right edges. Year labels are positioned at the bottom. A legend
    on the right side identifies the three party colors.
  criteria_checklist:
    visual_quality:
      score: 36
      max: 40
      items:
      - id: VQ-01
        name: Text Legibility
        score: 9
        max: 10
        passed: true
        comment: Title is large and bold, year labels are clear, node counts visible,
          party labels readable
      - id: VQ-02
        name: No Overlap
        score: 8
        max: 8
        passed: true
        comment: No overlapping text elements, all labels clearly separated
      - id: VQ-03
        name: Element Visibility
        score: 7
        max: 8
        passed: true
        comment: Flow bands visible with good alpha transparency, nodes clearly defined
          with white borders
      - id: VQ-04
        name: Color Accessibility
        score: 5
        max: 5
        passed: true
        comment: Blue, red, and yellow are colorblind-distinguishable
      - id: VQ-05
        name: Layout Balance
        score: 5
        max: 5
        passed: true
        comment: Good canvas utilization, plot fills ~60% of canvas, balanced margins
      - id: VQ-06
        name: Axis Labels
        score: 0
        max: 2
        passed: true
        comment: No axis labels (but appropriate for this plot type with custom annotations)
      - id: VQ-07
        name: Grid & Legend
        score: 2
        max: 2
        passed: true
        comment: Clean minimal theme with no grid (appropriate), well-placed legend
    spec_compliance:
      score: 23
      max: 25
      items:
      - id: SC-01
        name: Plot Type
        score: 8
        max: 8
        passed: true
        comment: Correct alluvial diagram with vertical time ordering
      - id: SC-02
        name: Data Mapping
        score: 5
        max: 5
        passed: true
        comment: Time points as columns, parties as categories, voter counts as values
      - id: SC-03
        name: Required Features
        score: 5
        max: 5
        passed: true
        comment: Flows show transitions, band width proportional to flow magnitude,
          transparency for overlapping flows
      - id: SC-04
        name: Data Range
        score: 3
        max: 3
        passed: true
        comment: All data points visible within the visualization
      - id: SC-05
        name: Legend Accuracy
        score: 0
        max: 2
        passed: true
        comment: Legend shows "Party" but the title context is voter migration
      - id: SC-06
        name: Title Format
        score: 2
        max: 2
        passed: true
        comment: Uses "{topic} · alluvial-basic · plotnine · pyplots.ai" format
    data_quality:
      score: 19
      max: 20
      items:
      - id: DQ-01
        name: Feature Coverage
        score: 7
        max: 8
        passed: true
        comment: Shows party retention (large same-party flows) and migration (smaller
          cross-party flows), but some small flows filtered out
      - id: DQ-02
        name: Realistic Context
        score: 7
        max: 7
        passed: true
        comment: Election data with years as time points, parties as categories -
          real-world scenario
      - id: DQ-03
        name: Appropriate Scale
        score: 5
        max: 5
        passed: true
        comment: Voter counts in reasonable ranges (~14-45 per party per year), realistic
          proportions
    code_quality:
      score: 8
      max: 10
      items:
      - id: CQ-01
        name: KISS Structure
        score: 3
        max: 3
        passed: true
        comment: 'Linear flow: imports → data → calculations → plot → save'
      - id: CQ-02
        name: Reproducibility
        score: 0
        max: 3
        passed: false
        comment: No random seed set (data is deterministic, so this is minor)
      - id: CQ-03
        name: Clean Imports
        score: 2
        max: 2
        passed: true
        comment: All imports are used
      - id: CQ-04
        name: No Deprecated API
        score: 1
        max: 1
        passed: true
        comment: Uses current plotnine API
      - id: CQ-05
        name: Output Correct
        score: 1
        max: 1
        passed: true
        comment: Saves as plot.png with dpi=300
    library_features:
      score: 5
      max: 5
      items: []
  verdict: APPROVED
