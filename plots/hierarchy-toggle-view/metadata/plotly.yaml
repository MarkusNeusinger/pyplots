library: plotly
specification_id: hierarchy-toggle-view
created: '2026-01-11T10:08:45Z'
updated: '2026-01-11T10:11:30Z'
generated_by: claude-opus-4-5-20251101
workflow_run: 20893328461
issue: 3697
python_version: 3.13.11
library_version: 6.5.1
preview_url: https://storage.googleapis.com/pyplots-images/plots/hierarchy-toggle-view/plotly/plot.png
preview_thumb: https://storage.googleapis.com/pyplots-images/plots/hierarchy-toggle-view/plotly/plot_thumb.png
preview_html: https://storage.googleapis.com/pyplots-images/plots/hierarchy-toggle-view/plotly/plot.html
quality_score: 92
review:
  strengths:
  - Excellent dual-view design showing both treemap and sunburst side-by-side in PNG,
    with toggle buttons in interactive HTML
  - Consistent color mapping across both views makes it easy to identify the same
    nodes
  - Rich hover information with budget values and percentages
  - Clean visual hierarchy with white borders separating segments
  - Appropriate data scenario (company budget) that naturally fits hierarchical visualization
  weaknesses:
  - PNG shows side-by-side comparison rather than an actual toggle; toggle functionality
    is only in HTML (this is acceptable since PNG cannot be interactive)
  - Title includes Company Budget prefix before spec-id format; ideally should just
    use the standard format
  image_description: 'The plot displays a side-by-side comparison of treemap (left)
    and sunburst (right) views showing company budget allocation data. The treemap
    shows nested rectangles with Engineering (blue, largest), Marketing (yellow),
    Sales (green), and Operations (purple) departments, each containing team subdivisions.
    Rectangle areas are proportional to budget values displayed as "$XXK" labels.
    The sunburst on the right shows the same hierarchy radially with "Company" at
    the center, departments in the middle ring, and teams in the outer ring. Colors
    are consistent between both views. The title reads "Company Budget · hierarchy-toggle-view
    · plotly · pyplots.ai" at the top. Subtitle annotations label each view ("Treemap
    View" and "Sunburst View") and a footer explains "Two perspectives: rectangles
    for size comparison, radial for hierarchy depth".'
  criteria_checklist:
    visual_quality:
      score: 37
      max: 40
      items:
      - id: VQ-01
        name: Text Legibility
        score: 9
        max: 10
        passed: true
        comment: Title, labels, and values are readable. Sunburst outer labels slightly
          smaller but still clear
      - id: VQ-02
        name: No Overlap
        score: 8
        max: 8
        passed: true
        comment: No overlapping text in either view
      - id: VQ-03
        name: Element Visibility
        score: 8
        max: 8
        passed: true
        comment: All rectangles and segments appropriately sized for data
      - id: VQ-04
        name: Color Accessibility
        score: 5
        max: 5
        passed: true
        comment: Blue, yellow, green, purple palette is colorblind-safe
      - id: VQ-05
        name: Layout Balance
        score: 5
        max: 5
        passed: true
        comment: Both views fill canvas well, balanced margins, good spacing
      - id: VQ-06
        name: Axis Labels
        score: 0
        max: 2
        passed: true
        comment: N/A for hierarchical charts; labels on segments serve this purpose
      - id: VQ-07
        name: Grid & Legend
        score: 2
        max: 2
        passed: true
        comment: White line separators create clear visual hierarchy
    spec_compliance:
      score: 23
      max: 25
      items:
      - id: SC-01
        name: Plot Type
        score: 8
        max: 8
        passed: true
        comment: Correct treemap and sunburst chart types
      - id: SC-02
        name: Data Mapping
        score: 5
        max: 5
        passed: true
        comment: Hierarchy parent-child relationships correctly mapped
      - id: SC-03
        name: Required Features
        score: 4
        max: 5
        passed: true
        comment: Both views present, consistent colors. PNG shows side-by-side; toggle
          in HTML version
      - id: SC-04
        name: Data Range
        score: 3
        max: 3
        passed: true
        comment: All data visible, no truncation
      - id: SC-05
        name: Legend Accuracy
        score: 2
        max: 2
        passed: true
        comment: Labels match data, values shown
      - id: SC-06
        name: Title Format
        score: 1
        max: 2
        passed: true
        comment: Uses descriptive prefix before spec-id format
    data_quality:
      score: 19
      max: 20
      items:
      - id: DQ-01
        name: Feature Coverage
        score: 8
        max: 8
        passed: true
        comment: Shows 3-level hierarchy (Company → Departments → Teams), varying
          sizes
      - id: DQ-02
        name: Realistic Context
        score: 7
        max: 7
        passed: true
        comment: Company budget allocation is a neutral, realistic business scenario
      - id: DQ-03
        name: Appropriate Scale
        score: 4
        max: 5
        passed: true
        comment: Budget values ($300K-$9600K) are realistic; teams sum correctly to
          departments
    code_quality:
      score: 8
      max: 10
      items:
      - id: CQ-01
        name: KISS Structure
        score: 3
        max: 3
        passed: true
        comment: 'Linear flow: imports → data → plot → save'
      - id: CQ-02
        name: Reproducibility
        score: 1
        max: 3
        passed: false
        comment: Deterministic data (no random), but no explicit seed comment
      - id: CQ-03
        name: Clean Imports
        score: 2
        max: 2
        passed: true
        comment: Only plotly imports used
      - id: CQ-04
        name: No Deprecated API
        score: 1
        max: 1
        passed: true
        comment: Uses current Plotly API
      - id: CQ-05
        name: Output Correct
        score: 1
        max: 1
        passed: true
        comment: Saves as plot.png and plot.html
    library_features:
      score: 5
      max: 5
      items:
      - id: LF-01
        name: Distinctive Features
        score: 5
        max: 5
        passed: true
        comment: make_subplots for multi-chart layout, updatemenus for toggle buttons
          in HTML, branchvalues=total, hover templates, insidetextorientation
  verdict: APPROVED
impl_tags:
  dependencies: []
  techniques:
  - subplots
  - hover-tooltips
  - html-export
  - annotations
  patterns:
  - iteration-over-groups
  dataprep: []
  styling:
  - edge-highlighting
