library: altair
specification_id: streamgraph-basic
created: '2025-12-23T21:54:28Z'
updated: '2025-12-23T22:00:58Z'
generated_by: claude-opus-4-5-20251101
workflow_run: 20472383734
issue: 0
python_version: 3.13.11
library_version: 6.0.0
preview_url: https://storage.googleapis.com/pyplots-images/plots/streamgraph-basic/altair/plot.png
preview_thumb: https://storage.googleapis.com/pyplots-images/plots/streamgraph-basic/altair/plot_thumb.png
preview_html: https://storage.googleapis.com/pyplots-images/plots/streamgraph-basic/altair/plot.html
quality_score: 93
impl_tags:
  dependencies: []
  techniques:
    - html-export
  patterns:
    - data-generation
  dataprep: []
  styling:
    - alpha-blending
review:
  strengths:
  - Excellent use of Altair's declarative grammar with proper encoding types (T, Q,
    N)
  - Perfect streamgraph implementation using stack='center' for the centered baseline
    aesthetic
  - Beautiful smooth curves achieved with basis interpolation
  - Realistic music streaming scenario with seasonal variation and growth trends
  - Clean, well-organized code following KISS principles
  - Appropriate hiding of y-axis tick labels for streamgraph aesthetic while keeping
    descriptive axis title
  - Good colorblind-safe palette with distinct colors for all 6 genres
  - Includes both PNG and interactive HTML output
  weaknesses:
  - Y-axis shows "Streaming Hours (millions)" title but no tick values, which creates
    slight visual inconsistency - consider removing y-axis title entirely or adding
    back subtle tick values
  - Legend could benefit from being integrated into the plot (e.g., direct labels
    on streams) rather than separate legend box
  - Color palette uses Python Blue/Yellow prominently but Jazz (purple) and Classical
    (orange) could be slightly more saturated for better visibility against adjacent
    areas
  image_description: 'The plot displays a streamgraph (centered stacked area chart)
    showing monthly streaming hours by music genre over two years (Jan 2022 to Nov
    2023). Six genres are visualized with smooth, flowing curves using basis spline
    interpolation: Pop (steel blue), Rock (golden yellow), Hip-Hop (pink), Electronic
    (green), Jazz (purple), and Classical (orange). The baseline is symmetrically
    centered around the x-axis, creating the characteristic river-like appearance.
    The x-axis shows time labels at -45° angle with "Time" label, the y-axis shows
    "Streaming Hours (millions)" but without tick labels (appropriate for streamgraph
    aesthetic). A legend on the right identifies each genre with colored dots. The
    title follows the required format. The colors are distinct and visually harmonious.'
  criteria_checklist:
    visual_quality:
      score: 37
      max: 40
      items:
      - id: VQ-01
        name: Text Legibility
        score: 10
        max: 10
        passed: true
        comment: Title at 28pt, axis labels at 22pt, tick labels at 18pt, legend at
          18-20pt - all perfectly readable
      - id: VQ-02
        name: No Overlap
        score: 8
        max: 8
        passed: true
        comment: X-axis labels rotated at -45° prevent overlap, no text overlaps anywhere
      - id: VQ-03
        name: Element Visibility
        score: 8
        max: 8
        passed: true
        comment: Stream areas with 0.85 opacity are clearly visible, smooth curves
          are well-defined
      - id: VQ-04
        name: Color Accessibility
        score: 5
        max: 5
        passed: true
        comment: Six distinct colors that work well for colorblind users, good contrast
          between adjacent areas
      - id: VQ-05
        name: Layout Balance
        score: 4
        max: 5
        passed: true
        comment: Good canvas utilization, plot fills most of the space, legend well-positioned
          on right; minor deduction for slight extra whitespace at top
      - id: VQ-06
        name: Axis Labels
        score: 2
        max: 2
        passed: true
        comment: '"Time" and "Streaming Hours (millions)" with units'
      - id: VQ-07
        name: Grid & Legend
        score: 0
        max: 2
        passed: false
        comment: Grid removed (appropriate for streamgraph), legend well-placed, but
          y-axis title is shown despite no y-axis values/ticks which is slightly inconsistent
    spec_compliance:
      score: 25
      max: 25
      items:
      - id: SC-01
        name: Plot Type
        score: 8
        max: 8
        passed: true
        comment: Correct streamgraph with centered baseline (stack='center')
      - id: SC-02
        name: Data Mapping
        score: 5
        max: 5
        passed: true
        comment: Time on x-axis, category for color, value for y
      - id: SC-03
        name: Required Features
        score: 5
        max: 5
        passed: true
        comment: Smooth interpolation (basis), centered baseline, distinct colors,
          legend present
      - id: SC-04
        name: Data Range
        score: 3
        max: 3
        passed: true
        comment: All data visible, 24 months spanning full x-axis
      - id: SC-05
        name: Legend Accuracy
        score: 2
        max: 2
        passed: true
        comment: All 6 genres correctly labeled
      - id: SC-06
        name: Title Format
        score: 2
        max: 2
        passed: true
        comment: '"streamgraph-basic · altair · pyplots.ai" - correct format'
    data_quality:
      score: 18
      max: 20
      items:
      - id: DQ-01
        name: Feature Coverage
        score: 7
        max: 8
        passed: true
        comment: Shows variation in all categories with seasonal patterns and growth
          trends; categories have different base sizes; minor deduction because the
          flowing curves could show more dramatic variation between categories
      - id: DQ-02
        name: Realistic Context
        score: 7
        max: 7
        passed: true
        comment: Music streaming hours by genre is a real, comprehensible scenario
          matching spec's example
      - id: DQ-03
        name: Appropriate Scale
        score: 4
        max: 5
        passed: true
        comment: Values in tens to hundreds of millions of streaming hours are realistic;
          slight deduction for y-axis label saying "millions" but showing raw values
          that could imply confusion
    code_quality:
      score: 10
      max: 10
      items:
      - id: CQ-01
        name: KISS Structure
        score: 3
        max: 3
        passed: true
        comment: Clean imports → data → plot → save structure, no functions/classes
      - id: CQ-02
        name: Reproducibility
        score: 3
        max: 3
        passed: true
        comment: np.random.seed(42) set
      - id: CQ-03
        name: Clean Imports
        score: 2
        max: 2
        passed: true
        comment: Only altair, numpy, pandas imported and all used
      - id: CQ-04
        name: No Deprecated API
        score: 1
        max: 1
        passed: true
        comment: Uses current Altair API
      - id: CQ-05
        name: Output Correct
        score: 1
        max: 1
        passed: true
        comment: Saves as plot.png and plot.html
    library_features:
      score: 3
      max: 5
      items:
      - id: LF-01
        name: Uses distinctive library features
        score: 3
        max: 5
        passed: true
        comment: Uses Altair's declarative encoding with stack='center', basis interpolation,
          tooltips, and interactive() for HTML version; could have used more advanced
          features like selection/highlighting
  verdict: APPROVED
