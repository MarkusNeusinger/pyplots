library: bokeh
specification_id: candlestick-volume
created: '2025-12-31T13:52:49Z'
updated: '2025-12-31T13:59:16Z'
generated_by: claude-opus-4-5-20251101
workflow_run: 20620313325
issue: 3068
python_version: 3.13.11
library_version: 3.8.1
preview_url: https://storage.googleapis.com/pyplots-images/plots/candlestick-volume/bokeh/plot.png
preview_thumb: https://storage.googleapis.com/pyplots-images/plots/candlestick-volume/bokeh/plot_thumb.png
preview_html: https://storage.googleapis.com/pyplots-images/plots/candlestick-volume/bokeh/plot.html
quality_score: 91
impl_tags:
  dependencies: []
  techniques:
  - subplots
  - hover-tooltips
  - html-export
  patterns:
  - data-generation
  - columndatasource
  dataprep:
  - time-series
  styling:
  - grid-styling
review:
  strengths:
  - Excellent dual-pane layout with proper 70/30 split as specified
  - Shared x-range between candlestick and volume charts works perfectly
  - CrosshairTool added for both panes as requested in spec
  - Color scheme is colorblind-accessible (blue/yellow instead of red/green)
  - Volume bars correctly color-coded to match candlestick up/down days
  - Text sizes well-scaled for 4800×2700 output
  - Clean, readable code following KISS principles
  weaknesses:
  - Grid styling could be more subtle (current alpha 0.3 is slightly prominent)
  - Volume bar colors appear more muted compared to candlesticks - consider matching
    fill_alpha
  - Missing HoverTool which would enhance Bokeh interactive capabilities
  image_description: The plot displays a professional dual-pane candlestick chart
    with volume. The upper pane (~70% height) shows OHLC candlesticks spanning 60
    trading days from June to August 2024, with Python Blue (#306998) for bullish
    (up) days and Yellow (#FFD43B) for bearish (down) days. The wicks (high-low lines)
    and bodies are clearly visible. The price ranges from approximately $125 to $165.
    The lower pane (~30% height) displays volume bars using the same color scheme,
    with volume ranging from 0 to ~4.5 million. Both panes share a common x-axis with
    rotated date labels. The title "candlestick-volume · bokeh · pyplots.ai" appears
    at the top left. Grid lines are subtle with dashed styling. Y-axes are labeled
    "Price ($)" and "Volume" with the x-axis labeled "Date".
  criteria_checklist:
    visual_quality:
      score: 36
      max: 40
      items:
      - id: VQ-01
        name: Text Legibility
        score: 10
        max: 10
        passed: true
        comment: Title at 36pt, axis labels at 28pt, tick labels at 18-22pt all perfectly
          readable
      - id: VQ-02
        name: No Overlap
        score: 8
        max: 8
        passed: true
        comment: No overlapping text, rotated x-axis labels well spaced
      - id: VQ-03
        name: Element Visibility
        score: 7
        max: 8
        passed: true
        comment: Candlesticks well-sized, wicks visible, slight deduction for thin
          wicks
      - id: VQ-04
        name: Color Accessibility
        score: 4
        max: 5
        passed: true
        comment: Blue/Yellow is colorblind-safe but not the most distinctive pair
      - id: VQ-05
        name: Layout Balance
        score: 5
        max: 5
        passed: true
        comment: Excellent 70/30 split, good canvas utilization
      - id: VQ-06
        name: Axis Labels
        score: 2
        max: 2
        passed: true
        comment: '"Price ($)", "Volume", "Date" - descriptive with units'
      - id: VQ-07
        name: Grid & Legend
        score: 0
        max: 2
        passed: true
        comment: No legend needed, but grid could be slightly more subtle
    spec_compliance:
      score: 25
      max: 25
      items:
      - id: SC-01
        name: Plot Type
        score: 8
        max: 8
        passed: true
        comment: Correct candlestick + volume chart
      - id: SC-02
        name: Data Mapping
        score: 5
        max: 5
        passed: true
        comment: OHLC correctly mapped to candlesticks, volume to bars
      - id: SC-03
        name: Required Features
        score: 5
        max: 5
        passed: true
        comment: Dual pane, shared x-axis, color-coded volume bars, crosshair tools
          added
      - id: SC-04
        name: Data Range
        score: 3
        max: 3
        passed: true
        comment: All data visible, no clipping
      - id: SC-05
        name: Legend Accuracy
        score: 2
        max: 2
        passed: true
        comment: N/A for this chart type (colors self-explanatory)
      - id: SC-06
        name: Title Format
        score: 2
        max: 2
        passed: true
        comment: 'Uses correct format: "candlestick-volume · bokeh · pyplots.ai"'
    data_quality:
      score: 18
      max: 20
      items:
      - id: DQ-01
        name: Feature Coverage
        score: 7
        max: 8
        passed: true
        comment: Shows both bullish and bearish candles, volume variation, overall
          downtrend with rallies
      - id: DQ-02
        name: Realistic Context
        score: 7
        max: 7
        passed: true
        comment: Stock price data from $125-165 with realistic 2M base volume
      - id: DQ-03
        name: Appropriate Scale
        score: 4
        max: 5
        passed: true
        comment: Good price range, volume slightly high for some stocks but plausible
    code_quality:
      score: 9
      max: 10
      items:
      - id: CQ-01
        name: KISS Structure
        score: 3
        max: 3
        passed: true
        comment: Clean imports → data → plot → save structure
      - id: CQ-02
        name: Reproducibility
        score: 3
        max: 3
        passed: true
        comment: np.random.seed(42) set
      - id: CQ-03
        name: Clean Imports
        score: 2
        max: 2
        passed: true
        comment: All imports used
      - id: CQ-04
        name: No Deprecated API
        score: 1
        max: 1
        passed: true
        comment: Using current Bokeh API
      - id: CQ-05
        name: Output Correct
        score: 0
        max: 1
        passed: false
        comment: Saves as plot.png (correct) but also plot.html unnecessarily
    library_features:
      score: 3
      max: 5
      items:
      - id: LF-01
        name: Uses distinctive library features
        score: 3
        max: 5
        passed: true
        comment: Uses ColumnDataSource, CrosshairTool, linked x-range, vbar/segment.
          Could leverage HoverTool for tooltips
  verdict: APPROVED
