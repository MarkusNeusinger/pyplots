library: altair
specification_id: histogram-2d
created: '2025-12-25T20:09:09Z'
updated: '2025-12-25T20:12:25Z'
generated_by: claude-opus-4-5-20251101
workflow_run: 20510277928
issue: 2012
python_version: 3.13.11
library_version: 6.0.0
preview_url: https://storage.googleapis.com/pyplots-images/plots/histogram-2d/altair/plot.png
preview_thumb: https://storage.googleapis.com/pyplots-images/plots/histogram-2d/altair/plot_thumb.png
preview_html: https://storage.googleapis.com/pyplots-images/plots/histogram-2d/altair/plot.html
quality_score: 91
impl_tags:
  dependencies: []
  techniques:
  - colorbar
  patterns:
  - data-generation
  dataprep: []
  styling: []
review:
  strengths:
  - Excellent use of Altair declarative syntax with mark_rect and bin encoding for
    2D histogram
  - Clean, well-structured code following KISS principle
  - Proper use of viridis colormap for perceptual uniformity and colorblind accessibility
  - Well-configured font sizes for high-resolution output
  - Colorbar legend properly configured with appropriate sizing
  - Both PNG and HTML outputs generated as expected
  weaknesses:
  - Axis labels are generic (X Value, Y Value) rather than contextual with units
  - Could enhance with Altair interactivity features (tooltips showing bin range and
    count)
  - Minor layout imbalance with slightly more whitespace on left side
  image_description: The plot displays a 2D histogram heatmap showing a bivariate
    normal distribution with positive correlation. The visualization uses rectangular
    bins colored with the viridis colormap (dark purple for low counts, through blue/teal,
    to bright yellow for high counts ~20+). The X axis ranges from approximately -4.0
    to 3.2 and is labeled "X Value". The Y axis ranges from approximately -3.4 to
    3.6 and is labeled "Y Value". A vertical colorbar on the right shows the "Count"
    scale from ~1 to ~22. The title reads "histogram-2d · altair · pyplots.ai" at
    the top center. The density pattern clearly shows the positive correlation (0.7)
    with the highest concentration (yellow bins) near the origin, gradually decreasing
    outward in an elliptical pattern along the diagonal.
  criteria_checklist:
    visual_quality:
      score: 36
      max: 40
      items:
      - id: VQ-01
        name: Text Legibility
        score: 10
        max: 10
        passed: true
        comment: Title at 28pt, axis labels at 22pt, tick labels at 18pt - all clearly
          readable
      - id: VQ-02
        name: No Overlap
        score: 8
        max: 8
        passed: true
        comment: No overlapping text elements anywhere
      - id: VQ-03
        name: Element Visibility
        score: 8
        max: 8
        passed: true
        comment: Bins are appropriately sized with 40 bins per axis, density patterns
          clearly visible
      - id: VQ-04
        name: Color Accessibility
        score: 5
        max: 5
        passed: true
        comment: Viridis colormap is perceptually uniform and colorblind-safe
      - id: VQ-05
        name: Layout Balance
        score: 3
        max: 5
        passed: true
        comment: Good layout overall but some wasted space on left edge; plot fills
          ~60% of canvas
      - id: VQ-06
        name: Axis Labels
        score: 1
        max: 2
        passed: true
        comment: Descriptive labels ("X Value", "Y Value") but without units
      - id: VQ-07
        name: Grid & Legend
        score: 1
        max: 2
        passed: false
        comment: Colorbar well placed, but no grid visible (acceptable for heatmaps,
          minor deduction)
    spec_compliance:
      score: 25
      max: 25
      items:
      - id: SC-01
        name: Plot Type
        score: 8
        max: 8
        passed: true
        comment: Correct 2D histogram heatmap using mark_rect with binning
      - id: SC-02
        name: Data Mapping
        score: 5
        max: 5
        passed: true
        comment: X and Y correctly mapped to quantitative axes
      - id: SC-03
        name: Required Features
        score: 5
        max: 5
        passed: true
        comment: Colorbar present, viridis colormap as recommended, appropriate bin
          count
      - id: SC-04
        name: Data Range
        score: 3
        max: 3
        passed: true
        comment: Full data range visible on both axes
      - id: SC-05
        name: Legend Accuracy
        score: 2
        max: 2
        passed: true
        comment: Colorbar correctly labeled as "Count"
      - id: SC-06
        name: Title Format
        score: 2
        max: 2
        passed: true
        comment: 'Correct format: "histogram-2d · altair · pyplots.ai"'
    data_quality:
      score: 17
      max: 20
      items:
      - id: DQ-01
        name: Feature Coverage
        score: 6
        max: 8
        passed: true
        comment: Shows correlation pattern well; density variation visible; could
          benefit from more distinct clusters or edge cases
      - id: DQ-02
        name: Realistic Context
        score: 6
        max: 7
        passed: true
        comment: Bivariate normal is appropriate for demonstrating 2D histograms;
          generic but plausible
      - id: DQ-03
        name: Appropriate Scale
        score: 5
        max: 5
        passed: true
        comment: Standard normal scale values are sensible
    code_quality:
      score: 10
      max: 10
      items:
      - id: CQ-01
        name: KISS Structure
        score: 3
        max: 3
        passed: true
        comment: 'Linear flow: imports → data → chart → save'
      - id: CQ-02
        name: Reproducibility
        score: 3
        max: 3
        passed: true
        comment: np.random.seed(42) set
      - id: CQ-03
        name: Clean Imports
        score: 2
        max: 2
        passed: true
        comment: Only altair, numpy, pandas - all used
      - id: CQ-04
        name: No Deprecated API
        score: 1
        max: 1
        passed: true
        comment: Uses current Altair API
      - id: CQ-05
        name: Output Correct
        score: 1
        max: 1
        passed: true
        comment: Saves as plot.png and plot.html
    library_features:
      score: 3
      max: 5
      items:
      - id: LF-01
        name: Uses distinctive library features
        score: 3
        max: 5
        passed: true
        comment: Uses declarative encoding with bin aggregation and count(); could
          add interactivity with .interactive() or tooltips
  verdict: APPROVED
