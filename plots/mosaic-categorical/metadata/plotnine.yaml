library: plotnine
specification_id: mosaic-categorical
created: '2026-01-11T00:19:16Z'
updated: '2026-01-11T00:24:57Z'
generated_by: claude-opus-4-5-20251101
workflow_run: 20886560574
issue: 3650
python_version: 3.13.11
library_version: 0.15.2
preview_url: https://storage.googleapis.com/pyplots-images/plots/mosaic-categorical/plotnine/plot.png
preview_thumb: https://storage.googleapis.com/pyplots-images/plots/mosaic-categorical/plotnine/plot_thumb.png
preview_html: null
quality_score: 91
review:
  strengths:
  - Excellent mosaic plot implementation using geom_rect to manually construct proportional
    rectangles
  - Clear visual distinction between survival outcomes with accessible blue color
    scheme
  - Proper title format and descriptive axis labels explaining the proportional width
    encoding
  - Well-structured code following KISS principles with clear data preparation logic
  - Good use of plotnine grammar of graphics with layer composition (geom_rect + geom_text)
  weaknesses:
  - Legend placement could be closer to the plot to reduce empty whitespace on the
    right side
  - Grid removal is correct but the minimal theme could be enhanced with subtle panel
    border
  image_description: 'The plot displays a mosaic chart visualizing Titanic survival
    data by passenger class. Three vertical columns represent First, Second, and Third
    class passengers, with widths proportional to class size (Third class being widest).
    Each column is divided into two rectangles: dark blue (#306998) for "Survived"
    at the bottom and muted blue (#8B9DC3) for "Did Not Survive" at the top. The heights
    represent survival proportions within each class. White count labels (203, 122,
    118, 167, 178, 528) are centered in each rectangle. The title follows the correct
    format "mosaic-categorical 路 plotnine 路 pyplots.ai". Class labels (First, Second,
    Third) appear below in blue. A legend on the right shows the outcome categories.
    The Y-axis shows "Survival Proportion" from 0.00 to 1.00, and the X-axis label
    explains that width is proportional to class size.'
  criteria_checklist:
    visual_quality:
      score: 36
      max: 40
      items:
      - id: VQ-01
        name: Text Legibility
        score: 10
        max: 10
        passed: true
        comment: Title at 24pt, axis labels at 20pt, tick labels at 16pt, all perfectly
          readable
      - id: VQ-02
        name: No Overlap
        score: 8
        max: 8
        passed: true
        comment: No overlapping text elements, all labels clearly separated
      - id: VQ-03
        name: Element Visibility
        score: 8
        max: 8
        passed: true
        comment: Rectangles well-sized, count labels clearly visible with good contrast
      - id: VQ-04
        name: Color Accessibility
        score: 5
        max: 5
        passed: true
        comment: Blue color scheme is colorblind-safe, good contrast between categories
      - id: VQ-05
        name: Layout Balance
        score: 3
        max: 5
        passed: true
        comment: Good proportions but slight imbalance with legend placement leaving
          some empty space on right
      - id: VQ-06
        name: Axis Labels
        score: 2
        max: 2
        passed: true
        comment: 'Descriptive labels: Survival Proportion and Passenger Class (width
          proportional to class size)'
      - id: VQ-07
        name: Grid & Legend
        score: 0
        max: 2
        passed: false
        comment: Grid is completely removed which is appropriate for mosaic, but legend
          could be positioned better
    spec_compliance:
      score: 25
      max: 25
      items:
      - id: SC-01
        name: Plot Type
        score: 8
        max: 8
        passed: true
        comment: Correct mosaic plot implementation with rectangles proportional to
          frequencies
      - id: SC-02
        name: Data Mapping
        score: 5
        max: 5
        passed: true
        comment: Passenger class on X (width), survival status on Y (height within
          class)
      - id: SC-03
        name: Required Features
        score: 5
        max: 5
        passed: true
        comment: 'All spec features present: proportional widths, conditional heights,
          gap spacing, color coding, clear labels'
      - id: SC-04
        name: Data Range
        score: 3
        max: 3
        passed: true
        comment: Full range shown (0 to 1 for proportions)
      - id: SC-05
        name: Legend Accuracy
        score: 2
        max: 2
        passed: true
        comment: Legend correctly shows Survived and Did Not Survive
      - id: SC-06
        name: Title Format
        score: 2
        max: 2
        passed: true
        comment: 'Correct format: mosaic-categorical 路 plotnine 路 pyplots.ai'
    data_quality:
      score: 18
      max: 20
      items:
      - id: DQ-01
        name: Feature Coverage
        score: 7
        max: 8
        passed: true
        comment: Shows variation in survival rates across classes (First class higher
          survival), but could show more categories
      - id: DQ-02
        name: Realistic Context
        score: 7
        max: 7
        passed: true
        comment: Titanic survival data is a classic, neutral, real-world example
      - id: DQ-03
        name: Appropriate Scale
        score: 4
        max: 5
        passed: true
        comment: Values are realistic Titanic-style counts, though not exact historical
          data
    code_quality:
      score: 9
      max: 10
      items:
      - id: CQ-01
        name: KISS Structure
        score: 3
        max: 3
        passed: true
        comment: 'Linear flow: imports, data, calculations, plot, save'
      - id: CQ-02
        name: Reproducibility
        score: 3
        max: 3
        passed: true
        comment: np.random.seed(42) set
      - id: CQ-03
        name: Clean Imports
        score: 2
        max: 2
        passed: true
        comment: All imports are used
      - id: CQ-04
        name: No Deprecated API
        score: 1
        max: 1
        passed: true
        comment: Modern plotnine API
      - id: CQ-05
        name: Output Correct
        score: 0
        max: 1
        passed: false
        comment: Saves as plot.png but uses width/height in save() instead of relying
          solely on figure_size
    library_features:
      score: 3
      max: 5
      items:
      - id: LF-01
        name: Distinctive Features
        score: 3
        max: 5
        passed: true
        comment: Uses ggplot grammar with geom_rect and geom_text, scale_fill_manual,
          and theme customization, but doesnt leverage more advanced plotnine features
  verdict: APPROVED
impl_tags:
  dependencies: []
  techniques:
  - annotations
  - layer-composition
  patterns:
  - data-generation
  - iteration-over-groups
  dataprep: []
  styling:
  - edge-highlighting
  - minimal-chrome
