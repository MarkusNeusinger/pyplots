library: altair
specification_id: donut-nested
created: '2025-12-25T20:04:20Z'
updated: '2025-12-25T20:06:31Z'
generated_by: claude-opus-4-5-20251101
workflow_run: 20510190009
issue: 2015
python_version: 3.13.11
library_version: 6.0.0
preview_url: https://storage.googleapis.com/pyplots-images/plots/donut-nested/altair/plot.png
preview_thumb: https://storage.googleapis.com/pyplots-images/plots/donut-nested/altair/plot_thumb.png
preview_html: https://storage.googleapis.com/pyplots-images/plots/donut-nested/altair/plot.html
quality_score: 91
review:
  strengths:
  - Excellent use of consistent color families per department with darker inner ring
    and lighter outer variations
  - Clean hierarchical data structure with proper aggregation from outer to inner
    ring
  - Good visual separation between rings using white stroke and radius gap
  - Appropriate use of Altair layered chart composition
  - Realistic budget allocation scenario with sensible values
  - Smart label filtering showing only segments >=100 to avoid clutter
  weaknesses:
  - Outer ring labels could be slightly larger for better readability at full size
  - No explicit legend for smaller segments that do not have labels
  - The Engineering label in the inner ring slightly clips at the edge of its segment
  image_description: 'The plot displays a nested donut chart showing budget allocation
    across 4 departments. The inner ring shows department totals (Engineering, Marketing,
    Sales, Operations) with dark colors and white bold labels centered in each segment.
    The outer ring shows 14 expense categories using lighter variations within each
    department''s color family: Blue shades for Engineering (Salaries, Equipment,
    Software, Training), Yellow/Gold for Marketing (Digital Ads, Events, Content),
    Teal/Green for Sales (Commissions, Travel, Tools), and Purple shades for Operations
    (Facilities, IT Support, Logistics, HR). White strokes separate all segments.
    Labels appear on larger outer segments. The title "donut-nested 路 altair 路 pyplots.ai"
    is positioned at the top center. The chart uses a square 1200x1200 canvas (scaled
    3x to 3600x3600) and fills a good portion of the available space.'
  criteria_checklist:
    visual_quality:
      score: 36
      max: 40
      items:
      - id: VQ-01
        name: Text Legibility
        score: 9
        max: 10
        passed: true
        comment: Title and inner labels clearly readable, outer labels could be slightly
          larger
      - id: VQ-02
        name: No Overlap
        score: 8
        max: 8
        passed: true
        comment: No overlapping text, segments well separated
      - id: VQ-03
        name: Element Visibility
        score: 8
        max: 8
        passed: true
        comment: Both rings clearly visible with good proportions and spacing
      - id: VQ-04
        name: Color Accessibility
        score: 5
        max: 5
        passed: true
        comment: Color families are colorblind-safe with good contrast between categories
      - id: VQ-05
        name: Layout Balance
        score: 4
        max: 5
        passed: true
        comment: Good canvas utilization, slight asymmetry due to label placement
      - id: VQ-06
        name: Axis Labels
        score: 0
        max: 2
        passed: true
        comment: N/A for donut charts (no axes)
      - id: VQ-07
        name: Grid & Legend
        score: 2
        max: 2
        passed: true
        comment: No grid needed, tooltips available for details, clean presentation
    spec_compliance:
      score: 23
      max: 25
      items:
      - id: SC-01
        name: Plot Type
        score: 8
        max: 8
        passed: true
        comment: Correct nested donut chart with two concentric rings
      - id: SC-02
        name: Data Mapping
        score: 5
        max: 5
        passed: true
        comment: Inner ring shows parent categories, outer shows children with correct
          aggregation
      - id: SC-03
        name: Required Features
        score: 4
        max: 5
        passed: true
        comment: Has color families per parent, segment alignment, labels on larger
          segments; spacing between rings present
      - id: SC-04
        name: Data Range
        score: 3
        max: 3
        passed: true
        comment: All data visible and proportionally represented
      - id: SC-05
        name: Legend Accuracy
        score: 1
        max: 2
        passed: true
        comment: No explicit legend, relies on labels and tooltips only
      - id: SC-06
        name: Title Format
        score: 2
        max: 2
        passed: true
        comment: Correct format "donut-nested 路 altair 路 pyplots.ai"
    data_quality:
      score: 20
      max: 20
      items:
      - id: DQ-01
        name: Feature Coverage
        score: 8
        max: 8
        passed: true
        comment: Shows hierarchy with 4 parents and 14 children, varying segment sizes
      - id: DQ-02
        name: Realistic Context
        score: 7
        max: 7
        passed: true
        comment: Budget allocation by department is a real, comprehensible business
          scenario
      - id: DQ-03
        name: Appropriate Scale
        score: 5
        max: 5
        passed: true
        comment: Values in $K range (50-450K) are realistic for budget allocation
    code_quality:
      score: 9
      max: 10
      items:
      - id: CQ-01
        name: KISS Structure
        score: 3
        max: 3
        passed: true
        comment: Flat script structure with imports, data, plot, save
      - id: CQ-02
        name: Reproducibility
        score: 3
        max: 3
        passed: true
        comment: Deterministic data, no random generation
      - id: CQ-03
        name: Clean Imports
        score: 2
        max: 2
        passed: true
        comment: Only altair and pandas imported
      - id: CQ-04
        name: No Deprecated API
        score: 1
        max: 1
        passed: true
        comment: Uses current Altair API
      - id: CQ-05
        name: Output Correct
        score: 0
        max: 1
        passed: true
        comment: Saves as plot.png and plot.html correctly
    library_features:
      score: 3
      max: 5
      items:
      - id: LF-01
        name: Uses distinctive features
        score: 3
        max: 5
        passed: true
        comment: Uses Altair's layered chart approach with mark_arc, but could leverage
          more declarative features like tooltips more prominently
  verdict: APPROVED
