library: plotnine
specification_id: campbell-basic
created: '2026-02-15T21:08:00Z'
updated: '2026-02-15T21:11:40Z'
generated_by: claude-opus-4-5-20251101
workflow_run: 22043026955
issue: 4241
python_version: 3.14.3
library_version: 0.15.3
preview_url: https://storage.googleapis.com/pyplots-images/plots/campbell-basic/plotnine/plot.png
preview_thumb: https://storage.googleapis.com/pyplots-images/plots/campbell-basic/plotnine/plot_thumb.png
preview_html: null
quality_score: 86
review:
  strengths:
  - Excellent data quality with realistic rotordynamic context and appropriate scale
    values
  - Clean critical speed intersection calculation using linear interpolation with
    sign-change detection
  - 'Good visual hierarchy: solid colored mode curves vs dashed gray EO lines vs red
    diamond markers'
  - Direct labeling of mode curves at right edge is effective and avoids legend clutter
  - All font sizes explicitly set following library guidelines for 4800x2700 output
  weaknesses:
  - Missing a formal legend as requested by the spec — while direct labeling works
    well, a small legend distinguishing Natural Frequency Modes from Engine Order
    Lines would satisfy the spec requirement
  - Color palette includes coral-red and green which may be problematic for colorblind
    viewers — consider using a more colorblind-safe palette (e.g., blue, orange, purple,
    brown)
  - The y-axis range extends to 120 Hz when data maxes around 90 Hz, leaving unused
    space at the top of the plot
  - Engine order label placement could be improved — the 3x label sits very close
    to the top edge, and labels could be rotated to follow the line angle for better
    association
  image_description: 'The plot shows a Campbell Diagram (interference diagram) for
    rotating machinery analysis. Four natural frequency curves are displayed as solid
    colored lines: 1st Bending (dark blue, ~18-23 Hz, slightly increasing), 2nd Bending
    (coral/salmon, ~43-39 Hz, slightly decreasing), 1st Torsional (green, ~65-73 Hz,
    increasing), and Axial (orange/yellow, ~88-90 Hz, nearly flat). Three engine order
    excitation lines (1x, 2x, 3x) are shown as gray dashed diagonal lines originating
    from the origin. Red diamond markers indicate critical speed intersections where
    engine order lines cross natural frequency curves. Mode labels are positioned
    at the right edge of each curve, and engine order labels (1x, 2x, 3x) appear in
    italic gray text near the top of each line. The title "campbell-basic · plotnine
    · pyplots.ai" is centered at the top. X-axis shows "Rotational Speed (RPM)" from
    0-6000, Y-axis shows "Frequency (Hz)" from 0-120. The background uses a minimal
    theme with subtle light gray grid lines.'
  criteria_checklist:
    visual_quality:
      score: 28
      max: 30
      items:
      - id: VQ-01
        name: Text Legibility
        score: 8
        max: 8
        passed: true
        comment: 'All font sizes explicitly set: title 24pt, axis titles 20pt, axis
          text 16pt, base 14pt. All text clearly readable.'
      - id: VQ-02
        name: No Overlap
        score: 6
        max: 6
        passed: true
        comment: No overlapping text elements. Mode labels well-positioned at right
          edge, EO labels well-spaced.
      - id: VQ-03
        name: Element Visibility
        score: 6
        max: 6
        passed: true
        comment: Mode lines at size 2.2, EO lines at 1.2, critical markers at size
          5 — all clearly visible.
      - id: VQ-04
        name: Color Accessibility
        score: 3
        max: 4
        passed: false
        comment: Coral and green modes could be confused by deuteranopic viewers.
          Not purely red-green dependent due to lightness differences.
      - id: VQ-05
        name: Layout & Canvas
        score: 3
        max: 4
        passed: false
        comment: Good 16:9 layout. Slight wasted space at top (120 Hz limit when data
          maxes at ~90 Hz).
      - id: VQ-06
        name: Axis Labels & Title
        score: 2
        max: 2
        passed: true
        comment: 'Descriptive labels with units: Rotational Speed (RPM) and Frequency
          (Hz).'
    design_excellence:
      score: 13
      max: 20
      items:
      - id: DE-01
        name: Aesthetic Sophistication
        score: 5
        max: 8
        passed: false
        comment: Thoughtful custom palette, gray EO lines, red diamond markers, italic
          EO labels. Above defaults but not publication-ready.
      - id: DE-02
        name: Visual Refinement
        score: 4
        max: 6
        passed: false
        comment: Minimal theme with subtle grid (alpha=0.25), minor grid removed.
          Could benefit from further tick/spine refinement.
      - id: DE-03
        name: Data Storytelling
        score: 4
        max: 6
        passed: false
        comment: Red diamonds draw attention to critical speeds. Direct labeling and
          line style separation create good visual hierarchy.
    spec_compliance:
      score: 13
      max: 15
      items:
      - id: SC-01
        name: Plot Type
        score: 5
        max: 5
        passed: true
        comment: Correct Campbell diagram with natural frequency curves, engine order
          lines, and critical speed markers.
      - id: SC-02
        name: Required Features
        score: 3
        max: 4
        passed: false
        comment: All major features present. Missing formal legend distinguishing
          mode curves from engine order lines as requested by spec.
      - id: SC-03
        name: Data Mapping
        score: 3
        max: 3
        passed: true
        comment: X=RPM, Y=Hz correctly assigned. All data visible in range.
      - id: SC-04
        name: Title & Legend
        score: 2
        max: 3
        passed: false
        comment: Title format correct. No formal legend present — direct labels used
          instead.
    data_quality:
      score: 15
      max: 15
      items:
      - id: DQ-01
        name: Feature Coverage
        score: 6
        max: 6
        passed: true
        comment: Shows 4 modes with realistic gyroscopic effects, 3 EO lines, multiple
          critical speed intersections.
      - id: DQ-02
        name: Realistic Context
        score: 5
        max: 5
        passed: true
        comment: Rotating machinery context with realistic mode names and behaviors.
      - id: DQ-03
        name: Appropriate Scale
        score: 4
        max: 4
        passed: true
        comment: Speed range 0-6000 RPM and frequencies 18-90 Hz realistic for industrial
          rotating equipment.
    code_quality:
      score: 10
      max: 10
      items:
      - id: CQ-01
        name: KISS Structure
        score: 3
        max: 3
        passed: true
        comment: Clean Imports → Data → Plot → Save structure. No functions or classes.
      - id: CQ-02
        name: Reproducibility
        score: 2
        max: 2
        passed: true
        comment: np.random.seed(42) set.
      - id: CQ-03
        name: Clean Imports
        score: 2
        max: 2
        passed: true
        comment: All imports used, no unused imports.
      - id: CQ-04
        name: Code Elegance
        score: 2
        max: 2
        passed: true
        comment: Appropriate complexity. Linear interpolation for critical speed calculation
          is well-implemented.
      - id: CQ-05
        name: Output & API
        score: 1
        max: 1
        passed: true
        comment: Saves as plot.png, no deprecated functions.
    library_features:
      score: 7
      max: 10
      items:
      - id: LM-01
        name: Idiomatic Usage
        score: 4
        max: 5
        passed: false
        comment: Good grammar-of-graphics layer composition with scale_color_identity
          and separate DataFrames per geom.
      - id: LM-02
        name: Distinctive Features
        score: 3
        max: 5
        passed: false
        comment: 'Uses ggplot-specific patterns: layer composition, scale_color_identity,
          fontstyle in geom_text. Somewhat generic ggplot usage.'
  verdict: REJECTED
impl_tags:
  dependencies: []
  techniques:
  - layer-composition
  - annotations
  patterns:
  - data-generation
  - iteration-over-groups
  dataprep:
  - interpolation
  styling:
  - grid-styling
