library: plotnine
specification_id: heatmap-geographic
created: '2026-01-10T08:16:32Z'
updated: '2026-01-10T08:19:20Z'
generated_by: claude-opus-4-5-20251101
workflow_run: 20875420095
issue: 3638
python_version: 3.13.11
library_version: 0.15.2
preview_url: https://storage.googleapis.com/pyplots-images/plots/heatmap-geographic/plotnine/plot.png
preview_thumb: https://storage.googleapis.com/pyplots-images/plots/heatmap-geographic/plotnine/plot_thumb.png
preview_html: null
quality_score: 91
review:
  strengths:
  - Excellent choice of seismic activity as realistic application for geographic heatmap
  - Clean KDE-based density estimation with Gaussian smoothing
  - Well-structured continent outlines providing geographic context without overwhelming
    the data
  - YlOrRd colormap is colorblind-friendly and appropriate for density visualization
  - Perfect text sizing following the 24/20/16pt guidelines
  - Good use of plotnine grammar of graphics with layered composition
  weaknesses:
  - Grid lines showing through the heatmap tiles create slight visual noise; could
    use element_blank() for panel_grid_major
  - The ocean background (light blue) is nice but some low-density heatmap tiles in
    ocean areas create an inconsistent look
  image_description: 'The plot displays a geographic heatmap showing seismic activity
    density across a world map. The visualization uses a YlOrRd-like sequential colormap
    (light yellow to dark red) for the density layer, with higher concentrations shown
    as red hotspots. Visible density clusters appear in expected seismic zones: Japan
    (East Asia), Indonesia, Chile (South America west coast), California (US West
    Coast), Philippines, New Zealand, and the Mediterranean region. Simplified continent
    outlines are drawn in dark gray over the heatmap layer. The background uses a
    light blue color representing ocean areas. The X-axis shows Longitude (°) from
    -100 to 100+, and Y-axis shows Latitude (°) from -40 to 80. A vertical colorbar
    legend on the right shows "Density" values ranging from ~0.0001 to 0.0005. The
    title "Seismic Activity Density · heatmap-geographic · plotnine · pyplots.ai"
    is displayed at the top in bold. Text is clearly legible with appropriate font
    sizes.'
  criteria_checklist:
    visual_quality:
      score: 36
      max: 40
      items:
      - id: VQ-01
        name: Text Legibility
        score: 10
        max: 10
        passed: true
        comment: Title 24pt bold, axis titles 20pt, tick labels 16pt - all perfectly
          readable
      - id: VQ-02
        name: No Overlap
        score: 8
        max: 8
        passed: true
        comment: No overlapping text elements
      - id: VQ-03
        name: Element Visibility
        score: 7
        max: 8
        passed: true
        comment: Heatmap tiles well-sized, density visible but some hotspots could
          be slightly more distinct
      - id: VQ-04
        name: Color Accessibility
        score: 5
        max: 5
        passed: true
        comment: YlOrRd is colorblind-safe sequential colormap
      - id: VQ-05
        name: Layout Balance
        score: 4
        max: 5
        passed: true
        comment: Good layout but some empty space at bottom of canvas
      - id: VQ-06
        name: Axis Labels
        score: 2
        max: 2
        passed: true
        comment: Longitude (°) and Latitude (°) with units
      - id: VQ-07
        name: Grid & Legend
        score: 0
        max: 2
        passed: false
        comment: Grid lines showing through the heatmap tiles create visual noise
    spec_compliance:
      score: 24
      max: 25
      items:
      - id: SC-01
        name: Plot Type
        score: 8
        max: 8
        passed: true
        comment: Correct geographic heatmap with KDE density
      - id: SC-02
        name: Data Mapping
        score: 5
        max: 5
        passed: true
        comment: Longitude/Latitude correctly mapped to x/y, density to fill
      - id: SC-03
        name: Required Features
        score: 4
        max: 5
        passed: true
        comment: Has KDE, colorbar, continent basemap; transparency could be more
          visible
      - id: SC-04
        name: Data Range
        score: 3
        max: 3
        passed: true
        comment: Full geographic range shown (-180 to 180, -60 to 80)
      - id: SC-05
        name: Legend Accuracy
        score: 2
        max: 2
        passed: true
        comment: Colorbar accurately labeled Density with scale
      - id: SC-06
        name: Title Format
        score: 2
        max: 2
        passed: true
        comment: Uses correct format with spec-id, library, and pyplots.ai
    data_quality:
      score: 18
      max: 20
      items:
      - id: DQ-01
        name: Feature Coverage
        score: 7
        max: 8
        passed: true
        comment: Shows multiple distinct clusters with varying density; Pacific Ring
          of Fire well represented
      - id: DQ-02
        name: Realistic Context
        score: 7
        max: 7
        passed: true
        comment: Seismic activity is a perfect real-world application for geographic
          heatmaps
      - id: DQ-03
        name: Appropriate Scale
        score: 4
        max: 5
        passed: true
        comment: Geographic coordinates correct; density scale reasonable but somewhat
          abstract
    code_quality:
      score: 10
      max: 10
      items:
      - id: CQ-01
        name: KISS Structure
        score: 3
        max: 3
        passed: true
        comment: 'Linear script: imports, seed, data, KDE, plot, save'
      - id: CQ-02
        name: Reproducibility
        score: 3
        max: 3
        passed: true
        comment: np.random.seed(42) set
      - id: CQ-03
        name: Clean Imports
        score: 2
        max: 2
        passed: true
        comment: All imports used (scipy.ndimage, scipy.stats, plotnine components)
      - id: CQ-04
        name: No Deprecated API
        score: 1
        max: 1
        passed: true
        comment: Uses current plotnine API
      - id: CQ-05
        name: Output Correct
        score: 1
        max: 1
        passed: true
        comment: Saves as plot.png
    library_features:
      score: 3
      max: 5
      items:
      - id: LF-01
        name: Distinctive Features
        score: 3
        max: 5
        passed: true
        comment: Uses ggplot grammar with geom_tile, geom_polygon, scale_fill_gradient,
          theme customization; but this is fairly standard plotnine usage
  verdict: APPROVED
impl_tags:
  dependencies:
  - scipy
  techniques:
  - layer-composition
  patterns:
  - data-generation
  - matrix-construction
  - iteration-over-groups
  dataprep:
  - kde
  styling:
  - custom-colormap
  - alpha-blending
  - grid-styling
