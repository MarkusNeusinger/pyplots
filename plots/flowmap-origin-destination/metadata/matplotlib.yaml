library: matplotlib
specification_id: flowmap-origin-destination
created: '2026-01-16T08:07:30Z'
updated: '2026-01-16T08:10:17Z'
generated_by: claude-opus-4-5-20251101
workflow_run: 21059786155
issue: 3765
python_version: 3.13.11
library_version: 3.10.8
preview_url: https://storage.googleapis.com/pyplots-images/plots/flowmap-origin-destination/matplotlib/plot.png
preview_thumb: https://storage.googleapis.com/pyplots-images/plots/flowmap-origin-destination/matplotlib/plot_thumb.png
preview_html: null
quality_score: 90
review:
  strengths:
  - Excellent implementation of quadratic Bezier curves for flow visualization
  - Well-designed data with realistic global shipping context (10 major ports, 15
    trade routes)
  - Good use of alpha transparency (0.4-0.8) and line width scaling (2-10) for flow
    magnitude encoding
  - Clean simplified continent polygons provide geographic context without clutter
  - Port markers with white edge highlighting stand out clearly
  weaknesses:
  - Hamburg and Rotterdam labels overlap slightly due to geographic proximity
  - Legend uses rectangular patches instead of line samples, which does not accurately
    represent the line-width encoding of the actual flows
  image_description: 'The plot displays a world map with simplified green polygons
    representing continents on a light blue ocean background. Ten major port cities
    are marked with dark blue circular markers with white edges: Shanghai, Singapore,
    Rotterdam, Los Angeles, Dubai, Hong Kong, Busan, Hamburg, New York, and Santos.
    Each port is labeled with bold text. Fifteen curved arcs (quadratic Bezier curves)
    connect origin and destination ports, representing trade flows. The arcs vary
    in thickness based on flow volume (2-10 line width range) and use a blue colormap
    with varying intensity and transparency (alpha 0.4-0.8). The thickest, darkest
    arcs represent the highest volume routes (e.g., Shanghai to Los Angeles at 8.5M
    TEUs). A legend in the lower left shows "Trade Volume" with three levels: 2M,
    5M, and 8M TEUs. Axes show Longitude (-180 to 180) and Latitude (-60 to 80). A
    subtle dashed grid is visible. The title follows the required format: "Global
    Port Trade Routes · flowmap-origin-destination · matplotlib · pyplots.ai".'
  criteria_checklist:
    visual_quality:
      score: 35
      max: 40
      items:
      - id: VQ-01
        name: Text Legibility
        score: 10
        max: 10
        passed: true
        comment: Title 24pt, axis labels 20pt, tick labels 16pt, port labels 12pt
          bold - all readable
      - id: VQ-02
        name: No Overlap
        score: 6
        max: 8
        passed: true
        comment: Minor overlap between Hamburg and Rotterdam labels; otherwise clean
      - id: VQ-03
        name: Element Visibility
        score: 8
        max: 8
        passed: true
        comment: Arc thickness well scaled 2-10 range, port markers s=250 with white
          edges visible
      - id: VQ-04
        name: Color Accessibility
        score: 5
        max: 5
        passed: true
        comment: Blues colormap is colorblind-safe, good contrast against green continents
      - id: VQ-05
        name: Layout Balance
        score: 4
        max: 5
        passed: true
        comment: Good use of canvas, slight empty space in lower right (Australia
          area)
      - id: VQ-06
        name: Axis Labels
        score: 2
        max: 2
        passed: true
        comment: 'Descriptive: Longitude and Latitude (geographic context implies
          degrees)'
      - id: VQ-07
        name: Grid & Legend
        score: 0
        max: 2
        passed: false
        comment: Legend uses patches instead of line samples which is misleading for
          line-width encoding
    spec_compliance:
      score: 25
      max: 25
      items:
      - id: SC-01
        name: Plot Type
        score: 8
        max: 8
        passed: true
        comment: Correct origin-destination flow map with curved arcs
      - id: SC-02
        name: Data Mapping
        score: 5
        max: 5
        passed: true
        comment: Origin/destination coordinates correctly mapped, flow magnitude to
          thickness
      - id: SC-03
        name: Required Features
        score: 5
        max: 5
        passed: true
        comment: Curved Bezier arcs, line width proportional to flow, transparency,
          color encoding, basemap, port labels
      - id: SC-04
        name: Data Range
        score: 3
        max: 3
        passed: true
        comment: All ports and flows visible within axis limits
      - id: SC-05
        name: Legend Accuracy
        score: 2
        max: 2
        passed: true
        comment: Legend correctly shows trade volume levels
      - id: SC-06
        name: Title Format
        score: 2
        max: 2
        passed: true
        comment: Title follows required format with spec-id, library, pyplots.ai
    data_quality:
      score: 20
      max: 20
      items:
      - id: DQ-01
        name: Feature Coverage
        score: 8
        max: 8
        passed: true
        comment: Shows 15 diverse flows between 10 ports, varying magnitudes, bidirectional
          flows
      - id: DQ-02
        name: Realistic Context
        score: 7
        max: 7
        passed: true
        comment: Real-world global container shipping ports, plausible trade routes
      - id: DQ-03
        name: Appropriate Scale
        score: 5
        max: 5
        passed: true
        comment: TEU values are realistic for major shipping routes
    code_quality:
      score: 10
      max: 10
      items:
      - id: CQ-01
        name: KISS Structure
        score: 3
        max: 3
        passed: true
        comment: Clean imports → data → plot → save structure, no functions/classes
      - id: CQ-02
        name: Reproducibility
        score: 3
        max: 3
        passed: true
        comment: np.random.seed(42) set
      - id: CQ-03
        name: Clean Imports
        score: 2
        max: 2
        passed: true
        comment: Only matplotlib.patches, matplotlib.pyplot, numpy - all used
      - id: CQ-04
        name: No Deprecated API
        score: 1
        max: 1
        passed: true
        comment: No deprecated functions
      - id: CQ-05
        name: Output Correct
        score: 1
        max: 1
        passed: true
        comment: Saves as plot.png with dpi=300, bbox_inches=tight
    library_features:
      score: 0
      max: 5
      items:
      - id: LF-01
        name: Distinctive Features
        score: 0
        max: 5
        passed: false
        comment: Uses basic matplotlib features; could leverage FancyArrowPatch or
          ConnectionPatch for more polished arcs
  verdict: APPROVED
impl_tags:
  dependencies: []
  techniques:
  - bezier-curves
  - patches
  - annotations
  - custom-legend
  patterns:
  - data-generation
  - iteration-over-groups
  dataprep: []
  styling:
  - alpha-blending
  - edge-highlighting
  - grid-styling
  - custom-colormap
