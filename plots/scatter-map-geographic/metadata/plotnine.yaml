library: plotnine
specification_id: scatter-map-geographic
created: '2026-01-10T06:02:56Z'
updated: '2026-01-10T06:06:02Z'
generated_by: claude-opus-4-5-20251101
workflow_run: 20873879624
issue: 3617
python_version: 3.13.11
library_version: 0.15.2
preview_url: https://storage.googleapis.com/pyplots-images/plots/scatter-map-geographic/plotnine/plot.png
preview_thumb: https://storage.googleapis.com/pyplots-images/plots/scatter-map-geographic/plotnine/plot_thumb.png
preview_html: null
quality_score: 91
review:
  strengths:
  - Creative solution using geom_polygon for continent basemap in a library without
    native map support
  - Excellent use of plotnine grammar of graphics with layered geoms
  - High-quality colorblind-safe palette with good contrast
  - Clean, well-structured code following KISS principles
  - Both color and size legends are clear and informative
  weaknesses:
  - Title format slightly non-standard (data description first instead of spec-id
    first)
  - Simplified continent polygons are crude approximations (especially Africa shape)
  - Element visibility could be improved for smaller cities
  image_description: 'The plot displays a world map showing 30 major cities as scatter
    points positioned by their latitude and longitude coordinates. The basemap consists
    of simplified continent polygon outlines (light gray with darker gray borders)
    against a light blue ocean background (#D4E8F7). Cities are color-coded by region:
    Africa (purple), Asia (blue #306998), Europe (yellow #FFD43B), N. America (green
    #2CA02C), Oceania (cyan #17BECF), and S. America (red #D62728). Point sizes vary
    based on population, ranging from approximately 5M (Cape Town) to 37M (Tokyo).
    The title "World Major Cities · scatter-map-geographic · plotnine · pyplots.ai"
    is displayed prominently at the top in bold 24pt font. Two legends appear on the
    right side: a categorical "Region" legend with colored dots for each of the 6
    regions, and a "Population (M)" legend showing size scaling with example values
    of 10, 20, and 30 million. Axis labels show "Longitude (°)" on the x-axis and
    "Latitude (°)" on the y-axis with appropriate tick marks at regular intervals.
    The overall layout uses the full 16:9 canvas effectively with the map occupying
    the central area and legends positioned cleanly on the right without overlapping
    the data.'
  criteria_checklist:
    visual_quality:
      score: 36
      max: 40
      items:
      - id: VQ-01
        name: Text Legibility
        score: 10
        max: 10
        passed: true
        comment: Title 24pt bold, axis titles 20pt, axis text 16pt, legend text 14-18pt
          - all perfectly readable
      - id: VQ-02
        name: No Overlap
        score: 8
        max: 8
        passed: true
        comment: No overlapping text; city markers have natural overlap in dense regions
          handled with alpha=0.85
      - id: VQ-03
        name: Element Visibility
        score: 6
        max: 8
        passed: true
        comment: Markers sized appropriately for 30 points; some smaller cities could
          be slightly larger
      - id: VQ-04
        name: Color Accessibility
        score: 5
        max: 5
        passed: true
        comment: Colorblind-safe palette with distinct hues and good contrast against
          basemap
      - id: VQ-05
        name: Layout Balance
        score: 3
        max: 5
        passed: true
        comment: Good overall layout; simplified continent shapes leave some empty
          areas
      - id: VQ-06
        name: Axis Labels
        score: 2
        max: 2
        passed: true
        comment: 'Descriptive labels with units: Longitude (°) and Latitude (°)'
      - id: VQ-07
        name: Grid & Legend
        score: 2
        max: 2
        passed: true
        comment: Subtle grid with alpha=0.5, legends well-positioned on right
    spec_compliance:
      score: 23
      max: 25
      items:
      - id: SC-01
        name: Plot Type
        score: 8
        max: 8
        passed: true
        comment: Correct geographic scatter map with points positioned by lat/lon
      - id: SC-02
        name: Data Mapping
        score: 5
        max: 5
        passed: true
        comment: Longitude to X, Latitude to Y correctly assigned
      - id: SC-03
        name: Required Features
        score: 4
        max: 5
        passed: true
        comment: Has color encoding, size encoding, basemap context; simplified polygons
          instead of country boundaries
      - id: SC-04
        name: Data Range
        score: 3
        max: 3
        passed: true
        comment: Axes show full world extent (-180 to 180 lon, -60 to 80 lat)
      - id: SC-05
        name: Legend Accuracy
        score: 2
        max: 2
        passed: true
        comment: Both region color and population size legends are accurate
      - id: SC-06
        name: Title Format
        score: 1
        max: 2
        passed: false
        comment: Title uses data description first instead of spec-id first
    data_quality:
      score: 19
      max: 20
      items:
      - id: DQ-01
        name: Feature Coverage
        score: 8
        max: 8
        passed: true
        comment: Shows cities across all 6 regions with varying population sizes;
          demonstrates color and size encoding well
      - id: DQ-02
        name: Realistic Context
        score: 7
        max: 7
        passed: true
        comment: Real world cities with accurate coordinates and realistic population
          figures
      - id: DQ-03
        name: Appropriate Scale
        score: 4
        max: 5
        passed: true
        comment: Population values realistic; coordinates accurate; basemap scale
          reasonable but simplified
    code_quality:
      score: 10
      max: 10
      items:
      - id: CQ-01
        name: KISS Structure
        score: 3
        max: 3
        passed: true
        comment: Clean imports, data, plot, save structure; no functions or classes
      - id: CQ-02
        name: Reproducibility
        score: 3
        max: 3
        passed: true
        comment: np.random.seed(42) is set even though data is deterministic
      - id: CQ-03
        name: Clean Imports
        score: 2
        max: 2
        passed: true
        comment: All imports are used; appropriate plotnine components imported
      - id: CQ-04
        name: No Deprecated API
        score: 1
        max: 1
        passed: true
        comment: Uses current plotnine API
      - id: CQ-05
        name: Output Correct
        score: 1
        max: 1
        passed: true
        comment: Saves as plot.png with dpi=300
    library_features:
      score: 3
      max: 5
      items:
      - id: LF-01
        name: Distinctive Features
        score: 3
        max: 5
        passed: true
        comment: Uses plotnine grammar well (aes, geom_polygon, geom_point, scale_*,
          theme); creative geom_polygon basemap workaround
  verdict: APPROVED
impl_tags:
  dependencies: []
  techniques:
  - layer-composition
  patterns:
  - data-generation
  dataprep: []
  styling:
  - alpha-blending
  - grid-styling
