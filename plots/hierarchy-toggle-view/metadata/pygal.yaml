library: pygal
specification_id: hierarchy-toggle-view
created: '2026-01-11T21:05:27Z'
updated: '2026-01-11T21:08:16Z'
generated_by: claude-opus-4-5-20251101
workflow_run: 20901764011
issue: 3697
python_version: 3.13.11
library_version: 3.1.0
preview_url: https://storage.googleapis.com/pyplots-images/plots/hierarchy-toggle-view/pygal/plot.png
preview_thumb: https://storage.googleapis.com/pyplots-images/plots/hierarchy-toggle-view/pygal/plot_thumb.png
preview_html: https://storage.googleapis.com/pyplots-images/plots/hierarchy-toggle-view/pygal/plot.html
quality_score: 87
review:
  strengths:
  - Excellent dual-view approach showing both treemap and sunburst representations
    side-by-side in PNG
  - Interactive HTML version with proper toggle buttons between views
  - Consistent color scheme across both visualizations (blue=Engineering, yellow=Marketing,
    green=Sales, purple=Operations)
  - Realistic company budget data with proper hierarchical structure (3 levels, 18
    nodes)
  - 'Good use of pygal-specific features: custom Style, value_formatter, legend configuration'
  - Clean HTML generation with embedded SVG and JavaScript toggle functionality
  weaknesses:
  - Font sizes in the PNG could be larger for better readability at 4800x2700 resolution
  - The spec emphasizes toggle button as the core feature - while HTML has this, the
    PNG is static side-by-side (acceptable compromise for static format)
  - Sunburst view uses simple Pie with inner_radius rather than a true hierarchical
    sunburst showing parent-child nesting visually
  image_description: 'The image displays a side-by-side comparison of two hierarchical
    visualizations of company budget data. On the left is a Treemap View showing nested
    rectangles where area represents budget allocation - Engineering (blue shades:
    Backend $1800K, Frontend $1200K, Data Science $900K, DevOps $600K), Marketing
    (yellow shades: Digital $900K, Brand $600K, Content $600K), Sales (green shades:
    Enterprise $1000K, SMB $500K, Partners $300K), and Operations (purple shades:
    IT $500K, HR $400K, Finance $300K). On the right is a Sunburst View (donut/pie
    chart with inner_radius) showing the same data as radial segments. Both views
    use consistent color coding - blue for Engineering, yellow for Marketing, green
    for Sales, purple for Operations, with lighter shades for teams within each department.
    The title "Company Budget · hierarchy-toggle-view · pygal · pyplots.ai" appears
    at the top in Python Blue (#306998). A legend at the bottom of each view identifies
    the segments. Values are displayed directly on each segment in $K format.'
  criteria_checklist:
    visual_quality:
      score: 35
      max: 40
      items:
      - id: VQ-01
        name: Text Legibility
        score: 8
        max: 10
        passed: true
        comment: Title and value labels are readable but could be larger; legend text
          is small but legible
      - id: VQ-02
        name: No Overlap
        score: 8
        max: 8
        passed: true
        comment: No overlapping text elements
      - id: VQ-03
        name: Element Visibility
        score: 7
        max: 8
        passed: true
        comment: Both treemap rectangles and pie segments are clearly visible with
          good proportions
      - id: VQ-04
        name: Color Accessibility
        score: 5
        max: 5
        passed: true
        comment: Excellent colorblind-safe palette with blue, yellow, green, purple
          distinction
      - id: VQ-05
        name: Layout Balance
        score: 4
        max: 5
        passed: true
        comment: Good side-by-side layout; slight imbalance with sunburst legend extending
          further down
      - id: VQ-06
        name: Axis Labels
        score: 1
        max: 2
        passed: true
        comment: N/A for treemap/pie, but subtitle provides context
      - id: VQ-07
        name: Grid & Legend
        score: 2
        max: 2
        passed: true
        comment: Legends well-placed at bottom, colors consistent across views
    spec_compliance:
      score: 22
      max: 25
      items:
      - id: SC-01
        name: Plot Type
        score: 8
        max: 8
        passed: true
        comment: 'Correct: Treemap + Sunburst (pie with inner_radius) side-by-side'
      - id: SC-02
        name: Data Mapping
        score: 5
        max: 5
        passed: true
        comment: Values correctly map to areas (treemap) and angles (sunburst)
      - id: SC-03
        name: Required Features
        score: 3
        max: 5
        passed: false
        comment: Toggle functionality exists in HTML but PNG shows static side-by-side;
          specification mentions toggle button which is in HTML only
      - id: SC-04
        name: Data Range
        score: 3
        max: 3
        passed: true
        comment: All data visible, no clipping
      - id: SC-05
        name: Legend Accuracy
        score: 2
        max: 2
        passed: true
        comment: Legends correctly identify all segments
      - id: SC-06
        name: Title Format
        score: 1
        max: 2
        passed: true
        comment: Title present but includes extra context (Company Budget) which slightly
          deviates from pure spec-id format
    data_quality:
      score: 18
      max: 20
      items:
      - id: DQ-01
        name: Feature Coverage
        score: 7
        max: 8
        passed: true
        comment: Shows 3-level hierarchy (Company → Departments → Teams), 4 departments,
          14 teams - good coverage
      - id: DQ-02
        name: Realistic Context
        score: 7
        max: 7
        passed: true
        comment: Company budget allocation is an excellent, neutral, real-world scenario
      - id: DQ-03
        name: Appropriate Scale
        score: 4
        max: 5
        passed: true
        comment: Budget values in thousands are realistic; sum totals are consistent
    code_quality:
      score: 8
      max: 10
      items:
      - id: CQ-01
        name: KISS Structure
        score: 2
        max: 3
        passed: true
        comment: Mostly linear but uses PIL for combining images; slightly complex
          but necessary for side-by-side view
      - id: CQ-02
        name: Reproducibility
        score: 3
        max: 3
        passed: true
        comment: Deterministic data (no random), consistent hierarchy
      - id: CQ-03
        name: Clean Imports
        score: 2
        max: 2
        passed: true
        comment: All imports used appropriately
      - id: CQ-04
        name: No Deprecated API
        score: 1
        max: 1
        passed: true
        comment: Uses current pygal API
      - id: CQ-05
        name: Output Correct
        score: 0
        max: 1
        passed: false
        comment: Saves as plot.png but creates temporary files (cleaned up properly)
    library_features:
      score: 4
      max: 5
      items:
      - id: LF-01
        name: Distinctive Features
        score: 4
        max: 5
        passed: true
        comment: Uses pygal Treemap and Pie with inner_radius, custom Style, value_formatter,
          legend_at_bottom; generates HTML with interactive toggle. Good use of pygal's
          SVG generation for HTML embedding.
  verdict: REJECTED
impl_tags:
  dependencies:
  - pillow
  techniques:
  - html-export
  - custom-legend
  patterns:
  - iteration-over-groups
  dataprep: []
  styling:
  - edge-highlighting
