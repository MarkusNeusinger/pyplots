library: altair
specification_id: map-tile-background
created: '2026-01-20T22:45:34Z'
updated: '2026-01-20T22:55:28Z'
generated_by: claude-opus-4-5-20251101
workflow_run: 21189771519
issue: 3756
python_version: 3.13.11
library_version: 6.0.0
preview_url: https://storage.googleapis.com/pyplots-images/plots/map-tile-background/altair/plot.png
preview_thumb: https://storage.googleapis.com/pyplots-images/plots/map-tile-background/altair/plot_thumb.png
preview_html: https://storage.googleapis.com/pyplots-images/plots/map-tile-background/altair/plot.html
quality_score: 90
review:
  strengths:
  - Excellent creative solution using mark_image to render OpenStreetMap tiles
  - Proper Web Mercator projection implementation for accurate point positioning
  - Good visual hierarchy with size and color encoding
  - Includes required OSM attribution
  - Clean layer composition pattern typical of Altair
  - Both PNG and HTML output generated
  weaknesses:
  - Title and subtitle appear swapped - main title should be spec-id format, subtitle
    should be descriptive
  - Label overlap between Colosseum and Vatican Museums due to close geographic proximity
  - Missing .interactive() call which would enable zoom/pan for tile maps
  - Legend font sizes could be slightly larger for better readability
  image_description: 'The plot displays a map of Western and Central Europe with OpenStreetMap
    tile backgrounds showing geographic detail including country borders, cities,
    terrain, and water bodies. European landmarks are plotted as circular markers
    with size encoding for annual visitors (in millions) - La Rambla appears as the
    largest marker (37M visitors). Color encoding distinguishes five categories: Monument
    (Python blue #306998), Historical (yellow), Museum (green), Religious (red), and
    Street (purple). Text labels appear for major landmarks including La Rambla, Colosseum/Vatican
    Museums, Tower of Pisa, and others. Two legends are positioned at the bottom corners
    - a size legend on the bottom-left showing visitor count scale, and a category
    legend on the bottom-right. The required OpenStreetMap attribution "© OpenStreetMap
    contributors" is visible in the bottom-right corner. The title "European Landmarks
    · map-tile-background · altair · pyplots.ai" appears at the top of the chart.'
  criteria_checklist:
    visual_quality:
      score: 36
      max: 40
      items:
      - id: VQ-01
        name: Text Legibility
        score: 9
        max: 10
        passed: true
        comment: Title and subtitle readable, legend text legible but slightly small,
          some label overlap with markers
      - id: VQ-02
        name: No Overlap
        score: 7
        max: 8
        passed: true
        comment: Minor overlap between Colosseum and Vatican Museums labels due to
          close geographic proximity
      - id: VQ-03
        name: Element Visibility
        score: 8
        max: 8
        passed: true
        comment: Markers well-sized with 0.85 opacity and white stroke outlines for
          contrast against map tiles
      - id: VQ-04
        name: Color Accessibility
        score: 5
        max: 5
        passed: true
        comment: Uses Python blue/yellow as primary colors with colorblind-safe differentiation
      - id: VQ-05
        name: Layout Balance
        score: 5
        max: 5
        passed: true
        comment: Excellent canvas utilization with map tiles covering full chart area
      - id: VQ-06
        name: Axis Labels
        score: 0
        max: 2
        passed: true
        comment: No axis labels - appropriate for map visualization where axes are
          hidden
      - id: VQ-07
        name: Grid & Legend
        score: 2
        max: 2
        passed: true
        comment: Legends well-positioned in corners without obstructing data
    spec_compliance:
      score: 23
      max: 25
      items:
      - id: SC-01
        name: Plot Type
        score: 8
        max: 8
        passed: true
        comment: Correct map with tile background showing point data
      - id: SC-02
        name: Data Mapping
        score: 5
        max: 5
        passed: true
        comment: Lat/lon correctly converted to Web Mercator projection
      - id: SC-03
        name: Required Features
        score: 4
        max: 5
        passed: true
        comment: Has tiles, markers, size/color encoding, labels, tooltips, attribution.
          Missing .interactive() for zoom/pan
      - id: SC-04
        name: Data Range
        score: 3
        max: 3
        passed: true
        comment: All data points visible within map bounds
      - id: SC-05
        name: Legend Accuracy
        score: 2
        max: 2
        passed: true
        comment: Both size and category legends are accurate
      - id: SC-06
        name: Title Format
        score: 1
        max: 2
        passed: true
        comment: Uses correct format but title/subtitle appear swapped in output
    data_quality:
      score: 19
      max: 20
      items:
      - id: DQ-01
        name: Feature Coverage
        score: 7
        max: 8
        passed: true
        comment: Good variety of categories, visitor counts (0.5M-37M), geographic
          spread
      - id: DQ-02
        name: Realistic Context
        score: 7
        max: 7
        passed: true
        comment: Real European landmarks with plausible visitor numbers
      - id: DQ-03
        name: Appropriate Scale
        score: 5
        max: 5
        passed: true
        comment: Realistic annual visitor figures for famous landmarks
    code_quality:
      score: 9
      max: 10
      items:
      - id: CQ-01
        name: KISS Structure
        score: 3
        max: 3
        passed: true
        comment: 'Linear flow: imports → data → projection → layers → combine → save'
      - id: CQ-02
        name: Reproducibility
        score: 3
        max: 3
        passed: true
        comment: Uses np.random.seed(42)
      - id: CQ-03
        name: Clean Imports
        score: 2
        max: 2
        passed: true
        comment: Only altair, numpy, pandas - all used
      - id: CQ-04
        name: No Deprecated API
        score: 0
        max: 1
        passed: false
        comment: configure_view(strokeWidth=0) may generate warnings
      - id: CQ-05
        name: Output Correct
        score: 1
        max: 1
        passed: true
        comment: Saves as plot.png and plot.html
    library_features:
      score: 3
      max: 5
      items:
      - id: LF-01
        name: Distinctive Features
        score: 3
        max: 5
        passed: true
        comment: Uses mark_image for tiles, layered composition, tooltips. Missing
          .interactive() for zoom/pan
  verdict: APPROVED
impl_tags:
  dependencies: []
  techniques:
  - layer-composition
  - hover-tooltips
  - annotations
  - html-export
  patterns:
  - data-generation
  dataprep: []
  styling:
  - alpha-blending
  - edge-highlighting
