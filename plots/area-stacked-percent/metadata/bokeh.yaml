library: bokeh
specification_id: area-stacked-percent
created: '2025-12-30T11:22:59Z'
updated: '2025-12-30T11:35:52Z'
generated_by: claude-opus-4-5-20251101
workflow_run: 20595338107
issue: 0
python_version: 3.13.11
library_version: 3.8.1
preview_url: https://storage.googleapis.com/pyplots-images/plots/area-stacked-percent/bokeh/plot.png
preview_thumb: https://storage.googleapis.com/pyplots-images/plots/area-stacked-percent/bokeh/plot_thumb.png
preview_html: https://storage.googleapis.com/pyplots-images/plots/area-stacked-percent/bokeh/plot.html
quality_score: 92
impl_tags:
  dependencies: []
  techniques:
  - html-export
  - patches
  patterns:
  - data-generation
  - iteration-over-groups
  - columndatasource
  dataprep:
  - normalization
  styling:
  - grid-styling
review:
  strengths:
  - Excellent text legibility with appropriately scaled fonts for the 4800x2700 canvas
  - Colorblind-safe palette with four distinct, visually appealing colors
  - Proper 100% normalization with clear stacking from bottom to top
  - Clean KISS code structure with good commenting
  - Realistic market share scenario that fits the spec suggested applications
  - Both PNG and HTML output generated as expected for Bokeh
  weaknesses:
  - Missing HoverTool for interactive tooltips (Bokeh key differentiator)
  - Data shows relatively gradual changes; more dramatic proportion shifts would better
    demonstrate the plot type purpose
  - Legend at 36pt appears slightly smaller than optimal compared to 48pt axis labels
  image_description: 'The plot displays a 100% stacked area chart showing market share
    evolution from 2015 to 2024 for four products (A, B, C, D). The chart uses a colorblind-safe
    palette: Python blue (#306998) for Product A at the bottom, golden yellow (#FFD43B)
    for Product B, sea green (#2E8B57) for Product C, and salmon/coral (#E07B53) for
    Product D at the top. The Y-axis shows "Market Share (%)" ranging from 0 to 100,
    and the X-axis shows "Year" with annual tick marks. The title correctly follows
    the format "area-stacked-percent · bokeh · pyplots.ai". The legend is positioned
    in the top-right corner with a semi-transparent background. The stacked areas
    sum to 100% at each time point, showing Product A growing from ~40% to ~53%, while
    Product D shrinks from ~10% to ~7% over the decade. The grid is subtle with dashed
    lines and low alpha. Background is a light off-white (#fafafa).'
  criteria_checklist:
    visual_quality:
      score: 38
      max: 40
      items:
      - id: VQ-01
        name: Text Legibility
        score: 10
        max: 10
        passed: true
        comment: Title at 72pt, axis labels at 48pt, tick labels at 36pt - all perfectly
          readable at 4800x2700
      - id: VQ-02
        name: No Overlap
        score: 8
        max: 8
        passed: true
        comment: No overlapping text elements, all labels clear
      - id: VQ-03
        name: Element Visibility
        score: 8
        max: 8
        passed: true
        comment: Area patches are clearly visible with good alpha (0.85), distinct
          boundaries
      - id: VQ-04
        name: Color Accessibility
        score: 5
        max: 5
        passed: true
        comment: Excellent colorblind-safe palette with blue, yellow, green, and salmon
          - all distinguishable
      - id: VQ-05
        name: Layout Balance
        score: 5
        max: 5
        passed: true
        comment: Plot fills canvas well, good margins, legend positioned appropriately
      - id: VQ-06
        name: Axis Labels
        score: 2
        max: 2
        passed: true
        comment: '"Year" and "Market Share (%)" are descriptive with units'
      - id: VQ-07
        name: Grid & Legend
        score: 0
        max: 2
        passed: false
        comment: Grid alpha 0.3 is good, but legend text appears slightly small relative
          to axis labels and could be positioned better (inside plot area takes space
          from data visualization)
    spec_compliance:
      score: 25
      max: 25
      items:
      - id: SC-01
        name: Plot Type
        score: 8
        max: 8
        passed: true
        comment: Correct 100% stacked area chart
      - id: SC-02
        name: Data Mapping
        score: 5
        max: 5
        passed: true
        comment: X is time (years), Y shows percentage contributions
      - id: SC-03
        name: Required Features
        score: 5
        max: 5
        passed: true
        comment: Normalized to 100%, shows proportional changes over time
      - id: SC-04
        name: Data Range
        score: 3
        max: 3
        passed: true
        comment: Y-axis 0-100 with slight padding (105), X-axis covers all years
      - id: SC-05
        name: Legend Accuracy
        score: 2
        max: 2
        passed: true
        comment: Legend labels match the four product categories
      - id: SC-06
        name: Title Format
        score: 2
        max: 2
        passed: true
        comment: Correctly uses "area-stacked-percent · bokeh · pyplots.ai"
    data_quality:
      score: 17
      max: 20
      items:
      - id: DQ-01
        name: Feature Coverage
        score: 6
        max: 8
        passed: true
        comment: Shows proportion changes over time, but data is relatively stable
          without dramatic shifts that would better demonstrate the plot type's value
      - id: DQ-02
        name: Realistic Context
        score: 7
        max: 7
        passed: true
        comment: Market share evolution is a perfect, neutral business scenario
      - id: DQ-03
        name: Appropriate Scale
        score: 4
        max: 5
        passed: true
        comment: Percentages are realistic, though all products stay relatively close
          to initial values
    code_quality:
      score: 10
      max: 10
      items:
      - id: CQ-01
        name: KISS Structure
        score: 3
        max: 3
        passed: true
        comment: Clean imports → data → plot → save structure, no functions/classes
      - id: CQ-02
        name: Reproducibility
        score: 3
        max: 3
        passed: true
        comment: Uses np.random.seed(42)
      - id: CQ-03
        name: Clean Imports
        score: 2
        max: 2
        passed: true
        comment: All imports are used
      - id: CQ-04
        name: No Deprecated API
        score: 1
        max: 1
        passed: true
        comment: Uses current Bokeh API
      - id: CQ-05
        name: Output Correct
        score: 1
        max: 1
        passed: true
        comment: Saves as plot.png and plot.html
    library_features:
      score: 2
      max: 5
      items:
      - id: LF-01
        name: Uses distinctive library features
        score: 2
        max: 5
        passed: false
        comment: Uses ColumnDataSource and patch() which are Bokeh fundamentals, but
          doesn't leverage Bokeh's interactive features like HoverTool which would
          add tooltips showing exact percentages - a key Bokeh strength
  verdict: APPROVED
