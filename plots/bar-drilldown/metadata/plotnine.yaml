library: plotnine
specification_id: bar-drilldown
created: '2026-01-16T17:17:10Z'
updated: '2026-01-16T17:36:46Z'
generated_by: claude-opus-4-5-20251101
workflow_run: 21074664919
issue: 3773
python_version: 3.13.11
library_version: 0.15.2
preview_url: https://storage.googleapis.com/pyplots-images/plots/bar-drilldown/plotnine/plot.png
preview_thumb: https://storage.googleapis.com/pyplots-images/plots/bar-drilldown/plotnine/plot_thumb.png
preview_html: null
quality_score: 87
review:
  strengths:
  - Excellent adaptation of interactive drill concept to static visualization
  - Clear visual hierarchy with breadcrumb navigation labels
  - Good color scheme with distinct region colors and gradient for drill-down
  - Well-labeled axes with units
  - Clean KISS code structure with proper data organization
  weaknesses:
  - Grid styling too subtle (barely visible at alpha=0.4)
  - Gap between sections creates slight visual imbalance
  - Could benefit from a subtle visual indicator on the Americas bar showing it is
    the drilled item
  image_description: 'The plot displays a column chart showing hierarchical drilldown
    functionality for sales data by region. On the left side, there are 4 regional
    bars sorted by value: Americas (dark blue, 720), Asia Pacific (green, 713), Europe
    (yellow, 610), and MEA (orange, 220). On the right side, the Americas region is
    drilled down showing 4 country bars in a blue gradient: USA (450), Canada (120),
    Brazil (85), and Mexico (65). A dashed gray arrow connects from the Americas bar
    to the drilled section, indicating the drill path. Breadcrumb-style section labels
    "1. All Regions" and "2. Americas → Countries" appear above each section in blue
    text. All bars have bold value labels displayed on top. The title "bar-drilldown
    · plotnine · pyplots.ai" is correctly formatted in blue at the top. A subtitle
    explains "Hierarchical drilldown: Americas region expanded to show country breakdown".
    The Y-axis shows "Sales ($ millions)" with subtle horizontal gridlines. The plot
    uses a minimal theme with no legend (x-axis labels identify each bar). The layout
    effectively demonstrates the drilldown concept by showing both the parent level
    and the expanded child level side by side.'
  criteria_checklist:
    visual_quality:
      score: 35
      max: 40
      items:
      - id: VQ-01
        name: Text Legibility
        score: 9
        max: 10
        passed: true
        comment: Title at 26pt, axis labels readable, tick labels clear. Slightly
          smaller x-axis text (14pt) but still readable.
      - id: VQ-02
        name: No Overlap
        score: 8
        max: 8
        passed: true
        comment: No overlapping text elements, clean layout.
      - id: VQ-03
        name: Element Visibility
        score: 8
        max: 8
        passed: true
        comment: Bars well-sized with good width (0.75), excellent visual separation.
      - id: VQ-04
        name: Color Accessibility
        score: 5
        max: 5
        passed: true
        comment: Distinct colors for regions (blue, green, yellow, orange), blue gradient
          for drill-down countries.
      - id: VQ-05
        name: Layout Balance
        score: 3
        max: 5
        passed: true
        comment: Good use of space but gap between sections creates some visual imbalance.
      - id: VQ-06
        name: Axis Labels
        score: 2
        max: 2
        passed: true
        comment: Y-axis has Sales ($ millions) with units.
      - id: VQ-07
        name: Grid & Legend
        score: 0
        max: 2
        passed: false
        comment: Legend removed (acceptable), but grid barely visible at alpha=0.4.
    spec_compliance:
      score: 22
      max: 25
      items:
      - id: SC-01
        name: Plot Type
        score: 8
        max: 8
        passed: true
        comment: Correct column/bar chart type.
      - id: SC-02
        name: Data Mapping
        score: 5
        max: 5
        passed: true
        comment: Categories on X, values on Y correctly mapped.
      - id: SC-03
        name: Required Features
        score: 4
        max: 5
        passed: true
        comment: Shows drill concept, breadcrumbs, value labels. Missing click interactivity
          (expected for static lib).
      - id: SC-04
        name: Data Range
        score: 3
        max: 3
        passed: true
        comment: Y-axis shows full range (0-880), all data visible.
      - id: SC-05
        name: Legend Accuracy
        score: 0
        max: 2
        passed: false
        comment: Legend removed; x-axis labels compensate but spec mentions color
          mapping consistency.
      - id: SC-06
        name: Title Format
        score: 2
        max: 2
        passed: true
        comment: Correctly uses bar-drilldown · plotnine · pyplots.ai.
    data_quality:
      score: 18
      max: 20
      items:
      - id: DQ-01
        name: Feature Coverage
        score: 7
        max: 8
        passed: true
        comment: Shows two hierarchy levels, drill path, breadcrumbs. Does not show
          full 2-3 level depth.
      - id: DQ-02
        name: Realistic Context
        score: 7
        max: 7
        passed: true
        comment: Geographic sales data is a realistic, neutral business scenario.
      - id: DQ-03
        name: Appropriate Scale
        score: 4
        max: 5
        passed: true
        comment: Sales values are realistic (millions), parent value equals sum of
          children.
    code_quality:
      score: 9
      max: 10
      items:
      - id: CQ-01
        name: KISS Structure
        score: 3
        max: 3
        passed: true
        comment: 'Linear flow: imports → data → plot → save. No functions/classes.'
      - id: CQ-02
        name: Reproducibility
        score: 3
        max: 3
        passed: true
        comment: np.random.seed(42) set.
      - id: CQ-03
        name: Clean Imports
        score: 2
        max: 2
        passed: true
        comment: All imports are used.
      - id: CQ-04
        name: No Deprecated API
        score: 1
        max: 1
        passed: true
        comment: Uses current plotnine API.
      - id: CQ-05
        name: Output Correct
        score: 0
        max: 1
        passed: false
        comment: Saves as plot.png but dpi specification varies.
    library_features:
      score: 3
      max: 5
      items:
      - id: LF-01
        name: Distinctive Features
        score: 3
        max: 5
        passed: true
        comment: Uses ggplot grammar (aes, geom_bar, geom_text, geom_segment, scale_fill_manual,
          theme_minimal), but no advanced features like faceting.
  verdict: APPROVED
impl_tags:
  dependencies: []
  techniques:
  - annotations
  - manual-ticks
  - layer-composition
  patterns:
  - data-generation
  - iteration-over-groups
  dataprep: []
  styling:
  - grid-styling
