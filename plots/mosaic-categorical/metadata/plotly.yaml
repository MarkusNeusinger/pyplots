library: plotly
specification_id: mosaic-categorical
created: '2026-01-11T00:19:56Z'
updated: '2026-01-11T00:27:51Z'
generated_by: claude-opus-4-5-20251101
workflow_run: 20886559014
issue: 3650
python_version: 3.13.11
library_version: 6.5.1
preview_url: https://storage.googleapis.com/pyplots-images/plots/mosaic-categorical/plotly/plot.png
preview_thumb: https://storage.googleapis.com/pyplots-images/plots/mosaic-categorical/plotly/plot_thumb.png
preview_html: https://storage.googleapis.com/pyplots-images/plots/mosaic-categorical/plotly/plot.html
quality_score: 91
review:
  strengths:
  - Excellent use of Plotly shapes API to build a custom mosaic plot that Plotly does
    not natively support
  - Clean, readable code with well-organized shape and annotation construction
  - Colorblind-safe color scheme using Python-themed colors
  - Count labels inside rectangles provide clear data communication
  - Correct proportional widths for columns and heights for subdivisions
  - Interactive HTML export alongside static PNG
  weaknesses:
  - Missing hover tooltips that could show percentages and counts on interaction
  - Legend positioned slightly far from the plot area
  image_description: 'The plot displays a mosaic plot showing Titanic survival data
    by passenger class. Three vertical columns represent First, Second, and Third
    class passengers, with widths proportional to the total passengers in each class
    (Third being the widest). Each column is divided into two stacked rectangles:
    blue (Python Blue #306998) for "Survived" and yellow (#FFD43B) for "Did Not Survive".
    The heights within each column represent conditional proportions - First class
    shows the highest survival rate (~62%), Second class ~41%, and Third class the
    lowest (~25%). Each rectangle displays the actual count (203, 122, 118, 167, 178,
    528). The title follows the correct format "mosaic-categorical · plotly · pyplots.ai".
    A legend on the right identifies the color coding. The y-axis shows "Proportion"
    from 0 to 1, and the x-axis shows "Passenger Class" with labels First, Second,
    Third below each column.'
  criteria_checklist:
    visual_quality:
      score: 36
      max: 40
      items:
      - id: VQ-01
        name: Text Legibility
        score: 10
        max: 10
        passed: true
        comment: Title at 28pt, axis labels at 22pt, tick labels at 18pt, annotations
          at 20pt - all clearly readable
      - id: VQ-02
        name: No Overlap
        score: 8
        max: 8
        passed: true
        comment: No overlapping text elements, class labels well-spaced below rectangles
      - id: VQ-03
        name: Element Visibility
        score: 8
        max: 8
        passed: true
        comment: Rectangles are well-sized and clearly visible, counts displayed prominently
      - id: VQ-04
        name: Color Accessibility
        score: 5
        max: 5
        passed: true
        comment: Blue/yellow palette is colorblind-safe
      - id: VQ-05
        name: Layout Balance
        score: 3
        max: 5
        passed: true
        comment: Good canvas utilization but legend is slightly isolated to the right
      - id: VQ-06
        name: Axis Labels
        score: 1
        max: 2
        passed: true
        comment: Y-axis has Proportion, X-axis has Passenger Class - descriptive but
          no units
      - id: VQ-07
        name: Grid & Legend
        score: 1
        max: 2
        passed: true
        comment: No grid (appropriate for mosaic), legend well-formatted but could
          be positioned better
    spec_compliance:
      score: 24
      max: 25
      items:
      - id: SC-01
        name: Plot Type
        score: 8
        max: 8
        passed: true
        comment: Correct mosaic plot with rectangles proportional to frequencies
      - id: SC-02
        name: Data Mapping
        score: 5
        max: 5
        passed: true
        comment: Class as columns (width = marginal proportion), Survival as rows
          (height = conditional proportion)
      - id: SC-03
        name: Required Features
        score: 4
        max: 5
        passed: true
        comment: Has gap spacing, color coding, labels; builds mosaic manually with
          Plotly shapes instead of statsmodels
      - id: SC-04
        name: Data Range
        score: 3
        max: 3
        passed: true
        comment: All data visible, y-axis 0-1 appropriate for proportions
      - id: SC-05
        name: Legend Accuracy
        score: 2
        max: 2
        passed: true
        comment: Legend correctly identifies Survived and Did Not Survive
      - id: SC-06
        name: Title Format
        score: 2
        max: 2
        passed: true
        comment: Correctly uses mosaic-categorical · plotly · pyplots.ai
    data_quality:
      score: 19
      max: 20
      items:
      - id: DQ-01
        name: Feature Coverage
        score: 7
        max: 8
        passed: true
        comment: Shows varying proportions across classes demonstrating association
      - id: DQ-02
        name: Realistic Context
        score: 7
        max: 7
        passed: true
        comment: Titanic survival data is a classic, neutral, real-world example for
          contingency tables
      - id: DQ-03
        name: Appropriate Scale
        score: 5
        max: 5
        passed: true
        comment: Counts are realistic and match known Titanic statistics
    code_quality:
      score: 9
      max: 10
      items:
      - id: CQ-01
        name: KISS Structure
        score: 3
        max: 3
        passed: true
        comment: 'Linear flow: imports → data → pivot → shapes/annotations → figure
          → save'
      - id: CQ-02
        name: Reproducibility
        score: 3
        max: 3
        passed: true
        comment: np.random.seed(42) set
      - id: CQ-03
        name: Clean Imports
        score: 2
        max: 2
        passed: true
        comment: Only numpy, pandas, plotly.graph_objects used - all necessary
      - id: CQ-04
        name: No Deprecated API
        score: 1
        max: 1
        passed: true
        comment: Uses current Plotly API
      - id: CQ-05
        name: Output Correct
        score: 0
        max: 1
        passed: false
        comment: Saves as plot.png and plot.html - minor issue with unused seed
    library_features:
      score: 3
      max: 5
      items:
      - id: LF-01
        name: Distinctive Features
        score: 3
        max: 5
        passed: true
        comment: Uses Plotly shapes API and HTML export; missing hover tooltips for
          interactivity
  verdict: APPROVED
impl_tags:
  dependencies: []
  techniques:
  - annotations
  - patches
  - html-export
  patterns:
  - data-generation
  - long-to-wide
  - iteration-over-groups
  dataprep: []
  styling:
  - edge-highlighting
