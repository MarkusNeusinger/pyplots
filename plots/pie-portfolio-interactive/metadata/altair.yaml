library: altair
specification_id: pie-portfolio-interactive
created: '2026-01-20T23:09:35Z'
updated: '2026-01-20T23:12:16Z'
generated_by: claude-opus-4-5-20251101
workflow_run: 21190551596
issue: 3754
python_version: 3.13.11
library_version: 6.0.0
preview_url: https://storage.googleapis.com/pyplots-images/plots/pie-portfolio-interactive/altair/plot.png
preview_thumb: https://storage.googleapis.com/pyplots-images/plots/pie-portfolio-interactive/altair/plot_thumb.png
preview_html: https://storage.googleapis.com/pyplots-images/plots/pie-portfolio-interactive/altair/plot.html
quality_score: 91
review:
  strengths:
  - Excellent use of Altair declarative grammar with proper encoding types (theta,
    color, opacity)
  - Interactive legend selection that dims non-selected categories - distinctive Altair
    feature
  - Clean layered composition combining donut, text labels, and center text
  - Well-designed tooltips showing holding name, weight, category, and category total
  - Professional color scheme with good contrast between asset classes
  - White stroke between segments improves visual separation
  weaknesses:
  - Missing drill-down navigation feature mentioned in spec (click to explore sub-holdings)
  - Center text could be more informative (e.g., show total value or selected category
    details)
  image_description: The plot displays an interactive donut chart showing portfolio
    allocation across 10 holdings grouped into 3 asset classes. Equities (dark blue)
    includes Apple 15%, Microsoft 12%, Amazon 10%, Nvidia 8%. Fixed Income (yellow/gold)
    shows US Treasury 18%, Corporate Bonds 12%, Municipal Bonds 5%. Alternatives (lighter
    blue) contains Gold ETF 8%, Real Estate Fund 7%, Commodities 5%. Weight percentages
    appear as labels outside each arc segment. Center text reads "Portfolio Allocation".
    A legend on the right identifies the three asset class categories with color-coded
    symbols. Title "pie-portfolio-interactive · altair · pyplots.ai" appears at the
    top.
  criteria_checklist:
    visual_quality:
      score: 37
      max: 40
      items:
      - id: VQ-01
        name: Text Legibility
        score: 10
        max: 10
        passed: true
        comment: Title, center text, and percentage labels are all clearly readable
          at full size
      - id: VQ-02
        name: No Overlap
        score: 8
        max: 8
        passed: true
        comment: No overlapping text elements; labels well-positioned outside arcs
      - id: VQ-03
        name: Element Visibility
        score: 7
        max: 8
        passed: true
        comment: Donut segments are well-sized and clearly visible; white stroke separates
          segments nicely
      - id: VQ-04
        name: Color Accessibility
        score: 5
        max: 5
        passed: true
        comment: Blue, yellow, and light blue provide good contrast and are colorblind-friendly
      - id: VQ-05
        name: Layout Balance
        score: 5
        max: 5
        passed: true
        comment: Donut chart is well-centered and fills appropriate canvas space with
          balanced margins
      - id: VQ-06
        name: Axis Labels
        score: 0
        max: 2
        passed: true
        comment: N/A for pie/donut charts (no axes)
      - id: VQ-07
        name: Grid & Legend
        score: 2
        max: 2
        passed: true
        comment: Legend is well-placed on right, clear asset class labels with appropriate
          symbol size
    spec_compliance:
      score: 23
      max: 25
      items:
      - id: SC-01
        name: Plot Type
        score: 8
        max: 8
        passed: true
        comment: Correct donut chart visualization as specified
      - id: SC-02
        name: Data Mapping
        score: 5
        max: 5
        passed: true
        comment: Weights correctly mapped to arc angles, categories to colors
      - id: SC-03
        name: Required Features
        score: 4
        max: 5
        passed: true
        comment: Has tooltips, legend, color-coding by asset class; missing drill-down
          navigation
      - id: SC-04
        name: Data Range
        score: 3
        max: 3
        passed: true
        comment: All data visible, weights sum to 100%
      - id: SC-05
        name: Legend Accuracy
        score: 2
        max: 2
        passed: true
        comment: Legend correctly shows all three asset class categories
      - id: SC-06
        name: Title Format
        score: 1
        max: 2
        passed: true
        comment: Uses correct format with middle dot separator
    data_quality:
      score: 20
      max: 20
      items:
      - id: DQ-01
        name: Feature Coverage
        score: 8
        max: 8
        passed: true
        comment: Shows variety of holdings across all asset classes with different
          weight distributions
      - id: DQ-02
        name: Realistic Context
        score: 7
        max: 7
        passed: true
        comment: Real-world portfolio scenario with recognizable assets (Apple, Microsoft,
          Treasury, etc.)
      - id: DQ-03
        name: Appropriate Scale
        score: 5
        max: 5
        passed: true
        comment: Weights are realistic (5-18% range), sum to exactly 100%
    code_quality:
      score: 9
      max: 10
      items:
      - id: CQ-01
        name: KISS Structure
        score: 3
        max: 3
        passed: true
        comment: Clean imports → data → plot → save structure, no functions/classes
      - id: CQ-02
        name: Reproducibility
        score: 2
        max: 3
        passed: true
        comment: Deterministic data (no random seed needed), but data is hardcoded
      - id: CQ-03
        name: Clean Imports
        score: 2
        max: 2
        passed: true
        comment: Only altair and pandas imported, both used
      - id: CQ-04
        name: No Deprecated API
        score: 1
        max: 1
        passed: true
        comment: Uses current Altair API
      - id: CQ-05
        name: Output Correct
        score: 1
        max: 1
        passed: true
        comment: Saves as plot.png and plot.html
    library_features:
      score: 5
      max: 5
      items:
      - id: LF-01
        name: Distinctive Features
        score: 5
        max: 5
        passed: true
        comment: Leverages Altair's declarative encoding, selection_point for interactivity,
          legend binding, layered composition with mark_arc and mark_text, tooltip
          system
  verdict: APPROVED
impl_tags:
  dependencies: []
  techniques:
  - hover-tooltips
  - layer-composition
  - html-export
  patterns:
  - groupby-aggregation
  dataprep: []
  styling:
  - edge-highlighting
