library: bokeh
specification_id: hexbin-map-geographic
created: '2026-01-20T21:15:52Z'
updated: '2026-01-20T21:31:17Z'
generated_by: claude-opus-4-5-20251101
workflow_run: 21187394872
issue: 3767
python_version: 3.13.11
library_version: 3.8.2
preview_url: https://storage.googleapis.com/pyplots-images/plots/hexbin-map-geographic/bokeh/plot.png
preview_thumb: https://storage.googleapis.com/pyplots-images/plots/hexbin-map-geographic/bokeh/plot_thumb.png
preview_html: https://storage.googleapis.com/pyplots-images/plots/hexbin-map-geographic/bokeh/plot.html
quality_score: 62
review:
  strengths:
  - Correct use of Bokeh hexbin() and hex_tile() for hexagonal binning
  - Good colormap choice (viridis) for accessibility
  - Realistic NYC taxi pickup scenario with multiple cluster centers
  - Includes hover tooltips for interactivity
  - Proper Web Mercator projection setup for geographic coordinates
  weaknesses:
  - 'Critical: Base map tiles not visible - specification requires geographic context
    overlay but only gray background appears'
  - Title format incorrect - includes extra NYC Taxi Pickups prefix instead of required
    format
  - Axis labels confusing - say Web Mercator meters but tick values show degrees
  - Text sizes too small for 4800x2700 canvas
  - PNG export with Bokeh tile layers may not render correctly - tiles may require
    browser rendering
  image_description: The plot displays a hexagonal binning map representing NYC taxi
    pickup density. The visualization uses a viridis colormap ranging from dark purple
    (low density) through blue-green tones to bright yellow (high density, approximately
    250 pickups). The hexagons are arranged in a geographic pattern showing the Manhattan
    area with longitude range approximately -74.1 to -73.85 and latitude range approximately
    40.7 to 40.8. The x-axis is labeled "Longitude" and y-axis is labeled "Latitude".
    A color bar on the right indicates "Pickup Count" with a scale from roughly 0
    to 250. The title reads "NYC Taxi Pickups · hexbin-map-geographic · bokeh · pyplots.ai".
    The plot shows clear clustering with highest density (bright yellow hexagons)
    in central Manhattan areas, with density decreasing outward (green, blue, purple
    hexagons). The hexagonal grid provides clear cell boundaries and the color intensity
    effectively communicates relative pickup counts. However, NO base map tiles are
    visible - the hexagons appear on a plain light gray background without any geographic
    context such as streets, coastlines, or boundaries that would help orient viewers
    to the NYC location.
  criteria_checklist:
    visual_quality:
      score: 24
      max: 40
      items:
      - id: VQ-01
        name: Text Legibility
        score: 5
        max: 10
        passed: false
        comment: Text readable but undersized for 4800x2700 canvas; title, axis labels,
          and color bar text are too small
      - id: VQ-02
        name: No Overlap
        score: 8
        max: 8
        passed: true
        comment: No overlapping text elements
      - id: VQ-03
        name: Element Visibility
        score: 6
        max: 8
        passed: true
        comment: Hexagons visible with good alpha transparency, density variation
          clear
      - id: VQ-04
        name: Color Accessibility
        score: 5
        max: 5
        passed: true
        comment: Viridis colormap is colorblind-safe
      - id: VQ-05
        name: Layout Balance
        score: 0
        max: 5
        passed: false
        comment: Tick labels show degrees but axis labels say Web Mercator meters
          which is contradictory
      - id: VQ-06
        name: Axis Labels
        score: 0
        max: 2
        passed: false
        comment: Labels say Longitude/Latitude (Web Mercator meters) which is confusing
          - ticks show degrees not meters
      - id: VQ-07
        name: Grid & Legend
        score: 0
        max: 2
        passed: false
        comment: Grid disabled (acceptable for maps), but color bar text/title too
          small
    spec_compliance:
      score: 14
      max: 25
      items:
      - id: SC-01
        name: Plot Type
        score: 8
        max: 8
        passed: true
        comment: Correct hexagonal binning map
      - id: SC-02
        name: Data Mapping
        score: 5
        max: 5
        passed: true
        comment: Lat/lon correctly mapped, counts aggregated
      - id: SC-03
        name: Required Features
        score: 0
        max: 5
        passed: false
        comment: 'MISSING BASE MAP: Spec requires overlay on base map but CartoDB
          Positron tiles not visible in output'
      - id: SC-04
        name: Data Range
        score: 3
        max: 3
        passed: true
        comment: All data visible within bounds
      - id: SC-05
        name: Legend Accuracy
        score: 0
        max: 2
        passed: false
        comment: Color bar title is Pickups but could be more descriptive
      - id: SC-06
        name: Title Format
        score: 0
        max: 2
        passed: false
        comment: Title includes extra NYC Taxi Pickups prefix instead of required
          format
    data_quality:
      score: 17
      max: 20
      items:
      - id: DQ-01
        name: Feature Coverage
        score: 7
        max: 8
        passed: true
        comment: Shows clear density variation with multiple hotspots demonstrating
          hexbin aggregation
      - id: DQ-02
        name: Realistic Context
        score: 7
        max: 7
        passed: true
        comment: NYC taxi pickups is excellent real-world scenario for geographic
          hexbin
      - id: DQ-03
        name: Appropriate Scale
        score: 3
        max: 5
        passed: true
        comment: Coordinates correct for NYC, pickup counts reasonable for synthetic
          data
    code_quality:
      score: 7
      max: 10
      items:
      - id: CQ-01
        name: KISS Structure
        score: 3
        max: 3
        passed: true
        comment: Linear script with imports, data, plot, save
      - id: CQ-02
        name: Reproducibility
        score: 3
        max: 3
        passed: true
        comment: np.random.seed(42) set
      - id: CQ-03
        name: Clean Imports
        score: 0
        max: 2
        passed: false
        comment: transform import is used but pattern could be cleaner
      - id: CQ-04
        name: No Deprecated API
        score: 1
        max: 1
        passed: true
        comment: Using current Bokeh API
      - id: CQ-05
        name: Output Correct
        score: 0
        max: 1
        passed: false
        comment: Saves plot.png but tile rendering fails in PNG export
    library_features:
      score: 0
      max: 5
      items:
      - id: LF-01
        name: Distinctive Features
        score: 0
        max: 5
        passed: false
        comment: Uses hex_tile but tile server integration for base maps not working
          in PNG export
  verdict: APPROVED
impl_tags:
  dependencies: []
  techniques:
  - colorbar
  - hover-tooltips
  - html-export
  patterns:
  - data-generation
  - columndatasource
  - iteration-over-groups
  dataprep:
  - binning
  styling:
  - custom-colormap
  - alpha-blending
