library: altair
specification_id: biplot-pca
created: '2026-01-09T13:18:49Z'
updated: '2026-01-09T13:21:54Z'
generated_by: claude-opus-4-5-20251101
workflow_run: 20853040108
issue: 3417
python_version: 3.13.11
library_version: 6.0.0
preview_url: https://storage.googleapis.com/pyplots-images/plots/biplot-pca/altair/plot.png
preview_thumb: https://storage.googleapis.com/pyplots-images/plots/biplot-pca/altair/plot_thumb.png
preview_html: https://storage.googleapis.com/pyplots-images/plots/biplot-pca/altair/plot.html
quality_score: 91
review:
  strengths:
  - Excellent dual-representation biplot showing both scores and loadings clearly
  - Good use of Altair layer composition to combine scatter, lines, arrowheads, and
    text
  - Proper variance explained percentages in axis labels (73.0%, 22.9%)
  - Colorblind-safe palette with good visual distinction between species
  - Smart handling of overlapping labels with manual y-offset adjustments
  - HTML export enables Altair interactive tooltips
  weaknesses:
  - Missing random_state parameter in PCA for full reproducibility
  - Could add .interactive() for zoom/pan capability which is a key Altair feature
  image_description: 'The plot displays a PCA biplot using the Iris dataset. The chart
    shows observation scores as filled circular points colored by species: blue (#306998)
    for setosa, yellow (#FFD43B) for versicolor, and purple (#6A5ACD) for virginica.
    Four loading vectors are drawn as dark gray lines originating from the origin
    (0,0), with triangular arrowheads pointing outward. The vectors are labeled: "Sepal
    Width" pointing upward (positive PC2), "Sepal Length" pointing to the upper right,
    and "Petal Length" and "Petal Width" both pointing to the right (strongly positive
    PC1, slightly positive PC2). Axis labels show "PC1 (73.0%)" and "PC2 (22.9%)"
    indicating variance explained. The title reads "biplot-pca · altair · pyplots.ai"
    at the top. A legend on the right shows the three species. The plot uses a subtle
    dashed grid with low opacity.'
  criteria_checklist:
    visual_quality:
      score: 37
      max: 40
      items:
      - id: VQ-01
        name: Text Legibility
        score: 10
        max: 10
        passed: true
        comment: Title at 28pt, axis labels at 22pt, tick labels at 18pt, legend text
          at 16-18pt - all clearly readable
      - id: VQ-02
        name: No Overlap
        score: 7
        max: 8
        passed: true
        comment: Minor crowding between Petal Length and Petal Width labels despite
          manual y-offset adjustments
      - id: VQ-03
        name: Element Visibility
        score: 8
        max: 8
        passed: true
        comment: Points size=120 with opacity=0.8, well-sized for 150 observations.
          Loading arrows clearly visible with strokeWidth=2.5
      - id: VQ-04
        name: Color Accessibility
        score: 5
        max: 5
        passed: true
        comment: Blue, yellow, purple palette is colorblind-safe with good contrast
      - id: VQ-05
        name: Layout Balance
        score: 5
        max: 5
        passed: true
        comment: Plot fills canvas well with balanced margins, legend positioned appropriately
      - id: VQ-06
        name: Axis Labels
        score: 2
        max: 2
        passed: true
        comment: 'Descriptive labels with variance percentages: PC1 (73.0%) and PC2
          (22.9%)'
      - id: VQ-07
        name: Grid & Legend
        score: 0
        max: 2
        passed: false
        comment: Grid is subtle but duplicate legend configuration present in code
    spec_compliance:
      score: 25
      max: 25
      items:
      - id: SC-01
        name: Plot Type
        score: 8
        max: 8
        passed: true
        comment: Correct biplot with both observation scores (points) and loading
          vectors (arrows)
      - id: SC-02
        name: Data Mapping
        score: 5
        max: 5
        passed: true
        comment: PC1 on X-axis, PC2 on Y-axis, correct projection of both scores and
          loadings
      - id: SC-03
        name: Required Features
        score: 5
        max: 5
        passed: true
        comment: 'All spec features present: scores as colored points, loading arrows
          from origin, labels, variance explained'
      - id: SC-04
        name: Data Range
        score: 3
        max: 3
        passed: true
        comment: Axes show all data with appropriate padding (domain [-4,4] x [-3,3])
      - id: SC-05
        name: Legend Accuracy
        score: 2
        max: 2
        passed: true
        comment: Species names correctly labeled (setosa, versicolor, virginica)
      - id: SC-06
        name: Title Format
        score: 2
        max: 2
        passed: true
        comment: 'Correct format: biplot-pca · altair · pyplots.ai'
    data_quality:
      score: 19
      max: 20
      items:
      - id: DQ-01
        name: Feature Coverage
        score: 7
        max: 8
        passed: true
        comment: 'Shows clear group separation and loading interpretation, minor:
          could show more loading magnitude variation'
      - id: DQ-02
        name: Realistic Context
        score: 7
        max: 7
        passed: true
        comment: Uses classic Iris dataset, a real botanical measurement dataset
      - id: DQ-03
        name: Appropriate Scale
        score: 5
        max: 5
        passed: true
        comment: PCA scores in standard units after StandardScaler, appropriate loading
          scale factor (2.5x)
    code_quality:
      score: 7
      max: 10
      items:
      - id: CQ-01
        name: KISS Structure
        score: 3
        max: 3
        passed: true
        comment: 'Linear flow: imports → data loading → PCA → dataframe creation →
          plot layers → save'
      - id: CQ-02
        name: Reproducibility
        score: 0
        max: 3
        passed: false
        comment: No random_state parameter in PCA for full reproducibility across
          sklearn versions
      - id: CQ-03
        name: Clean Imports
        score: 2
        max: 2
        passed: true
        comment: 'All imports used: altair, pandas, sklearn datasets/decomposition/preprocessing'
      - id: CQ-04
        name: No Deprecated API
        score: 1
        max: 1
        passed: true
        comment: Uses current Altair API
      - id: CQ-05
        name: Output Correct
        score: 1
        max: 1
        passed: true
        comment: Saves both plot.png and plot.html
    library_features:
      score: 3
      max: 5
      items:
      - id: LF-01
        name: Distinctive Features
        score: 3
        max: 5
        passed: true
        comment: Uses Altair layer composition, tooltips, and transform_calculate.
          Could add .interactive() for zoom/pan
  verdict: APPROVED
impl_tags:
  dependencies:
  - sklearn
  techniques:
  - layer-composition
  - annotations
  - hover-tooltips
  - html-export
  patterns:
  - dataset-loading
  - iteration-over-groups
  dataprep:
  - pca
  - normalization
  styling:
  - alpha-blending
  - grid-styling
