library: altair
specification_id: scatter-map-geographic
created: '2026-01-10T06:03:20Z'
updated: '2026-01-10T06:05:56Z'
generated_by: claude-opus-4-5-20251101
workflow_run: 20873879429
issue: 3617
python_version: 3.13.11
library_version: 6.0.0
preview_url: https://storage.googleapis.com/pyplots-images/plots/scatter-map-geographic/altair/plot.png
preview_thumb: https://storage.googleapis.com/pyplots-images/plots/scatter-map-geographic/altair/plot_thumb.png
preview_html: https://storage.googleapis.com/pyplots-images/plots/scatter-map-geographic/altair/plot.html
quality_score: 92
review:
  strengths:
  - Excellent use of Altair declarative grammar with layer composition (basemap +
    points)
  - Well-implemented Natural Earth projection appropriate for world maps
  - Good visual hierarchy with white strokes on points and transparent basemap
  - Proper tooltip configuration for interactive exploration
  - Clean legend styling with backgrounds and positioning
  - Comprehensive dataset covering all major populated regions
  weaknesses:
  - VQ-06 scored 0 because geographic maps lack traditional axis labels, but this
    is expected behavior for map visualizations
  - Africa could use more representative cities (only 4 of 40 cities)
  image_description: 'The plot displays a world map with 40 major cities represented
    as scatter points positioned by latitude and longitude coordinates. The basemap
    shows country boundaries in light gray (#e8e8e8) with white strokes. Points are
    colored by region: yellow/gold for Asia (most numerous), green/teal for South
    America, coral/pink for North America, red for Europe, blue for Africa, and purple
    for Oceania (Sydney). Point sizes vary by population, with Tokyo appearing as
    the largest circle. Two legends are present: a size legend in the bottom-left
    showing "Population (millions)" with graduated circles (0, 10, 20, 30), and a
    color legend in the bottom-right showing "Region" with all 6 categories. The title
    "World Major Cities · scatter-map-geographic · altair · pyplots.ai" appears at
    the top center. The map uses Natural Earth projection, giving a balanced view
    of continents. Points have white stroke outlines and slight transparency (0.8
    opacity).'
  criteria_checklist:
    visual_quality:
      score: 37
      max: 40
      items:
      - id: VQ-01
        name: Text Legibility
        score: 10
        max: 10
        passed: true
        comment: Title at 28pt is clear, legend text at 16-18pt is readable
      - id: VQ-02
        name: No Overlap
        score: 8
        max: 8
        passed: true
        comment: No overlapping text elements, legends well-positioned in corners
      - id: VQ-03
        name: Element Visibility
        score: 7
        max: 8
        passed: true
        comment: Points well-sized for density, good use of 0.8 opacity, white stroke
          helps distinguish overlapping points
      - id: VQ-04
        name: Color Accessibility
        score: 5
        max: 5
        passed: true
        comment: Six distinct colors with good differentiation, colorblind-accessible
          palette
      - id: VQ-05
        name: Layout Balance
        score: 5
        max: 5
        passed: true
        comment: Map fills canvas well, balanced margins, legends near plot
      - id: VQ-06
        name: Axis Labels
        score: 0
        max: 2
        passed: false
        comment: Geographic maps typically do not have traditional axis labels (N/A
          for this plot type)
      - id: VQ-07
        name: Grid & Legend
        score: 2
        max: 2
        passed: true
        comment: Legends well-styled with backgrounds, no distracting grid
    spec_compliance:
      score: 25
      max: 25
      items:
      - id: SC-01
        name: Plot Type
        score: 8
        max: 8
        passed: true
        comment: Correct geographic scatter plot on world map
      - id: SC-02
        name: Data Mapping
        score: 5
        max: 5
        passed: true
        comment: Latitude/longitude correctly mapped, size=population, color=region
      - id: SC-03
        name: Required Features
        score: 5
        max: 5
        passed: true
        comment: 'All spec features present: basemap, color legend, size legend, transparency'
      - id: SC-04
        name: Data Range
        score: 3
        max: 3
        passed: true
        comment: All 40 cities visible, global coverage
      - id: SC-05
        name: Legend Accuracy
        score: 2
        max: 2
        passed: true
        comment: Both legends correctly labeled with appropriate titles
      - id: SC-06
        name: Title Format
        score: 2
        max: 2
        passed: true
        comment: Follows format with spec-id, library, and pyplots.ai
    data_quality:
      score: 18
      max: 20
      items:
      - id: DQ-01
        name: Feature Coverage
        score: 7
        max: 8
        passed: true
        comment: Shows geographic distribution across 6 regions, population variation;
          could include more cities in underrepresented regions
      - id: DQ-02
        name: Realistic Context
        score: 7
        max: 7
        passed: true
        comment: Real world cities with accurate population data
      - id: DQ-03
        name: Appropriate Scale
        score: 4
        max: 5
        passed: true
        comment: Population values realistic; minor metro vs city proper inconsistencies
    code_quality:
      score: 9
      max: 10
      items:
      - id: CQ-01
        name: KISS Structure
        score: 3
        max: 3
        passed: true
        comment: Simple imports → data → plot → save structure, no functions/classes
      - id: CQ-02
        name: Reproducibility
        score: 3
        max: 3
        passed: true
        comment: Deterministic data (hardcoded city coordinates)
      - id: CQ-03
        name: Clean Imports
        score: 2
        max: 2
        passed: true
        comment: Only altair and pandas imported, both used
      - id: CQ-04
        name: No Deprecated API
        score: 1
        max: 1
        passed: true
        comment: Uses current Altair API
      - id: CQ-05
        name: Output Correct
        score: 0
        max: 1
        passed: false
        comment: Saves both plot.png and plot.html - both are correct for interactive
          libraries
    library_features:
      score: 5
      max: 5
      items:
      - id: LF-01
        name: Distinctive Features
        score: 5
        max: 5
        passed: true
        comment: 'Excellent use of Altair features: declarative layer composition,
          topo_feature for basemap, projection, tooltips, geographic encoding'
  verdict: APPROVED
impl_tags:
  dependencies: []
  techniques:
  - layer-composition
  - hover-tooltips
  - html-export
  patterns: []
  dataprep: []
  styling:
  - alpha-blending
  - edge-highlighting
