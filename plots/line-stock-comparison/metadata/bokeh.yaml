library: bokeh
specification_id: line-stock-comparison
created: '2026-01-20T10:22:33Z'
updated: '2026-01-20T10:25:12Z'
generated_by: claude-opus-4-5-20251101
workflow_run: 21167798206
issue: 3748
python_version: 3.13.11
library_version: 3.8.2
preview_url: https://storage.googleapis.com/pyplots-images/plots/line-stock-comparison/bokeh/plot.png
preview_thumb: https://storage.googleapis.com/pyplots-images/plots/line-stock-comparison/bokeh/plot_thumb.png
preview_html: https://storage.googleapis.com/pyplots-images/plots/line-stock-comparison/bokeh/plot.html
quality_score: 91
review:
  strengths:
  - Excellent use of Bokeh interactive features (HoverTool, clickable legend) with
    HTML export
  - Clean implementation with proper datetime handling and geometric Brownian motion
    for realistic price paths
  - All specification requirements met including reference line at 100, proper normalization,
    and distinct colors
  - Good visual styling with appropriate font sizes for the 4800x2700 canvas
  weaknesses:
  - Yellow line (GOOGL) could have slightly better contrast against the light gray
    background
  - Grid legend shows click_policy which is only useful in HTML, not in static PNG
    output
  image_description: 'The plot displays a multi-line stock price comparison chart
    with four series: AAPL (blue), GOOGL (yellow), MSFT (red), and SPY (purple/gray).
    All series are rebased to 100 at the starting point (January 2024) and tracked
    over approximately one year of trading days. The x-axis shows dates from Jan 2024
    to Jan 2025, and the y-axis shows "Rebased Price (Starting = 100)" ranging from
    approximately 80 to 160. A dashed horizontal reference line at 100 marks the starting
    point. The legend is positioned in the top-left corner with each stock symbol
    color-coded. The grid has subtle dashed lines. AAPL (blue) shows the strongest
    performance ending around 160, GOOGL (yellow) shows volatility peaking around
    150 then declining to about 85, MSFT (red) underperforms ending around 85, and
    SPY (purple) shows moderate gains around 115. The background is a light gray (#fafafa).'
  criteria_checklist:
    visual_quality:
      score: 36
      max: 40
      items:
      - id: VQ-01
        name: Text Legibility
        score: 10
        max: 10
        passed: true
        comment: Title at 28pt, axis labels at 22pt, tick labels at 18pt - all clearly
          readable at 4800x2700
      - id: VQ-02
        name: No Overlap
        score: 8
        max: 8
        passed: true
        comment: No overlapping text elements; legend is well-separated from data
      - id: VQ-03
        name: Element Visibility
        score: 7
        max: 8
        passed: true
        comment: Line width of 4 is appropriate; lines are clearly distinguishable
          with good alpha (0.9)
      - id: VQ-04
        name: Color Accessibility
        score: 4
        max: 5
        passed: true
        comment: Colors are distinguishable but yellow on light background could have
          better contrast
      - id: VQ-05
        name: Layout Balance
        score: 5
        max: 5
        passed: true
        comment: Plot fills canvas appropriately with balanced margins
      - id: VQ-06
        name: Axis Labels
        score: 2
        max: 2
        passed: true
        comment: 'Descriptive labels with units: Rebased Price (Starting = 100) and
          Date'
      - id: VQ-07
        name: Grid & Legend
        score: 0
        max: 2
        passed: false
        comment: Grid is subtle but legend click_policy=hide is not visible in static
          PNG; legend placed well
    spec_compliance:
      score: 25
      max: 25
      items:
      - id: SC-01
        name: Plot Type
        score: 8
        max: 8
        passed: true
        comment: Correct multi-line chart for stock comparison
      - id: SC-02
        name: Data Mapping
        score: 5
        max: 5
        passed: true
        comment: Date on x-axis, rebased prices on y-axis correctly
      - id: SC-03
        name: Required Features
        score: 5
        max: 5
        passed: true
        comment: 'All spec features present: normalization to 100, distinct colors,
          legend, reference line at 100, grid lines'
      - id: SC-04
        name: Data Range
        score: 3
        max: 3
        passed: true
        comment: All data visible, appropriate y-axis range showing full price movement
      - id: SC-05
        name: Legend Accuracy
        score: 2
        max: 2
        passed: true
        comment: Legend correctly identifies all four symbols
      - id: SC-06
        name: Title Format
        score: 2
        max: 2
        passed: true
        comment: 'Uses correct format: line-stock-comparison · bokeh · pyplots.ai'
    data_quality:
      score: 18
      max: 20
      items:
      - id: DQ-01
        name: Feature Coverage
        score: 7
        max: 8
        passed: true
        comment: 'Shows varied performance: outperformers (AAPL), underperformers
          (MSFT), and benchmark (SPY); could show more correlation/divergence events'
      - id: DQ-02
        name: Realistic Context
        score: 7
        max: 7
        passed: true
        comment: Uses real stock symbols (AAPL, GOOGL, MSFT, SPY) with plausible price
          movements using geometric Brownian motion
      - id: DQ-03
        name: Appropriate Scale
        score: 4
        max: 5
        passed: true
        comment: 252 trading days and rebased values are realistic; some extreme movements
          (AAPL +60%) are plausible but aggressive
    code_quality:
      score: 10
      max: 10
      items:
      - id: CQ-01
        name: KISS Structure
        score: 3
        max: 3
        passed: true
        comment: Clean imports → data → plot → save structure, no functions/classes
      - id: CQ-02
        name: Reproducibility
        score: 3
        max: 3
        passed: true
        comment: Uses np.random.seed(42)
      - id: CQ-03
        name: Clean Imports
        score: 2
        max: 2
        passed: true
        comment: All imports are used (numpy, pandas, bokeh modules)
      - id: CQ-04
        name: No Deprecated API
        score: 1
        max: 1
        passed: true
        comment: Uses current Bokeh API
      - id: CQ-05
        name: Output Correct
        score: 1
        max: 1
        passed: true
        comment: Saves as plot.png and plot.html
    library_features:
      score: 5
      max: 5
      items:
      - id: LF-01
        name: Distinctive Features
        score: 5
        max: 5
        passed: true
        comment: 'Uses Bokeh-specific features: HoverTool with datetime formatting,
          Legend with click_policy, Span for reference line, interactive HTML export'
  verdict: APPROVED
impl_tags:
  dependencies: []
  techniques:
  - hover-tooltips
  - custom-legend
  - html-export
  patterns:
  - data-generation
  - iteration-over-groups
  dataprep:
  - time-series
  - normalization
  styling:
  - grid-styling
  - alpha-blending
