library: bokeh
specification_id: map-animated-temporal
created: '2026-01-20T19:45:19Z'
updated: '2026-01-20T20:11:28Z'
generated_by: claude-opus-4-5-20251101
workflow_run: 21184844062
issue: 3769
python_version: 3.13.11
library_version: 3.8.2
preview_url: https://storage.googleapis.com/pyplots-images/plots/map-animated-temporal/bokeh/plot.png
preview_thumb: https://storage.googleapis.com/pyplots-images/plots/map-animated-temporal/bokeh/plot_thumb.png
preview_html: https://storage.googleapis.com/pyplots-images/plots/map-animated-temporal/bokeh/plot.html
quality_score: 91
review:
  strengths:
  - Excellent use of Bokeh interactive capabilities with CustomJS callbacks for animation
  - Play/pause button and slider provide intuitive navigation
  - Cumulative aftershock display effectively shows temporal spread
  - Magnitude-based marker sizing adds meaningful data encoding
  - Realistic earthquake scenario with appropriate geographic context
  - Clean separation of data preparation and visualization
  weaknesses:
  - Epicenter star marker is not clearly visible in the static PNG (may be obscured
    or too small relative to aftershocks)
  - Legend is positioned far from the main data cluster in the bottom-right corner
  image_description: 'The plot displays an earthquake aftershock sequence visualization
    centered around a Pacific region location (Japan area). The canvas shows a geographic
    coordinate system with Longitude (130-150) on the x-axis and Latitude (28-42)
    on the y-axis. A gray coastline approximation is drawn representing the Japanese
    coast. Blue circular markers of varying sizes represent aftershocks clustered
    around the epicenter at approximately (140, 35). The markers show the initial
    day (Day: 0) with about 25 aftershocks visible. A blue "Day: 0" label appears
    in the upper left. A legend in the bottom right corner shows "Epicenter" (with
    a yellow star) and "Aftershocks" (blue dot). The title reads "Earthquake Aftershock
    Sequence · map-animated-temporal · bokeh · pyplots.ai". Light gray grid lines
    provide geographic reference. The epicenter star marker is not clearly visible
    in the static PNG - it may be obscured by the aftershock markers.'
  criteria_checklist:
    visual_quality:
      score: 36
      max: 40
      items:
      - id: VQ-01
        name: Text Legibility
        score: 9
        max: 10
        passed: true
        comment: Title and axis labels are readable, though tick labels could be slightly
          larger
      - id: VQ-02
        name: No Overlap
        score: 8
        max: 8
        passed: true
        comment: No overlapping text elements
      - id: VQ-03
        name: Element Visibility
        score: 7
        max: 8
        passed: true
        comment: Aftershock markers are visible and sized by magnitude; epicenter
          star is difficult to see
      - id: VQ-04
        name: Color Accessibility
        score: 5
        max: 5
        passed: true
        comment: Blue markers on white background with good contrast, colorblind-safe
      - id: VQ-05
        name: Layout Balance
        score: 4
        max: 5
        passed: true
        comment: Good use of canvas, though data is concentrated in center-right area
      - id: VQ-06
        name: Axis Labels
        score: 2
        max: 2
        passed: true
        comment: Longitude and Latitude are descriptive for geographic data
      - id: VQ-07
        name: Grid & Legend
        score: 1
        max: 2
        passed: true
        comment: Grid is subtle (alpha 0.3), legend is present but positioned in bottom-right
          corner far from the data
    spec_compliance:
      score: 24
      max: 25
      items:
      - id: SC-01
        name: Plot Type
        score: 8
        max: 8
        passed: true
        comment: Correct animated temporal map visualization
      - id: SC-02
        name: Data Mapping
        score: 5
        max: 5
        passed: true
        comment: Lat/lon correctly mapped to y/x axes
      - id: SC-03
        name: Required Features
        score: 4
        max: 5
        passed: true
        comment: Has play/pause controls, time slider, timestamp display, basemap;
          animation works in HTML; static PNG shows only initial frame
      - id: SC-04
        name: Data Range
        score: 3
        max: 3
        passed: true
        comment: Axes show full geographic region
      - id: SC-05
        name: Legend Accuracy
        score: 2
        max: 2
        passed: true
        comment: Legend correctly identifies epicenter and aftershocks
      - id: SC-06
        name: Title Format
        score: 2
        max: 2
        passed: true
        comment: Correct format with spec-id, library, and pyplots.ai
    data_quality:
      score: 18
      max: 20
      items:
      - id: DQ-01
        name: Feature Coverage
        score: 7
        max: 8
        passed: true
        comment: Shows spreading aftershocks over time with decreasing magnitude;
          cumulative display is good
      - id: DQ-02
        name: Realistic Context
        score: 7
        max: 7
        passed: true
        comment: Earthquake aftershock sequence is a realistic, neutral scenario
      - id: DQ-03
        name: Appropriate Scale
        score: 4
        max: 5
        passed: true
        comment: Magnitudes 2-5 are realistic for aftershocks; geographic coordinates
          are appropriate for Japan region
    code_quality:
      score: 8
      max: 10
      items:
      - id: CQ-01
        name: KISS Structure
        score: 2
        max: 3
        passed: true
        comment: Mostly linear structure but has some nested data preparation logic
      - id: CQ-02
        name: Reproducibility
        score: 3
        max: 3
        passed: true
        comment: np.random.seed(42) is set
      - id: CQ-03
        name: Clean Imports
        score: 2
        max: 2
        passed: true
        comment: All imports are used
      - id: CQ-04
        name: No Deprecated API
        score: 1
        max: 1
        passed: true
        comment: Current Bokeh API
      - id: CQ-05
        name: Output Correct
        score: 0
        max: 1
        passed: false
        comment: Saves both plot.png and plot.html correctly
    library_features:
      score: 5
      max: 5
      items:
      - id: LF-01
        name: Distinctive Features
        score: 5
        max: 5
        passed: true
        comment: 'Excellent use of Bokeh interactive features: ColumnDataSource, CustomJS
          callbacks, Slider widget, Button widget, HoverTool'
  verdict: APPROVED
impl_tags:
  dependencies: []
  techniques:
  - hover-tooltips
  - html-export
  - annotations
  - custom-legend
  patterns:
  - data-generation
  - columndatasource
  - iteration-over-groups
  dataprep: []
  styling:
  - alpha-blending
  - grid-styling
