library: altair
specification_id: lollipop-grouped
created: '2026-01-09T14:24:09Z'
updated: '2026-01-09T14:26:59Z'
generated_by: claude-opus-4-5-20251101
workflow_run: 20854881653
issue: 3485
python_version: 3.13.11
library_version: 6.0.0
preview_url: https://storage.googleapis.com/pyplots-images/plots/lollipop-grouped/altair/plot.png
preview_thumb: https://storage.googleapis.com/pyplots-images/plots/lollipop-grouped/altair/plot_thumb.png
preview_html: https://storage.googleapis.com/pyplots-images/plots/lollipop-grouped/altair/plot.html
quality_score: 94
review:
  strengths:
  - Excellent use of Altair's xOffset encoding to achieve grouped lollipop positioning
  - Clean layer composition combining mark_rule (stems) and mark_circle (markers)
  - Proper scale configuration with explicit domain ensures stems start from 0
  - Well-configured styling with appropriate font sizes for all text elements
  - Generates both PNG and HTML outputs as expected for Altair
  weaknesses:
  - Yellow (#FFD43B) in the color palette could be challenging for users with certain
    types of color blindness; a more accessible palette like viridis or colorblind-safe
    colors would be better
  - Could add interactive tooltips to leverage Altair's strengths as an interactive
    library
  image_description: 'The plot displays a grouped lollipop chart with 4 regions (East,
    North, South, West) on the x-axis and Performance Score (0-110) on the y-axis.
    Each region contains 3 lollipops arranged side by side representing Q1 2024 (blue
    #306998), Q2 2024 (yellow #FFD43B), and Q3 2024 (green #4CAF50). Thin vertical
    stems extend from the baseline at 0 up to circular markers at each data point.
    The markers are clearly visible solid circles with size=400. A legend titled "Quarter"
    in the top-right corner identifies the three quarters with appropriately sized
    symbols. The title "lollipop-grouped 路 altair 路 pyplots.ai" is centered at the
    top at 28pt font size. Grid lines are subtle with 0.3 opacity. The plot uses the
    full 1600x900 canvas effectively with balanced margins.'
  criteria_checklist:
    visual_quality:
      score: 38
      max: 40
      items:
      - id: VQ-01
        name: Text Legibility
        score: 10
        max: 10
        passed: true
        comment: Title at 28pt, axis labels at 22pt, tick labels at 18pt, legend at
          16-18pt - all perfectly readable
      - id: VQ-02
        name: No Overlap
        score: 8
        max: 8
        passed: true
        comment: No overlapping text or elements; grouped lollipops are well-spaced
          with 0.25 offset
      - id: VQ-03
        name: Element Visibility
        score: 8
        max: 8
        passed: true
        comment: Markers size=400 appropriate for 12 data points, stems strokeWidth=4
          clearly visible
      - id: VQ-04
        name: Color Accessibility
        score: 4
        max: 5
        passed: true
        comment: Blue, yellow, green palette is distinguishable but yellow may be
          challenging for some colorblind users
      - id: VQ-05
        name: Layout Balance
        score: 5
        max: 5
        passed: true
        comment: Plot fills canvas well, legend positioned in top-right without covering
          data
      - id: VQ-06
        name: Axis Labels
        score: 2
        max: 2
        passed: true
        comment: Region and Performance Score are descriptive labels
      - id: VQ-07
        name: Grid & Legend
        score: 1
        max: 2
        passed: true
        comment: Grid at alpha 0.3 is subtle, legend well-placed but could use better
          spacing
    spec_compliance:
      score: 25
      max: 25
      items:
      - id: SC-01
        name: Plot Type
        score: 8
        max: 8
        passed: true
        comment: Correct grouped lollipop chart with stems and circular markers
      - id: SC-02
        name: Data Mapping
        score: 5
        max: 5
        passed: true
        comment: Categories on X-axis, values on Y-axis, series distinguished by color
      - id: SC-03
        name: Required Features
        score: 5
        max: 5
        passed: true
        comment: Thin stems, circular markers, side-by-side grouping, legend present
      - id: SC-04
        name: Data Range
        score: 3
        max: 3
        passed: true
        comment: Y-axis 0-110 shows all data with appropriate headroom
      - id: SC-05
        name: Legend Accuracy
        score: 2
        max: 2
        passed: true
        comment: Legend correctly identifies Q1/Q2/Q3 2024 quarters
      - id: SC-06
        name: Title Format
        score: 2
        max: 2
        passed: true
        comment: Uses exact format {spec-id} 路 {library} 路 pyplots.ai
    data_quality:
      score: 18
      max: 20
      items:
      - id: DQ-01
        name: Feature Coverage
        score: 7
        max: 8
        passed: true
        comment: Shows variation across regions and quarters; North has highest values,
          South lowest; progressive Q1 to Q3 trend visible
      - id: DQ-02
        name: Realistic Context
        score: 7
        max: 7
        passed: true
        comment: Quarterly performance metrics across regions is a plausible business
          scenario
      - id: DQ-03
        name: Appropriate Scale
        score: 4
        max: 5
        passed: true
        comment: Performance scores 74-101 are reasonable; scale 0-110 appropriate
    code_quality:
      score: 10
      max: 10
      items:
      - id: CQ-01
        name: KISS Structure
        score: 3
        max: 3
        passed: true
        comment: 'Linear flow: imports, data, plot, save - no functions/classes'
      - id: CQ-02
        name: Reproducibility
        score: 3
        max: 3
        passed: true
        comment: np.random.seed(42) ensures reproducibility
      - id: CQ-03
        name: Clean Imports
        score: 2
        max: 2
        passed: true
        comment: Only altair, numpy, pandas imported and used
      - id: CQ-04
        name: No Deprecated API
        score: 1
        max: 1
        passed: true
        comment: Uses current Altair API
      - id: CQ-05
        name: Output Correct
        score: 1
        max: 1
        passed: true
        comment: Saves as plot.png and plot.html
    library_features:
      score: 3
      max: 5
      items:
      - id: LF-01
        name: Distinctive Features
        score: 3
        max: 5
        passed: true
        comment: Uses xOffset for grouping and layer composition (stems + markers),
          but could leverage interactive tooltips
  verdict: APPROVED
impl_tags:
  dependencies: []
  techniques:
  - layer-composition
  - html-export
  patterns:
  - data-generation
  - iteration-over-groups
  dataprep: []
  styling:
  - grid-styling
