library: plotly
specification_id: hexbin-map-geographic
created: '2026-01-20T21:16:12Z'
updated: '2026-01-20T21:19:21Z'
generated_by: claude-opus-4-5-20251101
workflow_run: 21187394771
issue: 3767
python_version: 3.13.11
library_version: 6.5.2
preview_url: https://storage.googleapis.com/pyplots-images/plots/hexbin-map-geographic/plotly/plot.png
preview_thumb: https://storage.googleapis.com/pyplots-images/plots/hexbin-map-geographic/plotly/plot_thumb.png
preview_html: https://storage.googleapis.com/pyplots-images/plots/hexbin-map-geographic/plotly/plot.html
quality_score: 67
review:
  strengths:
  - Excellent realistic data scenario (NYC taxi pickups)
  - Good color scheme choice (YlOrRd sequential colormap)
  - Clean code structure following KISS principles
  - Proper use of Plotly map integration with Carto Positron base map
  - Correct title format with spec-id and library
  weaknesses:
  - Uses continuous density heatmap (px.density_map) instead of discrete hexagonal
    binning - spec explicitly requires hexbin visualization with visible hex cell
    boundaries
  - Missing configurable hexagon size parameter
  - Does not show discrete aggregation (count, sum, mean per hex cell)
  - Plotly does not have native hexbin support - consider using H3 hexagonal system
    or manually creating hexagonal polygons
  image_description: The plot displays a continuous density heatmap of simulated NYC
    taxi pickup locations overlaid on a Carto Positron base map. The visualization
    uses a YlOrRd (Yellow-Orange-Red) color scheme showing aggregated fare values.
    Multiple hotspot clusters are visible across the NYC metropolitan area, with the
    highest concentration (darkest red) appearing near Jersey City/Manhattan. The
    title reads "NYC Taxi Pickups · hexbin-map-geographic · plotly · pyplots.ai" and
    a vertical colorbar on the right shows "Avg Fare ($)" ranging from approximately
    20 to 100. The map shows surrounding areas including Newark, Bayonne, Hoboken,
    and parts of New Jersey and New York. Critically, the visualization uses smooth
    continuous density estimation rather than discrete hexagonal bins with visible
    boundaries as specified.
  criteria_checklist:
    visual_quality:
      score: 32
      max: 40
      items:
      - id: VQ-01
        name: Text Legibility
        score: 8
        max: 10
        passed: true
        comment: Title and colorbar labels readable but could be larger
      - id: VQ-02
        name: No Overlap
        score: 8
        max: 8
        passed: true
        comment: No overlapping text elements
      - id: VQ-03
        name: Element Visibility
        score: 6
        max: 8
        passed: true
        comment: Density patterns visible but lack discrete boundaries
      - id: VQ-04
        name: Color Accessibility
        score: 5
        max: 5
        passed: true
        comment: YlOrRd is colorblind-safe sequential palette
      - id: VQ-05
        name: Layout Balance
        score: 3
        max: 5
        passed: true
        comment: Good use of canvas but map could be more centered
      - id: VQ-06
        name: Axis Labels
        score: 0
        max: 2
        passed: false
        comment: No axis labels (map coordinates hidden by design)
      - id: VQ-07
        name: Grid & Legend
        score: 2
        max: 2
        passed: true
        comment: Colorbar well placed, base map provides context
    spec_compliance:
      score: 7
      max: 25
      items:
      - id: SC-01
        name: Plot Type
        score: 0
        max: 8
        passed: false
        comment: 'WRONG: Uses continuous density heatmap, NOT hexagonal binning as
          required'
      - id: SC-02
        name: Data Mapping
        score: 5
        max: 5
        passed: true
        comment: Lat/lon and fare values correctly mapped
      - id: SC-03
        name: Required Features
        score: 0
        max: 5
        passed: false
        comment: 'Missing: discrete hexagonal cells, visible hex boundaries, configurable
          hexagon size'
      - id: SC-04
        name: Data Range
        score: 0
        max: 3
        passed: false
        comment: Cannot assess hex aggregation ranges - no discrete hexes
      - id: SC-05
        name: Legend Accuracy
        score: 0
        max: 2
        passed: false
        comment: Legend shows density not hexbin count/sum/mean
      - id: SC-06
        name: Title Format
        score: 2
        max: 2
        passed: true
        comment: 'Correct format: NYC Taxi Pickups · hexbin-map-geographic · plotly
          · pyplots.ai'
    data_quality:
      score: 16
      max: 20
      items:
      - id: DQ-01
        name: Feature Coverage
        score: 6
        max: 8
        passed: true
        comment: Shows clustered distribution patterns, multiple hotspots
      - id: DQ-02
        name: Realistic Context
        score: 7
        max: 7
        passed: true
        comment: NYC taxi pickups is an excellent, realistic scenario
      - id: DQ-03
        name: Appropriate Scale
        score: 3
        max: 5
        passed: true
        comment: Fare values (20-100) are plausible for NYC taxis
    code_quality:
      score: 9
      max: 10
      items:
      - id: CQ-01
        name: KISS Structure
        score: 3
        max: 3
        passed: true
        comment: Clean imports → data → plot → save structure
      - id: CQ-02
        name: Reproducibility
        score: 3
        max: 3
        passed: true
        comment: Uses np.random.seed(42)
      - id: CQ-03
        name: Clean Imports
        score: 2
        max: 2
        passed: true
        comment: All imports are used
      - id: CQ-04
        name: No Deprecated API
        score: 0
        max: 1
        passed: false
        comment: Comment mentions deprecated API - code is current but comment is
          confusing
      - id: CQ-05
        name: Output Correct
        score: 1
        max: 1
        passed: true
        comment: Saves as plot.png and plot.html
    library_features:
      score: 3
      max: 5
      items:
      - id: LF-01
        name: Distinctive Features
        score: 3
        max: 5
        passed: true
        comment: Uses Plotly map integration but not hexbin-specific features
  verdict: REJECTED
impl_tags:
  dependencies: []
  techniques:
  - colorbar
  - hover-tooltips
  - html-export
  patterns:
  - data-generation
  - iteration-over-groups
  dataprep: []
  styling:
  - custom-colormap
  - alpha-blending
