library: plotly
specification_id: bubble-map-geographic
created: '2026-01-10T06:09:27Z'
updated: '2026-01-10T06:13:11Z'
generated_by: claude-opus-4-5-20251101
workflow_run: 20873955145
issue: 3625
python_version: 3.13.11
library_version: 6.5.1
preview_url: https://storage.googleapis.com/pyplots-images/plots/bubble-map-geographic/plotly/plot.png
preview_thumb: https://storage.googleapis.com/pyplots-images/plots/bubble-map-geographic/plotly/plot_thumb.png
preview_html: https://storage.googleapis.com/pyplots-images/plots/bubble-map-geographic/plotly/plot.html
quality_score: 91
review:
  strengths:
  - Excellent geographic visualization using Plotly's native Scattergeo with Natural
    Earth projection
  - Proper area scaling using sqrt transform for perceptually accurate bubble sizes
  - Well-designed colorblind-safe palette for 6 distinct regions
  - Comprehensive hover tooltips showing city name and population
  - Clean code structure with clear data preparation
  - Both PNG and interactive HTML outputs generated
  weaknesses:
  - Size legend shows text labels (5M, 20M, 35M) but lacks corresponding visual bubble
    indicators to demonstrate the actual sizes
  - Could leverage more Plotly-specific features like linked hover highlighting or
    custom zoom controls
  image_description: 'The plot displays a world map using the Natural Earth projection
    with a light gray landmass and pale blue ocean. Thirty major world cities are
    represented as bubbles sized proportionally to their population (in millions).
    The bubbles are color-coded by region using a 6-color palette: blue for Asia,
    orange for South America, green for North America, purple for Africa, yellow for
    Europe, and cyan for Oceania. The largest bubbles (Tokyo, Delhi, Shanghai) are
    clearly visible in Asia. A region legend is positioned in the lower-left corner
    with a white semi-transparent background. Below the legend, a size legend annotation
    explains "Bubble size = Population (millions)" with example sizes for 5M, 20M,
    and 35M. The title at the top follows the required format. Country boundaries
    are shown as subtle gray lines, and the map uses appropriate latitude/longitude
    constraints to show all populated continents.'
  criteria_checklist:
    visual_quality:
      score: 36
      max: 40
      items:
      - id: VQ-01
        name: Text Legibility
        score: 9
        max: 10
        passed: true
        comment: Title at 32pt is excellent, legend text at 18-20pt is good. Size
          legend text at 14-16pt is slightly small but readable.
      - id: VQ-02
        name: No Overlap
        score: 8
        max: 8
        passed: true
        comment: No overlapping text elements. Bubbles intentionally overlap in dense
          areas but handled well with transparency.
      - id: VQ-03
        name: Element Visibility
        score: 7
        max: 8
        passed: true
        comment: Marker sizes scale well from small to large cities. Some smaller
          cities could be slightly more visible.
      - id: VQ-04
        name: Color Accessibility
        score: 5
        max: 5
        passed: true
        comment: Six-color palette is colorblind-safe with good distinction between
          all colors.
      - id: VQ-05
        name: Layout Balance
        score: 5
        max: 5
        passed: true
        comment: Map fills canvas well, balanced margins, legend positioned appropriately.
      - id: VQ-06
        name: Axis Labels
        score: 2
        max: 2
        passed: true
        comment: N/A for geographic maps - no traditional axis labels needed.
      - id: VQ-07
        name: Grid & Legend
        score: 2
        max: 2
        passed: true
        comment: Region legend well-formatted with semi-transparent background. Size
          legend provides helpful context.
    spec_compliance:
      score: 25
      max: 25
      items:
      - id: SC-01
        name: Plot Type
        score: 8
        max: 8
        passed: true
        comment: Correctly implements geographic bubble map with Scattergeo.
      - id: SC-02
        name: Data Mapping
        score: 5
        max: 5
        passed: true
        comment: Latitude/longitude correctly mapped, population correctly encoded
          as bubble size.
      - id: SC-03
        name: Required Features
        score: 5
        max: 5
        passed: true
        comment: 'All spec requirements met: size legend, transparency, geographic
          context, hover tooltips.'
      - id: SC-04
        name: Data Range
        score: 3
        max: 3
        passed: true
        comment: Map shows all data points with appropriate lat/lon range.
      - id: SC-05
        name: Legend Accuracy
        score: 2
        max: 2
        passed: true
        comment: Region legend is accurate; size legend explains the scaling.
      - id: SC-06
        name: Title Format
        score: 2
        max: 2
        passed: true
        comment: Uses correct format with spec-id, library, and pyplots.ai.
    data_quality:
      score: 18
      max: 20
      items:
      - id: DQ-01
        name: Feature Coverage
        score: 7
        max: 8
        passed: true
        comment: Shows good range of populations across 6 regions. Could include more
          small cities.
      - id: DQ-02
        name: Realistic Context
        score: 7
        max: 7
        passed: true
        comment: Real-world city population data with accurate coordinates.
      - id: DQ-03
        name: Appropriate Scale
        score: 4
        max: 5
        passed: true
        comment: Population values are realistic and current.
    code_quality:
      score: 9
      max: 10
      items:
      - id: CQ-01
        name: KISS Structure
        score: 3
        max: 3
        passed: true
        comment: 'Clean linear structure: imports, data, size calculation, figure,
          save.'
      - id: CQ-02
        name: Reproducibility
        score: 3
        max: 3
        passed: true
        comment: Uses np.random.seed(42).
      - id: CQ-03
        name: Clean Imports
        score: 2
        max: 2
        passed: true
        comment: Only numpy, pandas, and plotly.graph_objects imported.
      - id: CQ-04
        name: No Deprecated API
        score: 1
        max: 1
        passed: true
        comment: Uses current Plotly API.
      - id: CQ-05
        name: Output Correct
        score: 0
        max: 1
        passed: false
        comment: Size legend text labels lack corresponding visual bubble indicators.
    library_features:
      score: 3
      max: 5
      items:
      - id: LF-01
        name: Distinctive Features
        score: 3
        max: 5
        passed: true
        comment: Uses Scattergeo and generates interactive HTML with hover tooltips.
          Could leverage more Plotly features.
  verdict: APPROVED
impl_tags:
  dependencies: []
  techniques:
  - annotations
  - hover-tooltips
  - html-export
  - iteration-over-groups
  patterns:
  - data-generation
  - iteration-over-groups
  dataprep:
  - normalization
  styling:
  - alpha-blending
  - edge-highlighting
