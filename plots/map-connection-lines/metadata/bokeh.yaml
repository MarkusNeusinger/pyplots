library: bokeh
specification_id: map-connection-lines
created: '2026-01-21T16:30:21Z'
updated: '2026-01-21T16:33:35Z'
generated_by: claude-opus-4-5-20251101
workflow_run: 21217347997
issue: 3746
python_version: 3.13.11
library_version: 3.8.2
preview_url: https://storage.googleapis.com/pyplots-images/plots/map-connection-lines/bokeh/plot.png
preview_thumb: https://storage.googleapis.com/pyplots-images/plots/map-connection-lines/bokeh/plot_thumb.png
preview_html: https://storage.googleapis.com/pyplots-images/plots/map-connection-lines/bokeh/plot.html
quality_score: 82
review:
  strengths:
  - Excellent use of Bokeh's ColumnDataSource and multi_line for efficient arc rendering
  - Python-themed color scheme (blue lines, yellow markers) is visually appealing
  - Line thickness and alpha scaling effectively communicates passenger volume
  - Curved arcs look natural and avoid straight-line crossings
  - Real airport codes and plausible passenger data create authentic visualization
  - HTML output enables interactive pan/zoom functionality
  weaknesses:
  - Missing basemap/coastlines makes geographic context difficult to interpret
  - No legend explaining line thickness represents passenger volume
  - Uses a function (generate_arc) which violates KISS code structure requirement
  - European airport labels overlap due to geographic clustering
  - No HoverTool for interactive tooltips (spec mentions label for route tooltips)
  image_description: 'The plot displays a geographic map showing flight connections
    between 12 major international airports. Yellow circular markers with blue outlines
    represent airport locations (JFK, LHR, CDG, DXB, SIN, HND, SYD, LAX, SFO, ORD,
    FRA, AMS). Curved blue arcs connect airport pairs, representing flight routes.
    Line thickness and opacity vary based on passenger volume - thicker, more opaque
    lines indicate higher traffic routes (e.g., JFK-LHR). The map uses a light gray
    background (#f5f5f5) with dashed gray gridlines. Axes show Longitude (-180 to
    180) and Latitude (-60 to 80). Airport labels appear as small text next to each
    marker. The title uses the correct format: "map-connection-lines 路 bokeh 路 pyplots.ai".'
  criteria_checklist:
    visual_quality:
      score: 31
      max: 40
      items:
      - id: VQ-01
        name: Text Legibility
        score: 7
        max: 10
        passed: true
        comment: Title and axis labels readable, but airport labels at 14pt are somewhat
          small. European cluster labels are dense.
      - id: VQ-02
        name: No Overlap
        score: 6
        max: 8
        passed: true
        comment: Minor overlap in European airport labels (AMS/LHR/CDG/FRA cluster).
          Most labels readable.
      - id: VQ-03
        name: Element Visibility
        score: 8
        max: 8
        passed: true
        comment: Connection lines well-sized (3-12px thickness). Markers visible at
          size=20. Alpha 0.4-0.7 handles overlaps well.
      - id: VQ-04
        name: Color Accessibility
        score: 5
        max: 5
        passed: true
        comment: Python Blue and Yellow provide excellent contrast. Colorblind-safe.
      - id: VQ-05
        name: Layout Balance
        score: 3
        max: 5
        passed: true
        comment: Plot fills canvas well but no basemap means limited geographic context.
      - id: VQ-06
        name: Axis Labels
        score: 1
        max: 2
        passed: true
        comment: Labels are descriptive but lack units (degrees).
      - id: VQ-07
        name: Grid & Legend
        score: 1
        max: 2
        passed: true
        comment: Grid is subtle. No legend explaining line thickness meaning.
    spec_compliance:
      score: 21
      max: 25
      items:
      - id: SC-01
        name: Plot Type
        score: 8
        max: 8
        passed: true
        comment: 'Correct chart type: connection lines map with curved arcs.'
      - id: SC-02
        name: Data Mapping
        score: 5
        max: 5
        passed: true
        comment: Origin/destination coordinates correctly mapped.
      - id: SC-03
        name: Required Features
        score: 3
        max: 5
        passed: false
        comment: 'Has curved lines, markers, transparency. Missing: basemap with coastlines/borders.'
      - id: SC-04
        name: Data Range
        score: 3
        max: 3
        passed: true
        comment: Axes show full range, all airports visible.
      - id: SC-05
        name: Legend Accuracy
        score: 0
        max: 2
        passed: false
        comment: No legend present explaining line thickness = passenger volume.
      - id: SC-06
        name: Title Format
        score: 2
        max: 2
        passed: true
        comment: 'Correct format: map-connection-lines 路 bokeh 路 pyplots.ai'
    data_quality:
      score: 18
      max: 20
      items:
      - id: DQ-01
        name: Feature Coverage
        score: 7
        max: 8
        passed: true
        comment: Shows 15 routes between 12 airports with varying volumes. Good route
          variety.
      - id: DQ-02
        name: Realistic Context
        score: 7
        max: 7
        passed: true
        comment: Real airport codes with plausible annual passenger volumes.
      - id: DQ-03
        name: Appropriate Scale
        score: 4
        max: 5
        passed: true
        comment: Passenger volumes realistic. Axis ranges could be tighter to focus
          on data.
    code_quality:
      score: 8
      max: 10
      items:
      - id: CQ-01
        name: KISS Structure
        score: 1
        max: 3
        passed: false
        comment: Uses generate_arc() function which violates KISS principle.
      - id: CQ-02
        name: Reproducibility
        score: 3
        max: 3
        passed: true
        comment: Deterministic data with hardcoded coordinates and routes.
      - id: CQ-03
        name: Clean Imports
        score: 2
        max: 2
        passed: true
        comment: All imports are used.
      - id: CQ-04
        name: No Deprecated API
        score: 1
        max: 1
        passed: true
        comment: Uses current Bokeh API.
      - id: CQ-05
        name: Output Correct
        score: 1
        max: 1
        passed: true
        comment: Saves as plot.png and plot.html.
    library_features:
      score: 4
      max: 5
      items:
      - id: LF-01
        name: Distinctive Features
        score: 4
        max: 5
        passed: true
        comment: Uses ColumnDataSource, multi_line, scatter with styling, text labels.
          HTML output for interactivity. Could add HoverTool for tooltips.
  verdict: REJECTED
impl_tags:
  dependencies: []
  techniques:
  - annotations
  - html-export
  patterns:
  - data-generation
  - columndatasource
  - iteration-over-groups
  dataprep: []
  styling:
  - alpha-blending
  - grid-styling
