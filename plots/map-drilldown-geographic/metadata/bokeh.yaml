library: bokeh
specification_id: map-drilldown-geographic
created: '2026-01-20T07:42:35Z'
updated: '2026-01-20T08:01:48Z'
generated_by: claude-opus-4-5-20251101
workflow_run: 21163297430
issue: 3770
python_version: 3.13.11
library_version: 3.8.2
preview_url: https://storage.googleapis.com/pyplots-images/plots/map-drilldown-geographic/bokeh/plot.png
preview_thumb: https://storage.googleapis.com/pyplots-images/plots/map-drilldown-geographic/bokeh/plot_thumb.png
preview_html: https://storage.googleapis.com/pyplots-images/plots/map-drilldown-geographic/bokeh/plot.html
quality_score: 87
review:
  strengths:
  - Excellent use of Bokeh interactive features (TapTool, CustomJS, HoverTool)
  - Well-implemented choropleth coloring with Blues9 palette
  - Proper breadcrumb navigation structure with HTML formatting
  - Clear data hierarchy (countries ‚Üí states ‚Üí cities) with visibility toggling
  - Good text legibility with white background behind labels
  - Correct title format and descriptive axis labels
  weaknesses:
  - Color bar range (0-900) does not match actual data range (95-850)
  - Only one complete drill-down path implemented (US ‚Üí California) - other countries
    and states are non-functional endpoints
  - Simplified rectangular polygons do not represent actual geographic boundaries
  image_description: 'The plot displays a choropleth-style map of the Americas showing
    5 countries (Canada, United States, Mexico, Brazil, Argentina) as simplified rectangular
    polygons. Each country is colored using a blue color scale (Blues9 palette) based
    on sales values in millions USD. Country names and their sales values (e.g., "$850M"
    for United States, "$320M" for Canada) are displayed as text labels with white
    semi-transparent backgrounds centered on each region. The title "map-drilldown-geographic
    ¬∑ bokeh ¬∑ pyplots.ai" appears at the top center. A breadcrumb navigation shows
    "üìç World" in the top-left corner. The axes show Longitude (-140 to -25) and Latitude
    (-60 to 75). A color bar legend labeled "Sales ($M)" appears on the right side
    showing the scale from 0 to 800. An instruction text at the bottom reads "Click
    on a region to drill down into its subdivisions. Currently showing: Countries
    ‚Üí States (US) ‚Üí Cities (California)". The background is a light blue (#f0f8ff)
    suggesting water/ocean.'
  criteria_checklist:
    visual_quality:
      score: 35
      max: 40
      items:
      - id: VQ-01
        name: Text Legibility
        score: 9
        max: 10
        passed: true
        comment: All text readable at full size; title 28pt, labels 28pt/24pt, axis
          labels 22pt/18pt
      - id: VQ-02
        name: No Overlap
        score: 8
        max: 8
        passed: true
        comment: No overlapping text elements; labels and values properly separated
          with offset positioning
      - id: VQ-03
        name: Element Visibility
        score: 6
        max: 8
        passed: true
        comment: Country polygons clearly visible with good contrast; simplified rectangular
          shapes not optimal
      - id: VQ-04
        name: Color Accessibility
        score: 5
        max: 5
        passed: true
        comment: Blues9 palette is colorblind-safe with good contrast
      - id: VQ-05
        name: Layout Balance
        score: 3
        max: 5
        passed: true
        comment: Good canvas use but empty space on left portion; color bar properly
          positioned
      - id: VQ-06
        name: Axis Labels
        score: 2
        max: 2
        passed: true
        comment: 'Descriptive labels: Longitude and Latitude'
      - id: VQ-07
        name: Grid & Legend
        score: 2
        max: 2
        passed: true
        comment: Subtle grid (alpha 0.3), well-placed color bar legend
    spec_compliance:
      score: 22
      max: 25
      items:
      - id: SC-01
        name: Plot Type
        score: 8
        max: 8
        passed: true
        comment: Correct hierarchical choropleth map with drill-down capability
      - id: SC-02
        name: Data Mapping
        score: 5
        max: 5
        passed: true
        comment: Geographic regions correctly mapped to value-based colors
      - id: SC-03
        name: Required Features
        score: 4
        max: 5
        passed: true
        comment: Has drill-down, breadcrumb, color legend, tooltips. Missing smooth
          zoom transitions
      - id: SC-04
        name: Data Range
        score: 3
        max: 3
        passed: true
        comment: All data properly displayed within visible range
      - id: SC-05
        name: Legend Accuracy
        score: 0
        max: 2
        passed: false
        comment: Color bar range (0-900) doesn't match actual data range (95-850)
      - id: SC-06
        name: Title Format
        score: 2
        max: 2
        passed: true
        comment: 'Correct format: map-drilldown-geographic ¬∑ bokeh ¬∑ pyplots.ai'
    data_quality:
      score: 17
      max: 20
      items:
      - id: DQ-01
        name: Feature Coverage
        score: 6
        max: 8
        passed: true
        comment: Shows country, state, and city levels but only one drill-down path
          fully implemented
      - id: DQ-02
        name: Realistic Context
        score: 7
        max: 7
        passed: true
        comment: Sales data in millions USD is realistic business scenario
      - id: DQ-03
        name: Appropriate Scale
        score: 4
        max: 5
        passed: true
        comment: Values are realistic (95M to 850M) with correct aggregation
    code_quality:
      score: 8
      max: 10
      items:
      - id: CQ-01
        name: KISS Structure
        score: 2
        max: 3
        passed: true
        comment: Follows pattern but code is quite long (500+ lines)
      - id: CQ-02
        name: Reproducibility
        score: 3
        max: 3
        passed: true
        comment: Uses np.random.seed(42)
      - id: CQ-03
        name: Clean Imports
        score: 2
        max: 2
        passed: true
        comment: All imports are used
      - id: CQ-04
        name: No Deprecated API
        score: 1
        max: 1
        passed: true
        comment: Uses current Bokeh 3.x API
      - id: CQ-05
        name: Output Correct
        score: 0
        max: 1
        passed: false
        comment: Exports layout including Div elements
    library_features:
      score: 5
      max: 5
      items:
      - id: LF-01
        name: Distinctive Features
        score: 5
        max: 5
        passed: true
        comment: Excellent use of ColumnDataSource, TapTool, CustomJS, HoverTool,
          patches, ColorBar, Div
  verdict: APPROVED
impl_tags:
  dependencies: []
  techniques:
  - patches
  - colorbar
  - hover-tooltips
  - annotations
  - custom-legend
  patterns:
  - data-generation
  - columndatasource
  dataprep: []
  styling:
  - custom-colormap
  - alpha-blending
  - grid-styling
