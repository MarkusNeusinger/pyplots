library: plotnine
specification_id: bar-race-animated
created: '2026-01-11T00:19:37Z'
updated: '2026-01-11T00:35:58Z'
generated_by: claude-opus-4-5-20251101
workflow_run: 20886562516
issue: 3653
python_version: 3.13.11
library_version: 0.15.2
preview_url: https://storage.googleapis.com/pyplots-images/plots/bar-race-animated/plotnine/plot.png
preview_thumb: https://storage.googleapis.com/pyplots-images/plots/bar-race-animated/plotnine/plot_thumb.png
preview_html: null
quality_score: 91
review:
  strengths:
  - Excellent small multiples approach appropriate for a static library that cannot
    animate
  - Clear ranking visualization with proper sorting within each time panel
  - Consistent company colors across all facets enabling easy tracking
  - Clean, well-organized code following KISS principles
  - Good use of plotnine grammar of graphics (aes, geom_col, facet_wrap, coord_flip)
  - Informative bar labels combining company name and revenue value
  - Professional styling with appropriate font sizes and spacing
  weaknesses:
  - Missing subtle grid lines would help readers estimate values more precisely
  - The expand_limits import appears unused (scale_y_continuous handles the expansion)
  image_description: 'The plot displays a 2×2 small multiples grid showing "Tech Company
    Revenue Race" across 4 time points (Year 2018, 2020, 2022, 2024). Each panel shows
    8 horizontal bars representing tech companies (TechCorp, DataFlow, CloudBase,
    NetSys, CodeLab, AppStream, ByteWorks, DigiCore), sorted by revenue from top to
    bottom (highest at top). Bars are colored consistently per company across all
    panels: TechCorp (Python Blue), DataFlow (Python Yellow), CloudBase (Steel Blue),
    NetSys (Mulberry/maroon), CodeLab (Orange), AppStream (Vermilion/red), ByteWorks
    (Dark Purple), DigiCore (Yellow-Green). Each bar has the company name and revenue
    value labeled to its right (e.g., "TechCorp $154B"). The facet headers have a
    subtle gray background. The x-axis shows "Revenue (Billions USD)" with consistent
    scaling. The title correctly follows the format: "Tech Company Revenue Race ·
    bar-race-animated · plotnine · pyplots.ai". The visualization clearly demonstrates
    ranking changes over time - for example, CodeLab rises from last place in 2018
    to 7th in 2024, while NetSys drops from 2nd to 5th.'
  criteria_checklist:
    visual_quality:
      score: 37
      max: 40
      items:
      - id: VQ-01
        name: Text Legibility
        score: 10
        max: 10
        passed: true
        comment: Title is large and bold, facet labels are clear, bar labels readable
      - id: VQ-02
        name: No Overlap
        score: 8
        max: 8
        passed: true
        comment: No overlapping text elements, labels positioned cleanly to the right
          of bars
      - id: VQ-03
        name: Element Visibility
        score: 7
        max: 8
        passed: true
        comment: Bars are well-sized and visible, but bars in 2024 panel slightly
          cramped on right side
      - id: VQ-04
        name: Color Accessibility
        score: 5
        max: 5
        passed: true
        comment: Colors are distinct and colorblind-safe, good variety of hues
      - id: VQ-05
        name: Layout Balance
        score: 5
        max: 5
        passed: true
        comment: 2x2 grid is well-balanced, good use of canvas
      - id: VQ-06
        name: Axis Labels
        score: 2
        max: 2
        passed: true
        comment: X-axis label 'Revenue (Billions USD)' is descriptive with units
      - id: VQ-07
        name: Grid & Legend
        score: 0
        max: 2
        passed: false
        comment: No legend needed (labels on bars), but no grid visible for reference
    spec_compliance:
      score: 23
      max: 25
      items:
      - id: SC-01
        name: Plot Type
        score: 8
        max: 8
        passed: true
        comment: Correct bar chart race implemented as small multiples (appropriate
          for static library)
      - id: SC-02
        name: Data Mapping
        score: 5
        max: 5
        passed: true
        comment: Entity to bars, time to facets, value to bar length, color to company
          identity
      - id: SC-03
        name: Required Features
        score: 4
        max: 5
        passed: true
        comment: Bars sorted by value, labels attached, time indicator visible, consistent
          colors. Missing animation expected as static
      - id: SC-04
        name: Data Range
        score: 3
        max: 3
        passed: true
        comment: All data visible, axes accommodate all values with consistent scaling
      - id: SC-05
        name: Legend Accuracy
        score: 1
        max: 2
        passed: true
        comment: Labels are on bars rather than legend; functional but spec mentions
          consistent coloring which would benefit from a legend
      - id: SC-06
        name: Title Format
        score: 2
        max: 2
        passed: true
        comment: 'Correct format: Tech Company Revenue Race · bar-race-animated ·
          plotnine · pyplots.ai'
    data_quality:
      score: 20
      max: 20
      items:
      - id: DQ-01
        name: Feature Coverage
        score: 8
        max: 8
        passed: true
        comment: Shows ranking changes, value growth, different trajectories (some
          companies rise, others fall)
      - id: DQ-02
        name: Realistic Context
        score: 7
        max: 7
        passed: true
        comment: Tech company revenue is a plausible, neutral scenario
      - id: DQ-03
        name: Appropriate Scale
        score: 5
        max: 5
        passed: true
        comment: Revenue values in $40B-$222B range are realistic for major tech companies
    code_quality:
      score: 8
      max: 10
      items:
      - id: CQ-01
        name: KISS Structure
        score: 3
        max: 3
        passed: true
        comment: Clean imports to data to plot to save structure
      - id: CQ-02
        name: Reproducibility
        score: 3
        max: 3
        passed: true
        comment: np.random.seed(42) set
      - id: CQ-03
        name: Clean Imports
        score: 0
        max: 2
        passed: false
        comment: expand_limits import is unused (could use scale_y_continuous alone)
      - id: CQ-04
        name: No Deprecated API
        score: 1
        max: 1
        passed: true
        comment: Modern plotnine API used
      - id: CQ-05
        name: Output Correct
        score: 1
        max: 1
        passed: true
        comment: Saves as plot.png
    library_features:
      score: 3
      max: 5
      items:
      - id: LF-01
        name: Distinctive Features
        score: 3
        max: 5
        passed: true
        comment: Uses ggplot grammar (ggplot + geom_col + facet_wrap), coord_flip,
          theming, but doesn't leverage more advanced features
  verdict: APPROVED
impl_tags:
  dependencies: []
  techniques:
  - faceting
  - annotations
  - layer-composition
  patterns:
  - data-generation
  - groupby-aggregation
  dataprep: []
  styling:
  - grid-styling
