library: pygal
specification_id: hierarchy-toggle-view
created: '2026-01-11T10:06:23Z'
updated: '2026-01-11T10:14:27Z'
generated_by: claude-opus-4-5-20251101
workflow_run: 20893330162
issue: 3697
python_version: 3.13.11
library_version: 3.1.0
preview_url: https://storage.googleapis.com/pyplots-images/plots/hierarchy-toggle-view/pygal/plot.png
preview_thumb: https://storage.googleapis.com/pyplots-images/plots/hierarchy-toggle-view/pygal/plot_thumb.png
preview_html: https://storage.googleapis.com/pyplots-images/plots/hierarchy-toggle-view/pygal/plot.html
quality_score: 68
review:
  strengths:
  - Good use of company budget allocation as realistic hierarchical data
  - Treemap rectangles properly sized proportional to values
  - Colorblind-safe blue/yellow color scheme
  - HTML version includes working toggle between views
  - Canvas utilization is good with treemap filling most of the space
  weaknesses:
  - 'Title format incorrect: includes Company Budget Allocation prefix instead of
    spec-required format'
  - Treemap cell labels and values not rendering in PNG output despite print_labels=True
    and print_values=True
  - Legend text at bottom is extremely small and unreadable
  - Static PNG cannot demonstrate toggle functionality - consider adding annotation
    or side-by-side layout
  - Uses Pie/Donut chart instead of true Sunburst (pygal lacks native sunburst support)
  image_description: 'The plot shows a treemap visualization of company budget allocation
    data with four main departments displayed as nested rectangles. Engineering and
    Operations sections are rendered in shades of blue (#306998, #4B8BBE), while Marketing
    and Product are in shades of yellow (#FFD43B, #FFE873). The title at the top reads
    "Company Budget Allocation · hierarchy-toggle-view · pygal · pyplots.ai". A legend
    at the bottom displays the four department names (Engineering, Marketing, Operations,
    Product), but the legend text is extremely small and barely readable. The treemap
    cells themselves show NO labels or values - they are just colored rectangles without
    any text identifying the sub-categories or their budget amounts. The chart fills
    the canvas well but lacks the critical data labels that would make it useful.'
  criteria_checklist:
    visual_quality:
      score: 28
      max: 40
      items:
      - id: VQ-01
        name: Text Legibility
        score: 5
        max: 10
        passed: false
        comment: Title readable, but legend text is tiny and NO labels appear on treemap
          cells despite print_labels=True
      - id: VQ-02
        name: No Overlap
        score: 8
        max: 8
        passed: true
        comment: No overlapping elements (because there are no labels to overlap)
      - id: VQ-03
        name: Element Visibility
        score: 6
        max: 8
        passed: true
        comment: Treemap rectangles are well-sized and visible
      - id: VQ-04
        name: Color Accessibility
        score: 5
        max: 5
        passed: true
        comment: Blue/yellow palette is colorblind-safe
      - id: VQ-05
        name: Layout Balance
        score: 4
        max: 5
        passed: true
        comment: Good canvas utilization, treemap fills most of the space
      - id: VQ-06
        name: Axis Labels
        score: 0
        max: 2
        passed: false
        comment: N/A for treemap, but cell labels are missing
      - id: VQ-07
        name: Grid & Legend
        score: 0
        max: 2
        passed: false
        comment: Legend text is too small to read
    spec_compliance:
      score: 15
      max: 25
      items:
      - id: SC-01
        name: Plot Type
        score: 5
        max: 8
        passed: false
        comment: Treemap is correct, but spec requires BOTH treemap AND sunburst toggle
          - PNG only shows treemap
      - id: SC-02
        name: Data Mapping
        score: 5
        max: 5
        passed: true
        comment: Hierarchical data correctly mapped to nested rectangles
      - id: SC-03
        name: Required Features
        score: 2
        max: 5
        passed: false
        comment: Missing toggle functionality in static view, missing sunburst representation
      - id: SC-04
        name: Data Range
        score: 3
        max: 3
        passed: true
        comment: All data visible
      - id: SC-05
        name: Legend Accuracy
        score: 0
        max: 2
        passed: false
        comment: Legend text too small to verify
      - id: SC-06
        name: Title Format
        score: 0
        max: 2
        passed: false
        comment: Should be hierarchy-toggle-view · pygal · pyplots.ai but has extra
          Company Budget Allocation prefix
    data_quality:
      score: 17
      max: 20
      items:
      - id: DQ-01
        name: Feature Coverage
        score: 6
        max: 8
        passed: true
        comment: Shows 4 departments with sub-items, demonstrates hierarchy well
      - id: DQ-02
        name: Realistic Context
        score: 7
        max: 7
        passed: true
        comment: Company budget allocation is excellent real-world scenario
      - id: DQ-03
        name: Appropriate Scale
        score: 4
        max: 5
        passed: true
        comment: Budget values are realistic (hundreds of thousands)
    code_quality:
      score: 8
      max: 10
      items:
      - id: CQ-01
        name: KISS Structure
        score: 3
        max: 3
        passed: true
        comment: Linear structure, no functions/classes
      - id: CQ-02
        name: Reproducibility
        score: 2
        max: 3
        passed: true
        comment: No random seed needed (deterministic data), but data is hardcoded
      - id: CQ-03
        name: Clean Imports
        score: 2
        max: 2
        passed: true
        comment: Only necessary imports
      - id: CQ-04
        name: No Deprecated API
        score: 1
        max: 1
        passed: true
        comment: Current pygal API
      - id: CQ-05
        name: Output Correct
        score: 0
        max: 1
        passed: false
        comment: Saves plot.png but labels not rendering
    library_features:
      score: 0
      max: 5
      items:
      - id: LF-01
        name: Distinctive Features
        score: 0
        max: 5
        passed: false
        comment: Uses Treemap class but fails to leverage pygal SVG interactivity
          in static output; pie chart used instead of true sunburst
  verdict: REJECTED
impl_tags:
  dependencies: []
  techniques:
  - html-export
  - hover-tooltips
  patterns:
  - data-generation
  - iteration-over-groups
  dataprep: []
  styling: []
