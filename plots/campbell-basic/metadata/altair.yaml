library: altair
specification_id: campbell-basic
created: '2026-02-15T21:10:25Z'
updated: '2026-02-15T21:28:46Z'
generated_by: claude-opus-4-5-20251101
workflow_run: 22043026897
issue: 4241
python_version: 3.14.3
library_version: 6.0.0
preview_url: https://storage.googleapis.com/pyplots-images/plots/campbell-basic/altair/plot.png
preview_thumb: https://storage.googleapis.com/pyplots-images/plots/campbell-basic/altair/plot_thumb.png
preview_html: https://storage.googleapis.com/pyplots-images/plots/campbell-basic/altair/plot.html
quality_score: 85
review:
  strengths:
  - 'Comprehensive Campbell Diagram with all spec-required features: 5 modes, 3 engine
    orders, critical speed markers, and operating range shading'
  - Strong data storytelling through size-differentiated critical speed markers (larger
    in operating range) and targeted text annotations
  - Clean colorblind-safe palette with good perceptual distinction between mode curves
    and engine order lines
  - Effective use of Altair layer composition and independent scale resolution for
    dual legends
  - Realistic rotordynamic data with plausible gyroscopic effects (modes increasing
    and decreasing with speed)
  weaknesses:
  - The 1st Bending / 1x and 2nd Bending / 1x annotation labels are very close together
    and partially overlap, reducing readability
  - Canvas utilization could be improved — the legend consumes significant right-side
    space and the upper plot region is largely empty
  - Engine order legend entries are all identical gray, making the legend somewhat
    redundant (though direct labels on the right edge mitigate this)
  - Per-annotation DataFrame creation in the code is verbose; a single DataFrame with
    dx/dy columns and a single mark_text layer would be cleaner
  image_description: 'The plot displays a Campbell Diagram titled "campbell-basic
    · altair · pyplots.ai" with subtitle "Natural Frequency Modes vs Engine Order
    Excitations". The X-axis shows "Rotational Speed (RPM)" ranging from 0 to approximately
    6200, and the Y-axis shows "Frequency (Hz)" from 0 to 310. Five natural frequency
    mode curves are drawn as thick solid lines in distinct colors: blue (1st Bending),
    orange (2nd Bending), green (1st Torsional), purple (Axial), and red (3rd Bending).
    Three dashed gray engine order lines (1x, 2x, 3x) emanate diagonally from the
    origin, with text labels at the right edge. Red diamond markers identify critical
    speed intersections where engine order lines cross natural frequency curves —
    larger diamonds highlight intersections within the operating range. A translucent
    light-blue shaded band marks the "Operating Range" (3000–5000 RPM) with an italic
    label at the bottom. Three text annotations in dark red identify key critical
    speeds: "1st Bending / 3x", "1st Bending / 1x", and "2nd Bending / 1x". Two separate
    legends on the right distinguish "Engine Orders" (dashed gray lines) from "Natural
    Frequencies" (colored solid lines). The grid is very subtle and the overall design
    is clean and professional.'
  criteria_checklist:
    visual_quality:
      score: 26
      max: 30
      items:
      - id: VQ-01
        name: Text Legibility
        score: 8
        max: 8
        passed: true
        comment: 'All font sizes explicitly set: title 28pt, axis titles 22pt, tick
          labels 18pt, legend 13-14pt. All text clearly readable.'
      - id: VQ-02
        name: No Overlap
        score: 5
        max: 6
        passed: false
        comment: The '1st Bending / 1x' and '2nd Bending / 1x' annotations are very
          close together and partially overlap.
      - id: VQ-03
        name: Element Visibility
        score: 6
        max: 6
        passed: true
        comment: Mode lines at strokeWidth=3, engine order lines at 1.5 with dashing,
          critical diamonds at 200-380 size — all well visible.
      - id: VQ-04
        name: Color Accessibility
        score: 4
        max: 4
        passed: true
        comment: Colorblind-safe palette with good perceptual separation. Engine orders
          use neutral gray.
      - id: VQ-05
        name: Layout & Canvas
        score: 2
        max: 4
        passed: false
        comment: Legend occupies considerable right-side space. Upper region largely
          empty. Acceptable but not optimal.
      - id: VQ-06
        name: Axis Labels & Title
        score: 2
        max: 2
        passed: true
        comment: Rotational Speed (RPM) and Frequency (Hz) — descriptive with units.
    design_excellence:
      score: 14
      max: 20
      items:
      - id: DE-01
        name: Aesthetic Sophistication
        score: 6
        max: 8
        passed: false
        comment: Custom palette, dashed/solid distinction, size-differentiated markers,
          operating range band. Above defaults but not publication-level.
      - id: DE-02
        name: Visual Refinement
        score: 4
        max: 6
        passed: false
        comment: Subtle grid opacity 0.10, view stroke removed, subdued axis styling.
          Legend layout could be tighter.
      - id: DE-03
        name: Data Storytelling
        score: 4
        max: 6
        passed: true
        comment: Operating range band draws attention, larger diamonds highlight in-range
          critical speeds, text annotations identify key intersections.
    spec_compliance:
      score: 14
      max: 15
      items:
      - id: SC-01
        name: Plot Type
        score: 5
        max: 5
        passed: true
        comment: Correct Campbell Diagram with natural frequency curves overlaid with
          engine order excitation lines.
      - id: SC-02
        name: Required Features
        score: 4
        max: 4
        passed: true
        comment: 'All spec features present: EO lines from origin, mode curves with
          gyroscopic variation, critical markers, labels, legend, operating range
          shading.'
      - id: SC-03
        name: Data Mapping
        score: 3
        max: 3
        passed: true
        comment: X=RPM, Y=Hz, correctly mapped.
      - id: SC-04
        name: Title & Legend
        score: 2
        max: 3
        passed: false
        comment: Title format correct. Dual legends correct but engine order legend
          entries are all identical gray, slightly redundant.
    data_quality:
      score: 14
      max: 15
      items:
      - id: DQ-01
        name: Feature Coverage
        score: 5
        max: 6
        passed: false
        comment: Five modes with varied gyroscopic behavior, three engine orders,
          critical speeds in and out of operating range. Good coverage.
      - id: DQ-02
        name: Realistic Context
        score: 5
        max: 5
        passed: true
        comment: Realistic rotordynamic scenario with correct terminology for mode
          shapes.
      - id: DQ-03
        name: Appropriate Scale
        score: 4
        max: 4
        passed: true
        comment: Frequency range, speed range, and gyroscopic curvature are realistic
          for rotating machinery.
    code_quality:
      score: 9
      max: 10
      items:
      - id: CQ-01
        name: KISS Structure
        score: 3
        max: 3
        passed: true
        comment: 'Linear flow: imports, data, chart layers, compose, save.'
      - id: CQ-02
        name: Reproducibility
        score: 2
        max: 2
        passed: true
        comment: np.random.seed(42) set.
      - id: CQ-03
        name: Clean Imports
        score: 2
        max: 2
        passed: true
        comment: 'All imports used: altair, numpy, pandas.'
      - id: CQ-04
        name: Code Elegance
        score: 1
        max: 2
        passed: false
        comment: Generally clean but verbose with per-annotation DataFrame creation
          and offset handling.
      - id: CQ-05
        name: Output & API
        score: 1
        max: 1
        passed: true
        comment: Saves plot.png and plot.html, no deprecated functions.
    library_mastery:
      score: 8
      max: 10
      items:
      - id: LM-01
        name: Idiomatic Usage
        score: 4
        max: 5
        passed: false
        comment: Good declarative grammar with layered composition, encoding types,
          resolve_scale for separate legends.
      - id: LM-02
        name: Distinctive Features
        score: 4
        max: 5
        passed: true
        comment: Uses layer composition, resolve_scale(color=independent), alt.Title
          with subtitle, mark_rect for bands, tooltips.
  verdict: APPROVED
impl_tags:
  dependencies: []
  techniques:
  - annotations
  - layer-composition
  - html-export
  patterns:
  - data-generation
  - iteration-over-groups
  dataprep: []
  styling:
  - grid-styling
