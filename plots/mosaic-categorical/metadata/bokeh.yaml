library: bokeh
specification_id: mosaic-categorical
created: '2026-01-11T00:53:56Z'
updated: '2026-01-11T00:56:21Z'
generated_by: claude-opus-4-5-20251101
workflow_run: 20886979446
issue: 3650
python_version: 3.13.11
library_version: 3.8.2
preview_url: https://storage.googleapis.com/pyplots-images/plots/mosaic-categorical/bokeh/plot.png
preview_thumb: https://storage.googleapis.com/pyplots-images/plots/mosaic-categorical/bokeh/plot_thumb.png
preview_html: https://storage.googleapis.com/pyplots-images/plots/mosaic-categorical/bokeh/plot.html
quality_score: 88
review:
  strengths:
  - Excellent mosaic plot implementation with correct proportional sizing
  - Clear, accessible color scheme (Python blue/yellow)
  - Well-structured code following KISS principles
  - Good use of Bokeh ColumnDataSource pattern
  - Informative labels showing actual counts in each cell
  - Appropriate use of classic Titanic dataset
  weaknesses:
  - Legend and plot area could be better integrated (legend appears isolated on right
    side)
  - Missing HoverTool for interactivity (a key Bokeh strength)
  - Mosaic area uses only ~72% of horizontal canvas space
  - No residual coloring to show deviations from independence (mentioned in spec)
  image_description: 'The plot displays a mosaic chart showing Titanic survival data
    by passenger class. The visualization uses a 16:9 canvas with a light gray (#fafafa)
    background. Three columns represent First, Second, and Third class passengers,
    with column widths proportional to the number of passengers in each class (Third
    class being the widest). Each column is divided vertically into two rectangles:
    blue (#306998) for "Survived" and yellow (#FFD43B) for "Did Not Survive". The
    heights represent conditional proportions within each class. Count labels (122,
    203, 167, 118, 528, 178) are displayed in white or dark text for contrast. The
    title "mosaic-categorical · bokeh · pyplots.ai" appears at the top in bold, with
    an italic subtitle "Titanic Survival by Passenger Class" below. Class labels (First,
    Second, Third) appear below each column, and an x-axis label explains the width
    encoding. A legend on the right side shows the color mapping for survival status.'
  criteria_checklist:
    visual_quality:
      score: 35
      max: 40
      items:
      - id: VQ-01
        name: Text Legibility
        score: 9
        max: 10
        passed: true
        comment: Title and labels are readable, but some labels could be slightly
          larger for optimal viewing
      - id: VQ-02
        name: No Overlap
        score: 8
        max: 8
        passed: true
        comment: No overlapping elements, all text clearly separated
      - id: VQ-03
        name: Element Visibility
        score: 7
        max: 8
        passed: true
        comment: Rectangles well-sized, but mosaic uses only ~72% of horizontal space
      - id: VQ-04
        name: Color Accessibility
        score: 5
        max: 5
        passed: true
        comment: Blue/yellow contrast is colorblind-safe
      - id: VQ-05
        name: Layout Balance
        score: 4
        max: 5
        passed: true
        comment: Good proportions but mosaic area could extend further right
      - id: VQ-06
        name: Axis Labels
        score: 2
        max: 2
        passed: true
        comment: Descriptive x-axis label with width encoding explanation
      - id: VQ-07
        name: Grid & Legend
        score: 0
        max: 2
        passed: false
        comment: Legend placement appears small and distant from main plot area
    spec_compliance:
      score: 23
      max: 25
      items:
      - id: SC-01
        name: Plot Type
        score: 8
        max: 8
        passed: true
        comment: Correct mosaic plot with areas proportional to frequencies
      - id: SC-02
        name: Data Mapping
        score: 5
        max: 5
        passed: true
        comment: Widths = class proportions, heights = survival proportions
      - id: SC-03
        name: Required Features
        score: 4
        max: 5
        passed: true
        comment: Has gaps, colors, labels; missing residual indication
      - id: SC-04
        name: Data Range
        score: 3
        max: 3
        passed: true
        comment: All categories visible and complete
      - id: SC-05
        name: Legend Accuracy
        score: 2
        max: 2
        passed: true
        comment: Legend correctly identifies survival status
      - id: SC-06
        name: Title Format
        score: 1
        max: 2
        passed: false
        comment: Correct format but uses straight dots
    data_quality:
      score: 18
      max: 20
      items:
      - id: DQ-01
        name: Feature Coverage
        score: 7
        max: 8
        passed: true
        comment: Shows variation across classes, demonstrates mosaic concept well
      - id: DQ-02
        name: Realistic Context
        score: 7
        max: 7
        passed: true
        comment: Titanic survival is a classic, well-known dataset
      - id: DQ-03
        name: Appropriate Scale
        score: 4
        max: 5
        passed: true
        comment: Realistic historical counts
    code_quality:
      score: 9
      max: 10
      items:
      - id: CQ-01
        name: KISS Structure
        score: 3
        max: 3
        passed: true
        comment: 'Linear flow: imports, data, calculations, plot, save'
      - id: CQ-02
        name: Reproducibility
        score: 3
        max: 3
        passed: true
        comment: np.random.seed(42) is set
      - id: CQ-03
        name: Clean Imports
        score: 2
        max: 2
        passed: true
        comment: All imports are used
      - id: CQ-04
        name: No Deprecated API
        score: 1
        max: 1
        passed: true
        comment: Uses current Bokeh APIs
      - id: CQ-05
        name: Output Correct
        score: 0
        max: 1
        passed: false
        comment: 'Minor: seed not actually needed for deterministic data'
    library_features:
      score: 3
      max: 5
      items:
      - id: LF-01
        name: Distinctive Features
        score: 3
        max: 5
        passed: true
        comment: Uses ColumnDataSource and quad glyphs, but missing HoverTool for
          interactivity
  verdict: REJECTED
impl_tags:
  dependencies: []
  techniques:
  - annotations
  - custom-legend
  - patches
  patterns:
  - data-generation
  - columndatasource
  - iteration-over-groups
  - groupby-aggregation
  dataprep: []
  styling:
  - alpha-blending
  - edge-highlighting
  - minimal-chrome
