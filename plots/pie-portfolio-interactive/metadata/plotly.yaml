library: plotly
specification_id: pie-portfolio-interactive
created: '2026-01-20T23:09:02Z'
updated: '2026-01-20T23:11:47Z'
generated_by: claude-opus-4-5-20251101
workflow_run: 21190551591
issue: 3754
python_version: 3.13.11
library_version: 6.5.2
preview_url: https://storage.googleapis.com/pyplots-images/plots/pie-portfolio-interactive/plotly/plot.png
preview_thumb: https://storage.googleapis.com/pyplots-images/plots/pie-portfolio-interactive/plotly/plot_thumb.png
preview_html: https://storage.googleapis.com/pyplots-images/plots/pie-portfolio-interactive/plotly/plot.html
quality_score: 93
review:
  strengths:
  - Excellent use of Plotly interactive features with toggle buttons for switching
    between All Holdings and By Category views
  - Rich hover tooltips showing asset name, weight percentage, and category using
    customdata
  - Professional color scheme with consistent category-based coloring
  - Clean visual separation between slices using white borders and pull effect
  - Center annotation provides context (Portfolio Allocation)
  - Legend shows category totals for quick overview
  weaknesses:
  - Uses button-based view switching instead of true click-to-drill-down interaction
    on slices as specified
  - No random seed, though data is deterministic so reproducibility is maintained
  image_description: 'The plot displays an interactive donut chart visualizing a portfolio
    allocation with 10 holdings. The chart uses a 0.4 hole ratio with "Portfolio Allocation"
    text in the center. Holdings are arranged radially with labels positioned outside
    showing asset names and percentages (e.g., "Apple Inc. 15%", "US Treasury 10Y
    18%"). Colors are mapped by asset class: Python Blue (#306998) for Equities, Python
    Yellow (#FFD43B) for Fixed Income, Green (#4CAF50) for Alternatives, and Gray
    (#9E9E9E) for Cash. White borders (3px) separate slices for visual clarity. Interactive
    toggle buttons ("All Holdings" / "By Category") appear below the title. A legend
    on the right displays "Asset Class" with category totals (Equities 45.0%, Fixed
    Income 38.0%, Alternatives 13.0%, Cash 4.0%). The layout is clean with a white
    background.'
  criteria_checklist:
    visual_quality:
      score: 38
      max: 40
      items:
      - id: VQ-01
        name: Text Legibility
        score: 10
        max: 10
        passed: true
        comment: Title 28pt, labels 16pt, all perfectly readable
      - id: VQ-02
        name: No Overlap
        score: 8
        max: 8
        passed: true
        comment: Labels positioned outside with adequate spacing
      - id: VQ-03
        name: Element Visibility
        score: 7
        max: 8
        passed: true
        comment: Slices well-sized; smallest (4%) still visible but could be slightly
          larger
      - id: VQ-04
        name: Color Accessibility
        score: 5
        max: 5
        passed: true
        comment: Blue/Yellow/Green/Gray palette is colorblind-safe
      - id: VQ-05
        name: Layout Balance
        score: 4
        max: 5
        passed: true
        comment: Good use of canvas; slight imbalance with legend positioned far right
      - id: VQ-06
        name: Axis Labels
        score: 2
        max: 2
        passed: true
        comment: N/A for pie charts, labels are descriptive
      - id: VQ-07
        name: Grid & Legend
        score: 2
        max: 2
        passed: true
        comment: Legend well-placed with category totals
    spec_compliance:
      score: 23
      max: 25
      items:
      - id: SC-01
        name: Plot Type
        score: 8
        max: 8
        passed: true
        comment: Donut chart as specified
      - id: SC-02
        name: Data Mapping
        score: 5
        max: 5
        passed: true
        comment: Asset names, weights, categories correctly assigned
      - id: SC-03
        name: Required Features
        score: 4
        max: 5
        passed: true
        comment: Has hover tooltips, category grouping, view switching; missing click-to-drill-down
          (uses buttons instead)
      - id: SC-04
        name: Data Range
        score: 3
        max: 3
        passed: true
        comment: All data visible, weights sum to 100%
      - id: SC-05
        name: Legend Accuracy
        score: 2
        max: 2
        passed: true
        comment: Legend shows correct categories with totals
      - id: SC-06
        name: Title Format
        score: 2
        max: 2
        passed: true
        comment: Uses exact format {spec-id} · {library} · pyplots.ai
    data_quality:
      score: 19
      max: 20
      items:
      - id: DQ-01
        name: Feature Coverage
        score: 7
        max: 8
        passed: true
        comment: Shows diverse portfolio with 4 asset classes; could include more
          variety in allocation sizes
      - id: DQ-02
        name: Realistic Context
        score: 7
        max: 7
        passed: true
        comment: Realistic investment portfolio with real company names and sensible
          allocations
      - id: DQ-03
        name: Appropriate Scale
        score: 5
        max: 5
        passed: true
        comment: Weights are realistic (4-18% range, sum to 100%)
    code_quality:
      score: 8
      max: 10
      items:
      - id: CQ-01
        name: KISS Structure
        score: 3
        max: 3
        passed: true
        comment: 'Linear flow: imports → data → plot → save'
      - id: CQ-02
        name: Reproducibility
        score: 1
        max: 3
        passed: false
        comment: No random seed, but data is deterministic (hardcoded)
      - id: CQ-03
        name: Clean Imports
        score: 2
        max: 2
        passed: true
        comment: Only pandas and plotly used
      - id: CQ-04
        name: No Deprecated API
        score: 1
        max: 1
        passed: true
        comment: Current Plotly API
      - id: CQ-05
        name: Output Correct
        score: 1
        max: 1
        passed: true
        comment: Saves as plot.png and plot.html
    library_features:
      score: 5
      max: 5
      items:
      - id: LF-01
        name: Distinctive Features
        score: 5
        max: 5
        passed: true
        comment: Interactive buttons with updatemenus, hover tooltips with customdata,
          view switching, HTML export
  verdict: APPROVED
impl_tags:
  dependencies: []
  techniques:
  - hover-tooltips
  - custom-legend
  - html-export
  patterns:
  - groupby-aggregation
  dataprep: []
  styling:
  - edge-highlighting
