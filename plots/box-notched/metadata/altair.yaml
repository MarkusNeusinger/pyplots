library: altair
specification_id: box-notched
created: '2025-12-25T19:53:11Z'
updated: '2025-12-25T19:55:29Z'
generated_by: claude-opus-4-5-20251101
workflow_run: 20510123450
issue: 2019
python_version: 3.13.11
library_version: 6.0.0
preview_url: https://storage.googleapis.com/pyplots-images/plots/box-notched/altair/plot.png
preview_thumb: https://storage.googleapis.com/pyplots-images/plots/box-notched/altair/plot_thumb.png
preview_html: https://storage.googleapis.com/pyplots-images/plots/box-notched/altair/plot.html
quality_score: 91
impl_tags:
  dependencies: []
  techniques:
    - layer-composition
    - html-export
  patterns:
    - data-generation
    - iteration-over-groups
  dataprep: []
  styling: []
review:
  strengths:
  - Excellent manual implementation of notched box plots since Altair lacks native
    support
  - Clean layered construction using mark_bar, mark_tick, mark_rule, and mark_point
  - Correct notch calculation formula (±1.57 × IQR / √n)
  - Good use of color scale with Python-branded colors
  - Proper whisker calculation and outlier detection
  - Both PNG and HTML outputs generated
  weaknesses:
  - Sales data contains a value (~110) that exceeds typical 100-point performance
    score scale
  - Y-axis extends beyond necessary range (0-120 when data maxes at ~110)
  image_description: 'The plot displays four notched box plots representing employee
    performance scores across four departments: Engineering (Python blue #306998),
    Marketing (yellow #FFD43B), Operations (orange/red #E85C41), and Sales (light
    blue #4B8BBE). Each box shows the characteristic notched shape around the median,
    with white median lines visible inside the narrowed notch sections. Whiskers extend
    from Q1/Q3 to the furthest non-outlier values with horizontal caps. Outliers are
    displayed as colored circular points matching their department colors - Engineering
    has one low outlier (~57), Marketing has outliers at both extremes (~35 and ~97-98),
    Operations has one low outlier (~30), and Sales has one high outlier (~110). The
    title "box-notched · altair · pyplots.ai" is centered at the top. The Y-axis is
    labeled "Performance Score" (range 0-120) and the X-axis is labeled "Department".
    A subtle gray grid with low opacity aids readability.'
  criteria_checklist:
    visual_quality:
      score: 36
      max: 40
      items:
      - id: VQ-01
        name: Text Legibility
        score: 10
        max: 10
        passed: true
        comment: Title, axis labels, and tick marks are all clearly readable at large
          font sizes
      - id: VQ-02
        name: No Overlap
        score: 8
        max: 8
        passed: true
        comment: No overlapping text elements, department labels well-spaced
      - id: VQ-03
        name: Element Visibility
        score: 7
        max: 8
        passed: true
        comment: Boxes, notches, whiskers, and outliers all clearly visible; slight
          deduction as some outlier points could be slightly larger
      - id: VQ-04
        name: Color Accessibility
        score: 5
        max: 5
        passed: true
        comment: Blue, yellow, orange, light blue palette is colorblind-safe with
          good contrast
      - id: VQ-05
        name: Layout Balance
        score: 4
        max: 5
        passed: true
        comment: Good use of canvas space, though y-axis extends to 120 when data
          maxes around 110
      - id: VQ-06
        name: Axis Labels
        score: 1
        max: 2
        passed: true
        comment: Descriptive labels but no units (Performance Score could have context
          like "points" or "%" but acceptable for this metric)
      - id: VQ-07
        name: Grid & Legend
        score: 1
        max: 2
        passed: true
        comment: Grid is subtle and appropriate; no legend but colors differentiate
          categories adequately
    spec_compliance:
      score: 25
      max: 25
      items:
      - id: SC-01
        name: Plot Type
        score: 8
        max: 8
        passed: true
        comment: Correct notched box plot implementation
      - id: SC-02
        name: Data Mapping
        score: 5
        max: 5
        passed: true
        comment: Category on X-axis, numeric values on Y-axis as specified
      - id: SC-03
        name: Required Features
        score: 5
        max: 5
        passed: true
        comment: Notches at 95% CI, median, quartiles, whiskers at 1.5×IQR, outliers
          shown, different colors per category
      - id: SC-04
        name: Data Range
        score: 3
        max: 3
        passed: true
        comment: All data visible including outliers
      - id: SC-05
        name: Legend Accuracy
        score: 2
        max: 2
        passed: true
        comment: No legend needed; colors self-explanatory with axis labels
      - id: SC-06
        name: Title Format
        score: 2
        max: 2
        passed: true
        comment: 'Correct format: "box-notched · altair · pyplots.ai"'
    data_quality:
      score: 18
      max: 20
      items:
      - id: DQ-01
        name: Feature Coverage
        score: 8
        max: 8
        passed: true
        comment: Shows outliers (multiple departments), different medians, varying
          spreads, non-overlapping notches (Engineering vs Operations)
      - id: DQ-02
        name: Realistic Context
        score: 6
        max: 7
        passed: true
        comment: Employee performance scores across departments is plausible; slight
          deduction as Sales has value >100 which is unusual for a score typically
          capped at 100
      - id: DQ-03
        name: Appropriate Scale
        score: 4
        max: 5
        passed: true
        comment: Most values realistic (50-100 range); Sales outlier at ~110 exceeds
          typical 100-point scale
    code_quality:
      score: 9
      max: 10
      items:
      - id: CQ-01
        name: KISS Structure
        score: 2
        max: 3
        passed: true
        comment: Linear flow but uses loops for data preparation; acceptable given
          Altair lacks native notched box support
      - id: CQ-02
        name: Reproducibility
        score: 3
        max: 3
        passed: true
        comment: Uses np.random.seed(42)
      - id: CQ-03
        name: Clean Imports
        score: 2
        max: 2
        passed: true
        comment: 'Only necessary imports: altair, numpy, pandas'
      - id: CQ-04
        name: No Deprecated API
        score: 1
        max: 1
        passed: true
        comment: Uses current Altair API
      - id: CQ-05
        name: Output Correct
        score: 1
        max: 1
        passed: true
        comment: Saves as plot.png and plot.html
    library_features:
      score: 3
      max: 5
      items:
      - id: LF-01
        name: Uses distinctive library features
        score: 3
        max: 5
        passed: true
        comment: Good use of layered marks and declarative encoding, but since Altair
          lacks native notched box plots, the implementation manually calculates statistics
          rather than leveraging Altair's built-in statistical transforms
  verdict: APPROVED
