library: plotly
specification_id: alluvial-basic
created: '2025-12-26T10:37:52Z'
updated: '2025-12-26T10:40:11Z'
generated_by: claude-opus-4-5-20251101
workflow_run: 20520941774
issue: 1878
python_version: 3.13.11
library_version: 6.5.0
preview_url: https://storage.googleapis.com/pyplots-images/plots/alluvial-basic/plotly/plot.png
preview_thumb: https://storage.googleapis.com/pyplots-images/plots/alluvial-basic/plotly/plot_thumb.png
preview_html: https://storage.googleapis.com/pyplots-images/plots/alluvial-basic/plotly/plot.html
quality_score: 92
review:
  strengths:
  - Excellent alluvial/Sankey diagram implementation using Plotly go.Sankey
  - Clear visualization of voter migration patterns across 4 election cycles (2012-2024)
  - Consistent category colors across all time points with good transparency on flow
    links
  - Well-implemented custom hover templates showing detailed flow information
  - Proper title format following spec-id · library · pyplots.ai convention
  - Good use of annotations for year labels at top of each column
  - Horizontal legend at bottom is clean and non-intrusive
  - Realistic voter migration data with plausible transition patterns
  weaknesses:
  - Node labels on the bars are slightly small relative to the large canvas size -
    could be increased for better readability
  - The y-position ordering places Conservative at top but the visual shows it with
    largest bar - consider if ordering by size would improve readability
  image_description: 'The plot displays a Sankey/alluvial diagram showing voter migration
    between four political parties (Conservative, Liberal, Progressive, Independent)
    across four US election cycles (2012, 2016, 2020, 2024). The diagram has a white
    background with year labels at the top of each column in bold. Each party is represented
    by a distinct color: Conservative (blue #306998), Liberal (yellow #FFD43B), Progressive
    (green #2CA02C), and Independent (purple #9467BD). Vertical bars at each time
    point show the relative size of each party''s voter base, with semi-transparent
    flow bands connecting them to show voter migration patterns. The Conservative
    party (blue) has the largest node at each time point, positioned at the top. The
    flows show mostly stable voter retention with some cross-party movement. A horizontal
    legend at the bottom identifies each party color. The title "Voter Migration ·
    alluvial-basic · plotly · pyplots.ai" is centered at the top.'
  criteria_checklist:
    visual_quality:
      score: 36
      max: 40
      items:
      - id: VQ-01
        name: Text Legibility
        score: 8
        max: 10
        passed: true
        comment: Title and year labels are very readable; node labels on bars are
          slightly small but legible
      - id: VQ-02
        name: No Overlap
        score: 8
        max: 8
        passed: true
        comment: No overlapping text elements
      - id: VQ-03
        name: Element Visibility
        score: 8
        max: 8
        passed: true
        comment: Nodes and flow bands are appropriately sized and visible
      - id: VQ-04
        name: Color Accessibility
        score: 5
        max: 5
        passed: true
        comment: Four distinct colors that are colorblind-friendly (blue, yellow,
          green, purple)
      - id: VQ-05
        name: Layout Balance
        score: 5
        max: 5
        passed: true
        comment: Good use of canvas space, plot fills most of the area with balanced
          margins
      - id: VQ-06
        name: Axis Labels
        score: 0
        max: 2
        passed: true
        comment: N/A for Sankey/alluvial diagrams (no axes), but year labels serve
          similar purpose
      - id: VQ-07
        name: Grid & Legend
        score: 2
        max: 2
        passed: true
        comment: Clean horizontal legend, no grid needed for this chart type
    spec_compliance:
      score: 25
      max: 25
      items:
      - id: SC-01
        name: Plot Type
        score: 8
        max: 8
        passed: true
        comment: Correct alluvial/Sankey diagram implementation
      - id: SC-02
        name: Data Mapping
        score: 5
        max: 5
        passed: true
        comment: Time points as columns, categories as nodes, flows as connections
      - id: SC-03
        name: Required Features
        score: 5
        max: 5
        passed: true
        comment: 'All spec features present: time ordering, consistent colors, proportional
          band widths, transparency for flows'
      - id: SC-04
        name: Data Range
        score: 3
        max: 3
        passed: true
        comment: All 4 time points and 4 categories fully visible
      - id: SC-05
        name: Legend Accuracy
        score: 2
        max: 2
        passed: true
        comment: Legend correctly identifies all four parties
      - id: SC-06
        name: Title Format
        score: 2
        max: 2
        passed: true
        comment: Follows "{spec-id} · {library} · pyplots.ai" format correctly
    data_quality:
      score: 18
      max: 20
      items:
      - id: DQ-01
        name: Feature Coverage
        score: 7
        max: 8
        passed: true
        comment: Shows voter retention AND migration between parties, demonstrates
          the alluvial concept well
      - id: DQ-02
        name: Realistic Context
        score: 7
        max: 7
        passed: true
        comment: US voter migration is a perfect real-world use case for alluvial
          diagrams
      - id: DQ-03
        name: Appropriate Scale
        score: 4
        max: 5
        passed: true
        comment: Voter counts in hundreds are reasonable for a simplified model
    code_quality:
      score: 8
      max: 10
      items:
      - id: CQ-01
        name: KISS Structure
        score: 3
        max: 3
        passed: true
        comment: 'Linear flow: imports → data → plot → save'
      - id: CQ-02
        name: Reproducibility
        score: 2
        max: 3
        passed: true
        comment: Deterministic data (no random), but no explicit seed statement
      - id: CQ-03
        name: Clean Imports
        score: 2
        max: 2
        passed: true
        comment: Only plotly.graph_objects imported and used
      - id: CQ-04
        name: No Deprecated API
        score: 1
        max: 1
        passed: true
        comment: Uses current Plotly API
      - id: CQ-05
        name: Output Correct
        score: 0
        max: 1
        passed: true
        comment: Saves as plot.png AND plot.html (correct)
    library_features:
      score: 5
      max: 5
      items:
      - id: LF-01
        name: Distinctive Features
        score: 5
        max: 5
        passed: true
        comment: Excellent use of Plotly's go.Sankey with custom hover templates,
          node positioning, and interactive HTML export
  verdict: APPROVED
