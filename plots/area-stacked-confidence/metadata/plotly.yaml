library: plotly
specification_id: area-stacked-confidence
created: '2026-01-09T21:53:33Z'
updated: '2026-01-09T21:56:05Z'
generated_by: claude-opus-4-5-20251101
workflow_run: 20866593072
issue: 3549
python_version: 3.13.11
library_version: 6.5.1
preview_url: https://storage.googleapis.com/pyplots-images/plots/area-stacked-confidence/plotly/plot.png
preview_thumb: https://storage.googleapis.com/pyplots-images/plots/area-stacked-confidence/plotly/plot_thumb.png
preview_html: https://storage.googleapis.com/pyplots-images/plots/area-stacked-confidence/plotly/plot.html
quality_score: 91
review:
  strengths:
  - Excellent implementation of stacked confidence bands using the toself fill technique
  - Clean separation of band traces and central line traces with proper stacking order
  - Growing uncertainty over time effectively demonstrates forecast uncertainty concept
  - Well-structured code with clear data generation logic
  - Appropriate use of semi-transparent fills (0.25 for bands, 0.6 for areas)
  weaknesses:
  - Legend entry for 90% Confidence Band uses a gray line which does not match the
    actual colored bands shown in the plot
  - Could leverage more Plotly-specific features like rangeslider or animation
  image_description: The plot displays a stacked area chart showing energy consumption
    forecasts by source (Hydro, Wind, Solar) over quarterly periods from Q1 2020 to
    Q4 2024. The chart uses a Python-blue color (#306998) for Hydro at the bottom,
    yellow (#FFD43B) for Wind in the middle, and red (#E74C3C) for Solar at the top.
    Each stacked area has a semi-transparent confidence band surrounding it (approximately
    25% opacity), showing increasing uncertainty over time as expected for forecasts.
    The title correctly follows the format 'area-stacked-confidence 路 plotly 路 pyplots.ai'.
    The legend is positioned in the upper-left corner with a white background, clearly
    identifying each series plus a generic '90% Confidence Band' entry. The y-axis
    shows 'Energy Consumption (TWh)' ranging from 0 to ~400, and the x-axis shows
    'Quarter' with dates from Jul 2020 to Jul 2024. The overall layout is clean with
    a plotly_white template, subtle gridlines, and good use of the canvas area.
  criteria_checklist:
    visual_quality:
      score: 36
      max: 40
      items:
      - id: VQ-01
        name: Text Legibility
        score: 10
        max: 10
        passed: true
        comment: Title at 28pt, axis labels at 22pt, tick labels at 18pt - all clearly
          readable
      - id: VQ-02
        name: No Overlap
        score: 8
        max: 8
        passed: true
        comment: No overlapping text elements; legend positioned well away from data
      - id: VQ-03
        name: Element Visibility
        score: 7
        max: 8
        passed: true
        comment: Areas and confidence bands are clearly visible with good alpha values;
          line widths appropriate
      - id: VQ-04
        name: Color Accessibility
        score: 4
        max: 5
        passed: true
        comment: Blue/yellow/red palette is distinguishable but not fully colorblind-safe
      - id: VQ-05
        name: Layout Balance
        score: 5
        max: 5
        passed: true
        comment: Plot fills canvas well with balanced margins, legend nicely positioned
      - id: VQ-06
        name: Axis Labels
        score: 2
        max: 2
        passed: true
        comment: Y-axis has descriptive label with units, X-axis has Quarter
      - id: VQ-07
        name: Grid & Legend
        score: 0
        max: 2
        passed: false
        comment: Legend uses gray line to represent confidence bands which is misleading
    spec_compliance:
      score: 25
      max: 25
      items:
      - id: SC-01
        name: Plot Type
        score: 8
        max: 8
        passed: true
        comment: Correct stacked area chart with confidence bands
      - id: SC-02
        name: Data Mapping
        score: 5
        max: 5
        passed: true
        comment: X=time (quarters), Y=stacked cumulative values
      - id: SC-03
        name: Required Features
        score: 5
        max: 5
        passed: true
        comment: 'All features present: stacked areas, confidence bands, distinct
          colors, matching lighter shades for bands, legend'
      - id: SC-04
        name: Data Range
        score: 3
        max: 3
        passed: true
        comment: All data visible, y-axis starts at 0
      - id: SC-05
        name: Legend Accuracy
        score: 2
        max: 2
        passed: true
        comment: Legend correctly identifies Hydro, Wind, Solar, and confidence bands
      - id: SC-06
        name: Title Format
        score: 2
        max: 2
        passed: true
        comment: 'Correct format: area-stacked-confidence 路 plotly 路 pyplots.ai'
    data_quality:
      score: 18
      max: 20
      items:
      - id: DQ-01
        name: Feature Coverage
        score: 7
        max: 8
        passed: true
        comment: Shows stacking, confidence bands widening over time, multiple series
          with different growth rates
      - id: DQ-02
        name: Realistic Context
        score: 7
        max: 7
        passed: true
        comment: Energy consumption forecast by renewable source is a realistic, neutral
          scenario
      - id: DQ-03
        name: Appropriate Scale
        score: 4
        max: 5
        passed: true
        comment: Values in TWh are realistic for energy forecasts
    code_quality:
      score: 9
      max: 10
      items:
      - id: CQ-01
        name: KISS Structure
        score: 3
        max: 3
        passed: true
        comment: 'Clean linear structure: imports, data, traces, layout, save'
      - id: CQ-02
        name: Reproducibility
        score: 3
        max: 3
        passed: true
        comment: np.random.seed(42) used
      - id: CQ-03
        name: Clean Imports
        score: 2
        max: 2
        passed: true
        comment: Only numpy, pandas, plotly.graph_objects - all used
      - id: CQ-04
        name: No Deprecated API
        score: 1
        max: 1
        passed: true
        comment: Uses current plotly API
      - id: CQ-05
        name: Output Correct
        score: 0
        max: 1
        passed: false
        comment: Saves both plot.png and plot.html which is correct for plotly
    library_features:
      score: 3
      max: 5
      items:
      - id: LF-01
        name: Distinctive Features
        score: 3
        max: 5
        passed: true
        comment: Uses go.Scatter with fill toself for bands, plotly_white template,
          unified hover mode. Could use more interactive features.
  verdict: APPROVED
impl_tags:
  dependencies: []
  techniques:
  - layer-composition
  - hover-tooltips
  - html-export
  patterns:
  - data-generation
  - time-series
  dataprep:
  - cumulative-sum
  styling:
  - alpha-blending
  - grid-styling
