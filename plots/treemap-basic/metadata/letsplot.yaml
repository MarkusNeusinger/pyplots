library: letsplot
specification_id: treemap-basic
created: '2025-12-24T09:55:28Z'
updated: '2025-12-24T10:05:31Z'
generated_by: claude-opus-4-5-20251101
workflow_run: 20483450014
issue: 0
python_version: 3.13.11
library_version: 4.8.2
preview_url: https://storage.googleapis.com/pyplots-images/plots/treemap-basic/letsplot/plot.png
preview_thumb: https://storage.googleapis.com/pyplots-images/plots/treemap-basic/letsplot/plot_thumb.png
preview_html: https://storage.googleapis.com/pyplots-images/plots/treemap-basic/letsplot/plot.html
quality_score: 91
impl_tags:
  dependencies: []
  techniques:
  - layer-composition
  - html-export
  - custom-legend
  - annotations
  patterns:
  - data-generation
  - matrix-construction
  - iteration-over-groups
  dataprep: []
  styling:
  - alpha-blending
  - minimal-chrome
review:
  strengths:
  - Clean squarify algorithm implementation creates well-proportioned rectangles
  - Excellent color palette choice - visually appealing and colorblind-safe
  - Smart label sizing logic that adapts to rectangle dimensions
  - Proper title format following pyplots.ai conventions
  - White borders clearly delineate rectangle boundaries
  - Both PNG and HTML outputs generated correctly
  weaknesses:
  - Spec mentions subcategory hierarchy but implementation only shows single-level
    categories
  - Legend positioned far right creates visual imbalance with treemap on left side
  - Could leverage more lets-plot specific features for enhanced visualization
  image_description: The plot displays a treemap visualization showing corporate budget
    allocation across 8 departments. The largest rectangle is Engineering (32%) in
    Python blue (#306998), positioned on the left side occupying about a third of
    the canvas. Marketing (22%) appears as a prominent yellow rectangle in the upper
    right area. Sales (18%) is shown in green, Operations (12%) in coral/orange. Smaller
    departments HR (7%), Finance (5%), R&D (3%), and Legal (1%) are arranged in progressively
    smaller rectangles. White borders separate all rectangles clearly. Labels show
    department names and percentages in bold white text for larger rectangles, while
    smaller ones show only percentages. A legend titled "Department" is positioned
    on the right side listing all 8 categories with their corresponding colors. The
    title reads "Budget Allocation · treemap-basic · letsplot · pyplots.ai" at the
    top center.
  criteria_checklist:
    visual_quality:
      score: 36
      max: 40
      items:
      - id: VQ-01
        name: Text Legibility
        score: 9
        max: 10
        passed: true
        comment: Title and labels are readable, though some smaller rectangle labels
          could be slightly larger
      - id: VQ-02
        name: No Overlap
        score: 8
        max: 8
        passed: true
        comment: No overlapping text, labels are well-placed within rectangles
      - id: VQ-03
        name: Element Visibility
        score: 8
        max: 8
        passed: true
        comment: Rectangle sizes are well-proportioned and clearly visible
      - id: VQ-04
        name: Color Accessibility
        score: 5
        max: 5
        passed: true
        comment: Colorblind-safe palette with good contrast, colors are distinct
      - id: VQ-05
        name: Layout Balance
        score: 4
        max: 5
        passed: true
        comment: Good use of canvas space, though legend area creates some imbalance
          on the right
      - id: VQ-07
        name: Grid & Legend
        score: 2
        max: 2
        passed: true
        comment: Legend well-placed and clearly labeled
    spec_compliance:
      score: 25
      max: 25
      items:
      - id: SC-01
        name: Plot Type
        score: 8
        max: 8
        passed: true
        comment: Correct treemap visualization with nested rectangles
      - id: SC-02
        name: Data Mapping
        score: 5
        max: 5
        passed: true
        comment: Value correctly determines rectangle area
      - id: SC-03
        name: Required Features
        score: 5
        max: 5
        passed: true
        comment: Distinct colors for categories, labels for larger rectangles, borders
          between rectangles
      - id: SC-04
        name: Data Range
        score: 3
        max: 3
        passed: true
        comment: All 8 categories visible and proportionally represented
      - id: SC-05
        name: Legend Accuracy
        score: 2
        max: 2
        passed: true
        comment: Legend correctly shows all departments with accurate colors
      - id: SC-06
        name: Title Format
        score: 2
        max: 2
        passed: true
        comment: 'Correct format: "Budget Allocation · treemap-basic · letsplot ·
          pyplots.ai"'
    data_quality:
      score: 18
      max: 20
      items:
      - id: DQ-01
        name: Feature Coverage
        score: 7
        max: 8
        passed: true
        comment: Shows hierarchy well with varying sizes; missing subcategory hierarchy
          level mentioned in spec
      - id: DQ-02
        name: Realistic Context
        score: 7
        max: 7
        passed: true
        comment: Corporate budget allocation is a realistic, comprehensible scenario
      - id: DQ-03
        name: Appropriate Scale
        score: 4
        max: 5
        passed: true
        comment: Percentages sum to 100%, values are plausible for corporate budgets
    code_quality:
      score: 9
      max: 10
      items:
      - id: CQ-01
        name: KISS Structure
        score: 2
        max: 3
        passed: true
        comment: Contains helper functions (squarify, make_label) which add complexity,
          though necessary for treemap
      - id: CQ-02
        name: Reproducibility
        score: 3
        max: 3
        passed: true
        comment: Deterministic data, no random elements
      - id: CQ-03
        name: Clean Imports
        score: 2
        max: 2
        passed: true
        comment: All imports are used
      - id: CQ-04
        name: No Deprecated API
        score: 1
        max: 1
        passed: true
        comment: Uses current lets-plot API
      - id: CQ-05
        name: Output Correct
        score: 1
        max: 1
        passed: true
        comment: Saves as plot.png and plot.html
    library_features:
      score: 3
      max: 5
      items:
      - id: LF-01
        name: Distinctive Features
        score: 3
        max: 5
        passed: true
        comment: Uses ggplot2-style grammar appropriately with geom_rect and geom_text,
          but doesn't leverage any unique lets-plot features beyond basic ggplot syntax
  verdict: APPROVED
