library: matplotlib
specification_id: funnel-basic
created: '2025-12-23T13:02:34Z'
updated: '2025-12-23T13:09:06Z'
generated_by: claude-opus-4-5-20251101
workflow_run: 20461373659
issue: 0
python_version: 3.13.11
library_version: 3.10.8
preview_url: https://storage.googleapis.com/pyplots-images/plots/funnel-basic/matplotlib/plot.png
preview_thumb: https://storage.googleapis.com/pyplots-images/plots/funnel-basic/matplotlib/plot_thumb.png
preview_html: null
quality_score: 91
impl_tags:
  dependencies: []
  techniques:
  - patches
  - annotations
  patterns:
  - data-generation
  dataprep: []
  styling:
  - edge-highlighting
  - minimal-chrome
review:
  strengths:
  - Excellent trapezoid geometry calculation with proper width proportions relative
    to first stage value
  - Smart text color switching (white on dark backgrounds, black on light) for optimal
    readability
  - Clean use of matplotlib.patches.Polygon for custom shapes
  - Proper formatting with comma separators and percentage display
  - Follows KISS principle with straightforward linear code structure
  - Uses the exact example data from the specification
  weaknesses:
  - Does not leverage matplotlib's built-in horizontal bar functionality or other
    distinctive features that could simplify the code
  - Color palette uses similar blue shades for first two stages which reduces visual
    distinction
  image_description: 'The plot displays a funnel chart with 5 stages arranged vertically
    from top to bottom. The stages are: Awareness (1,000 - 100%), Interest (600 -
    60%), Consideration (400 - 40%), Intent (200 - 20%), and Purchase (100 - 10%).
    Each stage is rendered as a trapezoid segment that narrows progressively. The
    color scheme transitions from dark blue (#306998) at the top through lighter blue
    (#4A8BBF), yellow (#FFD43B), orange (#FFB347), to coral red (#FF6B6B) at the bottom.
    White edge lines separate each segment. Text labels are centered within each segment
    showing the stage name, count with comma formatting, and percentage. The top two
    stages use white text while the bottom three use black text for contrast. The
    title "funnel-basic · matplotlib · pyplots.ai" appears at the top in bold black
    text. The background is white.'
  criteria_checklist:
    visual_quality:
      score: 37
      max: 40
      items:
      - id: VQ-01
        name: Text Legibility
        score: 10
        max: 10
        passed: true
        comment: All text is clearly readable with appropriate font sizes (18pt for
          labels, 24pt for title)
      - id: VQ-02
        name: No Overlap
        score: 8
        max: 8
        passed: true
        comment: No overlapping text elements, all labels centered within their segments
      - id: VQ-03
        name: Element Visibility
        score: 8
        max: 8
        passed: true
        comment: Trapezoid segments are well-sized and clearly visible with good proportions
      - id: VQ-04
        name: Color Accessibility
        score: 4
        max: 5
        passed: true
        comment: Distinct colors for each stage, though the blue shades are similar;
          not purely red-green dependent
      - id: VQ-05
        name: Layout Balance
        score: 5
        max: 5
        passed: true
        comment: Plot fills canvas well with balanced margins, funnel is centered
      - id: VQ-06
        name: Axis Labels
        score: 0
        max: 2
        passed: true
        comment: N/A for funnel chart (axis is off), but labels on segments compensate
      - id: VQ-07
        name: Grid & Legend
        score: 2
        max: 2
        passed: true
        comment: No grid needed for funnel chart, no legend needed as labels are embedded
    spec_compliance:
      score: 25
      max: 25
      items:
      - id: SC-01
        name: Plot Type
        score: 8
        max: 8
        passed: true
        comment: Correct funnel chart with trapezoid segments narrowing from top to
          bottom
      - id: SC-02
        name: Data Mapping
        score: 5
        max: 5
        passed: true
        comment: Stages and values correctly mapped to segment widths and labels
      - id: SC-03
        name: Required Features
        score: 5
        max: 5
        passed: true
        comment: 'All spec features present: distinct colors, value/percentage labels,
          proportional widths'
      - id: SC-04
        name: Data Range
        score: 3
        max: 3
        passed: true
        comment: All 5 stages visible with appropriate proportions
      - id: SC-05
        name: Legend Accuracy
        score: 2
        max: 2
        passed: true
        comment: N/A (embedded labels serve this purpose effectively)
      - id: SC-06
        name: Title Format
        score: 2
        max: 2
        passed: true
        comment: 'Correct format: "funnel-basic · matplotlib · pyplots.ai"'
    data_quality:
      score: 19
      max: 20
      items:
      - id: DQ-01
        name: Feature Coverage
        score: 7
        max: 8
        passed: true
        comment: Shows progressive decrease across 5 stages; could show more dramatic
          variation between stages
      - id: DQ-02
        name: Realistic Context
        score: 7
        max: 7
        passed: true
        comment: Sales funnel scenario from spec is realistic and comprehensible
      - id: DQ-03
        name: Appropriate Scale
        score: 5
        max: 5
        passed: true
        comment: Values (1000 → 100) are realistic for a sales funnel
    code_quality:
      score: 10
      max: 10
      items:
      - id: CQ-01
        name: KISS Structure
        score: 3
        max: 3
        passed: true
        comment: 'Simple linear flow: imports → data → plot → save, no functions/classes'
      - id: CQ-02
        name: Reproducibility
        score: 3
        max: 3
        passed: true
        comment: Deterministic data (no random generation needed)
      - id: CQ-03
        name: Clean Imports
        score: 2
        max: 2
        passed: true
        comment: Only matplotlib.patches and matplotlib.pyplot are imported and used
      - id: CQ-04
        name: No Deprecated API
        score: 1
        max: 1
        passed: true
        comment: Uses current matplotlib API
      - id: CQ-05
        name: Output Correct
        score: 1
        max: 1
        passed: true
        comment: Saves as plot.png with dpi=300
    library_features:
      score: 0
      max: 5
      items:
      - id: LF-01
        name: Uses distinctive library features
        score: 0
        max: 5
        passed: false
        comment: Uses basic Polygon patches; could leverage matplotlib's more advanced
          features
  verdict: APPROVED
