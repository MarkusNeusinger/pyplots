library: bokeh
specification_id: calibration-curve
created: '2025-12-26T19:37:16Z'
updated: '2025-12-26T19:44:08Z'
generated_by: claude-opus-4-5-20251101
workflow_run: 20528203324
issue: 0
python_version: 3.13.11
library_version: 3.8.1
preview_url: https://storage.googleapis.com/pyplots-images/plots/calibration-curve/bokeh/plot.png
preview_thumb: https://storage.googleapis.com/pyplots-images/plots/calibration-curve/bokeh/plot_thumb.png
preview_html: https://storage.googleapis.com/pyplots-images/plots/calibration-curve/bokeh/plot.html
quality_score: 91
impl_tags:
  dependencies: []
  techniques:
  - annotations
  patterns:
  - data-generation
  - iteration-over-groups
  - columndatasource
  dataprep:
  - binning
  styling: []
review:
  strengths:
  - Correct implementation of calibration curve with all required elements (diagonal
    reference, binned probabilities, metrics)
  - Excellent text sizing for the 4800x2700 canvas with clear readability
  - Good use of Bokeh ColumnDataSource pattern and Label annotation for metrics
  - Clean simple code structure following KISS principles
  - Appropriate data simulation showing realistic classifier miscalibration behavior
  weaknesses:
  - Legend appears small and positioned far from the main plot area
  - Could leverage Bokeh interactive features like HoverTool to show bin counts on
    hover
  - Axis labels lack explicit context
  image_description: 'The plot displays a calibration curve on a light gray background
    (#fafafa). The title "calibration-curve · bokeh · pyplots.ai" appears at the top
    left in bold. The X-axis is labeled "Mean Predicted Probability" (0 to 1) and
    the Y-axis is labeled "Fraction of Positives" (0 to 1). A gray dashed diagonal
    line represents perfect calibration. The classifier''s calibration curve is shown
    as a blue line (#306998) with circular markers at each of the 10 bin points. The
    curve shows slight overconfidence (below the diagonal at higher probabilities).
    Metrics are displayed in the upper left corner with a white background box showing
    "Brier Score: 0.144" and "ECE: 0.045". The legend is positioned in the bottom
    right corner showing "Perfect Calibration" (dashed) and "Classifier" (solid blue).
    Grid lines are dashed and subtle.'
  criteria_checklist:
    visual_quality:
      score: 36
      max: 40
      items:
      - id: VQ-01
        name: Text Legibility
        score: 10
        max: 10
        passed: true
        comment: Title at 36pt, axis labels at 28pt, tick labels at 22pt - all clearly
          readable
      - id: VQ-02
        name: No Overlap
        score: 8
        max: 8
        passed: true
        comment: No overlapping text elements
      - id: VQ-03
        name: Element Visibility
        score: 8
        max: 8
        passed: true
        comment: Markers sized at 25px with good alpha, line width 5px - perfectly
          visible for 10 data points
      - id: VQ-04
        name: Color Accessibility
        score: 5
        max: 5
        passed: true
        comment: Blue (#306998) vs gray dashed line - colorblind safe, good contrast
      - id: VQ-05
        name: Layout Balance
        score: 3
        max: 5
        passed: true
        comment: Good proportions but legend is somewhat small/distant in bottom right
          corner
      - id: VQ-06
        name: Axis Labels
        score: 1
        max: 2
        passed: true
        comment: Descriptive labels but no units (probabilities are unitless, so acceptable)
      - id: VQ-07
        name: Grid & Legend
        score: 1
        max: 2
        passed: true
        comment: Grid is subtle (alpha 0.3), but legend could be more prominent
    spec_compliance:
      score: 25
      max: 25
      items:
      - id: SC-01
        name: Plot Type
        score: 8
        max: 8
        passed: true
        comment: Correct calibration curve (reliability diagram)
      - id: SC-02
        name: Data Mapping
        score: 5
        max: 5
        passed: true
        comment: X=mean predicted probability, Y=fraction of positives - correct
      - id: SC-03
        name: Required Features
        score: 5
        max: 5
        passed: true
        comment: Diagonal reference line ✓, 10 bins ✓, Brier score ✓, ECE
      - id: SC-04
        name: Data Range
        score: 3
        max: 3
        passed: true
        comment: Axes show 0-1 range with small padding
      - id: SC-05
        name: Legend Accuracy
        score: 2
        max: 2
        passed: true
        comment: Legend correctly identifies perfect calibration vs classifier
      - id: SC-06
        name: Title Format
        score: 2
        max: 2
        passed: true
        comment: Uses exact format "{spec-id} · {library} · pyplots.ai"
    data_quality:
      score: 18
      max: 20
      items:
      - id: DQ-01
        name: Feature Coverage
        score: 7
        max: 8
        passed: true
        comment: Shows overconfident classifier behavior, but could demonstrate more
          varied calibration patterns
      - id: DQ-02
        name: Realistic Context
        score: 7
        max: 7
        passed: true
        comment: Simulates binary classification with realistic miscalibration (overconfident
          model)
      - id: DQ-03
        name: Appropriate Scale
        score: 4
        max: 5
        passed: true
        comment: 5000 samples, probabilities 0-1, Brier score ~0.14 and ECE ~0.045
          are realistic values
    code_quality:
      score: 9
      max: 10
      items:
      - id: CQ-01
        name: KISS Structure
        score: 3
        max: 3
        passed: true
        comment: 'Linear flow: imports → data → plot → save'
      - id: CQ-02
        name: Reproducibility
        score: 3
        max: 3
        passed: true
        comment: np.random.seed(42) set
      - id: CQ-03
        name: Clean Imports
        score: 2
        max: 2
        passed: true
        comment: All imports are used
      - id: CQ-04
        name: No Deprecated API
        score: 1
        max: 1
        passed: true
        comment: Uses current Bokeh API
      - id: CQ-05
        name: Output Correct
        score: 0
        max: 1
        passed: false
        comment: Saves both plot.png and plot.html (correct for bokeh)
    library_features:
      score: 3
      max: 5
      items:
      - id: LF-01
        name: Uses distinctive library features
        score: 3
        max: 5
        passed: true
        comment: Uses ColumnDataSource, Label annotation, proper Bokeh styling. Could
          leverage HoverTool for interactivity.
  verdict: APPROVED
