library: matplotlib
specification_id: area-stacked-confidence
created: '2026-01-09T21:53:32Z'
updated: '2026-01-09T21:56:13Z'
generated_by: claude-opus-4-5-20251101
workflow_run: 20866593434
issue: 3549
python_version: 3.13.11
library_version: 3.10.8
preview_url: https://storage.googleapis.com/pyplots-images/plots/area-stacked-confidence/matplotlib/plot.png
preview_thumb: https://storage.googleapis.com/pyplots-images/plots/area-stacked-confidence/matplotlib/plot_thumb.png
preview_html: null
quality_score: 91
review:
  strengths:
  - Excellent implementation of the stacked area with confidence bands concept
  - Clear visual hierarchy with solid areas (alpha=0.8) and lighter confidence bands
    (alpha=0.25)
  - Well-chosen realistic data scenario (energy consumption by source)
  - Proper stacking of confidence bands relative to the stacked base values
  - Good use of center lines to delineate series boundaries
  - Clean, readable code structure
  weaknesses:
  - Legend does not explicitly show what the lighter bands represent (only mentioned
    in title)
  - Grid only on y-axis could benefit from subtle x-axis grid lines for time reference
  - Could use linewidth=0 more consistently or add edge lines to confidence bands
  image_description: The plot displays a stacked area chart showing energy consumption
    by source (Solar, Wind, Hydro, Natural Gas) from 2016 to 2024. Solar is at the
    bottom in yellow (#FFD43B), Wind stacked above in dark blue (#306998), Hydro in
    teal (#4ECDC4), and Natural Gas at the top in coral (#FF6B6B). Each series has
    visible lighter-shaded confidence bands surrounding the main area (approximately
    0.25 alpha). The title "area-stacked-confidence · matplotlib · pyplots.ai" is
    clearly displayed at the top. The x-axis shows quarterly dates, the y-axis shows
    "Energy Consumption (TWh)" ranging from 0-250. A legend in the upper left identifies
    each energy source and notes "with 90% CI bands". The plot shows seasonal oscillation
    patterns with solar and wind growing over time, hydro relatively stable, and natural
    gas declining. Confidence bands are visible as lighter shades extending above
    and below each stacked series boundary.
  criteria_checklist:
    visual_quality:
      score: 36
      max: 40
      items:
      - id: VQ-01
        name: Text Legibility
        score: 10
        max: 10
        passed: true
        comment: Title at 24pt, axis labels at 20pt, ticks at 16pt - all perfectly
          readable
      - id: VQ-02
        name: No Overlap
        score: 8
        max: 8
        passed: true
        comment: No overlapping text elements, x-axis dates are rotated and spaced
          well
      - id: VQ-03
        name: Element Visibility
        score: 7
        max: 8
        passed: true
        comment: Stacked areas and confidence bands are clearly visible, though some
          band edges blend slightly where series overlap
      - id: VQ-04
        name: Color Accessibility
        score: 4
        max: 5
        passed: true
        comment: Good color choices (yellow, blue, teal, coral), all distinguishable,
          though yellow and teal could be slightly more distinct
      - id: VQ-05
        name: Layout Balance
        score: 5
        max: 5
        passed: true
        comment: Excellent use of canvas, plot fills appropriately, legend positioned
          well in upper left
      - id: VQ-06
        name: Axis Labels
        score: 2
        max: 2
        passed: true
        comment: Both axes have descriptive labels with units
      - id: VQ-07
        name: Grid & Legend
        score: 0
        max: 2
        passed: false
        comment: Legend only shows the main series colors, not the confidence bands
          separately
    spec_compliance:
      score: 25
      max: 25
      items:
      - id: SC-01
        name: Plot Type
        score: 8
        max: 8
        passed: true
        comment: Correct stacked area chart with confidence bands
      - id: SC-02
        name: Data Mapping
        score: 5
        max: 5
        passed: true
        comment: Time on x-axis, consumption values stacked on y-axis
      - id: SC-03
        name: Required Features
        score: 5
        max: 5
        passed: true
        comment: Multiple stacked series with confidence bands, matching lighter shades
          for bands, semi-transparent fills
      - id: SC-04
        name: Data Range
        score: 3
        max: 3
        passed: true
        comment: All data visible, y-axis starts at 0, x-axis shows full time range
      - id: SC-05
        name: Legend Accuracy
        score: 2
        max: 2
        passed: true
        comment: Legend correctly identifies all four energy sources with CI band
          note in title
      - id: SC-06
        name: Title Format
        score: 2
        max: 2
        passed: true
        comment: 'Correct format: area-stacked-confidence · matplotlib · pyplots.ai'
    data_quality:
      score: 18
      max: 20
      items:
      - id: DQ-01
        name: Feature Coverage
        score: 7
        max: 8
        passed: true
        comment: Shows multiple series with different trends (growing solar/wind,
          stable hydro, declining gas), seasonal variation, and varying uncertainty
          levels
      - id: DQ-02
        name: Realistic Context
        score: 6
        max: 7
        passed: true
        comment: Energy consumption by source is a highly relevant real-world application;
          values are generally plausible though the declining gas trend is steep
      - id: DQ-03
        name: Appropriate Scale
        score: 5
        max: 5
        passed: true
        comment: Values in TWh are appropriate for quarterly energy data, 20-80 TWh
          per source is realistic
    code_quality:
      score: 9
      max: 10
      items:
      - id: CQ-01
        name: KISS Structure
        score: 3
        max: 3
        passed: true
        comment: Clean imports → data → plot → save structure, no functions/classes
      - id: CQ-02
        name: Reproducibility
        score: 3
        max: 3
        passed: true
        comment: np.random.seed(42) set at start
      - id: CQ-03
        name: Clean Imports
        score: 2
        max: 2
        passed: true
        comment: Only matplotlib, numpy, pandas imported, all used
      - id: CQ-04
        name: No Deprecated API
        score: 0
        max: 1
        passed: false
        comment: Uses freq='QE' which is newer syntax but could have compatibility
          issues with older pandas
      - id: CQ-05
        name: Output Correct
        score: 1
        max: 1
        passed: true
        comment: Saves as plot.png with correct parameters
    library_features:
      score: 3
      max: 5
      items:
      - id: LF-01
        name: Distinctive Features
        score: 3
        max: 5
        passed: true
        comment: Good use of fill_between for both stacked areas and confidence bands,
          autofmt_xdate for dates, but no advanced matplotlib features like custom
          patches or path effects
  verdict: APPROVED
impl_tags:
  dependencies: []
  techniques: []
  patterns:
  - data-generation
  - explicit-figure
  dataprep:
  - time-series
  - cumulative-sum
  styling:
  - alpha-blending
  - grid-styling
