library: plotnine
specification_id: map-connection-lines
created: '2026-01-21T16:30:11Z'
updated: '2026-01-21T16:32:54Z'
generated_by: claude-opus-4-5-20251101
workflow_run: 21217343754
issue: 3746
python_version: 3.13.11
library_version: 0.15.2
preview_url: https://storage.googleapis.com/pyplots-images/plots/map-connection-lines/plotnine/plot.png
preview_thumb: https://storage.googleapis.com/pyplots-images/plots/map-connection-lines/plotnine/plot_thumb.png
preview_html: null
quality_score: 91
review:
  strengths:
  - Excellent implementation of great circle arcs using custom path generation
  - Good use of plotnine grammar of graphics with multiple layers (continent polygons,
    flight paths, airport markers)
  - Effective color gradient showing passenger volume variation
  - Clean visual hierarchy with appropriate transparency on routes
  - Realistic flight route data with actual airport codes and plausible volumes
  - Well-sized markers and text for the 4800x2700 output
  weaknesses:
  - Grid lines are slightly too visible, competing with the flight route visualization
  - Line width variation is used but not explained in the legend
  - Helper function slightly deviates from KISS principle, though necessary for great
    circle calculation
  image_description: The plot displays a global flight routes map with connection
    lines between major international airports. The background shows simplified continent
    outlines in light gray (#E5E5E5) on a pale blue (#D4E8F7) background representing
    oceans. Flight routes are rendered as great circle arcs (curved lines) connecting
    15 airports marked with yellow circular markers with blue borders. The routes
    are color-coded using a yellow-to-red gradient representing passenger volume (1500-4200
    thousands/year), with thicker, more saturated red lines indicating higher traffic
    routes (like JFK-LHR). Line transparency varies by volume (alpha ~0.3-0.65). The
    title reads "Global Flight Routes · map-connection-lines · plotnine · pyplots.ai"
    in bold at the top. Axes show Longitude (°) and Latitude (°) with appropriate
    ranges (-180 to 180 longitude, -60 to 80 latitude). A color legend on the right
    shows the passenger volume scale.
  criteria_checklist:
    visual_quality:
      score: 37
      max: 40
      items:
      - id: VQ-01
        name: Text Legibility
        score: 10
        max: 10
        passed: true
        comment: Title is bold and large (~22pt), axis labels clear (~18pt), tick
          labels readable (~14pt)
      - id: VQ-02
        name: No Overlap
        score: 8
        max: 8
        passed: true
        comment: No text or element overlap issues
      - id: VQ-03
        name: Element Visibility
        score: 7
        max: 8
        passed: true
        comment: Airport markers and route lines are appropriately sized; some routes
          in congested areas slightly hard to distinguish
      - id: VQ-04
        name: Color Accessibility
        score: 5
        max: 5
        passed: true
        comment: Yellow-to-red gradient is colorblind-safe and distinguishes high/low
          values well
      - id: VQ-05
        name: Layout Balance
        score: 5
        max: 5
        passed: true
        comment: Good use of canvas with map centered, legend well-positioned
      - id: VQ-06
        name: Axis Labels
        score: 2
        max: 2
        passed: true
        comment: 'Descriptive with units: Longitude (°) and Latitude (°)'
      - id: VQ-07
        name: Grid & Legend
        score: 0
        max: 2
        passed: false
        comment: Grid is slightly too prominent and competes with flight routes
    spec_compliance:
      score: 23
      max: 25
      items:
      - id: SC-01
        name: Plot Type
        score: 8
        max: 8
        passed: true
        comment: 'Correct chart type: connection lines map with great circle arcs'
      - id: SC-02
        name: Data Mapping
        score: 5
        max: 5
        passed: true
        comment: Origin/destination coordinates correctly mapped, volume encoded in
          color and line width
      - id: SC-03
        name: Required Features
        score: 5
        max: 5
        passed: true
        comment: 'All spec features present: curved lines, location markers, base
          map, transparency, color encoding'
      - id: SC-04
        name: Data Range
        score: 3
        max: 3
        passed: true
        comment: Global coverage with appropriate lat/lon ranges
      - id: SC-05
        name: Legend Accuracy
        score: 1
        max: 2
        passed: false
        comment: Legend shows color scale but line width variation is not explained
      - id: SC-06
        name: Title Format
        score: 1
        max: 2
        passed: true
        comment: Uses correct format with spec-id
    data_quality:
      score: 18
      max: 20
      items:
      - id: DQ-01
        name: Feature Coverage
        score: 7
        max: 8
        passed: true
        comment: Shows variety of routes (short/long distance, different volumes),
          but routes are somewhat clustered in Northern Hemisphere
      - id: DQ-02
        name: Realistic Context
        score: 7
        max: 7
        passed: true
        comment: Real airports (JFK, LHR, CDG, etc.) with plausible passenger volumes
      - id: DQ-03
        name: Appropriate Scale
        score: 4
        max: 5
        passed: true
        comment: Passenger volumes are realistic (1400-4200K passengers/year)
    code_quality:
      score: 9
      max: 10
      items:
      - id: CQ-01
        name: KISS Structure
        score: 2
        max: 3
        passed: false
        comment: Code includes a helper function great_circle_path() which deviates
          from pure KISS pattern
      - id: CQ-02
        name: Reproducibility
        score: 3
        max: 3
        passed: true
        comment: Uses np.random.seed(42) for reproducibility
      - id: CQ-03
        name: Clean Imports
        score: 2
        max: 2
        passed: true
        comment: All imports are used
      - id: CQ-04
        name: No Deprecated API
        score: 1
        max: 1
        passed: true
        comment: No deprecated functions
      - id: CQ-05
        name: Output Correct
        score: 1
        max: 1
        passed: true
        comment: Saves as plot.png
    library_features:
      score: 4
      max: 5
      items:
      - id: LF-01
        name: Distinctive Features
        score: 4
        max: 5
        passed: true
        comment: 'Good use of plotnine grammar of graphics: layered geoms, aesthetic
          mappings, identity scales, coord_fixed, theme customization'
  verdict: APPROVED
impl_tags:
  dependencies: []
  techniques:
  - layer-composition
  - custom-colormap
  patterns:
  - data-generation
  - iteration-over-groups
  dataprep:
  - interpolation
  styling:
  - alpha-blending
  - grid-styling
