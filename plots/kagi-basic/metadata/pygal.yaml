library: pygal
specification_id: kagi-basic
created: '2026-01-08T22:59:40Z'
updated: '2026-01-08T23:08:10Z'
generated_by: claude-opus-4-5-20251101
workflow_run: 20834546928
issue: 3341
python_version: 3.13.11
library_version: 3.1.0
preview_url: https://storage.googleapis.com/pyplots-images/plots/kagi-basic/pygal/plot.png
preview_thumb: https://storage.googleapis.com/pyplots-images/plots/kagi-basic/pygal/plot_thumb.png
preview_html: https://storage.googleapis.com/pyplots-images/plots/kagi-basic/pygal/plot.html
quality_score: 72
review:
  strengths:
  - Correct Kagi chart algorithm implementation with proper reversal logic
  - Good use of green/red color coding for yang/yin as per spec
  - Appropriate title format and axis labels with units
  - Realistic stock price data generation with seed for reproducibility
  - Creative approach using SVG post-processing to attempt stroke width differentiation
  weaknesses:
  - Yang and yin lines appear with identical stroke widths in the final PNG output
    - the 36px vs 9px differentiation is not visible, which is the core visual feature
    of Kagi charts
  - Legend markers are extremely small colored dots that are hard to see
  - Code uses helper functions (apply_stroke_widths, fix_legend_markers) violating
    KISS principle
  - The pink/light red color for yin segments is too faded/light compared to the vibrant
    green for yang
  image_description: 'The plot displays a Kagi chart with the title "kagi-basic 路
    pygal 路 pyplots.ai" at the top. The chart shows price movements on the Y-axis
    labeled "Price ($)" ranging from approximately 82 to 112, and "Kagi Line Index"
    on the X-axis ranging from 0 to 20. The chart uses green lines for Yang (Bullish)
    segments and pink/light red lines for Yin (Bearish) segments. However, there is
    a critical visual problem: both yang and yin lines appear to have the same thin
    stroke width, making them visually indistinguishable by thickness. The spec requires
    thick lines for yang and thin lines for yin - this differentiation is not visible.
    The legend at the bottom shows "Yang (Bullish)" with a green marker and "Yin (Bearish)"
    with a pink/red marker. The chart correctly shows vertical price movements connected
    by horizontal segments, demonstrating reversals when price moves by the threshold
    amount. Grid lines are subtle and dashed.'
  criteria_checklist:
    visual_quality:
      score: 30
      max: 40
      items:
      - id: VQ-01
        name: Text Legibility
        score: 8
        max: 10
        passed: true
        comment: Title and axis labels readable, tick labels slightly small
      - id: VQ-02
        name: No Overlap
        score: 8
        max: 8
        passed: true
        comment: No overlapping text elements
      - id: VQ-03
        name: Element Visibility
        score: 4
        max: 8
        passed: false
        comment: Yang and Yin lines have same apparent stroke width despite code setting
          36px vs 9px; the thickness differentiation is not visible
      - id: VQ-04
        name: Color Accessibility
        score: 4
        max: 5
        passed: true
        comment: Green vs pink is distinguishable but pink is very light/faded
      - id: VQ-05
        name: Layout Balance
        score: 4
        max: 5
        passed: true
        comment: Good use of canvas, slight margin imbalance
      - id: VQ-06
        name: Axis Labels
        score: 2
        max: 2
        passed: true
        comment: Price ($) and Kagi Line Index are descriptive with units
      - id: VQ-07
        name: Grid & Legend
        score: 0
        max: 2
        passed: false
        comment: Legend markers are tiny colored dots, hard to see
    spec_compliance:
      score: 21
      max: 25
      items:
      - id: SC-01
        name: Plot Type
        score: 8
        max: 8
        passed: true
        comment: Correct Kagi chart structure with vertical/horizontal segments
      - id: SC-02
        name: Data Mapping
        score: 5
        max: 5
        passed: true
        comment: X shows line index, Y shows price correctly
      - id: SC-03
        name: Required Features
        score: 3
        max: 5
        passed: false
        comment: Missing visible thick/thin line differentiation as spec requires
      - id: SC-04
        name: Data Range
        score: 3
        max: 3
        passed: true
        comment: All data visible within axes
      - id: SC-05
        name: Legend Accuracy
        score: 0
        max: 2
        passed: false
        comment: Legend labels correct but markers are nearly invisible
      - id: SC-06
        name: Title Format
        score: 2
        max: 2
        passed: true
        comment: Correctly formatted as kagi-basic 路 pygal 路 pyplots.ai
    data_quality:
      score: 16
      max: 20
      items:
      - id: DQ-01
        name: Feature Coverage
        score: 6
        max: 8
        passed: true
        comment: Shows both bullish and bearish segments, multiple reversals, but
          thickness differentiation missing
      - id: DQ-02
        name: Realistic Context
        score: 7
        max: 7
        passed: true
        comment: Stock price simulation is realistic and neutral
      - id: DQ-03
        name: Appropriate Scale
        score: 3
        max: 5
        passed: true
        comment: Price range 82-112 is plausible but limited variation
    code_quality:
      score: 8
      max: 10
      items:
      - id: CQ-01
        name: KISS Structure
        score: 1
        max: 3
        passed: false
        comment: Has functions (apply_stroke_widths, fix_legend_markers) which violates
          KISS principle
      - id: CQ-02
        name: Reproducibility
        score: 3
        max: 3
        passed: true
        comment: np.random.seed(42) is set
      - id: CQ-03
        name: Clean Imports
        score: 2
        max: 2
        passed: true
        comment: All imports are used
      - id: CQ-04
        name: No Deprecated API
        score: 1
        max: 1
        passed: true
        comment: Using current pygal API
      - id: CQ-05
        name: Output Correct
        score: 1
        max: 1
        passed: true
        comment: Saves as plot.png
    library_features:
      score: 3
      max: 5
      items:
      - id: LF-01
        name: Distinctive Features
        score: 3
        max: 5
        passed: true
        comment: Uses pygal XY chart, custom Style, SVG post-processing with cairosvg;
          stroke-width manipulation not rendering correctly
  verdict: REJECTED
impl_tags:
  dependencies:
  - cairosvg
  techniques:
  - html-export
  patterns:
  - data-generation
  - iteration-over-groups
  dataprep: []
  styling:
  - grid-styling
