library: plotly
specification_id: heatmap-correlation
created: '2025-12-26T10:03:27Z'
updated: '2025-12-26T10:07:44Z'
generated_by: claude-opus-4-5-20251101
workflow_run: 20520464675
issue: 1948
python_version: 3.13.11
library_version: 6.5.0
preview_url: https://storage.googleapis.com/pyplots-images/plots/heatmap-correlation/plotly/plot.png
preview_thumb: https://storage.googleapis.com/pyplots-images/plots/heatmap-correlation/plotly/plot_thumb.png
preview_html: https://storage.googleapis.com/pyplots-images/plots/heatmap-correlation/plotly/plot.html
quality_score: 92
impl_tags:
  dependencies: []
  techniques:
  - colorbar
  - annotations
  - hover-tooltips
  - html-export
  patterns:
  - data-generation
  - matrix-construction
  - iteration-over-groups
  dataprep:
  - correlation-matrix
  styling:
  - custom-colormap
review:
  strengths:
  - Excellent diverging RdBu colorscale centered at zero for intuitive correlation
    interpretation
  - Lower triangle masking eliminates redundancy while maintaining readability
  - Dynamic text color (white/black) based on background intensity ensures legibility
  - Rich interactive hover tooltips with correlation strength interpretation
  - Realistic financial metrics scenario with meaningful correlation relationships
  - Proper colorbar with fixed -1 to 1 range and clear tick marks
  weaknesses:
  - X-axis labels are rotated 45 degrees which works but could be cleaner with horizontal
    orientation for this number of variables
  image_description: The plot displays a lower-triangular correlation matrix heatmap
    with 8 financial metrics (Revenue, Profit, Expenses, Assets, Debt, ROI, Growth,
    Risk). The colorscale uses a red-white-blue diverging scheme (RdBu_r) where dark
    red indicates strong positive correlations (e.g., Revenue-Profit at 0.93), white
    indicates near-zero correlations, and blue indicates negative correlations (e.g.,
    ROI-Risk at -0.41). Each cell shows the correlation coefficient to 2 decimal places
    with dynamic text coloring (white text on dark backgrounds, black on light). The
    diagonal shows 1.00 values. Variable names appear on both axes with the x-axis
    labels rotated 45 degrees. A colorbar on the right labeled "Pearson Correlation"
    shows the scale from -1 to 1. The title correctly follows the format "heatmap-correlation
    · plotly · pyplots.ai".
  criteria_checklist:
    visual_quality:
      score: 36
      max: 40
      items:
      - id: VQ-01
        name: Text Legibility
        score: 10
        max: 10
        passed: true
        comment: Title 32pt, axis titles 24pt, tick labels 18pt, annotations 18pt
          - all clearly readable
      - id: VQ-02
        name: No Overlap
        score: 8
        max: 8
        passed: true
        comment: No overlapping text, all labels fully readable
      - id: VQ-03
        name: Element Visibility
        score: 8
        max: 8
        passed: true
        comment: Heatmap cells well-sized, correlation values clearly visible
      - id: VQ-04
        name: Color Accessibility
        score: 5
        max: 5
        passed: true
        comment: RdBu diverging colorscale is colorblind-safe
      - id: VQ-05
        name: Layout Balance
        score: 3
        max: 5
        passed: true
        comment: Good proportions but slight imbalance with empty upper triangle space
      - id: VQ-06
        name: Axis Labels
        score: 2
        max: 2
        passed: true
        comment: Descriptive labels "Financial Metrics" on both axes
      - id: VQ-07
        name: Grid & Legend
        score: 0
        max: 2
        passed: true
        comment: No explicit grid (appropriate for heatmap), colorbar well-positioned
    spec_compliance:
      score: 25
      max: 25
      items:
      - id: SC-01
        name: Plot Type
        score: 8
        max: 8
        passed: true
        comment: Correct heatmap correlation matrix
      - id: SC-02
        name: Data Mapping
        score: 5
        max: 5
        passed: true
        comment: Variables correctly on both axes, symmetric matrix
      - id: SC-03
        name: Required Features
        score: 5
        max: 5
        passed: true
        comment: Diverging colormap centered at zero ✓, annotations with 2 decimal
          places ✓, lower triangle masking ✓, colorbar range -1 to 1
      - id: SC-04
        name: Data Range
        score: 3
        max: 3
        passed: true
        comment: Colorbar shows full -1 to 1 range
      - id: SC-05
        name: Legend Accuracy
        score: 2
        max: 2
        passed: true
        comment: Colorbar labeled "Pearson Correlation" with clear tick marks
      - id: SC-06
        name: Title Format
        score: 2
        max: 2
        passed: true
        comment: Correct format "heatmap-correlation · plotly · pyplots.ai"
    data_quality:
      score: 19
      max: 20
      items:
      - id: DQ-01
        name: Feature Coverage
        score: 8
        max: 8
        passed: true
        comment: 'Shows full range: strong positive (0.93), moderate positive (0.44),
          weak (0.07), negative correlations (-0.41, -0.20)'
      - id: DQ-02
        name: Realistic Context
        score: 7
        max: 7
        passed: true
        comment: Financial metrics correlation is a real, comprehensible scenario
          (Revenue/Profit highly correlated, Risk negatively correlated with ROI)
      - id: DQ-03
        name: Appropriate Scale
        score: 4
        max: 5
        passed: true
        comment: Correlation values realistic but some relationships (Expenses~Revenue
          0.73) might be stronger than typical
    code_quality:
      score: 9
      max: 10
      items:
      - id: CQ-01
        name: KISS Structure
        score: 3
        max: 3
        passed: true
        comment: 'Linear script: imports → data → plot → save'
      - id: CQ-02
        name: Reproducibility
        score: 3
        max: 3
        passed: true
        comment: '`np.random.seed(42)` set'
      - id: CQ-03
        name: Clean Imports
        score: 2
        max: 2
        passed: true
        comment: Only numpy and plotly.graph_objects imported and used
      - id: CQ-04
        name: No Deprecated API
        score: 1
        max: 1
        passed: true
        comment: Uses current Plotly API
      - id: CQ-05
        name: Output Correct
        score: 0
        max: 1
        passed: true
        comment: Saves plot.png but comment mentions 4800x2700 while actual is 4800x2700
          (1600x900 * scale=3)
    library_features:
      score: 3
      max: 5
      items:
      - id: LF-01
        name: Distinctive Features
        score: 3
        max: 5
        passed: true
        comment: 'Good use of Plotly features: custom hover templates with correlation
          strength interpretation, HTML export for interactivity, but could leverage
          more interactive features like click events'
  verdict: APPROVED
