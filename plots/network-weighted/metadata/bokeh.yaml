library: bokeh
specification_id: network-weighted
created: '2026-01-08T15:57:06Z'
updated: '2026-01-08T16:13:42Z'
generated_by: claude-opus-4-5-20251101
workflow_run: 20822854400
issue: 3290
python_version: 3.13.11
library_version: 3.8.2
preview_url: https://storage.googleapis.com/pyplots-images/plots/network-weighted/bokeh/plot.png
preview_thumb: https://storage.googleapis.com/pyplots-images/plots/network-weighted/bokeh/plot_thumb.png
preview_html: https://storage.googleapis.com/pyplots-images/plots/network-weighted/bokeh/plot.html
quality_score: 90
review:
  strengths:
  - 'Excellent use of Bokeh-specific features: HoverTool shows country and total trade
    on hover, ColumnDataSource for efficient data handling'
  - Force-directed layout implementation creates natural node positioning with regional
    clustering
  - Edge thickness clearly communicates weight differences (thin 2px for weak, thick
    20px for strong connections)
  - Professional legend explains the weight scale with three reference values
  - Dual output (PNG + HTML) maximizes utility - static for docs, interactive for
    web
  - Node sizing by weighted degree immediately identifies major trade hubs (USA, China)
  weaknesses:
  - Minor label-edge overlap in central dense area (around Japan label)
  - Force-directed layout algorithm is custom and somewhat simplistic (100 iterations);
    could use more iterations or better spring constants for optimal positioning
  image_description: The plot displays a weighted network graph showing international
    trade relationships between 15 countries. Yellow circular nodes with dark blue
    outlines represent countries (USA, China, Germany, Japan, UK, France, Canada,
    Mexico, Brazil, India, S. Korea, Australia, Singapore, Netherlands, Switzerland).
    Edges are rendered in blue (#306998) with varying thickness proportional to trade
    volume in billions USD - thicker lines indicate stronger trade relationships.
    The USA-Mexico and USA-Canada edges are notably thick (representing ~620-680B
    USD trade), while edges like Brazil-India are thin (~40B USD). Node sizes scale
    with weighted degree, making USA and China the largest nodes as major trade hubs.
    A legend in the top-left corner shows "Trade Volume (B USD)" with three reference
    lines (40, 360, 680). The title "network-weighted 路 bokeh 路 pyplots.ai" appears
    centered at the top. The force-directed layout positions nodes to minimize edge
    crossings while showing regional clustering (European countries together, Asian
    countries together).
  criteria_checklist:
    visual_quality:
      score: 36
      max: 40
      items:
      - id: VQ-01
        name: Text Legibility
        score: 10
        max: 10
        passed: true
        comment: Title at 32pt, labels at 16pt, legend text at 18-22pt - all clearly
          readable at full resolution
      - id: VQ-02
        name: No Overlap
        score: 7
        max: 8
        passed: true
        comment: Minor overlap where node labels intersect with edges in dense areas,
          but text remains readable
      - id: VQ-03
        name: Element Visibility
        score: 8
        max: 8
        passed: true
        comment: Node sizes (30-80) and edge widths (2-20) are well-adapted to the
          network density; alpha blending helps distinguish overlapping edges
      - id: VQ-04
        name: Color Accessibility
        score: 5
        max: 5
        passed: true
        comment: Blue (#306998) and yellow (#FFD43B) provide excellent contrast; single
          color scheme with alpha variation is colorblind-safe
      - id: VQ-05
        name: Layout Balance
        score: 4
        max: 5
        passed: true
        comment: Good canvas utilization with network centered; slight asymmetry with
          more whitespace on left/bottom
      - id: VQ-06
        name: Axis Labels
        score: 0
        max: 2
        passed: true
        comment: N/A for network graphs (axes intentionally hidden)
      - id: VQ-07
        name: Grid & Legend
        score: 2
        max: 2
        passed: true
        comment: Legend well-placed in corner, shows three weight levels; no distracting
          grid
    spec_compliance:
      score: 25
      max: 25
      items:
      - id: SC-01
        name: Plot Type
        score: 8
        max: 8
        passed: true
        comment: Correct weighted network graph with edge thickness encoding weight
      - id: SC-02
        name: Data Mapping
        score: 5
        max: 5
        passed: true
        comment: Nodes represent entities, edges represent relationships, thickness
          encodes weight
      - id: SC-03
        name: Required Features
        score: 5
        max: 5
        passed: true
        comment: 'All spec features present: weighted edges, node sizing by weighted
          degree, force-directed layout, legend explaining weight scale'
      - id: SC-04
        name: Data Range
        score: 3
        max: 3
        passed: true
        comment: All 15 nodes and 25 edges visible within canvas bounds
      - id: SC-05
        name: Legend Accuracy
        score: 2
        max: 2
        passed: true
        comment: Legend correctly shows weight scale from 40 to 680 B USD
      - id: SC-06
        name: Title Format
        score: 2
        max: 2
        passed: true
        comment: Uses correct format network-weighted 路 bokeh 路 pyplots.ai
    data_quality:
      score: 18
      max: 20
      items:
      - id: DQ-01
        name: Feature Coverage
        score: 7
        max: 8
        passed: true
        comment: Shows variety of edge weights (40-680), different node sizes, regional
          clustering; could have more isolated/peripheral nodes for contrast
      - id: DQ-02
        name: Realistic Context
        score: 7
        max: 7
        passed: true
        comment: International trade network is realistic; country pairs and trade
          volumes are plausible
      - id: DQ-03
        name: Appropriate Scale
        score: 4
        max: 5
        passed: true
        comment: Trade volumes in billions USD are appropriate; some values slightly
          stylized but within realistic range
    code_quality:
      score: 9
      max: 10
      items:
      - id: CQ-01
        name: KISS Structure
        score: 2
        max: 3
        passed: true
        comment: Code is mostly flat but has nested loops for force-directed layout;
          acceptable for this complex visualization
      - id: CQ-02
        name: Reproducibility
        score: 3
        max: 3
        passed: true
        comment: Uses np.random.seed(42) for deterministic layout
      - id: CQ-03
        name: Clean Imports
        score: 2
        max: 2
        passed: true
        comment: 'All imports used: numpy, bokeh components'
      - id: CQ-04
        name: No Deprecated API
        score: 1
        max: 1
        passed: true
        comment: Uses current Bokeh 3.x API
      - id: CQ-05
        name: Output Correct
        score: 1
        max: 1
        passed: true
        comment: Saves as plot.png and plot.html
    library_features:
      score: 5
      max: 5
      items:
      - id: LF-01
        name: Distinctive Features
        score: 5
        max: 5
        passed: true
        comment: 'Excellent use of Bokeh features: ColumnDataSource, HoverTool for
          interactive tooltips, LabelSet for node labels, segment glyphs with round
          caps, HTML export for interactivity'
  verdict: APPROVED
impl_tags:
  dependencies: []
  techniques:
  - hover-tooltips
  - annotations
  - custom-legend
  - html-export
  patterns:
  - data-generation
  - columndatasource
  - iteration-over-groups
  dataprep:
  - normalization
  styling:
  - minimal-chrome
  - alpha-blending
  - edge-highlighting
