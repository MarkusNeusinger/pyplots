library: bokeh
specification_id: map-animated-temporal
created: '2026-01-20T19:45:19Z'
updated: '2026-01-20T19:48:41Z'
generated_by: claude-opus-4-5-20251101
workflow_run: 21184844062
issue: 3769
python_version: 3.13.11
library_version: 3.8.2
preview_url: https://storage.googleapis.com/pyplots-images/plots/map-animated-temporal/bokeh/plot.png
preview_thumb: https://storage.googleapis.com/pyplots-images/plots/map-animated-temporal/bokeh/plot_thumb.png
preview_html: https://storage.googleapis.com/pyplots-images/plots/map-animated-temporal/bokeh/plot.html
quality_score: 88
review:
  strengths:
  - Excellent use of Bokeh interactive features (CustomJS callbacks, Slider, Play/Pause
    button)
  - Good temporal visualization with cumulative display and alpha fading for older
    points
  - Realistic earthquake aftershock scenario with appropriate magnitude-based sizing
  - Proper hover tooltips showing location and magnitude
  - Clean code structure following KISS principles
  weaknesses:
  - Basemap is oversimplified - just a single polyline coastline approximation rather
    than proper geographic tiles or boundaries
  - Legend positioning in bottom-right corner appears somewhat isolated from the main
    visualization
  - The static PNG export only captures Day 0 state, which shows a tight cluster -
    the temporal spread is only visible in the HTML animation
  image_description: 'The plot displays an earthquake aftershock sequence visualization
    on a geographic map covering the Japan region (longitude 130-150°, latitude 28-42°).
    The static PNG shows Day 0 of the animation with approximately 25 blue circular
    markers clustered tightly around the epicenter location (35°N, 140°E). A yellow
    star marker indicates the main earthquake epicenter. A simplified gray coastline
    approximation runs through the plot area providing geographic context. Faint gray
    grid lines at 2-degree intervals help with spatial orientation. The title "Earthquake
    Aftershock Sequence · map-animated-temporal · bokeh · pyplots.ai" appears at the
    top. A "Day: 0" label in blue bold text is positioned in the upper-left area.
    The legend in the bottom-right shows "Epicenter" (star) and "Aftershocks" (circle)
    entries. Axis labels show "Longitude" and "Latitude". The markers have varying
    sizes based on magnitude and use alpha blending for temporal fading effects.'
  criteria_checklist:
    visual_quality:
      score: 35
      max: 40
      items:
      - id: VQ-01
        name: Text Legibility
        score: 9
        max: 10
        passed: true
        comment: Title at 32pt, axis labels at 24pt, tick labels at 18pt are readable,
          but could be slightly larger for optimal 4800px viewing
      - id: VQ-02
        name: No Overlap
        score: 8
        max: 8
        passed: true
        comment: No overlapping text elements
      - id: VQ-03
        name: Element Visibility
        score: 7
        max: 8
        passed: true
        comment: Markers visible with good sizing based on magnitude, alpha blending
          effective, but Day 0 cluster is quite tight
      - id: VQ-04
        name: Color Accessibility
        score: 5
        max: 5
        passed: true
        comment: Blue markers with yellow star are colorblind-safe, good contrast
      - id: VQ-05
        name: Layout Balance
        score: 3
        max: 5
        passed: true
        comment: Data clustered in center, large empty areas on edges; coastline only
          partial
      - id: VQ-06
        name: Axis Labels
        score: 2
        max: 2
        passed: true
        comment: Longitude and Latitude are descriptive
      - id: VQ-07
        name: Grid & Legend
        score: 1
        max: 2
        passed: false
        comment: Grid is subtle (alpha 0.3), but legend positioned far in corner,
          somewhat isolated
    spec_compliance:
      score: 22
      max: 25
      items:
      - id: SC-01
        name: Plot Type
        score: 8
        max: 8
        passed: true
        comment: Correct animated temporal map with geographic visualization
      - id: SC-02
        name: Data Mapping
        score: 5
        max: 5
        passed: true
        comment: Lat/lon correctly mapped, timestamp drives animation
      - id: SC-03
        name: Required Features
        score: 4
        max: 5
        passed: true
        comment: Has play/pause controls, slider, timestamp display, but basemap is
          very simplified (single coastline approximation rather than proper geographic
          context)
      - id: SC-04
        name: Data Range
        score: 3
        max: 3
        passed: true
        comment: Axes show all data points appropriately
      - id: SC-05
        name: Legend Accuracy
        score: 0
        max: 2
        passed: false
        comment: Legend shows Epicenter and Aftershocks but the star marker for epicenter
          is not visible in the legend in the PNG (appears cut off or too small)
      - id: SC-06
        name: Title Format
        score: 2
        max: 2
        passed: true
        comment: Correctly uses description · spec-id · library · pyplots.ai format
    data_quality:
      score: 18
      max: 20
      items:
      - id: DQ-01
        name: Feature Coverage
        score: 7
        max: 8
        passed: true
        comment: Shows spreading pattern over time, magnitude-based sizing, cumulative
          display, but PNG only shows Day 0 initial state
      - id: DQ-02
        name: Realistic Context
        score: 7
        max: 7
        passed: true
        comment: Earthquake aftershock sequence is a perfect, realistic, neutral scientific
          scenario
      - id: DQ-03
        name: Appropriate Scale
        score: 4
        max: 5
        passed: true
        comment: Coordinates realistic for Japan, magnitudes 2-5 are appropriate,
          but spread calculation could produce points outside typical aftershock zones
    code_quality:
      score: 10
      max: 10
      items:
      - id: CQ-01
        name: KISS Structure
        score: 3
        max: 3
        passed: true
        comment: Follows imports → data → plot → save structure, no unnecessary functions/classes
      - id: CQ-02
        name: Reproducibility
        score: 3
        max: 3
        passed: true
        comment: Uses np.random.seed(42)
      - id: CQ-03
        name: Clean Imports
        score: 2
        max: 2
        passed: true
        comment: All imports are used
      - id: CQ-04
        name: No Deprecated API
        score: 1
        max: 1
        passed: true
        comment: Uses current Bokeh API
      - id: CQ-05
        name: Output Correct
        score: 1
        max: 1
        passed: true
        comment: Saves as plot.png and plot.html
    library_features:
      score: 3
      max: 5
      items:
      - id: LF-01
        name: Distinctive Features
        score: 3
        max: 5
        passed: true
        comment: Uses Bokeh ColumnDataSource, CustomJS callbacks, Slider and Button
          widgets, HoverTool for interactivity - good use of Bokeh strengths, but
          could leverage more advanced features like tile providers for real basemaps
  verdict: REJECTED
impl_tags:
  dependencies: []
  techniques:
  - hover-tooltips
  - html-export
  - annotations
  patterns:
  - data-generation
  - columndatasource
  - iteration-over-groups
  dataprep: []
  styling:
  - alpha-blending
  - grid-styling
