library: bokeh
specification_id: pie-drilldown
created: '2025-12-31T14:08:22Z'
updated: '2025-12-31T15:05:37Z'
generated_by: claude-opus-4-5-20251101
workflow_run: 20620528667
issue: 3072
python_version: 3.13.11
library_version: 3.8.1
preview_url: https://storage.googleapis.com/pyplots-images/plots/pie-drilldown/bokeh/plot.png
preview_thumb: https://storage.googleapis.com/pyplots-images/plots/pie-drilldown/bokeh/plot_thumb.png
preview_html: https://storage.googleapis.com/pyplots-images/plots/pie-drilldown/bokeh/plot.html
quality_score: 72
impl_tags:
  dependencies: []
  techniques:
  - html-export
  - hover-tooltips
  patterns:
  - data-generation
  - matrix-construction
  dataprep: []
  styling: []
review:
  strengths:
  - Good canvas utilization with large 3600x3600 square format - pie chart fills significant
    portion of canvas
  - Clear hierarchical data structure representing realistic company expense breakdown
    (Operations, Marketing, Research, HR)
  - Labels are legible with white text on colored slices showing name, value, and
    percentage
  - Includes breadcrumb navigation text and click indicator for interactive functionality
  - Uses colorblind-friendly palette with good contrast between adjacent slices
  - Correct title format following spec-id · library · pyplots.ai convention
  weaknesses:
  - Only two colors visible (green and red) - the yellow from the color palette is
    not appearing, limiting color differentiation between categories
  - Red and green adjacency is not ideal for colorblind users despite being different
    shades
  - The Human Resources slice label text is partially difficult to read due to smaller
    slice size and label positioning
  image_description: 'The plot displays a pie chart for "Total Expenses" with 4 slices
    representing company departments. The title "pie-drilldown · bokeh · pyplots.ai"
    appears at the top in blue. A breadcrumb showing "Total Expenses" is positioned
    above the pie. The four slices are:

    - **Operations**: $1320K (34.1%) - Large teal/green slice on the right

    - **Marketing**: $900K (23.3%) - Teal/green slice at the bottom

    - **Research**: $1000K (25.8%) - Pink/magenta slice on the left

    - **Human Resources**: $650K (16.8%) - Coral/red slice at the top-left


    Each slice has white bold text labels showing category name, dollar value, and
    percentage. The text "Click a slice to drill down" appears at the bottom in gray.
    The background is a light off-white (#fafafa). The pie chart is well-proportioned
    and fills a good portion of the canvas (square 3600x3600 format).'
  criteria_checklist:
    visual_quality:
      score: 33
      max: 40
      items:
      - id: VQ-01
        name: Text Legibility
        score: 8
        max: 10
        passed: true
        comment: Labels are readable with 30pt bold font, though white text on lighter
          teal/green (Marketing slice) has reduced contrast
      - id: VQ-02
        name: No Overlap
        score: 8
        max: 8
        passed: true
        comment: No overlapping text, labels well-positioned within slices
      - id: VQ-03
        name: Element Visibility
        score: 8
        max: 8
        passed: true
        comment: Pie slices are well-sized with radius 0.9, good use of canvas
      - id: VQ-04
        name: Color Accessibility
        score: 3
        max: 5
        passed: true
        comment: Two slices use similar teal/green shades (Operations and Marketing),
          making them harder to distinguish. The colorblind-safe palette was partially
          applied but colors repeat too early
      - id: VQ-05
        name: Layout Balance
        score: 4
        max: 5
        passed: true
        comment: Good proportions, pie fills canvas well, but slight imbalance with
          more whitespace at bottom
      - id: VQ-07
        name: Grid & Legend
        score: 2
        max: 2
        passed: true
        comment: No grid needed, labels serve as legend
    spec_compliance:
      score: 19
      max: 25
      items:
      - id: SC-01
        name: Plot Type
        score: 8
        max: 8
        passed: true
        comment: Correct pie chart with drilldown capability
      - id: SC-02
        name: Data Mapping
        score: 5
        max: 5
        passed: true
        comment: Values correctly mapped to slice sizes
      - id: SC-03
        name: Required Features
        score: 3
        max: 5
        passed: false
        comment: 'Has breadcrumb, click indicator, labels with % and values. Missing:
          animated transitions (static PNG cannot show this, but HTML should), consistent
          color schemes within branches (colors cycle rather than branch-consistent)'
      - id: SC-04
        name: Data Range
        score: 3
        max: 3
        passed: true
        comment: All data visible, percentages sum to 100%
      - id: SC-05
        name: Legend Accuracy
        score: 0
        max: 2
        passed: true
        comment: No traditional legend, but labels are embedded. The spec does not
          require a legend, so this is acceptable
      - id: SC-06
        name: Title Format
        score: 2
        max: 2
        passed: true
        comment: 'Correct format: "pie-drilldown · bokeh · pyplots.ai"'
    data_quality:
      score: 18
      max: 20
      items:
      - id: DQ-01
        name: Feature Coverage
        score: 7
        max: 8
        passed: true
        comment: Shows 4 categories at root level, hierarchical structure with 3-4
          levels. Missing demonstration of all drill-down levels in static image
      - id: DQ-02
        name: Realistic Context
        score: 7
        max: 7
        passed: true
        comment: Company expense breakdown is a realistic, neutral business scenario
      - id: DQ-03
        name: Appropriate Scale
        score: 4
        max: 5
        passed: true
        comment: Values in hundreds of thousands are realistic for company expenses
    code_quality:
      score: 8
      max: 10
      items:
      - id: CQ-01
        name: KISS Structure
        score: 1
        max: 3
        passed: false
        comment: Code uses inline structure but is complex with JavaScript callbacks,
          multiple sources; not simple KISS style
      - id: CQ-02
        name: Reproducibility
        score: 3
        max: 3
        passed: true
        comment: Deterministic data (no random seed needed as data is hardcoded)
      - id: CQ-03
        name: Clean Imports
        score: 2
        max: 2
        passed: true
        comment: All imports are used
      - id: CQ-04
        name: No Deprecated API
        score: 1
        max: 1
        passed: true
        comment: Using current Bokeh API
      - id: CQ-05
        name: Output Correct
        score: 1
        max: 1
        passed: true
        comment: Saves as plot.png and plot.html
    library_features:
      score: 5
      max: 5
      items:
      - id: LF-01
        name: Uses distinctive library features
        score: 5
        max: 5
        passed: true
        comment: Excellent use of Bokeh's TapTool, CustomJS callbacks, ColumnDataSource
          for interactivity, export_png for static output, and HTML save for interactive
          version
  verdict: APPROVED
