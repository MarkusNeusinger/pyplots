library: altair
specification_id: parallel-categories-basic
created: '2025-12-30T00:11:58Z'
updated: '2025-12-30T00:35:19Z'
generated_by: claude-opus-4-5-20251101
workflow_run: 20585401220
issue: 0
python_version: 3.13.11
library_version: 6.0.0
preview_url: https://storage.googleapis.com/pyplots-images/plots/parallel-categories-basic/altair/plot.png
preview_thumb: https://storage.googleapis.com/pyplots-images/plots/parallel-categories-basic/altair/plot_thumb.png
preview_html: https://storage.googleapis.com/pyplots-images/plots/parallel-categories-basic/altair/plot.html
quality_score: 90
review:
  strengths:
  - Column headers now correctly positioned above boxes, improving readability
  - Creative bezier curve implementation for smooth flow ribbons
  - Excellent customer journey e-commerce data scenario demonstrating the parallel
    categories concept
  - Good layered composition using Altair declarative approach
  - Flow Colors legend added to explain channel-to-color mapping
  - Proper title format and dual output (PNG + HTML)
  weaknesses:
  - Category and Outcome columns use uniform grey instead of distinct colors per category,
    reducing visual interest
  - Some thinner flow ribbons are harder to trace across the full diagram
  - Count labels positioned to the right of boxes overlap with ribbon starting points
    on some boxes
  image_description: 'The plot displays a parallel categories diagram with three vertical
    dimensions: Channel (left), Category (middle), and Outcome (right). The Channel
    dimension shows four colored bars: Email (purple, 31 count), Social (light blue,
    35), Direct (dark blue, 66), and Search (yellow, 68). The Category column shows
    grey bars for Sports, Electronics, Home, and Clothing. The Outcome column shows
    grey bars for Browse, Abandon, and Purchase. Smooth bezier curve ribbons connect
    categories across dimensions, colored by source channel. Column headers appear
    in blue text above each dimension. A "Flow Colors" legend on the right maps colors
    to channels. The title "parallel-categories-basic 路 altair 路 pyplots.ai" appears
    at the top.'
  criteria_checklist:
    visual_quality:
      score: 36
      max: 40
      items:
      - id: VQ-01
        name: Text Legibility
        score: 9
        max: 10
        passed: true
        comment: Title 28pt, labels 18pt, headers 24pt. All readable, tick counts
          slightly small but acceptable.
      - id: VQ-02
        name: No Overlap
        score: 8
        max: 8
        passed: true
        comment: No overlapping text elements, all labels clearly separated.
      - id: VQ-03
        name: Element Visibility
        score: 7
        max: 8
        passed: true
        comment: Ribbons visible with appropriate width proportional to count. Some
          thin flows harder to trace.
      - id: VQ-04
        name: Color Accessibility
        score: 5
        max: 5
        passed: true
        comment: 'Good color choices: blue, yellow, purple palette is colorblind-friendly.'
      - id: VQ-05
        name: Layout Balance
        score: 5
        max: 5
        passed: true
        comment: Good canvas utilization, plot well-centered with balanced margins.
      - id: VQ-06
        name: Axis Labels
        score: 0
        max: 2
        passed: true
        comment: N/A for parallel categories (no traditional axes), headers serve
          this purpose.
      - id: VQ-07
        name: Grid & Legend
        score: 2
        max: 2
        passed: true
        comment: Legend present and well-positioned, no grid needed.
    spec_compliance:
      score: 23
      max: 25
      items:
      - id: SC-01
        name: Plot Type
        score: 8
        max: 8
        passed: true
        comment: Correct parallel categories with ribbons connecting categorical dimensions.
      - id: SC-02
        name: Data Mapping
        score: 5
        max: 5
        passed: true
        comment: Three categorical dimensions correctly displayed with width-proportional
          ribbons.
      - id: SC-03
        name: Required Features
        score: 4
        max: 5
        passed: true
        comment: 'Ribbons show flow, width proportional to count. Color by first dimension
          (Channel) as spec suggests. Missing: interactive highlighting noted in spec.'
      - id: SC-04
        name: Data Range
        score: 3
        max: 3
        passed: true
        comment: All categories visible and properly scaled.
      - id: SC-05
        name: Legend Accuracy
        score: 2
        max: 2
        passed: true
        comment: Flow Colors legend accurately maps channel to color.
      - id: SC-06
        name: Title Format
        score: 2
        max: 2
        passed: true
        comment: 'Correct format: "{spec-id} 路 {library} 路 pyplots.ai".'
    data_quality:
      score: 18
      max: 20
      items:
      - id: DQ-01
        name: Feature Coverage
        score: 7
        max: 8
        passed: true
        comment: Shows multi-dimensional categorical flow well. 3 dimensions with
          4, 4, and 3 categories each. Could show more variation in flow patterns.
      - id: DQ-02
        name: Realistic Context
        score: 7
        max: 7
        passed: true
        comment: Customer journey e-commerce scenario is excellent, comprehensible
          real-world application.
      - id: DQ-03
        name: Appropriate Scale
        score: 4
        max: 5
        passed: true
        comment: 200 customers with realistic distribution. Counts are sensible.
    code_quality:
      score: 8
      max: 10
      items:
      - id: CQ-01
        name: KISS Structure
        score: 2
        max: 3
        passed: true
        comment: Mostly linear structure but complex bezier calculation loop adds
          some complexity.
      - id: CQ-02
        name: Reproducibility
        score: 3
        max: 3
        passed: true
        comment: np.random.seed(42) ensures reproducibility.
      - id: CQ-03
        name: Clean Imports
        score: 2
        max: 2
        passed: true
        comment: All imports used (altair, numpy, pandas).
      - id: CQ-04
        name: No Deprecated API
        score: 1
        max: 1
        passed: true
        comment: Uses current Altair 5.x API.
      - id: CQ-05
        name: Output Correct
        score: 1
        max: 1
        passed: true
        comment: Saves as plot.png and plot.html.
    library_features:
      score: 5
      max: 5
      items:
      - id: LF-01
        name: Uses distinctive library features
        score: 5
        max: 5
        passed: true
        comment: Creative use of Altair's layered composition, mark_line for bezier
          flows, mark_rect for boxes, mark_text for labels, mark_square for legend.
          Excellent use of declarative grammar.
  verdict: APPROVED
