library: bokeh
specification_id: map-tile-background
created: '2026-01-20T22:38:31Z'
updated: '2026-01-20T22:41:45Z'
generated_by: claude-opus-4-5-20251101
workflow_run: 21189771537
issue: 3756
python_version: 3.13.11
library_version: 3.8.2
preview_url: https://storage.googleapis.com/pyplots-images/plots/map-tile-background/bokeh/plot.png
preview_thumb: https://storage.googleapis.com/pyplots-images/plots/map-tile-background/bokeh/plot_thumb.png
preview_html: https://storage.googleapis.com/pyplots-images/plots/map-tile-background/bokeh/plot.html
quality_score: 91
review:
  strengths:
  - Excellent use of Bokeh tile background capabilities with CartoDB Positron provider
  - Proper Web Mercator projection for accurate geographic display
  - Good hover tooltips showing city name, visitor count, and coordinates
  - Interactive tools (pan, wheel_zoom, box_zoom, reset) enhance exploration
  - Well-sized markers with white outlines provide good visibility against map tiles
  - Clean, realistic data context with European capital cities and tourism data
  weaknesses:
  - Missing legend for marker size/visitor count scale - viewers cannot interpret
    what marker sizes mean
  - Axis labels lack units (should be Longitude and Latitude with degree symbols)
  - Helper function for coordinate conversion deviates slightly from KISS principle
  image_description: The plot displays a map of Europe with a CartoDB Positron tile
    background showing countries, borders, and geographic features in a subtle gray
    color scheme. There are 15 blue circular markers (#306998) representing European
    capital cities, with marker sizes varying based on visitor counts (larger markers
    for cities with more visitors like London and Paris). The title "map-tile-background
    路 bokeh 路 pyplots.ai" is displayed at the top center. The map shows the Atlantic
    Ocean on the left (white) and Europe extending to Eastern Europe on the right.
    Cities visible include London, Paris, Barcelona, Madrid, Lisbon, Amsterdam, Brussels,
    Dublin, Copenhagen, Stockholm, Berlin, Prague, Vienna, Rome, and Warsaw. The x-axis
    is labeled "Longitude" and y-axis is labeled "Latitude". Markers have white edges
    and semi-transparency (alpha 0.7). The overall layout shows good canvas utilization
    with the map filling most of the frame.
  criteria_checklist:
    visual_quality:
      score: 36
      max: 40
      items:
      - id: VQ-01
        name: Text Legibility
        score: 9
        max: 10
        passed: true
        comment: Title at 32pt and axis labels at 22pt are readable; tick labels at
          16pt are adequate but could be slightly larger
      - id: VQ-02
        name: No Overlap
        score: 8
        max: 8
        passed: true
        comment: No overlapping text elements; markers are well-spaced across the
          map
      - id: VQ-03
        name: Element Visibility
        score: 8
        max: 8
        passed: true
        comment: Marker sizes are well-calibrated (25-67px) with good alpha (0.7)
          and white outlines for visibility against the tile background
      - id: VQ-04
        name: Color Accessibility
        score: 5
        max: 5
        passed: true
        comment: Single blue color (#306998) with high contrast against the gray/white
          tile background; colorblind-safe
      - id: VQ-05
        name: Layout Balance
        score: 4
        max: 5
        passed: true
        comment: Good canvas utilization with Europe centered; slight imbalance with
          more empty ocean on the left
      - id: VQ-06
        name: Axis Labels
        score: 1
        max: 2
        passed: true
        comment: Descriptive labels Longitude and Latitude but no units (should include
          degree symbols)
      - id: VQ-07
        name: Grid & Legend
        score: 1
        max: 2
        passed: true
        comment: Grid disabled which is appropriate for map; no legend for visitor
          count scale
    spec_compliance:
      score: 24
      max: 25
      items:
      - id: SC-01
        name: Plot Type
        score: 8
        max: 8
        passed: true
        comment: Correct map with tile background visualization
      - id: SC-02
        name: Data Mapping
        score: 5
        max: 5
        passed: true
        comment: Lat/lon correctly converted to Web Mercator and mapped
      - id: SC-03
        name: Required Features
        score: 5
        max: 5
        passed: true
        comment: Tile provider, data points layered on top, marker sizing by value,
          hover tooltips with interactive tools
      - id: SC-04
        name: Data Range
        score: 3
        max: 3
        passed: true
        comment: Map bounds auto-fit to data extent showing all European cities
      - id: SC-05
        name: Legend Accuracy
        score: 1
        max: 2
        passed: false
        comment: No legend provided for marker size/visitor count scale
      - id: SC-06
        name: Title Format
        score: 2
        max: 2
        passed: true
        comment: 'Correct format: map-tile-background 路 bokeh 路 pyplots.ai'
    data_quality:
      score: 18
      max: 20
      items:
      - id: DQ-01
        name: Feature Coverage
        score: 7
        max: 8
        passed: true
        comment: Shows cities with varying visitor counts and geographic spread; could
          include more diverse size range
      - id: DQ-02
        name: Realistic Context
        score: 7
        max: 7
        passed: true
        comment: European capital cities with visitor counts is a realistic, neutral
          tourism/travel scenario
      - id: DQ-03
        name: Appropriate Scale
        score: 4
        max: 5
        passed: true
        comment: Visitor counts (3.0-21.0 million) are plausible for European capitals;
          some values slightly high
    code_quality:
      score: 8
      max: 10
      items:
      - id: CQ-01
        name: KISS Structure
        score: 2
        max: 3
        passed: true
        comment: Mostly linear flow but includes a helper function lonlat_to_mercator()
          which slightly deviates from pure KISS
      - id: CQ-02
        name: Reproducibility
        score: 3
        max: 3
        passed: true
        comment: Uses np.random.seed(42) though data is actually deterministic
      - id: CQ-03
        name: Clean Imports
        score: 2
        max: 2
        passed: true
        comment: All imports are used; xyzservices is appropriate for tile providers
      - id: CQ-04
        name: No Deprecated API
        score: 1
        max: 1
        passed: true
        comment: Uses current Bokeh API
      - id: CQ-05
        name: Output Correct
        score: 0
        max: 1
        passed: false
        comment: Saves as plot.png but also saves plot.html; PNG output is correct
          but extra file generated
    library_features:
      score: 5
      max: 5
      items:
      - id: LF-01
        name: Distinctive Features
        score: 5
        max: 5
        passed: true
        comment: 'Excellent use of Bokeh features: tile backgrounds via xyzservices,
          ColumnDataSource, HoverTool with custom tooltips, Web Mercator projection,
          interactive tools'
  verdict: APPROVED
impl_tags:
  dependencies:
  - xyzservices
  - selenium
  techniques:
  - hover-tooltips
  - html-export
  patterns:
  - data-generation
  - columndatasource
  dataprep: []
  styling:
  - alpha-blending
  - edge-highlighting
