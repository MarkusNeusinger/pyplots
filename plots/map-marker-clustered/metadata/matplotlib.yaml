library: matplotlib
specification_id: map-marker-clustered
created: '2026-01-20T18:50:50Z'
updated: '2026-01-20T19:04:03Z'
generated_by: claude-opus-4-5-20251101
workflow_run: 21183369718
issue: 3766
python_version: 3.13.11
library_version: 3.10.8
preview_url: https://storage.googleapis.com/pyplots-images/plots/map-marker-clustered/matplotlib/plot.png
preview_thumb: https://storage.googleapis.com/pyplots-images/plots/map-marker-clustered/matplotlib/plot_thumb.png
preview_html: null
quality_score: 91
review:
  strengths:
  - Excellent implementation of grid-based clustering algorithm without external dependencies
  - Creative solution for basemap context using polygon fill instead of requiring
    cartopy/basemap
  - Clean color scheme with Python-themed blue/yellow plus complementary green
  - Good use of alpha blending to show both clusters and underlying data simultaneously
  - Informative summary annotation showing total locations and cluster count
  - Geographic reference labels add professional cartographic context
  weaknesses:
  - Grid lines are slightly too prominent (alpha=0.3 with linewidth=0.8) - should
    be more subtle
  - Some cluster markers with counts of 1 or 2 seem overly large relative to their
    content
  - The simplified coastline polygon creates some geographic inaccuracies (e.g., Italy
    shape not recognizable)
  image_description: 'The plot displays a clustered marker map of Europe showing store
    locations across 8 major cities. The background uses light blue (#d4e6f1) for
    ocean and beige (#f5f5dc) for a simplified land polygon representing the European
    coastline. Cluster markers are shown as large circles with white edge highlights,
    colored by dominant store type: blue (Python Blue #306998) for Retail, green (#2E7D32)
    for Grocery, and yellow (#FFD43B) for Electronics. Each cluster circle displays
    a white count number in the center. Semi-transparent individual points (alpha=0.25)
    are visible behind the clusters showing the raw data distribution. The legend
    in the upper left identifies the three store types. Geographic reference labels
    ("Atlantic Ocean", "Mediterranean Sea") appear in italic blue text. A summary
    annotation in the lower right states "Total: 280 locations in 27 clusters". Axis
    labels show Longitude and Latitude in degrees with appropriate font sizes. The
    title follows the correct format. Simplified country boundary lines (gray, dashed)
    provide geographic context.'
  criteria_checklist:
    visual_quality:
      score: 36
      max: 40
      items:
      - id: VQ-01
        name: Text Legibility
        score: 10
        max: 10
        passed: true
        comment: Title at 24pt, axis labels at 20pt, tick labels at 16pt, cluster
          counts clearly readable in white bold text
      - id: VQ-02
        name: No Overlap
        score: 7
        max: 8
        passed: true
        comment: Minor overlap between some cluster markers and underlying data points,
          but counts remain readable
      - id: VQ-03
        name: Element Visibility
        score: 8
        max: 8
        passed: true
        comment: Cluster markers well-sized with scaling based on count, individual
          points appropriately small and semi-transparent
      - id: VQ-04
        name: Color Accessibility
        score: 5
        max: 5
        passed: true
        comment: Blue/Green/Yellow palette is colorblind-friendly, good contrast
      - id: VQ-05
        name: Layout Balance
        score: 4
        max: 5
        passed: true
        comment: Good use of canvas, slight imbalance with more empty space in ocean
          area
      - id: VQ-06
        name: Axis Labels
        score: 2
        max: 2
        passed: true
        comment: Longitude (degrees) and Latitude (degrees) are descriptive with units
      - id: VQ-07
        name: Grid & Legend
        score: 0
        max: 2
        passed: false
        comment: Grid is slightly too prominent (alpha=0.3 with linewidth=0.8), and
          geographic annotation text overlaps with the grid
    spec_compliance:
      score: 23
      max: 25
      items:
      - id: SC-01
        name: Plot Type
        score: 8
        max: 8
        passed: true
        comment: Correctly implements clustered marker map concept
      - id: SC-02
        name: Data Mapping
        score: 5
        max: 5
        passed: true
        comment: Lat/Lon correctly mapped to Y/X axes
      - id: SC-03
        name: Required Features
        score: 4
        max: 5
        passed: true
        comment: 'Clusters display count, categories color-coded, basemap context
          provided. Missing: interactive zoom/click behavior (not feasible in static
          matplotlib)'
      - id: SC-04
        name: Data Range
        score: 3
        max: 3
        passed: true
        comment: All data visible within axis limits
      - id: SC-05
        name: Legend Accuracy
        score: 2
        max: 2
        passed: true
        comment: Legend correctly identifies store types
      - id: SC-06
        name: Title Format
        score: 1
        max: 2
        passed: true
        comment: Uses correct format with unicode middle dot
    data_quality:
      score: 19
      max: 20
      items:
      - id: DQ-01
        name: Feature Coverage
        score: 7
        max: 8
        passed: true
        comment: Shows clustering across multiple cities, varying cluster sizes, category
          distribution. Could show more edge cases like single-point clusters
      - id: DQ-02
        name: Realistic Context
        score: 7
        max: 7
        passed: true
        comment: Store locator for retail chains across Europe is a realistic, neutral
          business scenario
      - id: DQ-03
        name: Appropriate Scale
        score: 5
        max: 5
        passed: true
        comment: Coordinates are realistic for European cities, point counts are reasonable
    code_quality:
      score: 10
      max: 10
      items:
      - id: CQ-01
        name: KISS Structure
        score: 3
        max: 3
        passed: true
        comment: 'Clean linear flow: imports, data generation, clustering, plotting,
          save'
      - id: CQ-02
        name: Reproducibility
        score: 3
        max: 3
        passed: true
        comment: Uses np.random.seed(42)
      - id: CQ-03
        name: Clean Imports
        score: 2
        max: 2
        passed: true
        comment: Only matplotlib.pyplot and numpy imported, both used
      - id: CQ-04
        name: No Deprecated API
        score: 1
        max: 1
        passed: true
        comment: No deprecated functions
      - id: CQ-05
        name: Output Correct
        score: 1
        max: 1
        passed: true
        comment: Saves as plot.png
    library_features:
      score: 3
      max: 5
      items:
      - id: LF-01
        name: Distinctive Features
        score: 3
        max: 5
        passed: true
        comment: Good use of ax.scatter(), ax.annotate(), ax.fill() for basemap, custom
          legend handles. Could leverage more advanced features like PathCollection
          or custom markers
  verdict: APPROVED
impl_tags:
  dependencies: []
  techniques:
  - annotations
  - custom-legend
  - patches
  patterns:
  - data-generation
  - iteration-over-groups
  dataprep:
  - binning
  styling:
  - alpha-blending
  - edge-highlighting
  - grid-styling
