library: plotnine
specification_id: line-stock-comparison
created: '2026-01-20T10:21:24Z'
updated: '2026-01-20T10:24:01Z'
generated_by: claude-opus-4-5-20251101
workflow_run: 21167798322
issue: 3748
python_version: 3.13.11
library_version: 0.15.2
preview_url: https://storage.googleapis.com/pyplots-images/plots/line-stock-comparison/plotnine/plot.png
preview_thumb: https://storage.googleapis.com/pyplots-images/plots/line-stock-comparison/plotnine/plot_thumb.png
preview_html: null
quality_score: 92
review:
  strengths:
  - Excellent text sizing with all labels clearly readable at full resolution
  - Correct title format following pyplots.ai convention
  - Good use of plotnine grammar of graphics with clean layered syntax
  - Horizontal reference line at 100 as suggested in spec
  - Appropriate color palette with distinct hues for each series
  - Clean KISS code structure with reproducible random seed
  weaknesses:
  - Legend overlaps the plot area; could be positioned outside with legend_position
  - Red-green color combination may not be ideal for colorblind accessibility
  image_description: 'The plot shows a multi-line chart comparing four stock price
    series (AAPL, GOOGL, MSFT, SPY) normalized to a starting value of 100 over one
    year of trading data (Jan 2024 - Dec 2024). The chart uses four distinct colors:
    blue for AAPL, yellow/gold for GOOGL, red for MSFT, and green for SPY. A gray
    dashed horizontal reference line at 100 marks the starting point. The x-axis shows
    dates with labels rotated at 45 degrees (Feb 2024, Apr 2024, Jun 2024, Aug 2024,
    Oct 2024, Dec 2024). The y-axis shows "Rebased Price (Starting = 100)" ranging
    from about 80 to 200. SPY shows the strongest performance reaching ~200, GOOGL
    moderate performance around 120, AAPL fluctuates around 100, and MSFT underperforms
    ending around 80. The legend is positioned on the right side of the plot. The
    layout has good proportions with a minimal theme and subtle gray grid lines.'
  criteria_checklist:
    visual_quality:
      score: 37
      max: 40
      items:
      - id: VQ-01
        name: Text Legibility
        score: 10
        max: 10
        passed: true
        comment: Title at 24pt, axis labels at 20pt, tick labels at 16pt - all perfectly
          readable
      - id: VQ-02
        name: No Overlap
        score: 8
        max: 8
        passed: true
        comment: No overlapping text; x-axis labels are rotated to prevent collision
      - id: VQ-03
        name: Element Visibility
        score: 8
        max: 8
        passed: true
        comment: Line width of 1.5 is appropriate for multi-series comparison
      - id: VQ-04
        name: Color Accessibility
        score: 4
        max: 5
        passed: true
        comment: Four distinct colors work reasonably well, though red-green combination
          could be problematic for some colorblind viewers
      - id: VQ-05
        name: Layout Balance
        score: 5
        max: 5
        passed: true
        comment: Good use of 16:9 canvas, balanced margins, legend well positioned
      - id: VQ-06
        name: Axis Labels
        score: 2
        max: 2
        passed: true
        comment: Y-axis has descriptive label with context, X-axis labeled Date
      - id: VQ-07
        name: Grid & Legend
        score: 0
        max: 2
        passed: false
        comment: Legend overlaps the plot area slightly; could be better positioned
          outside
    spec_compliance:
      score: 25
      max: 25
      items:
      - id: SC-01
        name: Plot Type
        score: 8
        max: 8
        passed: true
        comment: Correct multi-line chart for stock comparison
      - id: SC-02
        name: Data Mapping
        score: 5
        max: 5
        passed: true
        comment: Date on X-axis, rebased price on Y-axis, color for symbol - all correct
      - id: SC-03
        name: Required Features
        score: 5
        max: 5
        passed: true
        comment: Rebasing to 100, distinct colors, legend, horizontal reference line
          at 100, grid lines - all present
      - id: SC-04
        name: Data Range
        score: 3
        max: 3
        passed: true
        comment: All data visible, Y-axis shows full range
      - id: SC-05
        name: Legend Accuracy
        score: 2
        max: 2
        passed: true
        comment: Legend correctly identifies all four stock symbols
      - id: SC-06
        name: Title Format
        score: 2
        max: 2
        passed: true
        comment: 'Uses correct format: line-stock-comparison · plotnine · pyplots.ai'
    data_quality:
      score: 17
      max: 20
      items:
      - id: DQ-01
        name: Feature Coverage
        score: 6
        max: 8
        passed: true
        comment: Shows variety in performance (outperformer, underperformer, stable),
          but patterns are somewhat random-walk similar
      - id: DQ-02
        name: Realistic Context
        score: 7
        max: 7
        passed: true
        comment: Stock price comparison is a real, neutral, business scenario with
          realistic tickers
      - id: DQ-03
        name: Appropriate Scale
        score: 4
        max: 5
        passed: true
        comment: Values are plausible (80-200 range over a year) though some volatility
          patterns could be more realistic
    code_quality:
      score: 10
      max: 10
      items:
      - id: CQ-01
        name: KISS Structure
        score: 3
        max: 3
        passed: true
        comment: Simple imports → data → plot → save structure, no functions/classes
      - id: CQ-02
        name: Reproducibility
        score: 3
        max: 3
        passed: true
        comment: np.random.seed(42) set for reproducibility
      - id: CQ-03
        name: Clean Imports
        score: 2
        max: 2
        passed: true
        comment: All imports are used, no extraneous imports
      - id: CQ-04
        name: No Deprecated API
        score: 1
        max: 1
        passed: true
        comment: Uses current plotnine API
      - id: CQ-05
        name: Output Correct
        score: 1
        max: 1
        passed: true
        comment: Saves as plot.png
    library_features:
      score: 3
      max: 5
      items:
      - id: LF-01
        name: Distinctive Features
        score: 3
        max: 5
        passed: true
        comment: Good use of plotnine grammar of graphics (aes, geom_line, geom_hline,
          scale_color_manual, scale_x_date, theme_minimal), but could have used faceting
          or additional ggplot2-style features
  verdict: APPROVED
impl_tags:
  dependencies: []
  techniques:
  - layer-composition
  patterns:
  - data-generation
  - iteration-over-groups
  dataprep:
  - time-series
  - normalization
  styling:
  - grid-styling
