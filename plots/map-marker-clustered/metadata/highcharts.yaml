library: highcharts
specification_id: map-marker-clustered
created: '2026-01-20T18:49:31Z'
updated: '2026-01-20T18:52:11Z'
generated_by: claude-opus-4-5-20251101
workflow_run: 21183365421
issue: 3766
python_version: 3.13.11
library_version: unknown
preview_url: https://storage.googleapis.com/pyplots-images/plots/map-marker-clustered/highcharts/plot.png
preview_thumb: https://storage.googleapis.com/pyplots-images/plots/map-marker-clustered/highcharts/plot_thumb.png
preview_html: https://storage.googleapis.com/pyplots-images/plots/map-marker-clustered/highcharts/plot.html
quality_score: 85
review:
  strengths:
  - Excellent use of Highcharts Maps module with marker-clusters extension
  - Colorblind-safe palette following project guidelines
  - Realistic retail store location scenario with appropriate geographic distribution
  - Clean code structure with proper separation of data generation and chart configuration
  - Interactive HTML output includes zoom functionality for cluster exploration
  - Zone-based cluster sizing provides visual hierarchy
  weaknesses:
  - Cluster count labels are not visible in the static PNG output (dataLabels configured
    but not rendering)
  - Legend text appears small relative to the 4800x2700 canvas size
  - Title format uses parenthetical (Clustered) instead of standard spec-id format
  image_description: 'The plot displays a map of the United States with store location
    markers clustered by geographic proximity. The base map shows US states in light
    gray with gray borders. Multiple circular markers are distributed across 15 major
    metropolitan areas (Seattle, San Francisco, Los Angeles, San Diego, Phoenix, Denver,
    Dallas, San Antonio, Houston, Chicago, Atlanta, Miami, Philadelphia, Boston, and
    New York). Markers are color-coded by category: blue (Grocery), yellow (Electronics),
    purple (Clothing), and cyan (Home Goods). At this zoom level, markers appear as
    individual points or small clusters. The title reads "Retail Store Locations (Clustered)
    · map-marker-clustered · highcharts · pyplots.ai" with a subtitle "420 stores
    across 15 major US cities - zoom to expand clusters". A legend on the right side
    identifies the four store categories.'
  criteria_checklist:
    visual_quality:
      score: 33
      max: 40
      items:
      - id: VQ-01
        name: Text Legibility
        score: 8
        max: 10
        passed: true
        comment: Title and subtitle are readable, legend text is slightly small relative
          to the large canvas
      - id: VQ-02
        name: No Overlap
        score: 8
        max: 8
        passed: true
        comment: No overlapping text elements
      - id: VQ-03
        name: Element Visibility
        score: 6
        max: 8
        passed: true
        comment: Markers are visible but cluster markers lack count labels in the
          static PNG
      - id: VQ-04
        name: Color Accessibility
        score: 5
        max: 5
        passed: true
        comment: Uses colorblind-safe palette (blue, yellow, purple, cyan)
      - id: VQ-05
        name: Layout Balance
        score: 3
        max: 5
        passed: true
        comment: Map uses good portion of canvas but there is significant empty space
          at left and bottom margins
      - id: VQ-06
        name: Axis Labels
        score: 2
        max: 2
        passed: true
        comment: N/A for maps, geographic context provided
      - id: VQ-07
        name: Grid & Legend
        score: 1
        max: 2
        passed: true
        comment: Legend placed well but small; map boundaries serve as grid
    spec_compliance:
      score: 22
      max: 25
      items:
      - id: SC-01
        name: Plot Type
        score: 8
        max: 8
        passed: true
        comment: Correct map with clustered markers
      - id: SC-02
        name: Data Mapping
        score: 5
        max: 5
        passed: true
        comment: Lat/lon correctly mapped to map positions
      - id: SC-03
        name: Required Features
        score: 3
        max: 5
        passed: false
        comment: Clustering enabled but cluster count labels not visible in static
          image
      - id: SC-04
        name: Data Range
        score: 3
        max: 3
        passed: true
        comment: All US locations shown correctly
      - id: SC-05
        name: Legend Accuracy
        score: 2
        max: 2
        passed: true
        comment: Legend correctly shows four categories
      - id: SC-06
        name: Title Format
        score: 1
        max: 2
        passed: false
        comment: Title includes spec-id and library but format differs slightly (uses
          parenthetical)
    data_quality:
      score: 18
      max: 20
      items:
      - id: DQ-01
        name: Feature Coverage
        score: 7
        max: 8
        passed: true
        comment: Shows multiple cities with varying store counts, multiple categories;
          clustering visible but counts not displayed
      - id: DQ-02
        name: Realistic Context
        score: 7
        max: 7
        passed: true
        comment: Retail store locations is a realistic, neutral scenario
      - id: DQ-03
        name: Appropriate Scale
        score: 4
        max: 5
        passed: true
        comment: 420 stores across 15 cities is reasonable; coordinate spreads are
          appropriate
    code_quality:
      score: 9
      max: 10
      items:
      - id: CQ-01
        name: KISS Structure
        score: 3
        max: 3
        passed: true
        comment: 'Clean linear structure: imports → data → chart config → output'
      - id: CQ-02
        name: Reproducibility
        score: 3
        max: 3
        passed: true
        comment: Uses np.random.seed(42)
      - id: CQ-03
        name: Clean Imports
        score: 2
        max: 2
        passed: true
        comment: All imports are used
      - id: CQ-04
        name: No Deprecated API
        score: 1
        max: 1
        passed: true
        comment: Using current Highcharts API
      - id: CQ-05
        name: Output Correct
        score: 0
        max: 1
        passed: true
        comment: Saves both plot.png and plot.html correctly
    library_features:
      score: 3
      max: 5
      items:
      - id: LF-01
        name: Distinctive Features
        score: 3
        max: 5
        passed: true
        comment: Uses Highcharts Maps module with marker-clusters, zone-based cluster
          sizing, and mapNavigation; however, the cluster data labels are not rendering
          in the static PNG
  verdict: REJECTED
impl_tags:
  dependencies:
  - selenium
  techniques:
  - html-export
  - hover-tooltips
  patterns:
  - data-generation
  - iteration-over-groups
  dataprep: []
  styling:
  - grid-styling
