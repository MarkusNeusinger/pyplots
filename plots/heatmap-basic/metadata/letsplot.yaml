library: letsplot
specification_id: heatmap-basic
created: '2025-12-23T00:49:09Z'
updated: '2026-02-15T21:47:29Z'
generated_by: claude-opus-4-6
workflow_run: 20447989671
issue: 0
python_version: 3.14.3
library_version: 4.8.2
preview_url: https://storage.googleapis.com/pyplots-images/plots/heatmap-basic/letsplot/plot.png
preview_thumb: https://storage.googleapis.com/pyplots-images/plots/heatmap-basic/letsplot/plot_thumb.png
preview_html: https://storage.googleapis.com/pyplots-images/plots/heatmap-basic/letsplot/plot.html
quality_score: 91
impl_tags:
  dependencies: []
  techniques:
  - colorbar
  - annotations
  - hover-tooltips
  - layer-composition
  - html-export
  patterns:
  - data-generation
  - matrix-construction
  dataprep: []
  styling:
  - custom-colormap
  - edge-highlighting
review:
  strengths:
  - Adaptive text color (white on dark, dark on light) ensures all 72 cell annotations
    are readable — excellent attention to detail
  - Realistic energy consumption scenario with believable seasonal patterns and zone-specific
    baselines using np.outer
  - 'Effective use of lets-plot distinctive features: layer_tooltips with custom lines,
    HTML export for interactivity, guide_colorbar fine-tuning'
  - Clean vectorized data generation without loops, Pythonic long-form data construction
  - Viridis colormap (reversed) with 256 bins creates smooth perceptual gradient
  weaknesses:
  - Axis labels 'Building Zone' and 'Month' lack units (though kWh is in the colorbar
    legend, it's a minor gap)
  - Data could include a more dramatic outlier or anomaly to better showcase the full
    feature range of heatmaps
  image_description: The plot displays a heatmap of monthly energy consumption (kWh)
    across 6 building zones (Lobby, Offices, Lab, Server Room, Cafeteria, Warehouse)
    over 12 months (Jan–Dec). The viridis colormap (reversed) maps values from dark
    purple/blue (high ~700 kWh, Server Room in winter) to bright yellow (low ~49 kWh,
    Warehouse in summer). Each cell contains a bold numeric annotation with adaptive
    text color — white on dark cells, dark on light cells — ensuring readability throughout.
    A vertical colorbar legend labeled "Energy (kWh)" sits to the right. The title
    reads "heatmap-basic · letsplot · pyplots.ai" in bold. Panel grid is removed,
    background is light gray (#fafafa), and tiles have subtle gaps between them. The
    layout is clean and well-balanced.
  criteria_checklist:
    visual_quality:
      score: 28
      max: 30
      items:
      - id: VQ-01
        name: Text Legibility
        score: 8
        max: 8
        passed: true
        comment: 'All font sizes explicitly set: title=26, axis_title=20, axis_text=16,
          legend_text=14, legend_title=16. Bold annotations at size=14. All text perfectly
          readable.'
      - id: VQ-02
        name: No Overlap
        score: 6
        max: 6
        passed: true
        comment: No overlapping text. Tile width/height=0.92 provides clean gaps.
      - id: VQ-03
        name: Element Visibility
        score: 6
        max: 6
        passed: true
        comment: Tiles fill space optimally, annotations clearly visible with adaptive
          contrast.
      - id: VQ-04
        name: Color Accessibility
        score: 4
        max: 4
        passed: true
        comment: Viridis is perceptually uniform and colorblind-safe.
      - id: VQ-05
        name: Layout & Canvas
        score: 3
        max: 4
        passed: false
        comment: 'Good canvas utilization, colorbar integrated near plot. Minor: colorbar
          positioning could be slightly better.'
      - id: VQ-06
        name: Axis Labels & Title
        score: 1
        max: 2
        passed: false
        comment: Descriptive labels but lack units. Units appear only in the colorbar
          legend.
    design_excellence:
      score: 15
      max: 20
      items:
      - id: DE-01
        name: Aesthetic Sophistication
        score: 6
        max: 8
        passed: true
        comment: Custom background, adaptive text colors, removed grid, reversed viridis,
          bold annotations. Clearly above defaults.
      - id: DE-02
        name: Visual Refinement
        score: 5
        max: 6
        passed: true
        comment: Grid removed, custom background, tile gaps, generous margins. Well
          polished.
      - id: DE-03
        name: Data Storytelling
        score: 4
        max: 6
        passed: true
        comment: 'Clear story: Server Room dominates, seasonal patterns visible. Viridis
          intensity guides the eye to hotspots.'
    spec_compliance:
      score: 15
      max: 15
      items:
      - id: SC-01
        name: Plot Type
        score: 5
        max: 5
        passed: true
        comment: Correct heatmap using geom_tile.
      - id: SC-02
        name: Required Features
        score: 4
        max: 4
        passed: true
        comment: Value annotations, colorbar legend, logical ordering all present.
          Sequential colormap appropriate for all-positive data.
      - id: SC-03
        name: Data Mapping
        score: 3
        max: 3
        passed: true
        comment: X=zones, Y=months, fill=kWh correctly assigned.
      - id: SC-04
        name: Title & Legend
        score: 3
        max: 3
        passed: true
        comment: Title format correct. Colorbar labeled Energy (kWh).
    data_quality:
      score: 14
      max: 15
      items:
      - id: DQ-01
        name: Feature Coverage
        score: 5
        max: 6
        passed: true
        comment: Shows zone variation, seasonal patterns, realistic baselines. Could
          show more extreme outliers.
      - id: DQ-02
        name: Realistic Context
        score: 5
        max: 5
        passed: true
        comment: Monthly energy consumption by building zone is a real, neutral, comprehensible
          scenario.
      - id: DQ-03
        name: Appropriate Scale
        score: 4
        max: 4
        passed: true
        comment: Values ~49-699 kWh are realistic for building zones.
    code_quality:
      score: 10
      max: 10
      items:
      - id: CQ-01
        name: KISS Structure
        score: 3
        max: 3
        passed: true
        comment: Imports → Data → Plot → Save. No functions/classes.
      - id: CQ-02
        name: Reproducibility
        score: 2
        max: 2
        passed: true
        comment: np.random.seed(42) set.
      - id: CQ-03
        name: Clean Imports
        score: 2
        max: 2
        passed: true
        comment: All imports used.
      - id: CQ-04
        name: Code Elegance
        score: 2
        max: 2
        passed: true
        comment: Vectorized data generation with np.outer, adaptive text color logic,
          clean Pythonic code.
      - id: CQ-05
        name: Output & API
        score: 1
        max: 1
        passed: true
        comment: Saves as plot.png with scale=3.
    library_mastery:
      score: 9
      max: 10
      items:
      - id: LM-01
        name: Idiomatic Usage
        score: 5
        max: 5
        passed: true
        comment: Proper ggplot grammar, scale_fill_viridis, scale_x_discrete with
          limits, guide_colorbar customization, layer_tooltips.
      - id: LM-02
        name: Distinctive Features
        score: 4
        max: 5
        passed: true
        comment: Uses layer_tooltips (interactive), HTML export, guide_colorbar with
          custom nbin/barwidth/barheight, scale_color_identity for adaptive text.
  verdict: APPROVED
