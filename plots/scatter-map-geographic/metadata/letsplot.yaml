library: letsplot
specification_id: scatter-map-geographic
created: '2026-01-10T04:05:15Z'
updated: '2026-01-10T04:08:10Z'
generated_by: claude-opus-4-5-20251101
workflow_run: 20872460254
issue: 3617
python_version: 3.13.11
library_version: 4.8.2
preview_url: https://storage.googleapis.com/pyplots-images/plots/scatter-map-geographic/letsplot/plot.png
preview_thumb: https://storage.googleapis.com/pyplots-images/plots/scatter-map-geographic/letsplot/plot_thumb.png
preview_html: https://storage.googleapis.com/pyplots-images/plots/scatter-map-geographic/letsplot/plot.html
quality_score: 91
review:
  strengths:
  - Excellent use of lets-plot grammar of graphics with clean layer composition (basemap
    polygons + scatter points)
  - Colorblind-safe color palette with good contrast against gray basemap
  - Interactive tooltips showing city name, population, and region
  - Realistic data with 50 real world cities and accurate coordinates
  - Proper 16:9 aspect ratio output with 3x scaling for high resolution
  weaknesses:
  - Title format should be exactly "{spec-id} · {library} · pyplots.ai" without prefix
  - Australia/Oceania region missing from both continents basemap and city data
  - Legend position slightly crowds the right side; could use legend_position within
    plot area
  image_description: 'The plot displays a geographic scatter map of 50 major world
    cities positioned on simplified continent outlines. The basemap shows gray-filled
    polygons representing North America, South America, Europe, Africa, and Asia with
    light gray borders. City points are colored by region using a colorblind-friendly
    palette: blue for Asia, yellow for South America, green for North America, red
    for Africa, and purple for Europe. Point sizes vary by population from approximately
    7 million (smallest) to 37 million (largest - Tokyo). The map uses longitude (-180
    to 180) on the x-axis and latitude (-60 to 80) on the y-axis with a 1:1 fixed
    aspect ratio. Two legends appear on the right: a size legend showing Population
    (M) from 10-35 and a color legend for Region. The title "World Major Cities ·
    scatter-map-geographic · letsplot · pyplots.ai" is displayed at the top in bold.
    The background is light gray (#F5F5F5) with subtle grid lines.'
  criteria_checklist:
    visual_quality:
      score: 36
      max: 40
      items:
      - id: VQ-01
        name: Text Legibility
        score: 10
        max: 10
        passed: true
        comment: Title at 26pt bold, axis titles at 20pt, axis text at 16pt, legend
          text at 14-18pt - all clearly readable
      - id: VQ-02
        name: No Overlap
        score: 8
        max: 8
        passed: true
        comment: No overlapping text elements; city points have some overlap in dense
          regions but alpha handles it well
      - id: VQ-03
        name: Element Visibility
        score: 7
        max: 8
        passed: true
        comment: Points sized appropriately with size range 3-18; good visibility
          though some smaller cities could be slightly larger
      - id: VQ-04
        name: Color Accessibility
        score: 5
        max: 5
        passed: true
        comment: Colorblind-safe palette using distinct hues (blue, yellow, green,
          red, purple)
      - id: VQ-05
        name: Layout Balance
        score: 4
        max: 5
        passed: true
        comment: Good use of canvas space; slight imbalance with extra whitespace
          at bottom
      - id: VQ-06
        name: Axis Labels
        score: 2
        max: 2
        passed: true
        comment: Longitude and Latitude are descriptive and appropriate for geographic
          coordinates
      - id: VQ-07
        name: Grid & Legend
        score: 0
        max: 2
        passed: false
        comment: Grid is subtle, but legends positioned outside plot area slightly
          crowds the layout
    spec_compliance:
      score: 23
      max: 25
      items:
      - id: SC-01
        name: Plot Type
        score: 8
        max: 8
        passed: true
        comment: Correct geographic scatter plot with basemap
      - id: SC-02
        name: Data Mapping
        score: 5
        max: 5
        passed: true
        comment: Latitude/longitude correctly mapped to y/x, color to region, size
          to population
      - id: SC-03
        name: Required Features
        score: 4
        max: 5
        passed: true
        comment: Has basemap, color encoding, size encoding, tooltips; all major features
          present
      - id: SC-04
        name: Data Range
        score: 3
        max: 3
        passed: true
        comment: Full world view with appropriate limits
      - id: SC-05
        name: Legend Accuracy
        score: 2
        max: 2
        passed: true
        comment: Both region color and population size legends present and accurate
      - id: SC-06
        name: Title Format
        score: 1
        max: 2
        passed: false
        comment: Title includes spec-id, library, pyplots.ai but adds 'World Major
          Cities' prefix
    data_quality:
      score: 19
      max: 20
      items:
      - id: DQ-01
        name: Feature Coverage
        score: 7
        max: 8
        passed: true
        comment: Shows 50 major cities across all continents; could include Australia/Oceania
          for complete coverage
      - id: DQ-02
        name: Realistic Context
        score: 7
        max: 7
        passed: true
        comment: Real city data with accurate coordinates and plausible population
          figures
      - id: DQ-03
        name: Appropriate Scale
        score: 5
        max: 5
        passed: true
        comment: Population values in millions are realistic (7-37M range for megacities)
    code_quality:
      score: 9
      max: 10
      items:
      - id: CQ-01
        name: KISS Structure
        score: 3
        max: 3
        passed: true
        comment: 'Clean linear flow: imports → data → continent polygons → plot →
          save'
      - id: CQ-02
        name: Reproducibility
        score: 3
        max: 3
        passed: true
        comment: Uses np.random.seed(42) though data is deterministic
      - id: CQ-03
        name: Clean Imports
        score: 2
        max: 2
        passed: true
        comment: All imports used; from lets_plot import * is standard for this library
      - id: CQ-04
        name: No Deprecated API
        score: 1
        max: 1
        passed: true
        comment: Uses current lets-plot API
      - id: CQ-05
        name: Output Correct
        score: 0
        max: 1
        passed: false
        comment: Uses unconventional import alias for ggsave
    library_features:
      score: 4
      max: 5
      items:
      - id: LF-01
        name: Distinctive Features
        score: 4
        max: 5
        passed: true
        comment: Uses layer_tooltips for interactive tooltips, geom_polygon for basemap,
          scale_size for point scaling, coord_fixed for map projection
  verdict: APPROVED
impl_tags:
  dependencies: []
  techniques:
  - layer-composition
  - hover-tooltips
  - html-export
  patterns:
  - data-generation
  dataprep: []
  styling:
  - alpha-blending
  - grid-styling
