library: bokeh
specification_id: kagi-basic
created: '2026-01-08T21:54:18Z'
updated: '2026-01-08T22:03:16Z'
generated_by: claude-opus-4-5-20251101
workflow_run: 20832944885
issue: 3341
python_version: 3.13.11
library_version: 3.8.2
preview_url: https://storage.googleapis.com/pyplots-images/plots/kagi-basic/bokeh/plot.png
preview_thumb: https://storage.googleapis.com/pyplots-images/plots/kagi-basic/bokeh/plot_thumb.png
preview_html: https://storage.googleapis.com/pyplots-images/plots/kagi-basic/bokeh/plot.html
quality_score: 78
review:
  strengths:
  - Correct Kagi chart algorithm implementation with proper yang/yin transitions
  - Clean separation of yang and yin segments with appropriate thickness differentiation
  - Good use of horizontal connectors at reversal points
  - Proper title format following pyplots.ai convention
  - Reproducible with fixed random seed
  weaknesses:
  - Red-green color scheme is not colorblind accessible; consider using blue/orange
    or other colorblind-safe alternatives
  - No legend explaining what thick green (yang/bullish) and thin red (yin/bearish)
    lines represent
  - Text sizes could be larger for the 4800x2700 canvas (title at 28pt is acceptable
    but tick labels at 18pt appear small)
  - Could use ColumnDataSource or multi_line for more idiomatic Bokeh code
  image_description: The plot displays a Kagi chart showing price movements over approximately
    21 Kagi line indices. The chart uses green thick lines for yang (bullish) segments
    and red thin lines for yin (bearish) segments. The price range spans from approximately
    $78 to $113. The title "kagi-basic 路 bokeh 路 pyplots.ai" appears at the top center.
    The x-axis is labeled "Kagi Line Index" and the y-axis is labeled "Price ($)".
    The background is a light gray (#fafafa) with subtle dashed grid lines. Horizontal
    connectors link vertical segments at reversal points, creating the characteristic
    stair-step pattern of Kagi charts. The chart shows clear trend reversals with
    transitions between thick green (yang) and thin red (yin) lines, demonstrating
    the filtering of market noise that Kagi charts are known for. The plot fills most
    of the canvas with balanced margins on all sides.
  criteria_checklist:
    visual_quality:
      score: 30
      max: 40
      items:
      - id: VQ-01
        name: Text Legibility
        score: 7
        max: 10
        passed: true
        comment: Title and axis labels readable but appear small relative to large
          canvas; tick labels quite small at 18pt
      - id: VQ-02
        name: No Overlap
        score: 8
        max: 8
        passed: true
        comment: No overlapping text elements
      - id: VQ-03
        name: Element Visibility
        score: 6
        max: 8
        passed: true
        comment: Line segments visible but yang (width 8) vs yin (width 3) distinction
          could be stronger at this canvas size
      - id: VQ-04
        name: Color Accessibility
        score: 3
        max: 5
        passed: false
        comment: Red-green color scheme problematic for colorblind users
      - id: VQ-05
        name: Layout Balance
        score: 4
        max: 5
        passed: true
        comment: Good canvas utilization with balanced margins
      - id: VQ-06
        name: Axis Labels
        score: 2
        max: 2
        passed: true
        comment: Y-axis has Price ($) with units, X-axis has descriptive Kagi Line
          Index
      - id: VQ-07
        name: Grid & Legend
        score: 0
        max: 2
        passed: false
        comment: Grid styling good but no legend explaining yang/yin colors
    spec_compliance:
      score: 22
      max: 25
      items:
      - id: SC-01
        name: Plot Type
        score: 8
        max: 8
        passed: true
        comment: Correct Kagi chart with vertical lines and horizontal connectors
      - id: SC-02
        name: Data Mapping
        score: 5
        max: 5
        passed: true
        comment: X shows Kagi line index, Y shows price correctly
      - id: SC-03
        name: Required Features
        score: 4
        max: 5
        passed: true
        comment: Has thick/thin yang/yin lines, green/red colors, horizontal connectors;
          missing legend
      - id: SC-04
        name: Data Range
        score: 3
        max: 3
        passed: true
        comment: All data visible within axes
      - id: SC-05
        name: Legend Accuracy
        score: 0
        max: 2
        passed: false
        comment: No legend present to explain yang vs yin
      - id: SC-06
        name: Title Format
        score: 2
        max: 2
        passed: true
        comment: Correctly uses kagi-basic 路 bokeh 路 pyplots.ai format
    data_quality:
      score: 16
      max: 20
      items:
      - id: DQ-01
        name: Feature Coverage
        score: 6
        max: 8
        passed: true
        comment: Shows uptrends, downtrends, and yang/yin transitions; could show
          more dramatic reversals
      - id: DQ-02
        name: Realistic Context
        score: 5
        max: 7
        passed: true
        comment: Simulated stock price data is plausible but generic
      - id: DQ-03
        name: Appropriate Scale
        score: 5
        max: 5
        passed: true
        comment: Price range ~$78-113 realistic for stock starting at $100
    code_quality:
      score: 7
      max: 10
      items:
      - id: CQ-01
        name: KISS Structure
        score: 3
        max: 3
        passed: true
        comment: 'Clean linear structure: imports, data, Kagi algorithm, plot, save'
      - id: CQ-02
        name: Reproducibility
        score: 3
        max: 3
        passed: true
        comment: Uses np.random.seed(42)
      - id: CQ-03
        name: Clean Imports
        score: 0
        max: 2
        passed: false
        comment: Imports output_file and save for HTML but primary output is PNG
      - id: CQ-04
        name: No Deprecated API
        score: 1
        max: 1
        passed: true
        comment: Uses current Bokeh API
      - id: CQ-05
        name: Output Correct
        score: 0
        max: 1
        passed: false
        comment: Saves both plot.png and plot.html; dual output could be cleaner
    library_features:
      score: 3
      max: 5
      items:
      - id: LF-01
        name: Distinctive Features
        score: 3
        max: 5
        passed: true
        comment: Uses Bokeh figure with line glyphs and custom styling; could use
          ColumnDataSource or multi_line for more idiomatic code
  verdict: REJECTED
impl_tags:
  dependencies: []
  techniques:
  - html-export
  patterns:
  - data-generation
  - iteration-over-groups
  dataprep: []
  styling:
  - grid-styling
