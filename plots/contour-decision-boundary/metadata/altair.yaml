library: altair
specification_id: contour-decision-boundary
created: '2025-12-31T05:48:48Z'
updated: '2025-12-31T06:07:24Z'
generated_by: claude-opus-4-5-20251101
workflow_run: 20612923350
issue: 2921
python_version: 3.13.11
library_version: 6.0.0
preview_url: https://storage.googleapis.com/pyplots-images/plots/contour-decision-boundary/altair/plot.png
preview_thumb: https://storage.googleapis.com/pyplots-images/plots/contour-decision-boundary/altair/plot_thumb.png
preview_html: https://storage.googleapis.com/pyplots-images/plots/contour-decision-boundary/altair/plot.html
quality_score: 91
impl_tags:
  dependencies:
    - sklearn
  techniques:
    - layer-composition
    - hover-tooltips
    - html-export
  patterns:
    - data-generation
    - matrix-construction
  dataprep: []
  styling: []
review:
  strengths:
  - Excellent use of layered Altair charts to combine decision regions, correctly
    classified points, and incorrectly classified points
  - Creative approach using mark_rect with binning to approximate decision boundary
    visualization (Altair lacks native contour support)
  - Clear visual distinction between correctly classified (circles) and incorrectly
    classified (triangles with red stroke) points
  - Proper colorblind-safe palette using Python blue (#306998) and gold (#FFD43B)
  - Interactive tooltips enabled for data exploration
  - Comprehensive legend system explaining all visual encodings
  weaknesses:
  - Title uses regular middle dot instead of proper unicode character
  - Axis labels lack units (could use Feature X1 normalized or similar)
  - The shape legend uses a workaround with invisible points which works but is not
    idiomatic Altair
  image_description: 'The plot displays a KNN decision boundary visualization for
    a two-moon classification dataset. The background shows two colored regions: blue
    (#306998) for Class A and yellow (#FFD43B) for Class B, created using rect marks
    with 0.4 opacity. Training points are overlaid as circles with dark strokes, where
    correctly classified points appear as circles and misclassified points as triangles
    with red strokes. The decision boundary clearly shows the non-linear separation
    between the two crescent-shaped classes. The title "contour-decision-boundary
    · altair · pyplots.ai" is prominently displayed at the top. Axes are labeled "Feature
    X1" and "Feature X2" with clear tick marks. A comprehensive legend on the right
    shows True Class (Class A/B), Classification status (Correct/Incorrect), and Decision
    Region colors.'
  criteria_checklist:
    visual_quality:
      score: 36
      max: 40
      items:
      - id: VQ-01
        name: Text Legibility
        score: 10
        max: 10
        passed: true
        comment: Title at 28pt, axis labels at 22pt, tick labels at 18pt - all clearly
          readable
      - id: VQ-02
        name: No Overlap
        score: 8
        max: 8
        passed: true
        comment: No overlapping text elements
      - id: VQ-03
        name: Element Visibility
        score: 7
        max: 8
        passed: true
        comment: Points are well-sized (250-350) with good stroke visibility. Slight
          deduction as some points in dense areas could be slightly larger
      - id: VQ-04
        name: Color Accessibility
        score: 5
        max: 5
        passed: true
        comment: Blue/yellow color scheme is colorblind-safe
      - id: VQ-05
        name: Layout Balance
        score: 4
        max: 5
        passed: true
        comment: Good layout with legend on right, slight imbalance with legend taking
          up space
      - id: VQ-06
        name: Axis Labels
        score: 1
        max: 2
        passed: true
        comment: '"Feature X1" and "Feature X2" are descriptive but lack units'
      - id: VQ-07
        name: Grid & Legend
        score: 1
        max: 2
        passed: true
        comment: Grid at 0.3 opacity is subtle, legend is comprehensive but has three
          separate sections which is slightly complex
    spec_compliance:
      score: 23
      max: 25
      items:
      - id: SC-01
        name: Plot Type
        score: 8
        max: 8
        passed: true
        comment: Correct decision boundary visualization with classifier regions
      - id: SC-02
        name: Data Mapping
        score: 5
        max: 5
        passed: true
        comment: X1/X2 correctly mapped to features
      - id: SC-03
        name: Required Features
        score: 4
        max: 5
        passed: true
        comment: Has decision regions, training points, class markers, misclassification
          highlighting. Missing explicit contour lines (uses rect binning instead)
      - id: SC-04
        name: Data Range
        score: 3
        max: 3
        passed: true
        comment: All data points visible with appropriate padding
      - id: SC-05
        name: Legend Accuracy
        score: 2
        max: 2
        passed: true
        comment: Legend correctly identifies all elements
      - id: SC-06
        name: Title Format
        score: 1
        max: 2
        passed: true
        comment: Uses correct format but missing middle dot character (uses regular
          dot)
    data_quality:
      score: 19
      max: 20
      items:
      - id: DQ-01
        name: Feature Coverage
        score: 7
        max: 8
        passed: true
        comment: Shows two-moon dataset with both classes, correct and incorrect classifications,
          good boundary complexity. Could show more misclassified points for educational
          value
      - id: DQ-02
        name: Realistic Context
        score: 7
        max: 7
        passed: true
        comment: Classic ML dataset (make_moons) is a standard, appropriate choice
          for demonstrating decision boundaries
      - id: DQ-03
        name: Appropriate Scale
        score: 5
        max: 5
        passed: true
        comment: Feature values in reasonable range (-1.5 to 2.5), typical for standardized
          features
    code_quality:
      score: 9
      max: 10
      items:
      - id: CQ-01
        name: KISS Structure
        score: 3
        max: 3
        passed: true
        comment: 'Linear structure: imports → data → model → plot → save'
      - id: CQ-02
        name: Reproducibility
        score: 3
        max: 3
        passed: true
        comment: Uses np.random.seed(42) and random_state=42
      - id: CQ-03
        name: Clean Imports
        score: 2
        max: 2
        passed: true
        comment: All imports are used (altair, numpy, pandas, sklearn)
      - id: CQ-04
        name: No Deprecated API
        score: 1
        max: 1
        passed: true
        comment: Uses current Altair 6.0 syntax
      - id: CQ-05
        name: Output Correct
        score: 0
        max: 1
        passed: true
        comment: Missing strict=True is actually present (line 43), but output format
          is correct
    library_features:
      score: 4
      max: 5
      items:
      - id: LF-01
        name: Uses distinctive library features
        score: 4
        max: 5
        passed: true
        comment: Good use of layered charts, mark_rect for decision regions, mark_point
          with shapes, tooltips for interactivity, proper encoding types. Could leverage
          more Altair-specific features like selections
  verdict: APPROVED
