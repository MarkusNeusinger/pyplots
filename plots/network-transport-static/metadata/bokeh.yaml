library: bokeh
specification_id: network-transport-static
created: '2026-01-10T01:58:03Z'
updated: '2026-01-10T02:01:01Z'
generated_by: claude-opus-4-5-20251101
workflow_run: 20870862564
issue: 3463
python_version: 3.13.11
library_version: 3.8.2
preview_url: https://storage.googleapis.com/pyplots-images/plots/network-transport-static/bokeh/plot.png
preview_thumb: https://storage.googleapis.com/pyplots-images/plots/network-transport-static/bokeh/plot_thumb.png
preview_html: https://storage.googleapis.com/pyplots-images/plots/network-transport-static/bokeh/plot.html
quality_score: 91
review:
  strengths:
  - Excellent use of Arrow and VeeHead for directed edges with proper color matching
  - Smart perpendicular offset calculation for multiple routes between same stations
  - Rotated labels along edge direction improve readability
  - White background on route labels prevents overlap with edges
  - Clean KISS structure with comprehensive inline comments
  - Dual output (PNG + HTML) leverages Bokeh strengths
  weaknesses:
  - Legend could show all 7 route IDs with their specific colors instead of grouping
    by category
  - Missing HoverTool tooltips (spec mentions tooltips where supported should show
    full route details)
  - Some route labels for diagonal edges at steep angles are harder to read
  image_description: 'The plot displays a regional rail network with 12 station nodes
    (Harbor, North Terminal, Central Station, South Hub, Stadium, East Junction, Downtown,
    Airport, Tech Campus, University, Medical Center, Industrial Park) arranged geographically
    across the canvas. Stations are shown as white circles with blue outlines and
    labels positioned below. Routes are depicted as colored arrows with VeeHead arrowheads
    indicating direction. Colors distinguish route types: blues (RE 10, RE 20, RE
    30, RE 40) for Regional Express, yellow/orange (S1, S2) for S-Bahn, and red (EX
    1) for Express. Each arrow has a rotated label showing route ID and times (e.g.,
    "RE 30 | 06:30→07:00"). A legend in the upper-right corner identifies the three
    service categories. The title "network-transport-static · bokeh · pyplots.ai"
    is centered at the top with 48pt font. Background is light gray (#FAFAFA).'
  criteria_checklist:
    visual_quality:
      score: 37
      max: 40
      items:
      - id: VQ-01
        name: Text Legibility
        score: 9
        max: 10
        passed: true
        comment: Title at 48pt is excellent, station labels at 18pt are readable,
          route labels at 18pt are readable but some diagonal labels slightly harder
          to read
      - id: VQ-02
        name: No Overlap
        score: 7
        max: 8
        passed: true
        comment: Most labels well-positioned with white backgrounds; minor overlap
          where two routes share similar paths
      - id: VQ-03
        name: Element Visibility
        score: 8
        max: 8
        passed: true
        comment: Nodes (size=100) and arrows (line_width=6, VeeHead size=35) appropriately
          sized for 4800x2700 canvas
      - id: VQ-04
        name: Color Accessibility
        score: 5
        max: 5
        passed: true
        comment: Color palette is colorblind-friendly with distinguishable hues
      - id: VQ-05
        name: Layout Balance
        score: 5
        max: 5
        passed: true
        comment: Stations well-distributed across canvas with appropriate margins
      - id: VQ-06
        name: Axis Labels
        score: 2
        max: 2
        passed: true
        comment: N/A for network diagram; axes appropriately hidden
      - id: VQ-07
        name: Grid & Legend
        score: 1
        max: 2
        passed: true
        comment: Legend present but groups multiple routes under single category colors
    spec_compliance:
      score: 23
      max: 25
      items:
      - id: SC-01
        name: Plot Type
        score: 8
        max: 8
        passed: true
        comment: Correct directed network visualization with nodes and edges
      - id: SC-02
        name: Data Mapping
        score: 5
        max: 5
        passed: true
        comment: Stations mapped to nodes with x/y coordinates, routes mapped to directed
          edges
      - id: SC-03
        name: Required Features
        score: 4
        max: 5
        passed: true
        comment: Has direction arrows, route labels with times, color-coding, offset
          edges. Missing tooltips
      - id: SC-04
        name: Data Range
        score: 3
        max: 3
        passed: true
        comment: All stations and routes visible within canvas bounds
      - id: SC-05
        name: Legend Accuracy
        score: 1
        max: 2
        passed: true
        comment: Legend accurately describes route types but groups multiple RE routes
          under single color
      - id: SC-06
        name: Title Format
        score: 2
        max: 2
        passed: true
        comment: 'Correct format: network-transport-static · bokeh · pyplots.ai'
    data_quality:
      score: 18
      max: 20
      items:
      - id: DQ-01
        name: Feature Coverage
        score: 7
        max: 8
        passed: true
        comment: Shows 12 stations and 19 routes with various connection patterns
          and return services
      - id: DQ-02
        name: Realistic Context
        score: 7
        max: 7
        passed: true
        comment: Excellent real-world scenario with plausible station names and realistic
          morning timetable
      - id: DQ-03
        name: Appropriate Scale
        score: 4
        max: 5
        passed: true
        comment: Station coordinates and times are sensible; some travel times seem
          short for distances
    code_quality:
      score: 10
      max: 10
      items:
      - id: CQ-01
        name: KISS Structure
        score: 3
        max: 3
        passed: true
        comment: 'Linear structure: imports → data → figure → routes → stations →
          legend → save'
      - id: CQ-02
        name: Reproducibility
        score: 3
        max: 3
        passed: true
        comment: np.random.seed(42) set at start
      - id: CQ-03
        name: Clean Imports
        score: 2
        max: 2
        passed: true
        comment: All imports used (numpy, bokeh components)
      - id: CQ-04
        name: No Deprecated API
        score: 1
        max: 1
        passed: true
        comment: Uses current Bokeh API
      - id: CQ-05
        name: Output Correct
        score: 1
        max: 1
        passed: true
        comment: Saves as plot.png and plot.html
    library_features:
      score: 3
      max: 5
      items:
      - id: LF-01
        name: Distinctive Features
        score: 3
        max: 5
        passed: true
        comment: Uses Arrow, VeeHead, ColumnDataSource, LabelSet, Label with rotation.
          Could add HoverTool for tooltips
  verdict: APPROVED
impl_tags:
  dependencies: []
  techniques:
  - annotations
  - html-export
  - patches
  patterns:
  - data-generation
  - columndatasource
  - iteration-over-groups
  dataprep: []
  styling:
  - alpha-blending
  - minimal-chrome
