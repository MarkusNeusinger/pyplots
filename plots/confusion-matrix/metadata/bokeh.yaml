library: bokeh
specification_id: confusion-matrix
created: '2025-12-26T17:37:19Z'
updated: '2025-12-26T17:44:11Z'
generated_by: claude-opus-4-5-20251101
workflow_run: 20526592377
issue: 0
python_version: 3.13.11
library_version: 3.8.1
preview_url: https://storage.googleapis.com/pyplots-images/plots/confusion-matrix/bokeh/plot.png
preview_thumb: https://storage.googleapis.com/pyplots-images/plots/confusion-matrix/bokeh/plot_thumb.png
preview_html: https://storage.googleapis.com/pyplots-images/plots/confusion-matrix/bokeh/plot.html
quality_score: 96
impl_tags:
  dependencies: []
  techniques:
  - annotations
  - colorbar
  - manual-ticks
  patterns:
  - data-generation
  - columndatasource
  dataprep: []
  styling: []
review:
  strengths:
  - 'Excellent use of Bokeh-specific features: ColumnDataSource for data management,
    LinearColorMapper with transform() for color encoding, LabelSet for cell annotations'
  - Smart dynamic text color calculation (white on dark cells, dark blue on light
    cells) ensures all annotations are readable
  - Square 3600x3600 format is ideal for confusion matrix visualization
  - Realistic sentiment analysis scenario with plausible confusion patterns (adjacent
    classes more likely to be confused)
  - Clean code structure following KISS principles with good comments explaining choices
  weaknesses:
  - 'Minor: X-axis labels have slight rotation (0.4 rad) which is not strictly necessary
    for 4 short class names'
  - 'VQ-07: Could add slightly more styling to the colorbar or include summary statistics'
  image_description: The plot displays a 4x4 confusion matrix heatmap for a sentiment
    analysis classifier with classes "Negative", "Neutral", "Positive", and "Very
    Positive". The matrix uses a Blues sequential colormap ranging from light blue
    (low values near 0) to dark navy blue (high values around 156). Each cell contains
    bold white or dark blue text showing the count value, with contrasting colors
    for readability. The diagonal shows strong correct predictions (142, 98, 156,
    86), while off-diagonal cells show misclassification patterns. The title "confusion-matrix
    · bokeh · pyplots.ai" appears at the top. Axis labels clearly show "True Label"
    (Y-axis) and "Predicted Label" (X-axis), with class names on both axes. A colorbar
    on the right indicates the count scale from 0-156.
  criteria_checklist:
    visual_quality:
      score: 36
      max: 40
      items:
      - id: VQ-01
        name: Text Legibility
        score: 9
        max: 10
        passed: true
        comment: All text clearly readable at full size, appropriate font sizes for
          3600x3600 canvas
      - id: VQ-02
        name: No Overlap
        score: 8
        max: 8
        passed: true
        comment: No overlapping text, well-spaced labels and annotations
      - id: VQ-03
        name: Element Visibility
        score: 8
        max: 8
        passed: true
        comment: Cell rectangles perfectly sized with white borders for clear separation
      - id: VQ-04
        name: Color Accessibility
        score: 5
        max: 5
        passed: true
        comment: Blues sequential colormap is colorblind-safe
      - id: VQ-05
        name: Layout Balance
        score: 4
        max: 5
        passed: true
        comment: Good square layout appropriate for confusion matrix
      - id: VQ-06
        name: Axis Labels
        score: 2
        max: 2
        passed: true
        comment: Descriptive "True Label" and "Predicted Label"
      - id: VQ-07
        name: Grid & Legend
        score: 0
        max: 2
        passed: false
        comment: No grid (appropriate), colorbar present but minor styling gap
    spec_compliance:
      score: 25
      max: 25
      items:
      - id: SC-01
        name: Plot Type
        score: 8
        max: 8
        passed: true
        comment: Correct confusion matrix heatmap
      - id: SC-02
        name: Data Mapping
        score: 5
        max: 5
        passed: true
        comment: True labels on Y-axis, Predicted on X-axis
      - id: SC-03
        name: Required Features
        score: 5
        max: 5
        passed: true
        comment: 'All spec features: annotations, colorbar, sequential colormap'
      - id: SC-04
        name: Data Range
        score: 3
        max: 3
        passed: true
        comment: All data visible
      - id: SC-05
        name: Legend Accuracy
        score: 2
        max: 2
        passed: true
        comment: Class names correct
      - id: SC-06
        name: Title Format
        score: 2
        max: 2
        passed: true
        comment: Uses "confusion-matrix · bokeh · pyplots.ai"
    data_quality:
      score: 20
      max: 20
      items:
      - id: DQ-01
        name: Feature Coverage
        score: 8
        max: 8
        passed: true
        comment: Shows diagonal dominance, adjacent class confusion, class imbalance
      - id: DQ-02
        name: Realistic Context
        score: 7
        max: 7
        passed: true
        comment: Sentiment analysis is a realistic multi-class scenario
      - id: DQ-03
        name: Appropriate Scale
        score: 5
        max: 5
        passed: true
        comment: Realistic count values (~750 total samples)
    code_quality:
      score: 10
      max: 10
      items:
      - id: CQ-01
        name: KISS Structure
        score: 3
        max: 3
        passed: true
        comment: Clean imports → data → plot → save flow
      - id: CQ-02
        name: Reproducibility
        score: 3
        max: 3
        passed: true
        comment: np.random.seed(42) set
      - id: CQ-03
        name: Clean Imports
        score: 2
        max: 2
        passed: true
        comment: All imports used
      - id: CQ-04
        name: No Deprecated API
        score: 1
        max: 1
        passed: true
        comment: Current Bokeh APIs
      - id: CQ-05
        name: Output Correct
        score: 1
        max: 1
        passed: true
        comment: Saves plot.png
    library_features:
      score: 5
      max: 5
      items: []
  verdict: APPROVED
