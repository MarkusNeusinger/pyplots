library: pygal
specification_id: heatmap-geographic
created: '2026-01-10T22:40:50Z'
updated: '2026-01-10T22:50:59Z'
generated_by: claude-opus-4-5-20251101
workflow_run: 20885435790
issue: 3638
python_version: 3.13.11
library_version: 3.1.0
preview_url: https://storage.googleapis.com/pyplots-images/plots/heatmap-geographic/pygal/plot.png
preview_thumb: https://storage.googleapis.com/pyplots-images/plots/heatmap-geographic/pygal/plot_thumb.png
preview_html: https://storage.googleapis.com/pyplots-images/plots/heatmap-geographic/pygal/plot.html
quality_score: 85
review:
  strengths:
  - Creative extension of pygal's base Graph class to implement a chart type not natively
    supported
  - Excellent geographic context with California coastline approximation
  - Smooth Gaussian-smoothed heatmap with proper KDE-like appearance
  - Well-implemented colorbar with gradient and tick labels
  - Good color palette (YlOrRd) that is colorblind-accessible
  - Realistic environmental monitoring data scenario
  weaknesses:
  - Uses custom class which violates KISS principle (though necessary for pygal)
  - Grid and legend criterion not fully met (no scatter point legend)
  - Heatmap cells have fixed opacity (0.75) instead of allowing basemap transparency
    as spec suggests
  - Right margin is wider than necessary, reducing effective plot area
  image_description: 'The plot displays a geographic heatmap of California showing
    spatial density data for environmental monitoring stations. The visualization
    uses a YlOrRd (yellow-orange-red) colormap with a light blue background representing
    the geographic area. Three distinct density clusters are visible: a large Northern
    California cluster (around lat 38-39°), a Central California coast cluster (around
    lat 36-37°), and a Southern California cluster (around lat 33-34°). The heatmap
    cells show continuous color gradients from yellow (low density ~0) to dark red
    (high density ~105). Blue semi-transparent scatter points overlay the heatmap
    showing individual data point locations. Two black polylines approximate the California
    coastline (west) and state boundary (east). The plot includes axis labels with
    units ("Longitude (°)" and "Latitude (°)"), tick marks along both axes, and a
    vertical colorbar on the right showing the density scale from 0.0 to 105.5. The
    title correctly follows the format "heatmap-geographic · pygal · pyplots.ai".'
  criteria_checklist:
    visual_quality:
      score: 33
      max: 40
      items:
      - id: VQ-01
        name: Text Legibility
        score: 9
        max: 10
        passed: true
        comment: Title, axis labels, and tick marks are all clearly readable. Font
          sizes are appropriate for the 4800x2700 canvas. Minor deduction for colorbar
          tick labels being slightly smaller.
      - id: VQ-02
        name: No Overlap
        score: 8
        max: 8
        passed: true
        comment: No overlapping text elements. All labels and ticks are well-spaced.
      - id: VQ-03
        name: Element Visibility
        score: 6
        max: 8
        passed: true
        comment: Heatmap cells are well-sized and visible. Scatter point markers at
          r=8 are visible but could be slightly larger given the canvas size.
      - id: VQ-04
        name: Color Accessibility
        score: 5
        max: 5
        passed: true
        comment: YlOrRd colormap is colorblind-safe. Blue scatter points provide good
          contrast.
      - id: VQ-05
        name: Layout Balance
        score: 3
        max: 5
        passed: true
        comment: Plot fills approximately 60% of the canvas but margins are somewhat
          large.
      - id: VQ-06
        name: Axis Labels
        score: 2
        max: 2
        passed: true
        comment: Both axes have descriptive labels with units.
      - id: VQ-07
        name: Grid & Legend
        score: 0
        max: 2
        passed: false
        comment: No legend for scatter points. Colorbar serves as density legend only.
    spec_compliance:
      score: 23
      max: 25
      items:
      - id: SC-01
        name: Plot Type
        score: 8
        max: 8
        passed: true
        comment: Correctly implements a geographic heatmap showing spatial density.
      - id: SC-02
        name: Data Mapping
        score: 5
        max: 5
        passed: true
        comment: Latitude and longitude correctly mapped to Y and X axes.
      - id: SC-03
        name: Required Features
        score: 4
        max: 5
        passed: true
        comment: Has colorbar, coastlines, KDE smoothing. Missing transparency for
          basemap visibility.
      - id: SC-04
        name: Data Range
        score: 3
        max: 3
        passed: true
        comment: Axes show the full California region.
      - id: SC-05
        name: Legend Accuracy
        score: 2
        max: 2
        passed: true
        comment: Colorbar correctly labeled with accurate scale values.
      - id: SC-06
        name: Title Format
        score: 1
        max: 2
        passed: true
        comment: Title format is correct using middle dot separator.
    data_quality:
      score: 18
      max: 20
      items:
      - id: DQ-01
        name: Feature Coverage
        score: 7
        max: 8
        passed: true
        comment: Shows multiple density clusters with varying intensities and smooth
          gradients.
      - id: DQ-02
        name: Realistic Context
        score: 7
        max: 7
        passed: true
        comment: Environmental monitoring stations across California is a realistic
          scientific scenario.
      - id: DQ-03
        name: Appropriate Scale
        score: 4
        max: 5
        passed: true
        comment: Geographic coordinates are accurate for California. Density values
          are reasonable.
    code_quality:
      score: 6
      max: 10
      items:
      - id: CQ-01
        name: KISS Structure
        score: 0
        max: 3
        passed: false
        comment: Uses a custom class extending Graph, violating KISS principle but
          necessary for pygal.
      - id: CQ-02
        name: Reproducibility
        score: 3
        max: 3
        passed: true
        comment: np.random.seed(42) is set at the beginning.
      - id: CQ-03
        name: Clean Imports
        score: 2
        max: 2
        passed: true
        comment: Only necessary imports are used.
      - id: CQ-04
        name: No Deprecated API
        score: 1
        max: 1
        passed: true
        comment: Uses current pygal API.
      - id: CQ-05
        name: Output Correct
        score: 0
        max: 1
        passed: false
        comment: Output filename is correct but scoring was already done.
    library_features:
      score: 5
      max: 5
      items:
      - id: LF-01
        name: Distinctive Features
        score: 5
        max: 5
        passed: true
        comment: Extends pygal's Graph base class to create a custom chart type. Uses
          SVG node manipulation and pygal's styling system.
  verdict: REJECTED
impl_tags:
  dependencies: []
  techniques:
  - colorbar
  - annotations
  - patches
  patterns:
  - data-generation
  - matrix-construction
  - iteration-over-groups
  dataprep:
  - binning
  - kde
  styling:
  - custom-colormap
  - alpha-blending
  - grid-styling
