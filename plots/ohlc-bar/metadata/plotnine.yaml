library: plotnine
specification_id: ohlc-bar
created: '2026-01-08T16:05:09Z'
updated: '2026-01-08T16:12:48Z'
generated_by: claude-opus-4-5-20251101
workflow_run: 20823093280
issue: 3293
python_version: 3.13.11
library_version: 0.15.2
preview_url: https://storage.googleapis.com/pyplots-images/plots/ohlc-bar/plotnine/plot.png
preview_thumb: https://storage.googleapis.com/pyplots-images/plots/ohlc-bar/plotnine/plot_thumb.png
preview_html: null
quality_score: 92
review:
  strengths:
  - Correct implementation of OHLC bars using geom_segment for all three components
    (high-low, open tick, close tick)
  - Excellent use of plotnine grammar of graphics approach with layered segments
  - Well-structured data generation with realistic random walk for stock prices
  - Good color coding distinguishing up vs down days
  - Appropriate figure size (16x9) and font scaling for 4800x2700 output
  - Clean, readable code structure following KISS principles
  weaknesses:
  - Red/green color scheme, while standard for finance, is not optimal for colorblind
    accessibility (could use blue/orange)
  - Legend placement and styling could be slightly improved
  image_description: The plot displays an OHLC bar chart with 50 days of simulated
    stock price data spanning June to early August 2024. Each bar consists of a vertical
    line showing the high-low range, with a left tick for the opening price and a
    right tick for the closing price. Green bars indicate "up" days (close > open)
    and red bars indicate "down" days (close < open). The chart shows a general downward
    trend from around $165 at the peak in mid-June to approximately $125-130 by early
    August. The title "ohlc-bar · plotnine · pyplots.ai" is displayed prominently
    at the top in bold. The Y-axis shows "Price (USD)" and the X-axis shows "Date"
    with labels at Jun 03, Jun 17, Jul 01, Jul 15, and Jul 29. A legend on the right
    explains the color coding for Direction (Down/Up). The background is white with
    subtle gray grid lines that aid in reading exact price levels.
  criteria_checklist:
    visual_quality:
      score: 37
      max: 40
      items:
      - id: VQ-01
        name: Text Legibility
        score: 10
        max: 10
        passed: true
        comment: Title is 24pt bold, axis titles 20pt, tick labels 16pt - all perfectly
          readable
      - id: VQ-02
        name: No Overlap
        score: 8
        max: 8
        passed: true
        comment: No overlapping text elements, x-axis date labels well-spaced
      - id: VQ-03
        name: Element Visibility
        score: 7
        max: 8
        passed: true
        comment: OHLC bars clearly visible with good line width (1.2), tick marks
          distinct
      - id: VQ-04
        name: Color Accessibility
        score: 4
        max: 5
        passed: true
        comment: Red/green color scheme is standard for finance but not ideal for
          colorblind users
      - id: VQ-05
        name: Layout Balance
        score: 5
        max: 5
        passed: true
        comment: Plot fills canvas well, good proportions, legend positioned appropriately
      - id: VQ-06
        name: Axis Labels
        score: 2
        max: 2
        passed: true
        comment: Price (USD) includes units, Date is descriptive
      - id: VQ-07
        name: Grid & Legend
        score: 1
        max: 2
        passed: true
        comment: Grid is subtle (alpha 0.3), legend could be better integrated
    spec_compliance:
      score: 25
      max: 25
      items:
      - id: SC-01
        name: Plot Type
        score: 8
        max: 8
        passed: true
        comment: Correct OHLC bar chart with vertical high-low lines and horizontal
          open/close ticks
      - id: SC-02
        name: Data Mapping
        score: 5
        max: 5
        passed: true
        comment: Date on X-axis, price on Y-axis, OHLC values correctly mapped
      - id: SC-03
        name: Required Features
        score: 5
        max: 5
        passed: true
        comment: Thin vertical lines, left ticks for open, right ticks for close,
          up/down coloring, grid lines
      - id: SC-04
        name: Data Range
        score: 3
        max: 3
        passed: true
        comment: Y-axis shows full price range from ~125 to 170
      - id: SC-05
        name: Legend Accuracy
        score: 2
        max: 2
        passed: true
        comment: Legend correctly explains up/down direction colors
      - id: SC-06
        name: Title Format
        score: 2
        max: 2
        passed: true
        comment: Uses correct format ohlc-bar · plotnine · pyplots.ai
    data_quality:
      score: 18
      max: 20
      items:
      - id: DQ-01
        name: Feature Coverage
        score: 7
        max: 8
        passed: true
        comment: Shows both bullish and bearish bars, varied volatility, realistic
          price movements
      - id: DQ-02
        name: Realistic Context
        score: 7
        max: 7
        passed: true
        comment: Stock price data with realistic values (~$125-170), appropriate volatility
      - id: DQ-03
        name: Appropriate Scale
        score: 4
        max: 5
        passed: true
        comment: 50 trading days is good, prices are realistic stock values
    code_quality:
      score: 9
      max: 10
      items:
      - id: CQ-01
        name: KISS Structure
        score: 3
        max: 3
        passed: true
        comment: Simple imports → data → plot → save structure, no functions/classes
      - id: CQ-02
        name: Reproducibility
        score: 3
        max: 3
        passed: true
        comment: Uses np.random.seed(42)
      - id: CQ-03
        name: Clean Imports
        score: 2
        max: 2
        passed: true
        comment: All imports are used
      - id: CQ-04
        name: No Deprecated API
        score: 1
        max: 1
        passed: true
        comment: Uses current plotnine API
      - id: CQ-05
        name: Output Correct
        score: 0
        max: 1
        passed: false
        comment: Saves as plot.png but verbose=False parameter is unnecessary
    library_features:
      score: 3
      max: 5
      items:
      - id: LF-01
        name: Distinctive Features
        score: 3
        max: 5
        passed: true
        comment: Uses plotnine grammar of graphics with geom_segment and scale_color_manual,
          but implementation is relatively basic
  verdict: APPROVED
impl_tags:
  dependencies: []
  techniques:
  - layer-composition
  - manual-ticks
  patterns:
  - data-generation
  dataprep:
  - time-series
  styling:
  - grid-styling
