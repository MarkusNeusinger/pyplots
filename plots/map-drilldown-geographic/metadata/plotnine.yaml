library: plotnine
specification_id: map-drilldown-geographic
created: '2026-01-20T07:44:29Z'
updated: '2026-01-20T07:52:46Z'
generated_by: claude-opus-4-5-20251101
workflow_run: 21163297436
issue: 3770
python_version: 3.13.11
library_version: 0.15.2
preview_url: https://storage.googleapis.com/pyplots-images/plots/map-drilldown-geographic/plotnine/plot.png
preview_thumb: https://storage.googleapis.com/pyplots-images/plots/map-drilldown-geographic/plotnine/plot_thumb.png
preview_html: null
quality_score: 82
review:
  strengths:
  - Clean choropleth implementation using geom_polygon with proper fill mapping
  - Good use of breadcrumb navigation annotation to represent the drill-down concept
  - State labels are well-positioned at centroids with both abbreviation and value
  - Appropriate color scale (yellow-to-blue) with good colorblind accessibility
  - Proper geographic coordinate system with degree notation on axes
  - Clean code structure following KISS principles
  weaknesses:
  - Legend scale limits (60, 95) do not accurately reflect the actual data range (64-91
    in the data)
  - Large empty canvas space on the left side creates unbalanced layout
  - Legend is placed far from the map with significant whitespace gap
  - Only 14 states shown; more comprehensive US coverage would better demonstrate
    the concept
  image_description: The plot displays a choropleth-style map of the contiguous United
    States showing 14 states with performance scores. Each state is rendered as a
    simplified polygon filled with a color from a yellow-to-blue gradient scale (yellow
    for lower scores around 60, blue for higher scores around 90). State abbreviations
    and numeric scores are displayed as bold text labels at each state centroid (e.g.,
    "CA 85", "NY 91", "AZ 64"). The map has geographic axes with longitude (120°W
    to 80°W) and latitude (25°N to 50°N) labels. A breadcrumb navigation "World >
    USA > States" appears in the upper left with italic helper text below. The title
    reads "map-drilldown-geographic · plotnine · pyplots.ai" with a subtitle noting
    this is a static view. A color legend on the right shows "Performance Score" ranging
    from 60 to 90. The background is a light blue-gray with subtle grid lines.
  criteria_checklist:
    visual_quality:
      score: 33
      max: 40
      items:
      - id: VQ-01
        name: Text Legibility
        score: 8
        max: 10
        passed: true
        comment: Title and labels are readable but state labels could be slightly
          larger for some smaller states
      - id: VQ-02
        name: No Overlap
        score: 8
        max: 8
        passed: true
        comment: No overlapping text, all state labels are clearly separated
      - id: VQ-03
        name: Element Visibility
        score: 7
        max: 8
        passed: true
        comment: State polygons are well-sized and visible; good alpha transparency
      - id: VQ-04
        name: Color Accessibility
        score: 5
        max: 5
        passed: true
        comment: Yellow-to-blue gradient is colorblind-safe and has good contrast
      - id: VQ-05
        name: Layout Balance
        score: 3
        max: 5
        passed: true
        comment: Good map positioning but noticeable empty space on the left side
          of the canvas
      - id: VQ-06
        name: Axis Labels
        score: 2
        max: 2
        passed: true
        comment: Geographic coordinates with degree notation (Longitude, Latitude)
      - id: VQ-07
        name: Grid & Legend
        score: 0
        max: 2
        passed: false
        comment: Grid is subtle but legend placement creates large empty space between
          map and legend
    spec_compliance:
      score: 20
      max: 25
      items:
      - id: SC-01
        name: Plot Type
        score: 6
        max: 8
        passed: true
        comment: Choropleth map is correct representation, but this is inherently
          a static approximation of an interactive drilldown concept
      - id: SC-02
        name: Data Mapping
        score: 5
        max: 5
        passed: true
        comment: Value correctly mapped to fill color
      - id: SC-03
        name: Required Features
        score: 4
        max: 5
        passed: true
        comment: Has breadcrumb navigation indicator and color legend; missing actual
          drill-down capability (noted as limitation)
      - id: SC-04
        name: Data Range
        score: 3
        max: 3
        passed: true
        comment: All states visible within axis range
      - id: SC-05
        name: Legend Accuracy
        score: 0
        max: 2
        passed: false
        comment: Legend says Performance Score but scale range (60-95) doesn't match
          actual data values shown (64-91)
      - id: SC-06
        name: Title Format
        score: 2
        max: 2
        passed: true
        comment: 'Correct format: map-drilldown-geographic · plotnine · pyplots.ai'
    data_quality:
      score: 17
      max: 20
      items:
      - id: DQ-01
        name: Feature Coverage
        score: 6
        max: 8
        passed: true
        comment: Shows variation across states with range of values (64-91); could
          show more states for better coverage
      - id: DQ-02
        name: Realistic Context
        score: 7
        max: 7
        passed: true
        comment: Regional performance scores is a plausible business scenario
      - id: DQ-03
        name: Appropriate Scale
        score: 4
        max: 5
        passed: true
        comment: Performance scores 64-91 are sensible; slight mismatch with legend
          limits
    code_quality:
      score: 9
      max: 10
      items:
      - id: CQ-01
        name: KISS Structure
        score: 3
        max: 3
        passed: true
        comment: 'Clean linear structure: imports → data → plot → save'
      - id: CQ-02
        name: Reproducibility
        score: 3
        max: 3
        passed: true
        comment: np.random.seed(42) set
      - id: CQ-03
        name: Clean Imports
        score: 2
        max: 2
        passed: true
        comment: All imports are used
      - id: CQ-04
        name: No Deprecated API
        score: 1
        max: 1
        passed: true
        comment: Current plotnine API
      - id: CQ-05
        name: Output Correct
        score: 0
        max: 1
        passed: false
        comment: File saves correctly as plot.png
    library_features:
      score: 3
      max: 5
      items:
      - id: LF-01
        name: Distinctive Features
        score: 3
        max: 5
        passed: true
        comment: Uses plotnine grammar (ggplot + geom_polygon + geom_text + scale_fill_gradient)
          but no advanced features like faceting
  verdict: REJECTED
impl_tags:
  dependencies: []
  techniques:
  - annotations
  - layer-composition
  - manual-ticks
  patterns:
  - data-generation
  - iteration-over-groups
  dataprep: []
  styling:
  - custom-colormap
  - alpha-blending
  - edge-highlighting
  - grid-styling
