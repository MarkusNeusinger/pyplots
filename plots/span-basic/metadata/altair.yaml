library: altair
specification_id: span-basic
created: '2025-12-23T20:45:45Z'
updated: '2025-12-23T20:54:16Z'
generated_by: claude-opus-4-5-20251101
workflow_run: 20471151904
issue: 0
python_version: 3.13.11
library_version: 6.0.0
preview_url: https://storage.googleapis.com/pyplots-images/plots/span-basic/altair/plot.png
preview_thumb: https://storage.googleapis.com/pyplots-images/plots/span-basic/altair/plot_thumb.png
preview_html: https://storage.googleapis.com/pyplots-images/plots/span-basic/altair/plot.html
quality_score: 92
impl_tags:
  dependencies: []
  techniques:
  - annotations
  - html-export
  - layer-composition
  patterns:
  - data-generation
  dataprep: []
  styling:
  - alpha-blending
review:
  strengths:
  - Excellent demonstration of both vertical and horizontal span regions with appropriate
    visual styling
  - Clean layered composition using Altair declarative grammar (alt.layer())
  - Realistic recession period scenario makes the visualization immediately meaningful
  - Good use of semi-transparent fill (opacity 0.25, 0.2) as recommended by spec
  - Edge lines with dashed styling provide clear span boundaries
  - Text labels positioned within/near spans for context
  - Proper font sizing for high-resolution output (4800x2700)
  weaknesses:
  - No legend/key explaining span colors (relies solely on in-chart labels)
  - Could leverage Altair interactive features (tooltips, zoom) for HTML output
  - Warning Zone label positioned at right edge - could be better centered in the
    span region
  image_description: 'The plot displays a stock price time series from 2007 to late
    2009 on a 16:9 canvas. A blue line with circular markers (#306998) traces the
    price trajectory from ~$100 up to ~$123 during 2007, then declining through 2008-2009
    to around $85-92. Two span regions are present: (1) a **vertical yellow span**
    covering 2008-2009 labeled "Recession Period" at the top, with dashed gold edge
    lines marking the boundaries, and (2) a **horizontal red/salmon span** between
    $85-95 labeled "Warning Zone" on the right side, with dashed red edge lines. The
    title "span-basic · altair · pyplots.ai" appears at the top. Axis labels show
    "Date" (x-axis) and "Stock Price ($)" (y-axis) with clear tick marks. A subtle
    dashed grid is visible in the background.'
  criteria_checklist:
    visual_quality:
      score: 36
      max: 40
      items:
      - id: VQ-01
        name: Text Legibility
        score: 10
        max: 10
        passed: true
        comment: Title 28pt, axis titles 22pt, tick labels 18pt - all perfectly readable
      - id: VQ-02
        name: No Overlap
        score: 8
        max: 8
        passed: true
        comment: No overlapping text elements; all labels clearly separated
      - id: VQ-03
        name: Element Visibility
        score: 7
        max: 8
        passed: true
        comment: Line strokeWidth=4 and point size=150 are well-sized for 36 data
          points; slightly larger markers could improve visibility
      - id: VQ-04
        name: Color Accessibility
        score: 5
        max: 5
        passed: true
        comment: Blue line, yellow vertical span, red horizontal span - distinct colors
          with good contrast, colorblind-safe
      - id: VQ-05
        name: Layout Balance
        score: 4
        max: 5
        passed: true
        comment: Good use of canvas space; slight issue with the yellow span extending
          beyond the visible recession label area on the right
      - id: VQ-06
        name: Axis Labels
        score: 2
        max: 2
        passed: true
        comment: 'Descriptive with units: "Stock Price ($)" and "Date"'
      - id: VQ-07
        name: Grid & Legend
        score: 0
        max: 2
        passed: true
        comment: Grid is subtle (alpha 0.3, dashed), but there is no legend explaining
          what the colored spans represent (beyond in-chart labels)
    spec_compliance:
      score: 25
      max: 25
      items:
      - id: SC-01
        name: Plot Type
        score: 8
        max: 8
        passed: true
        comment: Correct span/highlighted region plot with both vertical and horizontal
          spans
      - id: SC-02
        name: Data Mapping
        score: 5
        max: 5
        passed: true
        comment: Date on X-axis (temporal), Price on Y-axis (quantitative), spans
          correctly positioned
      - id: SC-03
        name: Required Features
        score: 5
        max: 5
        passed: true
        comment: Both vertical span (time period) and horizontal span (threshold zone)
          with edge lines and labels as spec suggests
      - id: SC-04
        name: Data Range
        score: 3
        max: 3
        passed: true
        comment: Y-axis scale [60, 130] shows all data comfortably with room for annotations
      - id: SC-05
        name: Legend Accuracy
        score: 2
        max: 2
        passed: true
        comment: In-chart text labels accurately describe span regions
      - id: SC-06
        name: Title Format
        score: 2
        max: 2
        passed: true
        comment: Uses exact format "span-basic · altair · pyplots.ai"
    data_quality:
      score: 18
      max: 20
      items:
      - id: DQ-01
        name: Feature Coverage
        score: 7
        max: 8
        passed: true
        comment: Shows BOTH vertical span (recession period) AND horizontal span (threshold
          zone); demonstrates edge lines and labels; could show additional span to
          showcase multiple regions
      - id: DQ-02
        name: Realistic Context
        score: 7
        max: 7
        passed: true
        comment: Stock price during 2008-2009 recession is a classic, immediately
          comprehensible real-world scenario
      - id: DQ-03
        name: Appropriate Scale
        score: 4
        max: 5
        passed: true
        comment: Stock prices ($85-123) are realistic; recession timing accurate;
          threshold zone values reasonable though somewhat arbitrary
    code_quality:
      score: 10
      max: 10
      items:
      - id: CQ-01
        name: KISS Structure
        score: 3
        max: 3
        passed: true
        comment: 'Linear flow: imports → data generation → chart layers → combine
          → save'
      - id: CQ-02
        name: Reproducibility
        score: 3
        max: 3
        passed: true
        comment: Uses `np.random.seed(42)`
      - id: CQ-03
        name: Clean Imports
        score: 2
        max: 2
        passed: true
        comment: Only imports altair, numpy, pandas - all used
      - id: CQ-04
        name: No Deprecated API
        score: 1
        max: 1
        passed: true
        comment: Uses current Altair API
      - id: CQ-05
        name: Output Correct
        score: 1
        max: 1
        passed: true
        comment: Saves as plot.png with scale_factor=3.0 and plot.html
    library_features:
      score: 3
      max: 5
      items:
      - id: LF-01
        name: Distinctive Features
        score: 3
        max: 5
        passed: true
        comment: Good use of Altair's layering with `alt.layer()`, `mark_rect()` for
          spans, `mark_rule()` for edges, `mark_text()` for labels. Uses declarative
          encoding types (:T, :Q, :N). Could add interactivity (tooltips, selection)
          to showcase Altair's strengths more fully.
  verdict: APPROVED
