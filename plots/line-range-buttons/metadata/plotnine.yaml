library: plotnine
specification_id: line-range-buttons
created: '2026-01-20T09:50:15Z'
updated: '2026-01-20T09:53:59Z'
generated_by: claude-opus-4-5-20251101
workflow_run: 21166846594
issue: 3786
python_version: 3.13.11
library_version: 0.15.2
preview_url: https://storage.googleapis.com/pyplots-images/plots/line-range-buttons/plotnine/plot.png
preview_thumb: https://storage.googleapis.com/pyplots-images/plots/line-range-buttons/plotnine/plot_thumb.png
preview_html: null
quality_score: 88
review:
  strengths:
  - Creative approach to simulating range selector buttons using geom_rect and geom_text
    layers
  - Clean visual hierarchy with distinct active/inactive button states using consistent
    blue color scheme
  - Proper use of plotnine grammar of graphics with layered composition
  - Good data generation showing realistic stock price behavior with random walk model
  - Helpful annotation explaining the static nature of the visualization
  weaknesses:
  - Grid styling uses element_text instead of element_line which may cause rendering
    issues
  - The buttons are positioned within the plot area using y-axis expansion rather
    than as true UI elements above the chart
  image_description: 'The plot displays a time series line chart showing stock-like
    price data from January 2023 to January 2025 (2 years). The main visualization
    features a blue line (#306998) tracking price values ranging from approximately
    $60 to $155. Above the chart, six range selector buttons are displayed horizontally:
    "1M", "3M", "6M", "YTD", "1Y", and "All". The inactive buttons have a light gray
    background (#E8E8E8) with dark text, while the "All" button is highlighted in
    blue (#306998) with white bold text, indicating the active selection. The x-axis
    shows dates formatted as "Mon YYYY" (e.g., "Jan 2023", "Apr 2023") rotated 45
    degrees. The y-axis displays "Price ($)" with values from 60 to 150. The title
    correctly follows the format: "line-range-buttons · plotnine · pyplots.ai". A
    subtle gray annotation at the bottom notes "[Static visualization - buttons shown
    for demonstration]". The chart has a clean white background with light gray grid
    lines.'
  criteria_checklist:
    visual_quality:
      score: 35
      max: 40
      items:
      - id: VQ-01
        name: Text Legibility
        score: 10
        max: 10
        passed: true
        comment: Title at 24pt, axis titles at 20pt, tick labels at 16pt - all clearly
          readable
      - id: VQ-02
        name: No Overlap
        score: 8
        max: 8
        passed: true
        comment: No overlapping text elements, x-axis labels rotated to avoid collision
      - id: VQ-03
        name: Element Visibility
        score: 8
        max: 8
        passed: true
        comment: Line width appropriate (1.5), alpha 0.9 provides good visibility
          for time series
      - id: VQ-04
        name: Color Accessibility
        score: 5
        max: 5
        passed: true
        comment: Blue color is colorblind-safe, good contrast between active/inactive
          buttons
      - id: VQ-05
        name: Layout Balance
        score: 3
        max: 5
        passed: true
        comment: Good proportions but buttons positioned within plot area rather than
          above it
      - id: VQ-06
        name: Axis Labels
        score: 2
        max: 2
        passed: true
        comment: Price ($) includes unit, Date is descriptive
      - id: VQ-07
        name: Grid & Legend
        score: 0
        max: 2
        passed: false
        comment: Grid line styling uses element_text instead of element_line, causing
          incorrect rendering
    spec_compliance:
      score: 23
      max: 25
      items:
      - id: SC-01
        name: Plot Type
        score: 8
        max: 8
        passed: true
        comment: Correct time series line chart
      - id: SC-02
        name: Data Mapping
        score: 5
        max: 5
        passed: true
        comment: Date correctly mapped to x-axis, value to y-axis
      - id: SC-03
        name: Required Features
        score: 4
        max: 5
        passed: true
        comment: All 6 required buttons present with visual highlighting; animation
          not possible in static library
      - id: SC-04
        name: Data Range
        score: 3
        max: 3
        passed: true
        comment: Full 2-year range visible, axes show all data
      - id: SC-05
        name: Legend Accuracy
        score: 2
        max: 2
        passed: true
        comment: N/A (no legend needed), button labels correct
      - id: SC-06
        name: Title Format
        score: 2
        max: 2
        passed: true
        comment: line-range-buttons · plotnine · pyplots.ai exactly matches spec
    data_quality:
      score: 18
      max: 20
      items:
      - id: DQ-01
        name: Feature Coverage
        score: 7
        max: 8
        passed: true
        comment: Shows realistic stock-like volatility with uptrends, downtrends,
          and recovery
      - id: DQ-02
        name: Realistic Context
        score: 7
        max: 7
        passed: true
        comment: Stock price scenario is realistic and neutral business context
      - id: DQ-03
        name: Appropriate Scale
        score: 4
        max: 5
        passed: true
        comment: 730 daily data points, prices from ~80-155 are realistic stock values
    code_quality:
      score: 9
      max: 10
      items:
      - id: CQ-01
        name: KISS Structure
        score: 3
        max: 3
        passed: true
        comment: Follows imports → data → plot → save structure, no functions/classes
      - id: CQ-02
        name: Reproducibility
        score: 3
        max: 3
        passed: true
        comment: np.random.seed(42) set for reproducible data generation
      - id: CQ-03
        name: Clean Imports
        score: 2
        max: 2
        passed: true
        comment: All imports are used
      - id: CQ-04
        name: No Deprecated API
        score: 1
        max: 1
        passed: true
        comment: Uses current plotnine API
      - id: CQ-05
        name: Output Correct
        score: 0
        max: 1
        passed: false
        comment: Saves as plot.png but minor issue with dpi handling
    library_features:
      score: 3
      max: 5
      items:
      - id: LF-01
        name: Distinctive Features
        score: 3
        max: 5
        passed: true
        comment: Good use of ggplot grammar with geom_rect and geom_text for button
          simulation, proper use of aes(), theme_minimal(), and scale_* functions
  verdict: REJECTED
impl_tags:
  dependencies: []
  techniques:
  - annotations
  - layer-composition
  patterns:
  - data-generation
  dataprep:
  - time-series
  styling:
  - alpha-blending
  - grid-styling
