library: altair
specification_id: candlestick-volume
created: '2025-12-31T13:51:59Z'
updated: '2025-12-31T13:55:34Z'
generated_by: claude-opus-4-5-20251101
workflow_run: 20620313967
issue: 3068
python_version: 3.13.11
library_version: 6.0.0
preview_url: https://storage.googleapis.com/pyplots-images/plots/candlestick-volume/altair/plot.png
preview_thumb: https://storage.googleapis.com/pyplots-images/plots/candlestick-volume/altair/plot_thumb.png
preview_html: https://storage.googleapis.com/pyplots-images/plots/candlestick-volume/altair/plot.html
quality_score: 91
review:
  strengths:
  - Excellent dual-pane layout with proper 75/25 vertical split between price and
    volume
  - Clean candlestick implementation using layered wicks (mark_rule) and bodies (mark_bar)
  - Colorblind-safe blue/yellow color scheme consistently applied across both panes
  - Comprehensive tooltips showing all OHLC values and volume
  - Realistic 60-day stock data generation with appropriate volatility and volume
    correlation
  - Proper title formatting per pyplots.ai conventions
  weaknesses:
  - Missing grid lines - spec explicitly requests subtle grid lines aligned across
    both panes
  - Legend defined in code but not included in the final combined chart
  - Missing crosshair/cursor that spans both panes as specified in requirements
  - No .interactive() call - misses Altair key interactivity strength for financial
    charts
  image_description: The plot displays a professional dual-pane candlestick chart
    with volume. The upper pane (roughly 75% of height) shows 60 days of OHLC candlesticks
    with blue bars for bullish days (close >= open) and yellow/gold bars for bearish
    days. Clear wicks extend from each candle body showing high-low range. Price axis
    labeled "Price ($)" ranges from ~$110 to $154, showing a general downtrend from
    $150 to $115 over the period. The lower pane (~25% height) displays volume bars
    using the identical blue/yellow color scheme for visual consistency. Volume axis
    labeled "Volume" with SI notation (2M, 4M, etc.) up to 12M. Both panes share a
    synchronized x-axis showing dates from early January through late March 2024.
    The title "candlestick-volume · altair · pyplots.ai" appears centered at the top
    with proper formatting.
  criteria_checklist:
    visual_quality:
      score: 36
      max: 40
      items:
      - id: VQ-01
        name: Text Legibility
        score: 9
        max: 10
        passed: true
        comment: Title 28pt, axis labels 20pt, tick labels 16pt - all clearly readable
          but tick labels could be slightly larger
      - id: VQ-02
        name: No Overlap
        score: 8
        max: 8
        passed: true
        comment: No overlapping text elements
      - id: VQ-03
        name: Element Visibility
        score: 7
        max: 8
        passed: true
        comment: Candlesticks and volume bars well-sized, but some narrow candles
          on volatile days could be slightly thicker
      - id: VQ-04
        name: Color Accessibility
        score: 5
        max: 5
        passed: true
        comment: Blue/yellow scheme is colorblind-safe and provides excellent contrast
      - id: VQ-05
        name: Layout Balance
        score: 5
        max: 5
        passed: true
        comment: 75/25 split between price and volume panes as specified, good canvas
          utilization
      - id: VQ-06
        name: Axis Labels
        score: 2
        max: 2
        passed: true
        comment: '"Price ($)" with units, "Volume" and "Date" descriptive'
      - id: VQ-07
        name: Grid & Legend
        score: 0
        max: 2
        passed: true
        comment: No visible grid lines (spec asks for subtle grid), no legend shown
          (color scheme is intuitive but legend was created but not displayed)
    spec_compliance:
      score: 23
      max: 25
      items:
      - id: SC-01
        name: Plot Type
        score: 8
        max: 8
        passed: true
        comment: Correct candlestick + volume dual-pane chart
      - id: SC-02
        name: Data Mapping
        score: 5
        max: 5
        passed: true
        comment: Date on x-axis, OHLC correctly mapped to candles, volume to bars
      - id: SC-03
        name: Required Features
        score: 4
        max: 5
        passed: true
        comment: 'Dual-pane layout ✓, shared x-axis ✓, color-coded ✓, tooltips ✓ -
          Missing: crosshair/cursor spanning both panes per spec'
      - id: SC-04
        name: Data Range
        score: 3
        max: 3
        passed: true
        comment: All data visible, axes properly scaled
      - id: SC-05
        name: Legend Accuracy
        score: 1
        max: 2
        passed: true
        comment: Legend created in code but not actually displayed in final chart
      - id: SC-06
        name: Title Format
        score: 2
        max: 2
        passed: true
        comment: Correctly formatted as "candlestick-volume · altair · pyplots.ai"
    data_quality:
      score: 20
      max: 20
      items:
      - id: DQ-01
        name: Feature Coverage
        score: 8
        max: 8
        passed: true
        comment: Shows both bullish AND bearish candles, varying volume, price trend
          with volatility
      - id: DQ-02
        name: Realistic Context
        score: 7
        max: 7
        passed: true
        comment: Stock price data with realistic daily movements, appropriate volume
          levels
      - id: DQ-03
        name: Appropriate Scale
        score: 5
        max: 5
        passed: true
        comment: Price ~$110-154 realistic for stocks, volume in millions appropriate
    code_quality:
      score: 9
      max: 10
      items:
      - id: CQ-01
        name: KISS Structure
        score: 3
        max: 3
        passed: true
        comment: 'Linear flow: imports → data generation → chart creation → save'
      - id: CQ-02
        name: Reproducibility
        score: 3
        max: 3
        passed: true
        comment: np.random.seed(42) set
      - id: CQ-03
        name: Clean Imports
        score: 2
        max: 2
        passed: true
        comment: Only altair, numpy, pandas used
      - id: CQ-04
        name: No Deprecated API
        score: 1
        max: 1
        passed: true
        comment: Uses current Altair API
      - id: CQ-05
        name: Output Correct
        score: 0
        max: 1
        passed: false
        comment: Saves both plot.png and plot.html (correct), but legend chart created
          but not included in final output
    library_features:
      score: 3
      max: 5
      items:
      - id: LF-01
        name: Uses distinctive library features
        score: 3
        max: 5
        passed: true
        comment: Good use of vconcat for dual pane, layering for candlesticks, tooltips
          - but no interactivity (.interactive()) which is Altair's key strength
  verdict: APPROVED
