library: matplotlib
specification_id: map-marker-clustered
created: '2026-01-20T18:50:50Z'
updated: '2026-01-20T18:54:03Z'
generated_by: claude-opus-4-5-20251101
workflow_run: 21183369718
issue: 3766
python_version: 3.13.11
library_version: 3.10.8
preview_url: https://storage.googleapis.com/pyplots-images/plots/map-marker-clustered/matplotlib/plot.png
preview_thumb: https://storage.googleapis.com/pyplots-images/plots/map-marker-clustered/matplotlib/plot_thumb.png
preview_html: null
quality_score: 85
review:
  strengths:
  - Excellent implementation of grid-based clustering algorithm that effectively groups
    nearby points
  - Clear visual hierarchy between individual points (semi-transparent background)
    and cluster markers (prominent with counts)
  - Well-chosen color scheme for three store categories with good visual distinction
  - Clean code structure with logical progression from data generation to visualization
  - Geographic reference labels (Atlantic Ocean, Mediterranean Sea) add helpful context
  - Informative summary annotation showing total locations and cluster count
  weaknesses:
  - No actual basemap/geographic context (spec requests boundaries, streets, or terrain)
    - only a styled grid approximation
  - Static implementation cannot demonstrate interactive features like click-to-zoom
    or smooth zoom transitions mentioned in spec
  - Axis labels lack unit specification (should be Longitude degrees and Latitude
    degrees)
  - Grid uses solid lines instead of recommended dashed style for subtlety
  image_description: 'The plot displays a map of Europe showing clustered store locations
    across major cities. The visualization uses a light gray background (#f5f5f5)
    with a white grid overlay simulating a map basemap. Three categories of stores
    are shown: Retail (blue, #306998), Grocery (green, #2E7D32), and Electronics (yellow,
    #FFD43B). Individual store locations appear as small semi-transparent markers
    in the background, while cluster markers are displayed as larger colored circles
    with white count labels inside. Clusters range from 1 to 40 locations each. Geographic
    reference labels for "Atlantic Ocean" and "Mediterranean Sea" are rendered in
    light blue italic text. The axes show Longitude (-10 to 20) and Latitude (37.5
    to 55.0). A summary note in the bottom-right indicates "Total: 280 locations in
    27 clusters". The title follows the correct format: "map-marker-clustered 路 matplotlib
    路 pyplots.ai".'
  criteria_checklist:
    visual_quality:
      score: 35
      max: 40
      items:
      - id: VQ-01
        name: Text Legibility
        score: 10
        max: 10
        passed: true
        comment: Title at 24pt, axis labels at 20pt, tick labels at 16pt, all clearly
          readable
      - id: VQ-02
        name: No Overlap
        score: 8
        max: 8
        passed: true
        comment: No overlapping text elements; cluster labels are well-positioned
          within markers
      - id: VQ-03
        name: Element Visibility
        score: 6
        max: 8
        passed: true
        comment: Cluster markers are well-sized and visible; individual background
          points are appropriately semi-transparent but some clusters with small counts
          have very small markers
      - id: VQ-04
        name: Color Accessibility
        score: 4
        max: 5
        passed: true
        comment: Blue/Green/Yellow palette is generally colorblind-friendly, though
          green and yellow could be closer in luminance than ideal
      - id: VQ-05
        name: Layout Balance
        score: 5
        max: 5
        passed: true
        comment: Good use of canvas space, plot fills appropriate area with balanced
          margins
      - id: VQ-06
        name: Axis Labels
        score: 1
        max: 2
        passed: false
        comment: Labels say Longitude and Latitude without units (degrees)
      - id: VQ-07
        name: Grid & Legend
        score: 1
        max: 2
        passed: false
        comment: Grid uses solid lines instead of dashed; legend is well-placed with
          good styling
    spec_compliance:
      score: 21
      max: 25
      items:
      - id: SC-01
        name: Plot Type
        score: 8
        max: 8
        passed: true
        comment: Correct clustered marker map visualization
      - id: SC-02
        name: Data Mapping
        score: 5
        max: 5
        passed: true
        comment: Lat/Lon correctly mapped to Y/X axes
      - id: SC-03
        name: Required Features
        score: 3
        max: 5
        passed: false
        comment: 'Missing: basemap with geographic context (only has styled grid),
          no click-to-zoom interactivity, no hover tooltips'
      - id: SC-04
        name: Data Range
        score: 3
        max: 3
        passed: true
        comment: Axes show all data points appropriately
      - id: SC-05
        name: Legend Accuracy
        score: 2
        max: 2
        passed: true
        comment: Legend correctly shows the three store categories
      - id: SC-06
        name: Title Format
        score: 2
        max: 2
        passed: true
        comment: 'Correct format: map-marker-clustered 路 matplotlib 路 pyplots.ai'
    data_quality:
      score: 18
      max: 20
      items:
      - id: DQ-01
        name: Feature Coverage
        score: 7
        max: 8
        passed: true
        comment: Shows clustering well with count labels, dominant category coloring,
          and multiple cluster sizes; static so no zoom transitions
      - id: DQ-02
        name: Realistic Context
        score: 7
        max: 7
        passed: true
        comment: Store locator scenario across European cities is realistic and neutral
      - id: DQ-03
        name: Appropriate Scale
        score: 4
        max: 5
        passed: true
        comment: Coordinates are realistic for Europe; 280 locations is within spec
          range
    code_quality:
      score: 9
      max: 10
      items:
      - id: CQ-01
        name: KISS Structure
        score: 3
        max: 3
        passed: true
        comment: 'Clean linear structure: imports, data generation, clustering, plot,
          save'
      - id: CQ-02
        name: Reproducibility
        score: 3
        max: 3
        passed: true
        comment: Uses np.random.seed(42)
      - id: CQ-03
        name: Clean Imports
        score: 2
        max: 2
        passed: true
        comment: Only matplotlib.pyplot and numpy imported
      - id: CQ-04
        name: No Deprecated API
        score: 1
        max: 1
        passed: true
        comment: No deprecated functions used
      - id: CQ-05
        name: Output Correct
        score: 1
        max: 1
        passed: true
        comment: Saves to plot.png correctly
    library_features:
      score: 2
      max: 5
      items:
      - id: LF-01
        name: Distinctive Features
        score: 2
        max: 5
        passed: false
        comment: Uses basic matplotlib scatter and annotate; doesn't leverage advanced
          features like Basemap/Cartopy for actual geographic context
  verdict: REJECTED
impl_tags:
  dependencies: []
  techniques:
  - annotations
  - custom-legend
  patterns:
  - data-generation
  - iteration-over-groups
  dataprep:
  - binning
  styling:
  - alpha-blending
  - edge-highlighting
  - grid-styling
