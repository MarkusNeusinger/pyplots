library: plotnine
specification_id: kagi-basic
created: '2026-01-08T21:54:48Z'
updated: '2026-01-08T22:06:12Z'
generated_by: claude-opus-4-5-20251101
workflow_run: 20832946951
issue: 3341
python_version: 3.13.11
library_version: 0.15.2
preview_url: https://storage.googleapis.com/pyplots-images/plots/kagi-basic/plotnine/plot.png
preview_thumb: https://storage.googleapis.com/pyplots-images/plots/kagi-basic/plotnine/plot_thumb.png
preview_html: null
quality_score: 91
review:
  strengths:
  - Correct Kagi chart algorithm with proper reversal threshold implementation
  - Excellent use of plotnine grammar of graphics with geom_segment for both vertical
    and horizontal lines
  - Clear visual distinction between yang (thick green) and yin (thin red) using both
    color and size scales
  - Proper title format and descriptive axis labels with units
  - Clean theme_minimal() with appropriate font sizing for high-resolution output
  weaknesses:
  - Legend shows redundant entries for both color and size scales (both labeled Trend)
    - could combine or hide one
  - Yin (bearish) lines at size=1.0 are quite thin compared to yang at size=3.5, could
    be slightly more balanced
  image_description: 'The plot displays a Kagi chart with price movements over approximately
    21 Kagi line indices. The chart shows vertical segments in two distinct styles:
    thick green lines (yang/bullish) and thin red lines (yin/bearish). Price ranges
    from approximately $80 to $117 on the Y-axis. Horizontal shoulder/waist segments
    connect vertical lines at trend reversal points. The chart demonstrates multiple
    trend reversals with the overall price action showing volatility around $80-$115.
    The legend on the right clearly identifies "Yang (Bullish)" in green and "Yin
    (Bearish)" in red. Title follows the correct format "kagi-basic 路 plotnine 路 pyplots.ai".
    The layout uses a minimal theme with subtle grid lines.'
  criteria_checklist:
    visual_quality:
      score: 37
      max: 40
      items:
      - id: VQ-01
        name: Text Legibility
        score: 10
        max: 10
        passed: true
        comment: Title at 24pt, axis titles at 20pt, tick labels at 16pt, all perfectly
          readable
      - id: VQ-02
        name: No Overlap
        score: 8
        max: 8
        passed: true
        comment: No overlapping text elements
      - id: VQ-03
        name: Element Visibility
        score: 7
        max: 8
        passed: true
        comment: Line thicknesses clearly differentiate yang vs yin, though yin lines
          could be slightly thicker
      - id: VQ-04
        name: Color Accessibility
        score: 5
        max: 5
        passed: true
        comment: Green and red with thickness as secondary encoding provides accessibility
      - id: VQ-05
        name: Layout Balance
        score: 5
        max: 5
        passed: true
        comment: Good use of canvas space, plot fills appropriate area
      - id: VQ-06
        name: Axis Labels
        score: 2
        max: 2
        passed: true
        comment: Price ($) with units, Kagi Line Index descriptive
      - id: VQ-07
        name: Grid & Legend
        score: 0
        max: 2
        passed: false
        comment: Legend shows duplicate entries for color and size scales which is
          redundant
    spec_compliance:
      score: 25
      max: 25
      items:
      - id: SC-01
        name: Plot Type
        score: 8
        max: 8
        passed: true
        comment: Correct Kagi chart with vertical lines and horizontal shoulders/waists
      - id: SC-02
        name: Data Mapping
        score: 5
        max: 5
        passed: true
        comment: X-axis shows line index (time-independent), Y-axis shows price
      - id: SC-03
        name: Required Features
        score: 5
        max: 5
        passed: true
        comment: Yang (thick/green) and yin (thin/red) lines, reversal threshold,
          horizontal connectors
      - id: SC-04
        name: Data Range
        score: 3
        max: 3
        passed: true
        comment: All data visible within axes
      - id: SC-05
        name: Legend Accuracy
        score: 2
        max: 2
        passed: true
        comment: Legend correctly labels Yang (Bullish) and Yin (Bearish)
      - id: SC-06
        name: Title Format
        score: 2
        max: 2
        passed: true
        comment: Correct format kagi-basic 路 plotnine 路 pyplots.ai
    data_quality:
      score: 17
      max: 20
      items:
      - id: DQ-01
        name: Feature Coverage
        score: 6
        max: 8
        passed: true
        comment: Shows both yang and yin segments with reversals, though data could
          show more dramatic swings
      - id: DQ-02
        name: Realistic Context
        score: 7
        max: 7
        passed: true
        comment: Stock price simulation with random walk is realistic
      - id: DQ-03
        name: Appropriate Scale
        score: 4
        max: 5
        passed: true
        comment: Price range $80-$117 plausible for a stock, 250 days reasonable
    code_quality:
      score: 9
      max: 10
      items:
      - id: CQ-01
        name: KISS Structure
        score: 2
        max: 3
        passed: true
        comment: Uses a function for Kagi algorithm which is acceptable given complexity,
          but deviates from pure KISS
      - id: CQ-02
        name: Reproducibility
        score: 3
        max: 3
        passed: true
        comment: Uses np.random.seed(42)
      - id: CQ-03
        name: Clean Imports
        score: 2
        max: 2
        passed: true
        comment: All imports are used
      - id: CQ-04
        name: No Deprecated API
        score: 1
        max: 1
        passed: true
        comment: Uses current plotnine API
      - id: CQ-05
        name: Output Correct
        score: 1
        max: 1
        passed: true
        comment: Saves as plot.png
    library_features:
      score: 3
      max: 5
      items:
      - id: LF-01
        name: Distinctive Features
        score: 3
        max: 5
        passed: true
        comment: Uses plotnine grammar of graphics (ggplot, aes, geom_segment, scale_*_manual,
          theme)
  verdict: APPROVED
impl_tags:
  dependencies: []
  techniques:
  - layer-composition
  patterns:
  - data-generation
  - iteration-over-groups
  dataprep:
  - time-series
  styling:
  - grid-styling
