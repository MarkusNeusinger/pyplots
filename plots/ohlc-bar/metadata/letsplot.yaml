library: letsplot
specification_id: ohlc-bar
created: '2026-01-08T16:12:39Z'
updated: '2026-01-08T16:17:36Z'
generated_by: claude-opus-4-5-20251101
workflow_run: 20823217439
issue: 3293
python_version: 3.13.11
library_version: 4.8.2
preview_url: https://storage.googleapis.com/pyplots-images/plots/ohlc-bar/letsplot/plot.png
preview_thumb: https://storage.googleapis.com/pyplots-images/plots/ohlc-bar/letsplot/plot_thumb.png
preview_html: https://storage.googleapis.com/pyplots-images/plots/ohlc-bar/letsplot/plot.html
quality_score: 91
review:
  strengths:
  - Excellent use of geom_segment to construct OHLC bars from three separate segments
    (vertical line, left tick, right tick)
  - Clean implementation of color-coding for up vs down bars using direction column
  - Proper datetime axis formatting with scale_x_datetime
  - Appropriate use of lets-plot ggplot2 grammar with theme_minimal
  - Both PNG and HTML output for static and interactive viewing
  weaknesses:
  - Blue/red color scheme could be improved for colorblind accessibility (consider
    blue/orange)
  - Grid styling could be more subtle with explicit alpha setting
  image_description: The OHLC bar chart displays 50 trading days of stock price data
    from June 3 to August 12, 2024. Each bar consists of a thin vertical line showing
    the high-low range, with a left horizontal tick for open price and a right horizontal
    tick for close price. Up days (close ≥ open) are colored blue (#306998) and down
    days (close < open) are colored red (#DC2626). The price range spans approximately
    $136-$162 USD with visible volatility showing a general downtrend from ~$150 to
    ~$137 in early July, followed by a recovery to ~$158 by August. The chart has
    a clean minimal theme with white background, subtle gridlines, date-formatted
    x-axis showing month/day labels, and a legend on the right indicating 'Direction'
    with 'up' (blue) and 'down' (red) entries. The title correctly follows the format
    'ohlc-bar · letsplot · pyplots.ai'.
  criteria_checklist:
    visual_quality:
      score: 37
      max: 40
      items:
      - id: VQ-01
        name: Text Legibility
        score: 10
        max: 10
        passed: true
        comment: Title at ~24pt, axis labels at ~20pt, tick text at ~16pt, all perfectly
          readable
      - id: VQ-02
        name: No Overlap
        score: 8
        max: 8
        passed: true
        comment: No overlapping text elements; date labels are well-spaced
      - id: VQ-03
        name: Element Visibility
        score: 8
        max: 8
        passed: true
        comment: OHLC bars are clearly visible with appropriate thickness
      - id: VQ-04
        name: Color Accessibility
        score: 3
        max: 5
        passed: false
        comment: Blue/red scheme is common for finance but not ideal for colorblind
          users
      - id: VQ-05
        name: Layout Balance
        score: 5
        max: 5
        passed: true
        comment: Plot fills canvas well with balanced margins
      - id: VQ-06
        name: Axis Labels
        score: 2
        max: 2
        passed: true
        comment: Price (USD) with unit, Date is descriptive
      - id: VQ-07
        name: Grid & Legend
        score: 1
        max: 2
        passed: false
        comment: Grid uses default styling without explicit alpha
    spec_compliance:
      score: 25
      max: 25
      items:
      - id: SC-01
        name: Plot Type
        score: 8
        max: 8
        passed: true
        comment: Correct OHLC bar chart with vertical high-low lines and left/right
          ticks
      - id: SC-02
        name: Data Mapping
        score: 5
        max: 5
        passed: true
        comment: Date on X-axis, price on Y-axis, OHLC correctly mapped
      - id: SC-03
        name: Required Features
        score: 5
        max: 5
        passed: true
        comment: 'All spec features present: thin lines, left/right ticks, color differentiation'
      - id: SC-04
        name: Data Range
        score: 3
        max: 3
        passed: true
        comment: All data visible, Y-axis auto-scaled appropriately
      - id: SC-05
        name: Legend Accuracy
        score: 2
        max: 2
        passed: true
        comment: Legend correctly shows up (blue) and down (red)
      - id: SC-06
        name: Title Format
        score: 2
        max: 2
        passed: true
        comment: 'Correct format: ohlc-bar · letsplot · pyplots.ai'
    data_quality:
      score: 19
      max: 20
      items:
      - id: DQ-01
        name: Feature Coverage
        score: 8
        max: 8
        passed: true
        comment: Shows both bullish and bearish bars, various volatility levels, trending
          and recovery periods
      - id: DQ-02
        name: Realistic Context
        score: 7
        max: 7
        passed: true
        comment: Realistic stock price simulation with random walk, plausible volatility
      - id: DQ-03
        name: Appropriate Scale
        score: 4
        max: 5
        passed: false
        comment: Stock price starting at $150 is realistic; minor deduction for volatility
          variety
    code_quality:
      score: 10
      max: 10
      items:
      - id: CQ-01
        name: KISS Structure
        score: 3
        max: 3
        passed: true
        comment: Clean imports → data generation → plot construction → save pattern
      - id: CQ-02
        name: Reproducibility
        score: 3
        max: 3
        passed: true
        comment: Uses np.random.seed(42)
      - id: CQ-03
        name: Clean Imports
        score: 2
        max: 2
        passed: true
        comment: All imports are used, no unused imports
      - id: CQ-04
        name: No Deprecated API
        score: 1
        max: 1
        passed: true
        comment: Uses current lets-plot API
      - id: CQ-05
        name: Output Correct
        score: 1
        max: 1
        passed: true
        comment: Saves as plot.png and plot.html
    library_features:
      score: 5
      max: 5
      items:
      - id: LF-01
        name: Distinctive Features
        score: 5
        max: 5
        passed: true
        comment: Uses ggplot2 grammar with geom_segment, scale_x_datetime, scale_color_manual,
          theme_minimal, ggsave with scale
  verdict: APPROVED
impl_tags:
  dependencies: []
  techniques:
  - layer-composition
  - html-export
  patterns:
  - data-generation
  - iteration-over-groups
  dataprep:
  - time-series
  styling: []
