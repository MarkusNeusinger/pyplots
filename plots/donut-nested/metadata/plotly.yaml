library: plotly
specification_id: donut-nested
created: '2025-12-25T20:04:49Z'
updated: '2025-12-25T20:06:56Z'
generated_by: claude-opus-4-5-20251101
workflow_run: 20510190008
issue: 2015
python_version: 3.13.11
library_version: 6.5.0
preview_url: https://storage.googleapis.com/pyplots-images/plots/donut-nested/plotly/plot.png
preview_thumb: https://storage.googleapis.com/pyplots-images/plots/donut-nested/plotly/plot_thumb.png
preview_html: https://storage.googleapis.com/pyplots-images/plots/donut-nested/plotly/plot.html
quality_score: 91
impl_tags:
  dependencies: []
  techniques:
  - hover-tooltips
  - html-export
  patterns:
  - data-generation
  dataprep: []
  styling: []
review:
  strengths:
  - 'Excellent use of color families: each department has its own hue with lighter
    shades for subcategories, making hierarchy immediately apparent'
  - Clean nested ring implementation using domain positioning and hole parameters
  - Professional center annotation showing total budget value
  - Good hover templates with currency formatting ($%{value}M)
  - White separator lines between segments enhance readability
  - Proper sort=False to maintain data alignment between rings
  weaknesses:
  - Inner ring labels show only percentages, not department names (though visible
    in legend)
  - Child segment alignment with parent boundaries could be visually verified more
    explicitly
  - Could benefit from pull effect or hover highlighting to emphasize interactivity
  image_description: 'The plot displays a nested donut chart showing company budget
    allocation. The chart consists of two concentric rings on a white background.
    The inner ring shows four department categories (Engineering, Marketing, Sales,
    Operations) with their percentage values displayed in white text. The outer ring
    displays 13 expense subcategories with labels placed outside the ring. Colors
    follow a family scheme: Engineering uses blues (deep navy to light blue), Marketing
    uses yellows/golds, Sales uses teals/aquas, and Operations uses reds/corals. The
    center of the donut contains bold text "$100M Total Budget". A legend on the right
    side lists all categories. The title "Company Budget Allocation · donut-nested
    · plotly · pyplots.ai" appears at the top.'
  criteria_checklist:
    visual_quality:
      score: 36
      max: 40
      items:
      - id: VQ-01
        name: Text Legibility
        score: 9
        max: 10
        passed: true
        comment: Title at 28pt, labels at 16pt, all readable. Inner ring percentages
          clear at 20pt white text. Slightly under ideal for outer labels.
      - id: VQ-02
        name: No Overlap
        score: 8
        max: 8
        passed: true
        comment: No overlapping text, outer labels well spaced using outside positioning
      - id: VQ-03
        name: Element Visibility
        score: 7
        max: 8
        passed: true
        comment: Both rings clearly visible with good proportions, white separator
          lines between segments work well
      - id: VQ-04
        name: Color Accessibility
        score: 5
        max: 5
        passed: true
        comment: 'Excellent color family approach: blues, yellows, teals, reds are
          distinguishable even with color vision deficiency'
      - id: VQ-05
        name: Layout Balance
        score: 5
        max: 5
        passed: true
        comment: Good canvas utilization, chart is well-centered with legend appropriately
          placed on the right
      - id: VQ-07
        name: Grid & Legend
        score: 2
        max: 2
        passed: true
        comment: Legend well-placed with clear labels, no grid needed
    spec_compliance:
      score: 25
      max: 25
      items:
      - id: SC-01
        name: Plot Type
        score: 8
        max: 8
        passed: true
        comment: Correct nested donut chart with two concentric rings
      - id: SC-02
        name: Data Mapping
        score: 5
        max: 5
        passed: true
        comment: Inner ring shows departments (parent), outer shows expense categories
          (children)
      - id: SC-03
        name: Required Features
        score: 5
        max: 5
        passed: true
        comment: Color families per parent, center annotation, proper hierarchy
      - id: SC-04
        name: Data Range
        score: 3
        max: 3
        passed: true
        comment: All segments visible, values aggregate correctly (45+25+18+12=100M)
      - id: SC-05
        name: Legend Accuracy
        score: 2
        max: 2
        passed: true
        comment: All categories properly labeled in legend
      - id: SC-06
        name: Title Format
        score: 2
        max: 2
        passed: true
        comment: Follows "{topic} · {spec-id} · {library} · pyplots.ai" format
    data_quality:
      score: 18
      max: 20
      items:
      - id: DQ-01
        name: Feature Coverage
        score: 7
        max: 8
        passed: true
        comment: Shows hierarchical structure well; 4 parents with 3-4 children each.
          Could show more varied segment sizes.
      - id: DQ-02
        name: Realistic Context
        score: 7
        max: 7
        passed: true
        comment: Company budget allocation is a perfect real-world scenario for nested
          donuts
      - id: DQ-03
        name: Appropriate Scale
        score: 4
        max: 5
        passed: true
        comment: $100M total with realistic department splits. Values are sensible
          though somewhat generic.
    code_quality:
      score: 9
      max: 10
      items:
      - id: CQ-01
        name: KISS Structure
        score: 3
        max: 3
        passed: true
        comment: 'Clean linear structure: imports → data → traces → layout → save'
      - id: CQ-02
        name: Reproducibility
        score: 3
        max: 3
        passed: true
        comment: Deterministic data, no random elements
      - id: CQ-03
        name: Clean Imports
        score: 2
        max: 2
        passed: true
        comment: Only plotly.graph_objects imported
      - id: CQ-04
        name: No Deprecated API
        score: 1
        max: 1
        passed: true
        comment: Uses current Plotly API
      - id: CQ-05
        name: Output Correct
        score: 0
        max: 1
        passed: true
        comment: Saves as plot.png but also generates plot.html (correct for Plotly)
    library_features:
      score: 3
      max: 5
      items:
      - id: LF-01
        name: Uses Plotly features
        score: 3
        max: 5
        passed: true
        comment: Uses go.Pie with domain positioning for nesting, custom hover templates.
          Could leverage more interactive features or annotations.
  verdict: APPROVED
