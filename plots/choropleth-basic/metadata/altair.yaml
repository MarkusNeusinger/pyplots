library: altair
specification_id: choropleth-basic
created: '2025-12-31T13:54:48Z'
updated: '2025-12-31T14:05:55Z'
generated_by: claude-opus-4-5-20251101
workflow_run: 20620324848
issue: 3069
python_version: 3.13.11
library_version: 6.0.0
preview_url: https://storage.googleapis.com/pyplots-images/plots/choropleth-basic/altair/plot.png
preview_thumb: https://storage.googleapis.com/pyplots-images/plots/choropleth-basic/altair/plot_thumb.png
preview_html: https://storage.googleapis.com/pyplots-images/plots/choropleth-basic/altair/plot.html
quality_score: 91
impl_tags:
  dependencies:
  - vega-datasets
  techniques:
  - colorbar
  - hover-tooltips
  - html-export
  patterns:
  - dataset-loading
  dataprep: []
  styling: []
review:
  strengths:
  - Excellent use of Altair's declarative grammar for geographic visualization with
    topo_feature and transform_lookup
  - Clean, readable code following KISS principle with proper structure
  - Uses real-world vega_datasets unemployment data providing authentic, meaningful
    visualization
  - Well-configured legend with appropriate font sizes and gradient dimensions
  - Appropriate Albers USA projection for US county-level maps
  - Good color scheme (blues) that is colorblind-accessible and appropriate for sequential
    data
  weaknesses:
  - Legend labels show decimal values (0.04, 0.08) which represent percentages but
    could be clearer as 4%, 8% for better readability
  - Missing explicit handling for missing data counties (spec suggests showing as
    gray)
  - Could leverage Altair's interactive features (.interactive() for zoom/pan or selection
    highlights) to better showcase library strengths
  image_description: The plot displays a choropleth map of the contiguous United States
    showing county-level unemployment rates. The map uses a sequential blue color
    scheme ranging from light blue (low unemployment ~0%) to dark blue (high unemployment
    ~24%). The title reads "US County Unemployment · choropleth-basic · altair · pyplots.ai"
    at the top. A vertical color legend on the right side labeled "Unemployment (%)"
    shows the scale from 0.00 to 0.24. County boundaries are clearly visible with
    thin white strokes. Notable regional patterns include higher unemployment (darker
    blue) in parts of the Southwest (Arizona), Southern Texas, the Mississippi Delta
    region, and Appalachia, with generally lower rates in the Upper Midwest and Plains
    states. Alaska and Hawaii are included in the projection (bottom left). The map
    fills most of the canvas with well-balanced whitespace.
  criteria_checklist:
    visual_quality:
      score: 37
      max: 40
      items:
      - id: VQ-01
        name: Text Legibility
        score: 10
        max: 10
        passed: true
        comment: Title at 28pt is clear, legend title at 20pt and labels at 16pt are
          all readable
      - id: VQ-02
        name: No Overlap
        score: 8
        max: 8
        passed: true
        comment: No overlapping text elements
      - id: VQ-03
        name: Element Visibility
        score: 8
        max: 8
        passed: true
        comment: Counties are well-sized, boundaries clearly visible with 0.3px white
          stroke
      - id: VQ-04
        name: Color Accessibility
        score: 5
        max: 5
        passed: true
        comment: Blues sequential palette is colorblind-safe
      - id: VQ-05
        name: Layout Balance
        score: 4
        max: 5
        passed: true
        comment: 'Good canvas utilization, map fills ~70% of space, minor: legend
          could be slightly closer'
      - id: VQ-06
        name: Axis Labels
        score: 0
        max: 2
        passed: true
        comment: N/A for choropleth maps (no axes), but legend title is descriptive
      - id: VQ-07
        name: Grid & Legend
        score: 2
        max: 2
        passed: true
        comment: Legend well-placed, appropriate gradient length
    spec_compliance:
      score: 24
      max: 25
      items:
      - id: SC-01
        name: Plot Type
        score: 8
        max: 8
        passed: true
        comment: Correct choropleth map type
      - id: SC-02
        name: Data Mapping
        score: 5
        max: 5
        passed: true
        comment: Unemployment rate correctly mapped to color
      - id: SC-03
        name: Required Features
        score: 4
        max: 5
        passed: true
        comment: 'Has color legend with value range, appropriate projection (Albers
          USA), clear boundaries, tooltips. Minor: missing explicit handling of missing
          data (shows as light/no fill)'
      - id: SC-04
        name: Data Range
        score: 3
        max: 3
        passed: true
        comment: All data visible within 0-25% range
      - id: SC-05
        name: Legend Accuracy
        score: 2
        max: 2
        passed: true
        comment: Legend correctly shows "Unemployment (%)"
      - id: SC-06
        name: Title Format
        score: 2
        max: 2
        passed: true
        comment: Correctly uses "{context} · {spec-id} · {library} · pyplots.ai"
    data_quality:
      score: 18
      max: 20
      items:
      - id: DQ-01
        name: Feature Coverage
        score: 7
        max: 8
        passed: true
        comment: Shows regional variation well with clear patterns, shows both high
          and low unemployment areas
      - id: DQ-02
        name: Realistic Context
        score: 7
        max: 7
        passed: true
        comment: Uses real US unemployment data from vega_datasets, neutral topic
      - id: DQ-03
        name: Appropriate Scale
        score: 4
        max: 5
        passed: true
        comment: Values 0-25% are realistic for unemployment rates, though domain
          set to 0.25 while legend shows decimal (0.24)
    code_quality:
      score: 9
      max: 10
      items:
      - id: CQ-01
        name: KISS Structure
        score: 3
        max: 3
        passed: true
        comment: Simple import → data → plot → save structure, no functions/classes
      - id: CQ-02
        name: Reproducibility
        score: 3
        max: 3
        passed: true
        comment: Uses deterministic vega_datasets data
      - id: CQ-03
        name: Clean Imports
        score: 2
        max: 2
        passed: true
        comment: Only altair and vega_datasets imported, both used
      - id: CQ-04
        name: No Deprecated API
        score: 1
        max: 1
        passed: true
        comment: Uses current Altair API
      - id: CQ-05
        name: Output Correct
        score: 0
        max: 1
        passed: false
        comment: Saves to 'plot.png' and 'plot.html'
    library_features:
      score: 3
      max: 5
      items:
      - id: LF-01
        name: Uses distinctive Altair features
        score: 3
        max: 5
        passed: true
        comment: Uses topo_feature for geographic data, transform_lookup for joining
          data, declarative encoding, tooltips. Good but could add interactivity (`.interactive()`)
          or selection features.
  verdict: APPROVED
