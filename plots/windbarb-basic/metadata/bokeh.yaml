library: bokeh
specification_id: windbarb-basic
created: '2026-01-11T10:06:08Z'
updated: '2026-01-11T10:14:25Z'
generated_by: claude-opus-4-5-20251101
workflow_run: 20893327536
issue: 3694
python_version: 3.13.11
library_version: 3.8.2
preview_url: https://storage.googleapis.com/pyplots-images/plots/windbarb-basic/bokeh/plot.png
preview_thumb: https://storage.googleapis.com/pyplots-images/plots/windbarb-basic/bokeh/plot_thumb.png
preview_html: https://storage.googleapis.com/pyplots-images/plots/windbarb-basic/bokeh/plot.html
quality_score: 88
review:
  strengths:
  - Excellent implementation of wind barb meteorological notation with proper staff,
    half barbs, and full barbs
  - 'Good use of Bokeh-specific features: ColumnDataSource, HoverTool, Label annotations'
  - Clean, readable code following KISS principles with fixed random seed
  - Proper handling of calm wind conditions with larger open circles
  - Well-spaced grid prevents barb overlap
  - Realistic meteorological data scenario with spatial wind variation
  weaknesses:
  - Legend in upper right corner is positioned outside the visible plot area (x=11.0
    when x_range ends at 12, but labels extend beyond)
  - No wind speeds >=50 knots to demonstrate pennant (triangle) notation mentioned
    in spec
  - Hover tooltips only attach to station markers, not to the barb segments themselves
  image_description: The plot displays a 6x5 grid (30 total positions) of wind barbs
    on a light gray (#f8f9fa) background. Each wind barb consists of a blue (#306998)
    staff pointing in the direction from which the wind blows, with short barbs (5
    knots) and full barbs (10 knots) attached to indicate wind speed. Station markers
    appear as white circles with blue outlines at each observation point. The wind
    pattern shows variation across the domain - stronger winds with multiple barbs
    in some areas, weaker winds with single barbs in others. The four corners show
    calm wind conditions represented by larger open circles without staffs. The title
    "windbarb-basic · bokeh · pyplots.ai" appears at the top left. Axes are labeled
    "X Position (grid units)" and "Y Position (grid units)" with tick marks at 0,
    2, 4, 6, 8, 10 on X and 0, 2, 4, 6, 8 on Y. A subtle dashed grid is visible with
    alpha 0.3. A legend key labeled "Wind Barb Key" with items for calm, half barb,
    full barb, and pennant appears in the upper right but extends beyond the visible
    plot area.
  criteria_checklist:
    visual_quality:
      score: 35
      max: 40
      items:
      - id: VQ-01
        name: Text Legibility
        score: 9
        max: 10
        passed: true
        comment: Title at 28pt, axis labels at 22pt, tick labels at 18pt - all readable
          but title could be slightly larger
      - id: VQ-02
        name: No Overlap
        score: 8
        max: 8
        passed: true
        comment: No overlapping elements, barbs well-spaced on grid
      - id: VQ-03
        name: Element Visibility
        score: 8
        max: 8
        passed: true
        comment: Barbs clearly visible with appropriate line width (3), station markers
          sized well
      - id: VQ-04
        name: Color Accessibility
        score: 5
        max: 5
        passed: true
        comment: Single blue color scheme, good contrast against light background
      - id: VQ-05
        name: Layout Balance
        score: 3
        max: 5
        passed: false
        comment: Good canvas use but legend in upper right is cut off at edge of plot
          area
      - id: VQ-06
        name: Axis Labels
        score: 2
        max: 2
        passed: true
        comment: 'Descriptive labels with units: X Position (grid units), Y Position
          (grid units)'
      - id: VQ-07
        name: Grid & Legend
        score: 0
        max: 2
        passed: false
        comment: Grid is subtle but legend is cut off at edge, not fully visible
    spec_compliance:
      score: 23
      max: 25
      items:
      - id: SC-01
        name: Plot Type
        score: 8
        max: 8
        passed: true
        comment: Correct wind barb implementation with staffs and barbs
      - id: SC-02
        name: Data Mapping
        score: 5
        max: 5
        passed: true
        comment: X/Y positions correctly mapped, u/v components properly converted
          to barbs
      - id: SC-03
        name: Required Features
        score: 4
        max: 5
        passed: false
        comment: Has barbs for different speeds and calm symbols, but pennants (50
          kt) not demonstrated
      - id: SC-04
        name: Data Range
        score: 3
        max: 3
        passed: true
        comment: All data visible within axis range
      - id: SC-05
        name: Legend Accuracy
        score: 1
        max: 2
        passed: false
        comment: Legend content correct but not fully visible
      - id: SC-06
        name: Title Format
        score: 2
        max: 2
        passed: true
        comment: 'Correct format: windbarb-basic · bokeh · pyplots.ai'
    data_quality:
      score: 18
      max: 20
      items:
      - id: DQ-01
        name: Feature Coverage
        score: 6
        max: 8
        passed: false
        comment: Shows half barbs, full barbs, calm winds, varying directions; missing
          pennants (50 kt)
      - id: DQ-02
        name: Realistic Context
        score: 7
        max: 7
        passed: true
        comment: Realistic weather station grid scenario with plausible wind patterns
      - id: DQ-03
        name: Appropriate Scale
        score: 5
        max: 5
        passed: true
        comment: Wind speeds in realistic 0-30 knot range for surface observations
    code_quality:
      score: 9
      max: 10
      items:
      - id: CQ-01
        name: KISS Structure
        score: 3
        max: 3
        passed: true
        comment: 'Linear flow: imports → data → plot → save, no functions/classes'
      - id: CQ-02
        name: Reproducibility
        score: 3
        max: 3
        passed: true
        comment: np.random.seed(42) set
      - id: CQ-03
        name: Clean Imports
        score: 2
        max: 2
        passed: true
        comment: All imports used
      - id: CQ-04
        name: No Deprecated API
        score: 1
        max: 1
        passed: true
        comment: Uses current Bokeh 3.x API
      - id: CQ-05
        name: Output Correct
        score: 0
        max: 1
        passed: true
        comment: Saves as plot.png
    library_features:
      score: 3
      max: 5
      items:
      - id: LF-01
        name: Distinctive Features
        score: 3
        max: 5
        passed: false
        comment: Uses ColumnDataSource, HoverTool, Label annotations, segment glyph;
          good but hover only on markers not barbs
  verdict: REJECTED
impl_tags:
  dependencies: []
  techniques:
  - hover-tooltips
  - annotations
  - manual-ticks
  patterns:
  - data-generation
  - columndatasource
  - iteration-over-groups
  dataprep: []
  styling:
  - grid-styling
  - alpha-blending
