library: altair
specification_id: raincloud-basic
created: '2025-12-25T08:23:10Z'
updated: '2026-02-14T20:33:14Z'
generated_by: claude-opus-4-6
workflow_run: 20501865366
issue: 0
python_version: '3.14'
library_version: 6.0.0
preview_url: https://storage.googleapis.com/pyplots-images/plots/raincloud-basic/altair/plot.png
preview_thumb: https://storage.googleapis.com/pyplots-images/plots/raincloud-basic/altair/plot_thumb.png
preview_html: https://storage.googleapis.com/pyplots-images/plots/raincloud-basic/altair/plot.html
quality_score: 77
impl_tags:
  dependencies: []
  techniques:
  - layer-composition
  - hover-tooltips
  - html-export
  - custom-legend
  patterns:
  - data-generation
  dataprep:
  - kde
  styling:
  - alpha-blending
  - grid-styling
review:
  strengths:
  - 'Correct raincloud orientation: cloud above, box on baseline, rain below — matching
    the spec visual metaphor'
  - Good use of Altair declarative transforms (transform_density, transform_calculate)
    to build the half-violin
  - Colorblind-safe palette with good perceptual separation between blue, yellow,
    and green
  - Clean data setup with realistic bimodal distribution for Treatment B
  - Interactive HTML export alongside static PNG
  weaknesses:
  - Violin clouds overlap significantly between adjacent categories, reducing visual
    clarity — the density scaling factor (200) is too large relative to the 1-unit
    category spacing
  - Box plots are hard to distinguish from violin fills due to matching colors — consider
    darker outlines or contrasting median color that is more visible
  - No annotations or storytelling elements to highlight the bimodal distribution
    in Treatment B or the treatment effect
  - The hconcat workaround for y-axis labels creates a somewhat disjointed layout
    with potential alignment issues
  - Rain jitter range (-0.35 to -0.12) is too wide, causing rain from upper categories
    to encroach on lower categories violin space
  image_description: 'The plot displays a horizontal raincloud chart titled "raincloud-basic
    · altair · pyplots.ai" with three conditions (Control, Treatment A, Treatment
    B) arranged vertically from bottom to top. Each condition has: a half-violin KDE
    cloud extending upward from the category baseline, a small box plot centered on
    the baseline, and jittered strip points (rain) falling below the baseline. Colors
    are steel blue (#306998) for Control, gold/yellow (#FFD43B) for Treatment A, and
    green (#4CAF50) for Treatment B. The x-axis shows "Reaction Time (ms)" from 200
    to 600. A legend labeled "Condition" is placed in the upper-right corner with
    a white background. Category labels (Control, Treatment A, Treatment B) appear
    on the left side as bold text. The grid is faint with low opacity. The violins
    are quite tall with 0.7 opacity and extend significantly, overlapping into adjacent
    categories'' vertical space. The rain points have moderate transparency (0.6)
    and are scattered below each category line. Box plots with white median lines
    sit on each baseline but are somewhat obscured by the matching violin color. The
    overall layout is horizontal landscape format.'
  criteria_checklist:
    visual_quality:
      score: 24
      max: 30
      items:
      - id: VQ-01
        name: Text Legibility
        score: 7
        max: 8
        passed: true
        comment: 'Font sizes explicitly set: title 28pt, axis labels 18-22pt, legend
          18-20pt, category labels 20pt bold. All readable.'
      - id: VQ-02
        name: No Overlap
        score: 4
        max: 6
        passed: true
        comment: Violin clouds from adjacent categories overlap significantly into
          each other's vertical space, reducing clarity.
      - id: VQ-03
        name: Element Visibility
        score: 5
        max: 6
        passed: true
        comment: Rain points visible and sized well. Box plots somewhat obscured by
          matching violin fill color.
      - id: VQ-04
        name: Color Accessibility
        score: 4
        max: 4
        passed: true
        comment: Blue, yellow, green palette is colorblind-safe.
      - id: VQ-05
        name: Layout & Canvas
        score: 2
        max: 4
        passed: true
        comment: hconcat layout with separate y-label panel creates some wasted space.
          Plot fills canvas reasonably.
      - id: VQ-06
        name: Axis Labels & Title
        score: 2
        max: 2
        passed: true
        comment: X-axis labeled 'Reaction Time (ms)' with units. Y-axis has descriptive
          category names.
    design_excellence:
      score: 9
      max: 20
      items:
      - id: DE-01
        name: Aesthetic Sophistication
        score: 5
        max: 8
        passed: true
        comment: Thoughtful palette starting with Python Blue, custom legend styling,
          configured grid. Above defaults but not publication-exceptional.
      - id: DE-02
        name: Visual Refinement
        score: 2
        max: 6
        passed: false
        comment: Grid opacity reduced, view stroke removed, but inter-category overlap
          detracts from polish. Mostly default Altair aesthetics.
      - id: DE-03
        name: Data Storytelling
        score: 2
        max: 6
        passed: false
        comment: No annotations highlighting bimodal distribution or treatment effects.
          Viewer must discover patterns.
    spec_compliance:
      score: 14
      max: 15
      items:
      - id: SC-01
        name: Plot Type
        score: 5
        max: 5
        passed: true
        comment: Correct raincloud with half-violin, box plot, and jittered strip.
      - id: SC-02
        name: Required Features
        score: 4
        max: 4
        passed: true
        comment: 'All spec features present: horizontal orientation, half-violin above,
          box centered, rain below, transparency, jitter.'
      - id: SC-03
        name: Data Mapping
        score: 3
        max: 3
        passed: true
        comment: Categories on y-axis, values on x-axis as specified.
      - id: SC-04
        name: Title & Legend
        score: 2
        max: 3
        passed: true
        comment: Title format correct. Legend present but somewhat redundant with
          y-axis labels.
    data_quality:
      score: 13
      max: 15
      items:
      - id: DQ-01
        name: Feature Coverage
        score: 5
        max: 6
        passed: true
        comment: Three distinct distributions including bimodal Treatment B. Bimodality
          visible as shoulder but not fully pronounced.
      - id: DQ-02
        name: Realistic Context
        score: 5
        max: 5
        passed: true
        comment: Reaction times for treatment conditions — realistic clinical/psych
          scenario.
      - id: DQ-03
        name: Appropriate Scale
        score: 3
        max: 4
        passed: true
        comment: Realistic reaction time values. Extent slightly wider than needed.
    code_quality:
      score: 9
      max: 10
      items:
      - id: CQ-01
        name: KISS Structure
        score: 3
        max: 3
        passed: true
        comment: 'Flat structure: imports, data, layers, compose, save.'
      - id: CQ-02
        name: Reproducibility
        score: 2
        max: 2
        passed: true
        comment: np.random.seed(42) set.
      - id: CQ-03
        name: Clean Imports
        score: 2
        max: 2
        passed: true
        comment: Only altair, numpy, pandas — all used.
      - id: CQ-04
        name: Code Elegance
        score: 1
        max: 2
        passed: true
        comment: Verbose hconcat workaround, duplicate seed setting. Clever but complex
          transform_calculate.
      - id: CQ-05
        name: Output & API
        score: 1
        max: 1
        passed: true
        comment: Saves plot.png and plot.html.
    library_mastery:
      score: 8
      max: 10
      items:
      - id: LM-01
        name: Idiomatic Usage
        score: 4
        max: 5
        passed: true
        comment: Uses transform_density, transform_calculate, alt.layer, alt.hconcat
          — idiomatic Altair patterns.
      - id: LM-02
        name: Distinctive Features
        score: 4
        max: 5
        passed: true
        comment: Declarative transform_density for KDE, layer composition, interactive(),
          tooltip encoding — distinctive to Vega-Lite/Altair.
  verdict: REJECTED
